{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/@babel/runtime/helpers/interopRequireDefault.js","node_modules/@babel/runtime/helpers/typeof.js","node_modules/lottie-web/build/player/lottie.js","src/_includes/unbundled/blog.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","obj","__esModule","default","_typeof","Symbol","iterator","constructor","prototype","root","factory","navigator","window","svgNS","locationHref","initialDefaultFrame","_useWebWorker","subframeEnabled","idPrefix","expressionsPlugin","isSafari","test","userAgent","cachedColors","bmRnd","bmPow","Math","pow","bmSqrt","sqrt","bmFloor","floor","bmMax","max","bmMin","min","BMMath","propertyNames","len","ProjectInterface","random","abs","val","_typeof2","absArr","createSizedArray","defaultCurveSegments","degToRads","PI","roundCorner","roundValues","flag","round","styleDiv","element","style","position","top","left","display","transformOrigin","webkitTransformOrigin","backfaceVisibility","webkitBackfaceVisibility","transformStyle","webkitTransformStyle","mozTransformStyle","BMEnterFrameEvent","type","currentTime","totalTime","frameMultiplier","this","direction","BMCompleteEvent","BMCompleteLoopEvent","totalLoops","currentLoop","BMSegmentStartEvent","firstFrame","totalFrames","BMDestroyEvent","target","BMRenderFrameErrorEvent","nativeError","BMConfigErrorEvent","BMAnimationConfigErrorEvent","createElementID","_count","HSVtoRGB","h","s","v","g","b","q","RGBtoHSV","d","addSaturationToRGB","color","offset","hsv","addBrightnessToRGB","addHueToRGB","rgbToHex","hex","colorMap","toString","BaseEvent","triggerEvent","eventName","args","_cbs","callbacks","addEventListener","callback","push","removeEventListener","bind","splice","createTypedArray","Uint8ClampedArray","Float32Array","Int16Array","createRegularArray","value","arr","Array","apply","createNS","document","createElementNS","createTag","createElement","DynamicPropertyContainer","addDynamicProperty","prop","dynamicProperties","indexOf","container","_isAnimated","iterateDynamicProperties","_mdf","getValue","initDynamicPropertyContainer","getBlendMode","blendModeEnums","0","2","3","4","5","6","7","8","9","10","11","12","13","14","15","mode","lineCapEnum","lineJoinEnum","Matrix","_cos","cos","_sin","sin","_tan","tan","_rnd","reset","rotate","rotateX","rotateY","rotateZ","skew","skewFromAxis","shear","scale","setTransform","translate","transform","applyToPoint","applyToX","applyToY","applyToZ","applyToPointArray","applyToTriplePoints","applyToPointStringified","toCSS","to2dCSS","clone","cloneFromProps","equals","inversePoints","inversePoint","getInverseMatrix","_t","isIdentity","_identity","_identityCalculated","props","angle","mCos","mSin","sx","sy","ax","ay","sz","j","k","l","m","tx","ty","tz","a2","b2","c2","d2","e2","f2","g2","h2","i2","j2","k2","l2","m2","n2","o2","p2","_p","a1","b1","c1","d1","e1","f1","g1","h1","i1","j1","k1","l1","m1","n1","o1","p1","matr","x","y","z","determinant","inverseMatrix","pt","pts","retPts","pt1","pt2","pt3","p0","p4","p5","p12","p13","cssValue","roundMatrixProperty","pool","math","nodecrypto","global","width","chunks","rngname","startdenom","significance","overflow","mask","ARC4","key","keylen","me","S","count","copy","slice","mixkey","seed","smear","stringseed","charCodeAt","tostring","String","fromCharCode","options","prng","arc4","shortseed","flatten","depth","result","typ","entropy","randomBytes","out","Uint8Array","crypto","msCrypto","getRandomValues","browser","plugins","Date","screen","autoseed","int32","quick","pass","is_math_call","state","BezierFactory","ob","getBezierEasing","nm","str","replace","beziers","bezEasing","BezierEasing","kSplineTableSize","kSampleStepSize","float32ArraySupported","get","mX1","mY1","mX2","mY2","_precomputed","_precompute","calcBezier","_getTForX","_calcSampleValues","_mSampleValues","aX","mSampleValues","intervalStart","currentSample","lastSample","guessForT","initialSlope","getSlope","newtonRaphsonIterate","aGuessT","currentSlope","binarySubdivide","currentX","currentT","aA","aB","A","aA1","aA2","aT","points","lastTime","vendors","requestAnimationFrame","cancelAnimationFrame","extendPrototype","sources","destination","sourcePrototype","attr","Object","hasOwnProperty","getDescriptor","object","getOwnPropertyDescriptor","createProxyFunction","ProxyFunction","bezFunction","pointOnLine2D","x1","y1","x2","y2","x3","y3","det1","getBezierLength","pt4","ptCoord","perc","ptDistance","curveSegments","addedLength","point","lastPoint","lengthData","bezierLengthPool","newElement","percents","lengths","BezierData","segmentLength","PointData","partial","partialLength","buildBezierData","bezierName","storedData","bezierData","getDistancePerc","initPos","lengthPos","lPerc","dir","bezierSegmentPoints","getSegmentsLength","shapeData","segmentsLength","segmentsLengthPool","closed","pathV","pathO","pathI","_length","totalLength","getNewSegment","startPerc","endPerc","t0","t1","u1","u0u0u0","u0","t0u0u0_3","t0t0u0_3","t0t0t0","u0u0u1","t0u0u1_3","t0t0u1_3","t0t0t1","u0u1u1","t0u1u1_3","t0t1u1_3","t0t1t1","u1u1u1","t1u1u1_3","t1t1u1_3","t1t1t1","getPointInSegment","percent","pointOnLine3D","z1","z2","z3","dist1","dist2","dist3","diffDist","currTime","getTime","timeToCall","id","setTimeout","clearTimeout","bez","dataManager","_counterId","processes","workerProxy","onmessage","postMessage","path","workerFn","data","_workerSelf","loadAnimation","onComplete","onError","setupWorker","processId","createProcess","workerInstance","fullPath","location","origin","pathname","loadData","completeAnimation","anim","animation","fn","url","dataFunctionManager","completeLayers","layers","comps","kLen","layerData","completed","tt","td","hasMask","maskProps","masksProperties","jLen","convertPathsToAbsoluteValues","__used","JSON","parse","stringify","findCompLayers","refId","completeShapes","ks","it","shapes","singleShape","checkVersion","minimum","animVersionString","animVersion","split","minimumVersion","checkText","animationData","iterateLayers","assets","textLayer","documentData","checkChars","chars","pathData","paths","__converted","checkPathProperties","checkColors","iterateShapes","checkShapes","cl","completeClosingShapes","moduleOb","completeData","__complete","formatResponse","xhr","contentTypeHeader","getResponseHeader","responseType","response","responseText","assetLoader","load","errorCallback","XMLHttpRequest","err","onreadystatechange","readyState","status","open","error","send","payload","Worker","Blob","blob","URL","createObjectURL","event","process","getFontProperties","fontData","styles","fStyle","fWeight","toLowerCase","weight","FontManager","emptyChar","w","size","combinedCharacters","concat","surrogateModifiers","zeroWidthJoiner","Font","isModifier","firstCharCode","secondCharCode","sum","isZeroWidthJoiner","isCombinedCharacter","_char3","fontPrototype","addChars","found","fFamily","ch","addFonts","defs","isLoaded","fonts","list","tHelper","fontProps","fontArr","_pendingFonts","loadedSelector","sc","shouldLoadFont","loaded","monoCase","setUpNode","sansCase","fPath","fOrigin","querySelectorAll","setAttribute","innerText","appendChild","href","rel","body","src","helper","def","fontSize","textContent","fClass","fontFamily","getContext","font","cache","checkLoadedFonts","getCharData","_char","console","warn","_warned","getFontByName","name","fName","measureText","_char2","fontName","doubleSize","singleSize","index","getComputedTextLength","node","loadedCount","offsetWidth","parent","parentNode","removeChild","now","initTime","checkLoadedFontsBinded","setIsLoadedBinded","setIsLoaded","family","fontVariant","fontStyle","fontWeight","letterSpacing","familyArray","enabledFamilies","join","trimFontOptions","typekitLoaded","PropertyFactory","initFrame","mathAbs","getProp","elem","mult","MultiDimensionalProperty","KeyframedValueProperty","KeyframedMultidimensionalProperty","ValueProperty","effectsSequence","interpolateValue","frameNum","caching","newValue","keyData","nextKeyData","fnc","offsetTime","iterationIndex","propType","pv","lastIndex","keyframes","qy","qz","heading","attitude","keyframeMetadata","keyframesMetadata","nextKeyTime","keyTime","to","ti","ind","__fnct","segmentPerc","distanceInLine","lastFrame","_lastKeyframeIndex","_lastAddedLength","_lastPoint","outX","outY","inX","inY","keyValue","quatStart","quatEnd","endValue","sh","createQuaternion","quat","sinom","scale0","scale1","az","aw","bx","by","bz","bw","cosom","omega","acos","slerp","qx","qw","atan2","asin","bank","undefined","values","c3","s1","s2","s3","getValueAtCurrentTime","comp","renderedFrame","endTime","_caching","renderResult","setVValue","multipliedValue","processEffectsSequence","globalData","frameId","lock","_isFirstFrame","finalValue","kf","addEffect","effectFunction","vel","st","arrLen","TransformPropertyFactory","defaultVector","TransformProperty","applyToMatrix","mat","sk","sa","rz","ry","rx","or","px","py","pz","forceRender","v1","v2","_isDirty","precalculateMatrix","pre","appliedTransformations","autoOriented","frameRate","getValueAtTime","autoOrient","_addDynamicProperty","getTransformProperty","ShapePath","_maxLength","setPathData","setLength","pointPool","doubleArrayLength","setXYAt","pos","setTripleAt","vX","vY","oX","oY","iX","iY","reverse","newPath","vertices","outPoints","inPoints","init","cnt","ShapePropertyFactory","interpolateShape","previousValue","keyPropS","isHold","vertexValue","keyPropE","resetShape","localShapeCollection","shape1","shape2","shapesEqual","shapePool","releaseShapes","addShape","ShapeProperty","shapeCollectionPool","newShapeCollection","KeyframedShapeProperty","cPoint","EllShapePropertyFactory","convertEllToPath","s0","_cw","_v","EllShapeProperty","StarShapePropertyFactory","convertToPath","convertStarToPath","numPts","longFlag","longRad","shortRad","ir","longRound","os","shortRound","is","longPerimSegment","shortPerimSegment","currentAng","roundness","perimSegment","rad","ox","oy","convertPolygonToPath","StarShapeProperty","RectShapePropertyFactory","convertRectToPath","v0","RectShapeProperty","getShapeProp","getConstructorFunction","getKeyframedConstructorFunction","ShapeModifiers","modifiers","registerModifier","getModifier","ShapeModifier","TrimModifier","RoundCornersModifier","PuckerAndBloatModifier","RepeaterModifier","ShapeCollection","DashProperty","renderer","dataProps","dashStr","dashArray","dashoffset","GradientProperty","cLength","_cmdf","_omdf","_collapsable","checkCollapsable","_hasOpacity","initModifierProperties","addShapeToModifier","shape","setAsAnimated","processKeys","sValue","eValue","pathsData","calculateShapeEdges","shapeLength","totalModifierLength","shapeS","segmentOb","segments","shapeSegments","shapeE","releasePathsData","release","processShapes","_s","shapePaths","totalShapeLength","edges","lastShape","newShapesData","addShapes","pop","addPaths","newPaths","addSegment","shapePath","newShape","addSegmentFromArray","shapeSegment","segmentCount","segment","currentLengthData","rd","processPath","currentV","currentI","currentO","closerV","distance","newPosPerc","clonedPath","amount","centerPoint","pathLength","tr","so","eo","pMatrix","rMatrix","sMatrix","tMatrix","matrix","applyTransforms","inv","scaleX","scaleY","elemsData","_currentCopies","_elements","_groups","unshift","resetElements","elements","_processed","cloneElements","newElements","changeGroupRender","renderFlag","_render","items","itemsTransform","cont","hasReloaded","copies","ceil","group","ix","reloadShapes","transformData","elems","op","offsetModulo","roundOffset","pProps","rProps","sProps","iteration","mProps","comparePoints","buildShapeString","pathNodes","_o","_i","shapeString","audioControllerFactory","AudioController","addAudio","audio","audios","pause","resume","setRate","rateValue","createAudio","assetPath","audioFactory","Howl","isPlaying","play","seek","playing","rate","setVolume","setAudioFactory","_volume","_updateVolume","mute","_isMuted","unmute","getVolume","volume","ImagePreloader","canvas","height","ctx","fillStyle","fillRect","proxyImage","ImagePreloaderFactory","loadAssets","cb","imagesLoadedCb","totalFootages","images","createFootageData","totalImages","_createImageData","setAssetsPath","assetsPath","setPath","loadedImages","loadedAssets","loadedFootages","loadedFootagesCount","destroy","getAsset","assetData","img","createImgData","getAssetsPath","crossOrigin","_imageLoaded","createImageData","testImageLoaded","setAttributeNS","_elementHelper","append","imageLoaded","footageLoaded","setCacheType","elementHelper","originalPath","imagePath","_footageLoaded","intervalId","setInterval","getBBox","clearInterval","footageData","featureSupport","maskType","filtersFactory","createFilter","filId","skipCoordinates","fil","createAlphaToLuminanceFilter","feColorMatrix","TextAnimatorProperty","textData","renderType","_hasMaskedPath","_frameId","_textData","_renderType","_elem","_animatorsData","_pathData","_moreOptions","alignment","renderedLetters","lettersChangedFlag","TextAnimatorDataProperty","animatorProps","defaultData","textAnimatorAnimatables","sw","fc","fh","fs","fb","TextSelectorProp","getTextSelectorProp","LetterProps","TextProperty","keysIndex","canResize","minimumFontSize","currentData","ascent","boxWidth","defaultBoxWidth","justifyOffset","lh","lineWidths","ls","of","ps","fillColorAnim","strokeColorAnim","strokeWidthAnim","yOffset","finalSize","finalText","finalLineHeight","copyData","searchProperty","completeTextData","searchProperties","maskManager","getMaskProperty","getMeasures","currentLength","currentPoint","pointInd","segmentInd","prevPoint","animators","matrixHelper","mHelper","renderedLettersCount","letters","pathInfo","tLength","pi","letterValue","offf","xPathPos","yPathPos","elemOpacity","letterSw","letterSc","letterFc","letterO","rot","xPos","yPos","yOff","firstLine","initPathPos","initSegmentInd","initPointInd","currentLine","letterM","letterP","defaultPropsArray","animatorJustifyOffset","animatorFirstCharOffset","justifyOffsetMult","isNewLine","getMult","anIndexes","totalChars","line","extra","an","animatorOffset","add","tanAngle","atan","update","updated","setCurrentData","searchKeyframes","getKeyframeValue","_finalValue","currentValue","currentIndex","textKeys","buildFinalText","text","charCode","charactersArray","shouldCombine","charAt","substr","newLineFlag","charData","fontManager","anchorGrouping","currentSize","currentPos","lineWidth","maxLineWidth","trackingOffset","boxHeight","currentHeight","lastSpaceIndex","currentChar","uncollapsedSpaces","animatorData","letterData","based","indexes","rn","newInd","currentInd","updateDocumentData","newData","dData","recalculate","canResizeFont","_canResize","setMinimumFontSize","_fontValue","TextSelectorPropFactory","_currentTextLength","textProperty","smoothness","easer","ne","xe","finalS","finalE","tot","sm","threshold","newCharsFlag","divisor","poolFactory","initialLength","_create","_release","pooling","double","cloned","shapeCollection","markerParser","_markers","markers","_marker","markerData","time","tm","duration","dr","cm","_","lines","keys","keysCount","trim","parsePayloadLines","__","BaseRenderer","SVGRenderer","animationItem","config","svgElement","ariaLabel","title","titleElement","titleId","description","descElement","descId","maskElement","layerElement","renderConfig","preserveAspectRatio","imagePreserveAspectRatio","contentVisibility","progressiveLoad","hideOnTransparent","viewBoxOnly","viewBoxSize","className","focusable","filterSize","pendingElements","destroyed","rendererType","CanvasRenderer","clearCanvas","context","dpr","wrapper","devicePixelRatio","currentGlobalAlpha","contextData","CVContextData","transformMat","HybridRenderer","threeDElements","camera","supports3d","MaskElement","rect","feMorph","filterID","properties","viewData","solidPath","currentMasks","layerId","maskRef","lastPath","expansor","expan","lastOperator","filterId","lastRadius","createLayerSolidPath","invRect","drawPath","maskedElement","addRenderableComponent","HierarchyElement","FrameElement","TransformElement","RenderableElement","RenderableDOMElement","ProcessedElement","SVGStyleData","level","lvl","hd","pElem","msElem","SVGShapeData","transformers","caches","lStr","SVGTransformData","SVGStrokeStyleData","styleOb","SVGFillStyleData","SVGGradientFillStyleData","initGradientData","SVGGradientStrokeStyleData","ShapeGroupData","prevViewData","gr","checkLayers","num","ip","buildItem","checkPendingElements","createItem","layer","createImage","createComp","createSolid","createNull","createShape","createText","createCamera","createFootage","AudioElement","FootageElement","buildAllItems","includeLayers","newLayers","setProjectInterface","pInterface","projectInterface","initItems","buildElementParenting","parentName","hierarchy","setAsParent","setHierarchy","addPendingElement","searchExtraCompositions","xt","initExpressions","registerComposition","setupGlobalData","animData","fontsContainer","getAssetData","imageLoader","imagePreloader","audioController","fr","compSize","NullElement","SVGShapeElement","SVGTextLottieElement","IImageElement","SVGCompElement","ISolidElement","configAnimation","maskId","updateContainerSize","appendElementInPos","setMatte","checkParenting","renderFrame","currentFrame","prepareFrame","getBaseElement","nextElement","insertBefore","hide","show","CVShapeElement","CVTextElement","CVImageElement","CVCompElement","CVSolidElement","ctxTransform","trProps","cProps","cTr","canvasContext","ctxOpacity","globalAlpha","cO","restore","save","actionFlag","cArrPos","duplicate","saved","savedOp","blendMode","popped","containerStyle","mozTransformOrigin","transformCanvas","isDashed","elementWidth","elementHeight","fillType","elementRel","animationRel","offsetHeight","par","beginPath","closePath","clip","clearRect","newDOMElement","ddd","addTo3dContainer","nextDOMElement","nextLayer","getThreeDContainerByPos","HShapeElement","HTextElement","HCameraElement","HImageElement","HCompElement","HSolidElement","startPos","endPos","perspectiveElem","createThreeDContainer","threeDContainerData","center","webkitTransform","build3dContainers","lastThreeDContainerData","currentContainer","resizerElem","svg","setup","cWidth","cHeight","webkitPerspective","perspective","floatingContainer","isFirstFrame","finalMat","finalTransform","mProp","getMaskelement","pathShapeValue","pathString","initHierarchy","_isParent","prepareProperties","isVisible","initTransform","_matMdf","_opMdf","ao","renderTransform","globalToLocal","transforms","ptNew","initRenderable","isInRange","hidden","isTransparent","renderableComponents","component","removeRenderableComponent","prepareRenderableFrame","checkLayerLimits","checkTransparency","renderRenderable","sourceRectAtTime","getLayerSize","initElement","initBaseData","initRendererElement","createContainerElements","createRenderableComponents","createContent","baseElement","renderElement","renderInnerContent","innerElem","destroyBaseElement","stops","setGradientData","setGradientOpacity","pathElement","stop","gradientId","gfill","gf","cst","opacityId","opFill","lc","lj","ml","ms","ost","SVGElementsRenderer","_identityMatrix","_matrixHelper","createRenderFunction","renderFill","renderGradient","renderGradientStroke","renderStroke","renderPath","renderContentTransform","styleData","itemData","pathStringTransformed","redraw","iterations","lLen","styleElem","ang","hasOpacity","attr2","attr1","cValues","oValues","dist","ShapeTransformManager","sequences","sequenceList","transform_key_count","CVShapeData","transformsManager","styledShapes","styledShape","addTransformSequence","trNodes","BaseElement","SVGBaseElement","IShapeElement","ITextElement","ICompElement","sourceRect","_isPlaying","_canPlay","_currentTime","_placeholder","textSpans","shapesData","stylesList","shapeModifiers","itemsData","processedElements","animatedContents","SVGTintFilter","filter","filterManager","matrixFilter","effectElements","feMerge","feMergeNode","SVGFillFilter","SVGGaussianBlurEffect","feGaussianBlur","SVGStrokeEffect","initialized","SVGTritoneFilter","feComponentTransfer","feFuncR","feFuncG","feFuncB","SVGProLevelsFilter","createFeFunc","feFuncA","feFuncRComposed","feFuncGComposed","feFuncBComposed","SVGDropShadowEffect","feOffset","feFlood","feComposite","originalNodeAdded","sequence","processSequence","processSequences","getNewKey","checkMasks","layerInterface","LayerExpressionInterface","registerMaskInterface","effectsInterface","EffectsExpressionInterface","createEffectsInterface","registerEffectsInterface","compInterface","CompExpressionInterface","shapeInterface","ShapeExpressionInterface","content","textInterface","TextExpressionInterface","setBlendMode","blendModeValue","bm","sr","effectsManager","EffectsManager","getType","matteElement","transformedElement","_sizeChanged","gg","maskGroup","maskGrouper","cp","clipId","cpGroup","layerElementParent","masker","feCTr","feFunc","alphaRect","ln","renderableEffectsManager","SVGEffects","addShapeToModifiers","isShapeInAnimatedModifiers","isAnimatedWithShape","renderModifiers","searchProcessedElement","addProcessedElement","textAnimator","buildNewText","createPathShape","shapeStr","_fontSize","applyTextPropertiesToMatrix","lineNumber","buildColor","colorData","emptyProp","timeRemapped","setElements","getElements","destroyElements","pr","volumeValue","FootageInterface","getFootageData","textContainer","buildTextContents","textArray","textContents","currentTextContent","tSpan","usesGlyphs","cachedSpansLength","tElement","justify","textBox","bbox","renderedLetter","textSpan","initSecondaryElement","identityMatrix","buildExpressionInterface","searchShapes","filterUniqueShapes","tempShapes","areAnimated","setShapesAsAnimated","createStyleElement","elementData","addToAnimatedContents","createGroupElement","createTransformElement","transformProperty","createShapeElement","ownTransformers","setElementStyles","render","currentTransform","modifier","processedPos","ownStyles","ownModifiers","renderShape","animatedContent","colorWhite","opacity","colorBlack","edgeMode","sigma","dimensions","initialize","groupPath","elemChildren","children","childNodes","removeAttribute","pathMasker","getTotalLength","dasharrayValue","units","color2","tableR","tableG","tableB","color1","color3","getTableValue","inputBlack","inputWhite","gamma","outputBlack","outputWhite","colorValue","table","outputDelta","inputDelta","col","_svgMatteSymbols","SVGMatte3Effect","filterElem","ef","filters","CVBaseElement","CVMaskElement","hasMasks","stroke","fill","currentRender","sWidth","fValue","CVEffects","HBaseElement","shapesContainer","currentBBox","textPaths","isMasked","pe","_prevMat","HEffects","findSymbol","replaceInParent","symbolId","nextChild","useElem","setElementAsMask","symbol","newLength","currentSavedOp","set","createElements","globalCompositeOperation","hideElement","showElement","forceRealStack","imgW","imgH","imgRel","canvasRel","widthCrop","heightCrop","drawImage","moveTo","lineTo","bezierCurveTo","transformHelper","dashResetter","preTransforms","co","wi","da","addTransformToStyleList","removeTransformFromStyleList","closeStyles","shouldRender","ownTransforms","_shouldRender","renderShapeTransform","parentTransform","groupTransform","drawLayer","nodes","currentStyle","coOp","strokeStyle","grd","lineCap","lineJoin","miterLimit","setLineDash","lineDashOffset","isMain","renderGradientFill","renderStyledShape","shapeNodes","groupTransformMat","createLinearGradient","createRadialGradient","addColorStop","commands","pathArr","hasFill","hasStroke","lastFill","lastStroke","lastStrokeW","checkBlendMode","tg","matrixValue","transformedElementStyle","addEffects","backgroundColor","_createBaseContainerElements","_renderShapeFrame","shapeCont","getTransformedPoint","calculateShapeBoundingBox","item","boundingBox","vPoint","oPoint","nextIPoint","nextVPoint","checkBounds","getBoundsOfCurve","bounds","shapeBoundingBox","xMax","right","yMax","bottom","tempBoundingBox","p3","b2ac","t2","calculateF","calculateBoundingBox","currentBoxContains","box","shapeStyle","shapeTransform","changed","compW","compH","tParent","tCont","tStyle","tSpanTranslation","innerElemStyle","textColor","strokeWidth","lineHeight","tContStyle","tContTranslation","svgStyle","translation","textPath","svgTransform","margin","Image","imageElem","perspectiveStyle","mTransf","diffVector","mag","lookDir","lookLengthOnXZ","mRotationX","mRotationY","hasMatrixChanged","matValue","animationManager","registeredAnimations","playingAnimationsNum","_stopped","_isFrozen","registerAnimation","params","animItem","AnimationItem","setupAnimation","setParams","setSpeed","setDirection","togglePause","searchAnimations","standalone","div","animElements","getElementsByClassName","lenAnims","getElementsByTagName","resize","goToAndStop","isFrame","freeze","unfreeze","activate","getRegisteredAnimations","animations","removeElement","ev","isPaused","subtractPlayingCount","setData","addPlayingCount","nowTime","elapsedTime","advanceTime","first","currentRawFrame","frameMult","playSpeed","playDirection","playCount","autoplay","loop","animationID","timeCompleted","segmentPos","isSubframeEnabled","_idle","_completedLoop","onSetupError","onSegmentComplete","Expressions","animType","rendererSettings","parseInt","autoloadSegments","initialSegment","lastIndexOf","fileName","trigger","wrapperAttributes","attributes","getNamedItem","prerender","loadNextSegment","shift","segmentPath","loadSegments","imagesLoaded","checkLoaded","preloadImages","updaFrameModifier","waitForFontsLoaded","triggerConfigError","gotoFrame","setSubframe","triggerRenderFrameError","setCurrentRawFrameValue","getMarkerData","markerName","marker","numValue","Number","isNaN","frameModifier","goToAndPlay","playSegments","_isComplete","nextValue","checkSegments","adjustSegment","setSegment","end","pendingFrame","forceFlag","resetSegments","onEnterFrame","onLoopComplete","onSegmentStart","onDestroy","getPath","getDuration","stackCount","registers","pushExpression","popExpression","registerExpressionProperty","expression","ExpressionManager","fetch","frames","$bm_isInstanceOfArray","isNumerable","tOfV","$bm_neg","tOfA","lenA","retArr","easeInBez","easeOutBez","easeInOutBez","tOfB","lenB","sub","mul","mod","$bm_sum","$bm_sub","$bm_mul","$bm_div","$bm_mod","clamp","mm","radiansToDegrees","radians_to_degrees","degreesToRadians","degrees_to_radians","helperLengthArray","arr1","arr2","normalize","vec","rgbToHsl","hue2rgb","hslToRgb","linear","tMin","tMax","value1","value2","_tMin","rnd","createPath","inTangents","outTangents","inVertexPoint","outVertexPoint","arrPlaceholder","initiateExpression","property","needsVelocity","_needsRandom","elemType","$bm_transform","effect","thisProperty","inPoint","valueAtTime","defineProperty","frameDuration","displayStartTime","outPoint","loopIn","loop_in","loopOut","loop_out","smooth","toWorld","fromWorld","fromComp","toComp","fromCompToSurface","rotation","anchorPoint","thisLayer","thisComp","velocityAtTime","scoped_bm_rt","expression_function","eval","numKeys","active","wiggle","freq","amp","lenWiggle","addedAmps","iWiggle","periods","loopInDuration","loopOutDuration","getVelocityAtTime","velocity","textIndex","textTotal","selectorValue","lookAt","elem1","elem2","fVec","easeOut","val1","val2","applyEase","easeIn","ease","lenKey","iKey","nearestKey","obKey","framesToTime","fps","timeToFrames","seedRandom","seedrandom","randSeed","substring","posterizeTime","framesPerSecond","hasParent","executeExpression","_value","frameExpressionId","expressionHelpers","searchExpressions","getSpeedAtTime","speed","_cachingAtTime","getStaticValueAtTime","setGroupProperty","propertyGroup","propertyGetProp","ShapePropertyConstructorFunction","KeyframedShapePropertyConstructorFunction","propertyGetShapeProp","durationFlag","cycleDuration","firstKeyFrame","ret","lastKeyFrame","initV","endV","current","repeats","lastValue","nextLastValue","firstValue","nextFirstValue","samples","sampleValue","sampleFrequency","ShapeExpressions","_transformCachingAtTime","positionX","positionY","positionZ","anchor","skewAxis","rotationZ","rotationY","rotationX","orientation","propertyIndex","isClosed","pointOnPath","_segmentsLength","accumulatedLength","initIndex","endIndex","vectorOnPath","vectorType","xLength","yLength","magnitude","tangentOnPath","normalOnPath","shapeValue","trims","getExpressionValue","calculateExpression","isKeyframed","hasExpressions","ShapePathInterface","view","interfaceFunction","_propertyGroup","propertyGroupFactory","PropertyInterface","defineProperties","_name","mn","parentPropertyGroup","propertyName","interfaces","_interfaceFunction","iterateElements","numProperties","transformInterface","transformInterfaceFactory","cix","contentsInterfaceFactory","np","groupInterfaceFactory","ExpressionPropertyInterface","fillInterfaceFactory","_dashPropertyGroup","dashOb","addPropertyToDashOb","dash","strokeInterfaceFactory","start","trimInterfaceFactory","ellipseInterfaceFactory","outerRadius","outerRoundness","innerRoundness","innerRadius","starInterfaceFactory","rectInterfaceFactory","radius","roundedInterfaceFactory","repeaterInterfaceFactory","startPoint","endPoint","gradientFillInterfaceFactory","_sourceText","_thisLayerFunction","sourceText","stringValue","_prevValue","getMatrix","invertPoint","applyPoint","toWorldVec","fromWorldVec","sampleImage","anchorPointDescriptor","TransformExpressionInterface","anchor_point","startTime","source","MaskManagerInterface","effects","toWorldMat","dataInterface","dataInterfaceFactory","outlineInterface","currentProperty","currentPropertyName","propertyNameIndex","pixelAspect","numLayers","_thisFunction","xRotation","yRotation","xPosition","yPosition","zPosition","_px","_py","_pz","_transformFactory","_thisProjectFunction","compositions","effectsData","createGroupInterface","groupInterface","createValueInterface","enabled","en","expressionProperty","MaskInterface","_mask","_data","_masksInterfaces","defaultUnidimensionalValue","defaultMultidimensionalValue","expressionValue","completeProperty","arrValue","defaultGetter","valueProp","assign","speedAtTime","TextExpressionSelectorPropFactory","getValueProxy","total","propertyGetTextProp","SliderEffect","AngleEffect","ColorEffect","PointEffect","LayerIndexEffect","MaskIndexEffect","CheckboxEffect","NoValueEffect","effectItem","GroupEffect","eff","lottie","setLocationHref","setSubframeRendering","setIDPrefix","prefix","setQuality","inBrowser","installPlugin","plugin","getFactory","checkReady","readyStateCheckInterval","getQueryVariable","variable","vars","queryString","pair","decodeURIComponent","useWebWorker","__getFactory","version","scripts","myScript","define","amd","bodymovin","_lottieWeb","_interopRequireDefault","onbeforeunload","scrollTo","querySelector"],"mappings":"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","file":"blog.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\n\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","(typeof navigator !== \"undefined\") && (function(root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(function() {\n            return factory(root);\n        });\n    } else if (typeof module === \"object\" && module.exports) {\n        module.exports = factory(root);\n    } else {\n        root.lottie = factory(root);\n        root.bodymovin = root.lottie;\n    }\n}((window || {}), function(window) {\n\t/* global locationHref:writable, animationManager, subframeEnabled:writable, defaultCurveSegments:writable, roundValues,\r\nexpressionsPlugin:writable, PropertyFactory, ShapePropertyFactory, Matrix, idPrefix:writable, _useWebWorker:writable */\r\n/* exported locationHref, subframeEnabled, expressionsPlugin, idPrefix, _useWebWorker */\r\n\r\n'use strict';\r\n\r\n/* exported svgNS, locationHref, initialDefaultFrame, _useWebWorker */\r\n\r\nvar svgNS = 'http://www.w3.org/2000/svg';\r\n\r\nvar locationHref = '';\r\n\r\nvar initialDefaultFrame = -999999;\r\n\r\nvar _useWebWorker = false;\r\n\r\n/* global createSizedArray */\r\n/* exported subframeEnabled, expressionsPlugin, isSafari, cachedColors, bmPow, bmSqrt, bmFloor, bmMax, bmMin, ProjectInterface,\r\ndefaultCurveSegments, degToRads, roundCorner, bmRnd, styleDiv, BMEnterFrameEvent, BMCompleteEvent, BMCompleteLoopEvent,\r\nBMSegmentStartEvent, BMDestroyEvent, BMRenderFrameErrorEvent, BMConfigErrorEvent, BMAnimationConfigErrorEvent, createElementID,\r\naddSaturationToRGB, addBrightnessToRGB, addHueToRGB, rgbToHex */\r\n\r\nvar subframeEnabled = true;\r\nvar idPrefix = '';\r\nvar expressionsPlugin;\r\nvar isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\r\nvar cachedColors = {};\r\nvar bmRnd;\r\nvar bmPow = Math.pow;\r\nvar bmSqrt = Math.sqrt;\r\nvar bmFloor = Math.floor;\r\nvar bmMax = Math.max;\r\nvar bmMin = Math.min;\r\n\r\nvar BMMath = {};\r\n(function () {\r\n  var propertyNames = ['abs', 'acos', 'acosh', 'asin', 'asinh', 'atan', 'atanh', 'atan2', 'ceil', 'cbrt', 'expm1', 'clz32', 'cos', 'cosh', 'exp', 'floor', 'fround', 'hypot', 'imul', 'log', 'log1p', 'log2', 'log10', 'max', 'min', 'pow', 'random', 'round', 'sign', 'sin', 'sinh', 'sqrt', 'tan', 'tanh', 'trunc', 'E', 'LN10', 'LN2', 'LOG10E', 'LOG2E', 'PI', 'SQRT1_2', 'SQRT2'];\r\n  var i;\r\n  var len = propertyNames.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    BMMath[propertyNames[i]] = Math[propertyNames[i]];\r\n  }\r\n}());\r\n\r\nfunction ProjectInterface() { return {}; }\r\n\r\nBMMath.random = Math.random;\r\nBMMath.abs = function (val) {\r\n  var tOfVal = typeof val;\r\n  if (tOfVal === 'object' && val.length) {\r\n    var absArr = createSizedArray(val.length);\r\n    var i;\r\n    var len = val.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      absArr[i] = Math.abs(val[i]);\r\n    }\r\n    return absArr;\r\n  }\r\n  return Math.abs(val);\r\n};\r\nvar defaultCurveSegments = 150;\r\nvar degToRads = Math.PI / 180;\r\nvar roundCorner = 0.5519;\r\n\r\nfunction roundValues(flag) {\r\n  if (flag) {\r\n    bmRnd = Math.round;\r\n  } else {\r\n    bmRnd = function (val) {\r\n      return val;\r\n    };\r\n  }\r\n}\r\nroundValues(false);\r\n\r\nfunction styleDiv(element) {\r\n  element.style.position = 'absolute';\r\n  element.style.top = 0;\r\n  element.style.left = 0;\r\n  element.style.display = 'block';\r\n  element.style.transformOrigin = '0 0';\r\n  element.style.webkitTransformOrigin = '0 0';\r\n  element.style.backfaceVisibility = 'visible';\r\n  element.style.webkitBackfaceVisibility = 'visible';\r\n  element.style.transformStyle = 'preserve-3d';\r\n  element.style.webkitTransformStyle = 'preserve-3d';\r\n  element.style.mozTransformStyle = 'preserve-3d';\r\n}\r\n\r\nfunction BMEnterFrameEvent(type, currentTime, totalTime, frameMultiplier) {\r\n  this.type = type;\r\n  this.currentTime = currentTime;\r\n  this.totalTime = totalTime;\r\n  this.direction = frameMultiplier < 0 ? -1 : 1;\r\n}\r\n\r\nfunction BMCompleteEvent(type, frameMultiplier) {\r\n  this.type = type;\r\n  this.direction = frameMultiplier < 0 ? -1 : 1;\r\n}\r\n\r\nfunction BMCompleteLoopEvent(type, totalLoops, currentLoop, frameMultiplier) {\r\n  this.type = type;\r\n  this.currentLoop = currentLoop;\r\n  this.totalLoops = totalLoops;\r\n  this.direction = frameMultiplier < 0 ? -1 : 1;\r\n}\r\n\r\nfunction BMSegmentStartEvent(type, firstFrame, totalFrames) {\r\n  this.type = type;\r\n  this.firstFrame = firstFrame;\r\n  this.totalFrames = totalFrames;\r\n}\r\n\r\nfunction BMDestroyEvent(type, target) {\r\n  this.type = type;\r\n  this.target = target;\r\n}\r\n\r\nfunction BMRenderFrameErrorEvent(nativeError, currentTime) {\r\n  this.type = 'renderFrameError';\r\n  this.nativeError = nativeError;\r\n  this.currentTime = currentTime;\r\n}\r\n\r\nfunction BMConfigErrorEvent(nativeError) {\r\n  this.type = 'configError';\r\n  this.nativeError = nativeError;\r\n}\r\n\r\nfunction BMAnimationConfigErrorEvent(type, nativeError) {\r\n  this.type = type;\r\n  this.nativeError = nativeError;\r\n}\r\n\r\nvar createElementID = (function () {\r\n  var _count = 0;\r\n  return function createID() {\r\n    _count += 1;\r\n    return idPrefix + '__lottie_element_' + _count;\r\n  };\r\n}());\r\n\r\nfunction HSVtoRGB(h, s, v) {\r\n  var r;\r\n  var g;\r\n  var b;\r\n  var i;\r\n  var f;\r\n  var p;\r\n  var q;\r\n  var t;\r\n  i = Math.floor(h * 6);\r\n  f = h * 6 - i;\r\n  p = v * (1 - s);\r\n  q = v * (1 - f * s);\r\n  t = v * (1 - (1 - f) * s);\r\n  switch (i % 6) {\r\n    case 0: r = v; g = t; b = p; break;\r\n    case 1: r = q; g = v; b = p; break;\r\n    case 2: r = p; g = v; b = t; break;\r\n    case 3: r = p; g = q; b = v; break;\r\n    case 4: r = t; g = p; b = v; break;\r\n    case 5: r = v; g = p; b = q; break;\r\n    default: break;\r\n  }\r\n  return [r,\r\n    g,\r\n    b];\r\n}\r\n\r\nfunction RGBtoHSV(r, g, b) {\r\n  var max = Math.max(r, g, b);\r\n  var min = Math.min(r, g, b);\r\n  var d = max - min;\r\n  var h;\r\n  var s = (max === 0 ? 0 : d / max);\r\n  var v = max / 255;\r\n\r\n  switch (max) {\r\n    case min: h = 0; break;\r\n    case r: h = (g - b) + d * (g < b ? 6 : 0); h /= 6 * d; break;\r\n    case g: h = (b - r) + d * 2; h /= 6 * d; break;\r\n    case b: h = (r - g) + d * 4; h /= 6 * d; break;\r\n    default: break;\r\n  }\r\n\r\n  return [\r\n    h,\r\n    s,\r\n    v,\r\n  ];\r\n}\r\n\r\nfunction addSaturationToRGB(color, offset) {\r\n  var hsv = RGBtoHSV(color[0] * 255, color[1] * 255, color[2] * 255);\r\n  hsv[1] += offset;\r\n  if (hsv[1] > 1) {\r\n    hsv[1] = 1;\r\n  } else if (hsv[1] <= 0) {\r\n    hsv[1] = 0;\r\n  }\r\n  return HSVtoRGB(hsv[0], hsv[1], hsv[2]);\r\n}\r\n\r\nfunction addBrightnessToRGB(color, offset) {\r\n  var hsv = RGBtoHSV(color[0] * 255, color[1] * 255, color[2] * 255);\r\n  hsv[2] += offset;\r\n  if (hsv[2] > 1) {\r\n    hsv[2] = 1;\r\n  } else if (hsv[2] < 0) {\r\n    hsv[2] = 0;\r\n  }\r\n  return HSVtoRGB(hsv[0], hsv[1], hsv[2]);\r\n}\r\n\r\nfunction addHueToRGB(color, offset) {\r\n  var hsv = RGBtoHSV(color[0] * 255, color[1] * 255, color[2] * 255);\r\n  hsv[0] += offset / 360;\r\n  if (hsv[0] > 1) {\r\n    hsv[0] -= 1;\r\n  } else if (hsv[0] < 0) {\r\n    hsv[0] += 1;\r\n  }\r\n  return HSVtoRGB(hsv[0], hsv[1], hsv[2]);\r\n}\r\n\r\nvar rgbToHex = (function () {\r\n  var colorMap = [];\r\n  var i;\r\n  var hex;\r\n  for (i = 0; i < 256; i += 1) {\r\n    hex = i.toString(16);\r\n    colorMap[i] = hex.length === 1 ? '0' + hex : hex;\r\n  }\r\n\r\n  return function (r, g, b) {\r\n    if (r < 0) {\r\n      r = 0;\r\n    }\r\n    if (g < 0) {\r\n      g = 0;\r\n    }\r\n    if (b < 0) {\r\n      b = 0;\r\n    }\r\n    return '#' + colorMap[r] + colorMap[g] + colorMap[b];\r\n  };\r\n}());\r\n\r\nfunction BaseEvent() {}\r\nBaseEvent.prototype = {\r\n  triggerEvent: function (eventName, args) {\r\n    if (this._cbs[eventName]) {\r\n      var callbacks = this._cbs[eventName];\r\n      for (var i = 0; i < callbacks.length; i += 1) {\r\n        callbacks[i](args);\r\n      }\r\n    }\r\n  },\r\n  addEventListener: function (eventName, callback) {\r\n    if (!this._cbs[eventName]) {\r\n      this._cbs[eventName] = [];\r\n    }\r\n    this._cbs[eventName].push(callback);\r\n\r\n    return function () {\r\n      this.removeEventListener(eventName, callback);\r\n    }.bind(this);\r\n  },\r\n  removeEventListener: function (eventName, callback) {\r\n    if (!callback) {\r\n      this._cbs[eventName] = null;\r\n    } else if (this._cbs[eventName]) {\r\n      var i = 0;\r\n      var len = this._cbs[eventName].length;\r\n      while (i < len) {\r\n        if (this._cbs[eventName][i] === callback) {\r\n          this._cbs[eventName].splice(i, 1);\r\n          i -= 1;\r\n          len -= 1;\r\n        }\r\n        i += 1;\r\n      }\r\n      if (!this._cbs[eventName].length) {\r\n        this._cbs[eventName] = null;\r\n      }\r\n    }\r\n  },\r\n};\r\n\r\n/* exported createTypedArray, createSizedArray */\r\n\r\nvar createTypedArray = (function () {\r\n  function createRegularArray(type, len) {\r\n    var i = 0;\r\n    var arr = [];\r\n    var value;\r\n    switch (type) {\r\n      case 'int16':\r\n      case 'uint8c':\r\n        value = 1;\r\n        break;\r\n      default:\r\n        value = 1.1;\r\n        break;\r\n    }\r\n    for (i = 0; i < len; i += 1) {\r\n      arr.push(value);\r\n    }\r\n    return arr;\r\n  }\r\n  function createTypedArrayFactory(type, len) {\r\n    if (type === 'float32') {\r\n      return new Float32Array(len);\r\n    } if (type === 'int16') {\r\n      return new Int16Array(len);\r\n    } if (type === 'uint8c') {\r\n      return new Uint8ClampedArray(len);\r\n    }\r\n    return createRegularArray(type, len);\r\n  }\r\n  if (typeof Uint8ClampedArray === 'function' && typeof Float32Array === 'function') {\r\n    return createTypedArrayFactory;\r\n  }\r\n  return createRegularArray;\r\n}());\r\n\r\nfunction createSizedArray(len) {\r\n  return Array.apply(null, { length: len });\r\n}\r\n\r\n/* global svgNS */\r\n/* exported createNS */\r\n\r\nfunction createNS(type) {\r\n  // return {appendChild:function(){},setAttribute:function(){},style:{}}\r\n  return document.createElementNS(svgNS, type);\r\n}\r\n\r\n/* exported createTag */\r\n\r\nfunction createTag(type) {\r\n  // return {appendChild:function(){},setAttribute:function(){},style:{}}\r\n  return document.createElement(type);\r\n}\r\n\r\nfunction DynamicPropertyContainer() {}\r\nDynamicPropertyContainer.prototype = {\r\n  addDynamicProperty: function (prop) {\r\n    if (this.dynamicProperties.indexOf(prop) === -1) {\r\n      this.dynamicProperties.push(prop);\r\n      this.container.addDynamicProperty(this);\r\n      this._isAnimated = true;\r\n    }\r\n  },\r\n  iterateDynamicProperties: function () {\r\n    this._mdf = false;\r\n    var i;\r\n    var len = this.dynamicProperties.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      this.dynamicProperties[i].getValue();\r\n      if (this.dynamicProperties[i]._mdf) {\r\n        this._mdf = true;\r\n      }\r\n    }\r\n  },\r\n  initDynamicPropertyContainer: function (container) {\r\n    this.container = container;\r\n    this.dynamicProperties = [];\r\n    this._mdf = false;\r\n    this._isAnimated = false;\r\n  },\r\n};\r\n\r\n/* exported getBlendMode */\r\n\r\nvar getBlendMode = (function () {\r\n  var blendModeEnums = {\r\n    0: 'source-over',\r\n    1: 'multiply',\r\n    2: 'screen',\r\n    3: 'overlay',\r\n    4: 'darken',\r\n    5: 'lighten',\r\n    6: 'color-dodge',\r\n    7: 'color-burn',\r\n    8: 'hard-light',\r\n    9: 'soft-light',\r\n    10: 'difference',\r\n    11: 'exclusion',\r\n    12: 'hue',\r\n    13: 'saturation',\r\n    14: 'color',\r\n    15: 'luminosity',\r\n  };\r\n\r\n  return function (mode) {\r\n    return blendModeEnums[mode] || '';\r\n  };\r\n}());\r\n\r\n/* exported lineCapEnum, lineJoinEnum */\r\n\r\nvar lineCapEnum = {\r\n  1: 'butt',\r\n  2: 'round',\r\n  3: 'square',\r\n};\r\n\r\nvar lineJoinEnum = {\r\n  1: 'miter',\r\n  2: 'round',\r\n  3: 'bevel',\r\n};\r\n\r\n/* global createTypedArray */\r\n\r\n/*!\r\n Transformation Matrix v2.0\r\n (c) Epistemex 2014-2015\r\n www.epistemex.com\r\n By Ken Fyrstenberg\r\n Contributions by leeoniya.\r\n License: MIT, header required.\r\n */\r\n\r\n/**\r\n * 2D transformation matrix object initialized with identity matrix.\r\n *\r\n * The matrix can synchronize a canvas context by supplying the context\r\n * as an argument, or later apply current absolute transform to an\r\n * existing context.\r\n *\r\n * All values are handled as floating point values.\r\n *\r\n * @param {CanvasRenderingContext2D} [context] - Optional context to sync with Matrix\r\n * @prop {number} a - scale x\r\n * @prop {number} b - shear y\r\n * @prop {number} c - shear x\r\n * @prop {number} d - scale y\r\n * @prop {number} e - translate x\r\n * @prop {number} f - translate y\r\n * @prop {CanvasRenderingContext2D|null} [context=null] - set or get current canvas context\r\n * @constructor\r\n */\r\n\r\nvar Matrix = (function () {\r\n  var _cos = Math.cos;\r\n  var _sin = Math.sin;\r\n  var _tan = Math.tan;\r\n  var _rnd = Math.round;\r\n\r\n  function reset() {\r\n    this.props[0] = 1;\r\n    this.props[1] = 0;\r\n    this.props[2] = 0;\r\n    this.props[3] = 0;\r\n    this.props[4] = 0;\r\n    this.props[5] = 1;\r\n    this.props[6] = 0;\r\n    this.props[7] = 0;\r\n    this.props[8] = 0;\r\n    this.props[9] = 0;\r\n    this.props[10] = 1;\r\n    this.props[11] = 0;\r\n    this.props[12] = 0;\r\n    this.props[13] = 0;\r\n    this.props[14] = 0;\r\n    this.props[15] = 1;\r\n    return this;\r\n  }\r\n\r\n  function rotate(angle) {\r\n    if (angle === 0) {\r\n      return this;\r\n    }\r\n    var mCos = _cos(angle);\r\n    var mSin = _sin(angle);\r\n    return this._t(mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\r\n  }\r\n\r\n  function rotateX(angle) {\r\n    if (angle === 0) {\r\n      return this;\r\n    }\r\n    var mCos = _cos(angle);\r\n    var mSin = _sin(angle);\r\n    return this._t(1, 0, 0, 0, 0, mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1);\r\n  }\r\n\r\n  function rotateY(angle) {\r\n    if (angle === 0) {\r\n      return this;\r\n    }\r\n    var mCos = _cos(angle);\r\n    var mSin = _sin(angle);\r\n    return this._t(mCos, 0, mSin, 0, 0, 1, 0, 0, -mSin, 0, mCos, 0, 0, 0, 0, 1);\r\n  }\r\n\r\n  function rotateZ(angle) {\r\n    if (angle === 0) {\r\n      return this;\r\n    }\r\n    var mCos = _cos(angle);\r\n    var mSin = _sin(angle);\r\n    return this._t(mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\r\n  }\r\n\r\n  function shear(sx, sy) {\r\n    return this._t(1, sy, sx, 1, 0, 0);\r\n  }\r\n\r\n  function skew(ax, ay) {\r\n    return this.shear(_tan(ax), _tan(ay));\r\n  }\r\n\r\n  function skewFromAxis(ax, angle) {\r\n    var mCos = _cos(angle);\r\n    var mSin = _sin(angle);\r\n    return this._t(mCos, mSin, 0, 0, -mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\r\n      ._t(1, 0, 0, 0, _tan(ax), 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\r\n      ._t(mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\r\n    // return this._t(mCos, mSin, -mSin, mCos, 0, 0)._t(1, 0, _tan(ax), 1, 0, 0)._t(mCos, -mSin, mSin, mCos, 0, 0);\r\n  }\r\n\r\n  function scale(sx, sy, sz) {\r\n    if (!sz && sz !== 0) {\r\n      sz = 1;\r\n    }\r\n    if (sx === 1 && sy === 1 && sz === 1) {\r\n      return this;\r\n    }\r\n    return this._t(sx, 0, 0, 0, 0, sy, 0, 0, 0, 0, sz, 0, 0, 0, 0, 1);\r\n  }\r\n\r\n  function setTransform(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {\r\n    this.props[0] = a;\r\n    this.props[1] = b;\r\n    this.props[2] = c;\r\n    this.props[3] = d;\r\n    this.props[4] = e;\r\n    this.props[5] = f;\r\n    this.props[6] = g;\r\n    this.props[7] = h;\r\n    this.props[8] = i;\r\n    this.props[9] = j;\r\n    this.props[10] = k;\r\n    this.props[11] = l;\r\n    this.props[12] = m;\r\n    this.props[13] = n;\r\n    this.props[14] = o;\r\n    this.props[15] = p;\r\n    return this;\r\n  }\r\n\r\n  function translate(tx, ty, tz) {\r\n    tz = tz || 0;\r\n    if (tx !== 0 || ty !== 0 || tz !== 0) {\r\n      return this._t(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, tx, ty, tz, 1);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  function transform(a2, b2, c2, d2, e2, f2, g2, h2, i2, j2, k2, l2, m2, n2, o2, p2) {\r\n    var _p = this.props;\r\n\r\n    if (a2 === 1 && b2 === 0 && c2 === 0 && d2 === 0 && e2 === 0 && f2 === 1 && g2 === 0 && h2 === 0 && i2 === 0 && j2 === 0 && k2 === 1 && l2 === 0) {\r\n      // NOTE: commenting this condition because TurboFan deoptimizes code when present\r\n      // if(m2 !== 0 || n2 !== 0 || o2 !== 0){\r\n      _p[12] = _p[12] * a2 + _p[15] * m2;\r\n      _p[13] = _p[13] * f2 + _p[15] * n2;\r\n      _p[14] = _p[14] * k2 + _p[15] * o2;\r\n      _p[15] *= p2;\r\n      // }\r\n      this._identityCalculated = false;\r\n      return this;\r\n    }\r\n\r\n    var a1 = _p[0];\r\n    var b1 = _p[1];\r\n    var c1 = _p[2];\r\n    var d1 = _p[3];\r\n    var e1 = _p[4];\r\n    var f1 = _p[5];\r\n    var g1 = _p[6];\r\n    var h1 = _p[7];\r\n    var i1 = _p[8];\r\n    var j1 = _p[9];\r\n    var k1 = _p[10];\r\n    var l1 = _p[11];\r\n    var m1 = _p[12];\r\n    var n1 = _p[13];\r\n    var o1 = _p[14];\r\n    var p1 = _p[15];\r\n\r\n    /* matrix order (canvas compatible):\r\n         * ace\r\n         * bdf\r\n         * 001\r\n         */\r\n    _p[0] = a1 * a2 + b1 * e2 + c1 * i2 + d1 * m2;\r\n    _p[1] = a1 * b2 + b1 * f2 + c1 * j2 + d1 * n2;\r\n    _p[2] = a1 * c2 + b1 * g2 + c1 * k2 + d1 * o2;\r\n    _p[3] = a1 * d2 + b1 * h2 + c1 * l2 + d1 * p2;\r\n\r\n    _p[4] = e1 * a2 + f1 * e2 + g1 * i2 + h1 * m2;\r\n    _p[5] = e1 * b2 + f1 * f2 + g1 * j2 + h1 * n2;\r\n    _p[6] = e1 * c2 + f1 * g2 + g1 * k2 + h1 * o2;\r\n    _p[7] = e1 * d2 + f1 * h2 + g1 * l2 + h1 * p2;\r\n\r\n    _p[8] = i1 * a2 + j1 * e2 + k1 * i2 + l1 * m2;\r\n    _p[9] = i1 * b2 + j1 * f2 + k1 * j2 + l1 * n2;\r\n    _p[10] = i1 * c2 + j1 * g2 + k1 * k2 + l1 * o2;\r\n    _p[11] = i1 * d2 + j1 * h2 + k1 * l2 + l1 * p2;\r\n\r\n    _p[12] = m1 * a2 + n1 * e2 + o1 * i2 + p1 * m2;\r\n    _p[13] = m1 * b2 + n1 * f2 + o1 * j2 + p1 * n2;\r\n    _p[14] = m1 * c2 + n1 * g2 + o1 * k2 + p1 * o2;\r\n    _p[15] = m1 * d2 + n1 * h2 + o1 * l2 + p1 * p2;\r\n\r\n    this._identityCalculated = false;\r\n    return this;\r\n  }\r\n\r\n  function isIdentity() {\r\n    if (!this._identityCalculated) {\r\n      this._identity = !(this.props[0] !== 1 || this.props[1] !== 0 || this.props[2] !== 0 || this.props[3] !== 0 || this.props[4] !== 0 || this.props[5] !== 1 || this.props[6] !== 0 || this.props[7] !== 0 || this.props[8] !== 0 || this.props[9] !== 0 || this.props[10] !== 1 || this.props[11] !== 0 || this.props[12] !== 0 || this.props[13] !== 0 || this.props[14] !== 0 || this.props[15] !== 1);\r\n      this._identityCalculated = true;\r\n    }\r\n    return this._identity;\r\n  }\r\n\r\n  function equals(matr) {\r\n    var i = 0;\r\n    while (i < 16) {\r\n      if (matr.props[i] !== this.props[i]) {\r\n        return false;\r\n      }\r\n      i += 1;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  function clone(matr) {\r\n    var i;\r\n    for (i = 0; i < 16; i += 1) {\r\n      matr.props[i] = this.props[i];\r\n    }\r\n    return matr;\r\n  }\r\n\r\n  function cloneFromProps(props) {\r\n    var i;\r\n    for (i = 0; i < 16; i += 1) {\r\n      this.props[i] = props[i];\r\n    }\r\n  }\r\n\r\n  function applyToPoint(x, y, z) {\r\n    return {\r\n      x: x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12],\r\n      y: x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13],\r\n      z: x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14],\r\n    };\r\n    /* return {\r\n         x: x * me.a + y * me.c + me.e,\r\n         y: x * me.b + y * me.d + me.f\r\n         }; */\r\n  }\r\n  function applyToX(x, y, z) {\r\n    return x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12];\r\n  }\r\n  function applyToY(x, y, z) {\r\n    return x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13];\r\n  }\r\n  function applyToZ(x, y, z) {\r\n    return x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14];\r\n  }\r\n\r\n  function getInverseMatrix() {\r\n    var determinant = this.props[0] * this.props[5] - this.props[1] * this.props[4];\r\n    var a = this.props[5] / determinant;\r\n    var b = -this.props[1] / determinant;\r\n    var c = -this.props[4] / determinant;\r\n    var d = this.props[0] / determinant;\r\n    var e = (this.props[4] * this.props[13] - this.props[5] * this.props[12]) / determinant;\r\n    var f = -(this.props[0] * this.props[13] - this.props[1] * this.props[12]) / determinant;\r\n    var inverseMatrix = new Matrix();\r\n    inverseMatrix.props[0] = a;\r\n    inverseMatrix.props[1] = b;\r\n    inverseMatrix.props[4] = c;\r\n    inverseMatrix.props[5] = d;\r\n    inverseMatrix.props[12] = e;\r\n    inverseMatrix.props[13] = f;\r\n    return inverseMatrix;\r\n  }\r\n\r\n  function inversePoint(pt) {\r\n    var inverseMatrix = this.getInverseMatrix();\r\n    return inverseMatrix.applyToPointArray(pt[0], pt[1], pt[2] || 0);\r\n  }\r\n\r\n  function inversePoints(pts) {\r\n    var i;\r\n    var len = pts.length;\r\n    var retPts = [];\r\n    for (i = 0; i < len; i += 1) {\r\n      retPts[i] = inversePoint(pts[i]);\r\n    }\r\n    return retPts;\r\n  }\r\n\r\n  function applyToTriplePoints(pt1, pt2, pt3) {\r\n    var arr = createTypedArray('float32', 6);\r\n    if (this.isIdentity()) {\r\n      arr[0] = pt1[0];\r\n      arr[1] = pt1[1];\r\n      arr[2] = pt2[0];\r\n      arr[3] = pt2[1];\r\n      arr[4] = pt3[0];\r\n      arr[5] = pt3[1];\r\n    } else {\r\n      var p0 = this.props[0];\r\n      var p1 = this.props[1];\r\n      var p4 = this.props[4];\r\n      var p5 = this.props[5];\r\n      var p12 = this.props[12];\r\n      var p13 = this.props[13];\r\n      arr[0] = pt1[0] * p0 + pt1[1] * p4 + p12;\r\n      arr[1] = pt1[0] * p1 + pt1[1] * p5 + p13;\r\n      arr[2] = pt2[0] * p0 + pt2[1] * p4 + p12;\r\n      arr[3] = pt2[0] * p1 + pt2[1] * p5 + p13;\r\n      arr[4] = pt3[0] * p0 + pt3[1] * p4 + p12;\r\n      arr[5] = pt3[0] * p1 + pt3[1] * p5 + p13;\r\n    }\r\n    return arr;\r\n  }\r\n\r\n  function applyToPointArray(x, y, z) {\r\n    var arr;\r\n    if (this.isIdentity()) {\r\n      arr = [x, y, z];\r\n    } else {\r\n      arr = [\r\n        x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12],\r\n        x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13],\r\n        x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14],\r\n      ];\r\n    }\r\n    return arr;\r\n  }\r\n\r\n  function applyToPointStringified(x, y) {\r\n    if (this.isIdentity()) {\r\n      return x + ',' + y;\r\n    }\r\n    var _p = this.props;\r\n    return Math.round((x * _p[0] + y * _p[4] + _p[12]) * 100) / 100 + ',' + Math.round((x * _p[1] + y * _p[5] + _p[13]) * 100) / 100;\r\n  }\r\n\r\n  function toCSS() {\r\n    // Doesn't make much sense to add this optimization. If it is an identity matrix, it's very likely this will get called only once since it won't be keyframed.\r\n    /* if(this.isIdentity()) {\r\n            return '';\r\n        } */\r\n    var i = 0;\r\n    var props = this.props;\r\n    var cssValue = 'matrix3d(';\r\n    var v = 10000;\r\n    while (i < 16) {\r\n      cssValue += _rnd(props[i] * v) / v;\r\n      cssValue += i === 15 ? ')' : ',';\r\n      i += 1;\r\n    }\r\n    return cssValue;\r\n  }\r\n\r\n  function roundMatrixProperty(val) {\r\n    var v = 10000;\r\n    if ((val < 0.000001 && val > 0) || (val > -0.000001 && val < 0)) {\r\n      return _rnd(val * v) / v;\r\n    }\r\n    return val;\r\n  }\r\n\r\n  function to2dCSS() {\r\n    // Doesn't make much sense to add this optimization. If it is an identity matrix, it's very likely this will get called only once since it won't be keyframed.\r\n    /* if(this.isIdentity()) {\r\n            return '';\r\n        } */\r\n    var props = this.props;\r\n    var _a = roundMatrixProperty(props[0]);\r\n    var _b = roundMatrixProperty(props[1]);\r\n    var _c = roundMatrixProperty(props[4]);\r\n    var _d = roundMatrixProperty(props[5]);\r\n    var _e = roundMatrixProperty(props[12]);\r\n    var _f = roundMatrixProperty(props[13]);\r\n    return 'matrix(' + _a + ',' + _b + ',' + _c + ',' + _d + ',' + _e + ',' + _f + ')';\r\n  }\r\n\r\n  return function () {\r\n    this.reset = reset;\r\n    this.rotate = rotate;\r\n    this.rotateX = rotateX;\r\n    this.rotateY = rotateY;\r\n    this.rotateZ = rotateZ;\r\n    this.skew = skew;\r\n    this.skewFromAxis = skewFromAxis;\r\n    this.shear = shear;\r\n    this.scale = scale;\r\n    this.setTransform = setTransform;\r\n    this.translate = translate;\r\n    this.transform = transform;\r\n    this.applyToPoint = applyToPoint;\r\n    this.applyToX = applyToX;\r\n    this.applyToY = applyToY;\r\n    this.applyToZ = applyToZ;\r\n    this.applyToPointArray = applyToPointArray;\r\n    this.applyToTriplePoints = applyToTriplePoints;\r\n    this.applyToPointStringified = applyToPointStringified;\r\n    this.toCSS = toCSS;\r\n    this.to2dCSS = to2dCSS;\r\n    this.clone = clone;\r\n    this.cloneFromProps = cloneFromProps;\r\n    this.equals = equals;\r\n    this.inversePoints = inversePoints;\r\n    this.inversePoint = inversePoint;\r\n    this.getInverseMatrix = getInverseMatrix;\r\n    this._t = this.transform;\r\n    this.isIdentity = isIdentity;\r\n    this._identity = true;\r\n    this._identityCalculated = false;\r\n\r\n    this.props = createTypedArray('float32', 16);\r\n    this.reset();\r\n  };\r\n}());\r\n\r\n/* eslint-disable */\r\n/*\r\n Copyright 2014 David Bau.\r\n\r\n Permission is hereby granted, free of charge, to any person obtaining\r\n a copy of this software and associated documentation files (the\r\n \"Software\"), to deal in the Software without restriction, including\r\n without limitation the rights to use, copy, modify, merge, publish,\r\n distribute, sublicense, and/or sell copies of the Software, and to\r\n permit persons to whom the Software is furnished to do so, subject to\r\n the following conditions:\r\n\r\n The above copyright notice and this permission notice shall be\r\n included in all copies or substantial portions of the Software.\r\n\r\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\r\n IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\r\n CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\r\n TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\r\n SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n */\r\n\r\n(function (pool, math) {\r\n//\r\n// The following constants are related to IEEE 754 limits.\r\n//\r\n    var global = this,\r\n        width = 256,        // each RC4 output is 0 <= x < 256\r\n        chunks = 6,         // at least six RC4 outputs for each double\r\n        digits = 52,        // there are 52 significant digits in a double\r\n        rngname = 'random', // rngname: name for Math.random and Math.seedrandom\r\n        startdenom = math.pow(width, chunks),\r\n        significance = math.pow(2, digits),\r\n        overflow = significance * 2,\r\n        mask = width - 1,\r\n        nodecrypto;         // node.js crypto module, initialized at the bottom.\r\n\r\n//\r\n// seedrandom()\r\n// This is the seedrandom function described above.\r\n//\r\n    function seedrandom(seed, options, callback) {\r\n        var key = [];\r\n        options = (options === true) ? { entropy: true } : (options || {});\r\n\r\n        // Flatten the seed string or build one from local entropy if needed.\r\n        var shortseed = mixkey(flatten(\r\n            options.entropy ? [seed, tostring(pool)] :\r\n                (seed === null) ? autoseed() : seed, 3), key);\r\n\r\n        // Use the seed to initialize an ARC4 generator.\r\n        var arc4 = new ARC4(key);\r\n\r\n        // This function returns a random double in [0, 1) that contains\r\n        // randomness in every bit of the mantissa of the IEEE 754 value.\r\n        var prng = function() {\r\n            var n = arc4.g(chunks),             // Start with a numerator n < 2 ^ 48\r\n                d = startdenom,                 //   and denominator d = 2 ^ 48.\r\n                x = 0;                          //   and no 'extra last byte'.\r\n            while (n < significance) {          // Fill up all significant digits by\r\n                n = (n + x) * width;              //   shifting numerator and\r\n                d *= width;                       //   denominator and generating a\r\n                x = arc4.g(1);                    //   new least-significant-byte.\r\n            }\r\n            while (n >= overflow) {             // To avoid rounding up, before adding\r\n                n /= 2;                           //   last byte, shift everything\r\n                d /= 2;                           //   right using integer math until\r\n                x >>>= 1;                         //   we have exactly the desired bits.\r\n            }\r\n            return (n + x) / d;                 // Form the number within [0, 1).\r\n        };\r\n\r\n        prng.int32 = function() { return arc4.g(4) | 0; };\r\n        prng.quick = function() { return arc4.g(4) / 0x100000000; };\r\n        prng.double = prng;\r\n\r\n        // Mix the randomness into accumulated entropy.\r\n        mixkey(tostring(arc4.S), pool);\r\n\r\n        // Calling convention: what to return as a function of prng, seed, is_math.\r\n        return (options.pass || callback ||\r\n        function(prng, seed, is_math_call, state) {\r\n            if (state) {\r\n                // Load the arc4 state from the given state if it has an S array.\r\n                if (state.S) { copy(state, arc4); }\r\n                // Only provide the .state method if requested via options.state.\r\n                prng.state = function() { return copy(arc4, {}); };\r\n            }\r\n\r\n            // If called as a method of Math (Math.seedrandom()), mutate\r\n            // Math.random because that is how seedrandom.js has worked since v1.0.\r\n            if (is_math_call) { math[rngname] = prng; return seed; }\r\n\r\n            // Otherwise, it is a newer calling convention, so return the\r\n            // prng directly.\r\n            else return prng;\r\n        })(\r\n            prng,\r\n            shortseed,\r\n            'global' in options ? options.global : (this == math),\r\n            options.state);\r\n    }\r\n    math['seed' + rngname] = seedrandom;\r\n\r\n//\r\n// ARC4\r\n//\r\n// An ARC4 implementation.  The constructor takes a key in the form of\r\n// an array of at most (width) integers that should be 0 <= x < (width).\r\n//\r\n// The g(count) method returns a pseudorandom integer that concatenates\r\n// the next (count) outputs from ARC4.  Its return value is a number x\r\n// that is in the range 0 <= x < (width ^ count).\r\n//\r\n    function ARC4(key) {\r\n        var t, keylen = key.length,\r\n            me = this, i = 0, j = me.i = me.j = 0, s = me.S = [];\r\n\r\n        // The empty key [] is treated as [0].\r\n        if (!keylen) { key = [keylen++]; }\r\n\r\n        // Set up S using the standard key scheduling algorithm.\r\n        while (i < width) {\r\n            s[i] = i++;\r\n        }\r\n        for (i = 0; i < width; i++) {\r\n            s[i] = s[j = mask & (j + key[i % keylen] + (t = s[i]))];\r\n            s[j] = t;\r\n        }\r\n\r\n        // The \"g\" method returns the next (count) outputs as one number.\r\n        me.g = function(count) {\r\n            // Using instance members instead of closure state nearly doubles speed.\r\n            var t, r = 0,\r\n                i = me.i, j = me.j, s = me.S;\r\n            while (count--) {\r\n                t = s[i = mask & (i + 1)];\r\n                r = r * width + s[mask & ((s[i] = s[j = mask & (j + t)]) + (s[j] = t))];\r\n            }\r\n            me.i = i; me.j = j;\r\n            return r;\r\n            // For robust unpredictability, the function call below automatically\r\n            // discards an initial batch of values.  This is called RC4-drop[256].\r\n            // See http://google.com/search?q=rsa+fluhrer+response&btnI\r\n        };\r\n    }\r\n\r\n//\r\n// copy()\r\n// Copies internal state of ARC4 to or from a plain object.\r\n//\r\n    function copy(f, t) {\r\n        t.i = f.i;\r\n        t.j = f.j;\r\n        t.S = f.S.slice();\r\n        return t;\r\n    }\r\n\r\n//\r\n// flatten()\r\n// Converts an object tree to nested arrays of strings.\r\n//\r\n    function flatten(obj, depth) {\r\n        var result = [], typ = (typeof obj), prop;\r\n        if (depth && typ == 'object') {\r\n            for (prop in obj) {\r\n                try { result.push(flatten(obj[prop], depth - 1)); } catch (e) {}\r\n            }\r\n        }\r\n        return (result.length ? result : typ == 'string' ? obj : obj + '\\0');\r\n    }\r\n\r\n//\r\n// mixkey()\r\n// Mixes a string seed into a key that is an array of integers, and\r\n// returns a shortened string seed that is equivalent to the result key.\r\n//\r\n    function mixkey(seed, key) {\r\n        var stringseed = seed + '', smear, j = 0;\r\n        while (j < stringseed.length) {\r\n            key[mask & j] =\r\n                mask & ((smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++));\r\n        }\r\n        return tostring(key);\r\n    }\r\n\r\n//\r\n// autoseed()\r\n// Returns an object for autoseeding, using window.crypto and Node crypto\r\n// module if available.\r\n//\r\n    function autoseed() {\r\n        try {\r\n            if (nodecrypto) { return tostring(nodecrypto.randomBytes(width)); }\r\n            var out = new Uint8Array(width);\r\n            (global.crypto || global.msCrypto).getRandomValues(out);\r\n            return tostring(out);\r\n        } catch (e) {\r\n            var browser = global.navigator,\r\n                plugins = browser && browser.plugins;\r\n            return [+new Date(), global, plugins, global.screen, tostring(pool)];\r\n        }\r\n    }\r\n\r\n//\r\n// tostring()\r\n// Converts an array of charcodes to a string\r\n//\r\n    function tostring(a) {\r\n        return String.fromCharCode.apply(0, a);\r\n    }\r\n\r\n//\r\n// When seedrandom.js is loaded, we immediately mix a few bits\r\n// from the built-in RNG into the entropy pool.  Because we do\r\n// not want to interfere with deterministic PRNG state later,\r\n// seedrandom will not call math.random on its own again after\r\n// initialization.\r\n//\r\n    mixkey(math.random(), pool);\r\n\r\n//\r\n// Nodejs and AMD support: export the implementation as a module using\r\n// either convention.\r\n//\r\n\r\n// End anonymous scope, and pass initial values.\r\n})(\r\n    [],     // pool: entropy pool starts empty\r\n    BMMath    // math: package containing random, pow, and seedrandom\r\n);\r\n/* eslint-disable */\r\nvar BezierFactory = (function () {\r\n  /**\r\n     * BezierEasing - use bezier curve for transition easing function\r\n     * by Gaëtan Renaudeau 2014 - 2015 – MIT License\r\n     *\r\n     * Credits: is based on Firefox's nsSMILKeySpline.cpp\r\n     * Usage:\r\n     * var spline = BezierEasing([ 0.25, 0.1, 0.25, 1.0 ])\r\n     * spline.get(x) => returns the easing value | x must be in [0, 1] range\r\n     *\r\n     */\r\n\r\n  var ob = {};\r\n  ob.getBezierEasing = getBezierEasing;\r\n  var beziers = {};\r\n\r\n  function getBezierEasing(a, b, c, d, nm) {\r\n    var str = nm || ('bez_' + a + '_' + b + '_' + c + '_' + d).replace(/\\./g, 'p');\r\n    if (beziers[str]) {\r\n      return beziers[str];\r\n    }\r\n    var bezEasing = new BezierEasing([a, b, c, d]);\r\n    beziers[str] = bezEasing;\r\n    return bezEasing;\r\n  }\r\n\r\n  // These values are established by empiricism with tests (tradeoff: performance VS precision)\r\n  var NEWTON_ITERATIONS = 4;\r\n  var NEWTON_MIN_SLOPE = 0.001;\r\n  var SUBDIVISION_PRECISION = 0.0000001;\r\n  var SUBDIVISION_MAX_ITERATIONS = 10;\r\n\r\n  var kSplineTableSize = 11;\r\n  var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\r\n\r\n  var float32ArraySupported = typeof Float32Array === 'function';\r\n\r\n  function A(aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }\r\n  function B(aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }\r\n  function C(aA1) { return 3.0 * aA1; }\r\n\r\n  // Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\r\n  function calcBezier(aT, aA1, aA2) {\r\n    return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;\r\n  }\r\n\r\n  // Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\r\n  function getSlope(aT, aA1, aA2) {\r\n    return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\r\n  }\r\n\r\n  function binarySubdivide(aX, aA, aB, mX1, mX2) {\r\n    var currentX,\r\n      currentT,\r\n      i = 0;\r\n    do {\r\n      currentT = aA + (aB - aA) / 2.0;\r\n      currentX = calcBezier(currentT, mX1, mX2) - aX;\r\n      if (currentX > 0.0) {\r\n        aB = currentT;\r\n      } else {\r\n        aA = currentT;\r\n      }\r\n    } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\r\n    return currentT;\r\n  }\r\n\r\n  function newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\r\n    for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\r\n      var currentSlope = getSlope(aGuessT, mX1, mX2);\r\n      if (currentSlope === 0.0) return aGuessT;\r\n      var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\r\n      aGuessT -= currentX / currentSlope;\r\n    }\r\n    return aGuessT;\r\n  }\r\n\r\n  /**\r\n     * points is an array of [ mX1, mY1, mX2, mY2 ]\r\n     */\r\n  function BezierEasing(points) {\r\n    this._p = points;\r\n    this._mSampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\r\n    this._precomputed = false;\r\n\r\n    this.get = this.get.bind(this);\r\n  }\r\n\r\n  BezierEasing.prototype = {\r\n\r\n    get: function (x) {\r\n      var mX1 = this._p[0],\r\n        mY1 = this._p[1],\r\n        mX2 = this._p[2],\r\n        mY2 = this._p[3];\r\n      if (!this._precomputed) this._precompute();\r\n      if (mX1 === mY1 && mX2 === mY2) return x; // linear\r\n      // Because JavaScript number are imprecise, we should guarantee the extremes are right.\r\n      if (x === 0) return 0;\r\n      if (x === 1) return 1;\r\n      return calcBezier(this._getTForX(x), mY1, mY2);\r\n    },\r\n\r\n    // Private part\r\n\r\n    _precompute: function () {\r\n      var mX1 = this._p[0],\r\n        mY1 = this._p[1],\r\n        mX2 = this._p[2],\r\n        mY2 = this._p[3];\r\n      this._precomputed = true;\r\n      if (mX1 !== mY1 || mX2 !== mY2) { this._calcSampleValues(); }\r\n    },\r\n\r\n    _calcSampleValues: function () {\r\n      var mX1 = this._p[0],\r\n        mX2 = this._p[2];\r\n      for (var i = 0; i < kSplineTableSize; ++i) {\r\n        this._mSampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\r\n      }\r\n    },\r\n\r\n    /**\r\n         * getTForX chose the fastest heuristic to determine the percentage value precisely from a given X projection.\r\n         */\r\n    _getTForX: function (aX) {\r\n      var mX1 = this._p[0],\r\n        mX2 = this._p[2],\r\n        mSampleValues = this._mSampleValues;\r\n\r\n      var intervalStart = 0.0;\r\n      var currentSample = 1;\r\n      var lastSample = kSplineTableSize - 1;\r\n\r\n      for (; currentSample !== lastSample && mSampleValues[currentSample] <= aX; ++currentSample) {\r\n        intervalStart += kSampleStepSize;\r\n      }\r\n      --currentSample;\r\n\r\n      // Interpolate to provide an initial guess for t\r\n      var dist = (aX - mSampleValues[currentSample]) / (mSampleValues[currentSample + 1] - mSampleValues[currentSample]);\r\n      var guessForT = intervalStart + dist * kSampleStepSize;\r\n\r\n      var initialSlope = getSlope(guessForT, mX1, mX2);\r\n      if (initialSlope >= NEWTON_MIN_SLOPE) {\r\n        return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\r\n      } if (initialSlope === 0.0) {\r\n        return guessForT;\r\n      }\r\n      return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\r\n    },\r\n  };\r\n\r\n  return ob;\r\n}());\r\n\r\n(function () {\r\n  var lastTime = 0;\r\n  var vendors = ['ms', 'moz', 'webkit', 'o'];\r\n  for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) { // eslint-disable-line no-plusplus\r\n    window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\r\n    window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];\r\n  }\r\n  if (!window.requestAnimationFrame) {\r\n    window.requestAnimationFrame = function (callback) {\r\n      var currTime = new Date().getTime();\r\n      var timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n      var id = setTimeout(function () {\r\n        callback(currTime + timeToCall);\r\n      },\r\n      timeToCall);\r\n      lastTime = currTime + timeToCall;\r\n      return id;\r\n    };\r\n  }\r\n  if (!window.cancelAnimationFrame) {\r\n    window.cancelAnimationFrame = function (id) {\r\n      clearTimeout(id);\r\n    };\r\n  }\r\n}());\r\n\r\n/* exported extendPrototype, getDescriptor, createProxyFunction */\r\n\r\nfunction extendPrototype(sources, destination) {\r\n  var i;\r\n  var len = sources.length;\r\n  var sourcePrototype;\r\n  for (i = 0; i < len; i += 1) {\r\n    sourcePrototype = sources[i].prototype;\r\n    for (var attr in sourcePrototype) {\r\n      if (Object.prototype.hasOwnProperty.call(sourcePrototype, attr)) destination.prototype[attr] = sourcePrototype[attr];\r\n    }\r\n  }\r\n}\r\n\r\nfunction getDescriptor(object, prop) {\r\n  return Object.getOwnPropertyDescriptor(object, prop);\r\n}\r\n\r\nfunction createProxyFunction(prototype) {\r\n  function ProxyFunction() {}\r\n  ProxyFunction.prototype = prototype;\r\n  return ProxyFunction;\r\n}\r\n\r\n/* global segmentsLengthPool, defaultCurveSegments, createSizedArray, bmPow, bmSqrt, bmFloor, createTypedArray, bezierLengthPool */\r\n/* exported bez */\r\n\r\nfunction bezFunction() {\r\n  var math = Math;\r\n\r\n  function pointOnLine2D(x1, y1, x2, y2, x3, y3) {\r\n    var det1 = (x1 * y2) + (y1 * x3) + (x2 * y3) - (x3 * y2) - (y3 * x1) - (x2 * y1);\r\n    return det1 > -0.001 && det1 < 0.001;\r\n  }\r\n\r\n  function pointOnLine3D(x1, y1, z1, x2, y2, z2, x3, y3, z3) {\r\n    if (z1 === 0 && z2 === 0 && z3 === 0) {\r\n      return pointOnLine2D(x1, y1, x2, y2, x3, y3);\r\n    }\r\n    var dist1 = math.sqrt(math.pow(x2 - x1, 2) + math.pow(y2 - y1, 2) + math.pow(z2 - z1, 2));\r\n    var dist2 = math.sqrt(math.pow(x3 - x1, 2) + math.pow(y3 - y1, 2) + math.pow(z3 - z1, 2));\r\n    var dist3 = math.sqrt(math.pow(x3 - x2, 2) + math.pow(y3 - y2, 2) + math.pow(z3 - z2, 2));\r\n    var diffDist;\r\n    if (dist1 > dist2) {\r\n      if (dist1 > dist3) {\r\n        diffDist = dist1 - dist2 - dist3;\r\n      } else {\r\n        diffDist = dist3 - dist2 - dist1;\r\n      }\r\n    } else if (dist3 > dist2) {\r\n      diffDist = dist3 - dist2 - dist1;\r\n    } else {\r\n      diffDist = dist2 - dist1 - dist3;\r\n    }\r\n    return diffDist > -0.0001 && diffDist < 0.0001;\r\n  }\r\n\r\n  var getBezierLength = (function () {\r\n    return function (pt1, pt2, pt3, pt4) {\r\n      var curveSegments = defaultCurveSegments;\r\n      var k;\r\n      var i;\r\n      var len;\r\n      var ptCoord;\r\n      var perc;\r\n      var addedLength = 0;\r\n      var ptDistance;\r\n      var point = [];\r\n      var lastPoint = [];\r\n      var lengthData = bezierLengthPool.newElement();\r\n      len = pt3.length;\r\n      for (k = 0; k < curveSegments; k += 1) {\r\n        perc = k / (curveSegments - 1);\r\n        ptDistance = 0;\r\n        for (i = 0; i < len; i += 1) {\r\n          ptCoord = bmPow(1 - perc, 3) * pt1[i] + 3 * bmPow(1 - perc, 2) * perc * pt3[i] + 3 * (1 - perc) * bmPow(perc, 2) * pt4[i] + bmPow(perc, 3) * pt2[i];\r\n          point[i] = ptCoord;\r\n          if (lastPoint[i] !== null) {\r\n            ptDistance += bmPow(point[i] - lastPoint[i], 2);\r\n          }\r\n          lastPoint[i] = point[i];\r\n        }\r\n        if (ptDistance) {\r\n          ptDistance = bmSqrt(ptDistance);\r\n          addedLength += ptDistance;\r\n        }\r\n        lengthData.percents[k] = perc;\r\n        lengthData.lengths[k] = addedLength;\r\n      }\r\n      lengthData.addedLength = addedLength;\r\n      return lengthData;\r\n    };\r\n  }());\r\n\r\n  function getSegmentsLength(shapeData) {\r\n    var segmentsLength = segmentsLengthPool.newElement();\r\n    var closed = shapeData.c;\r\n    var pathV = shapeData.v;\r\n    var pathO = shapeData.o;\r\n    var pathI = shapeData.i;\r\n    var i;\r\n    var len = shapeData._length;\r\n    var lengths = segmentsLength.lengths;\r\n    var totalLength = 0;\r\n    for (i = 0; i < len - 1; i += 1) {\r\n      lengths[i] = getBezierLength(pathV[i], pathV[i + 1], pathO[i], pathI[i + 1]);\r\n      totalLength += lengths[i].addedLength;\r\n    }\r\n    if (closed && len) {\r\n      lengths[i] = getBezierLength(pathV[i], pathV[0], pathO[i], pathI[0]);\r\n      totalLength += lengths[i].addedLength;\r\n    }\r\n    segmentsLength.totalLength = totalLength;\r\n    return segmentsLength;\r\n  }\r\n\r\n  function BezierData(length) {\r\n    this.segmentLength = 0;\r\n    this.points = new Array(length);\r\n  }\r\n\r\n  function PointData(partial, point) {\r\n    this.partialLength = partial;\r\n    this.point = point;\r\n  }\r\n\r\n  var buildBezierData = (function () {\r\n    var storedData = {};\r\n\r\n    return function (pt1, pt2, pt3, pt4) {\r\n      var bezierName = (pt1[0] + '_' + pt1[1] + '_' + pt2[0] + '_' + pt2[1] + '_' + pt3[0] + '_' + pt3[1] + '_' + pt4[0] + '_' + pt4[1]).replace(/\\./g, 'p');\r\n      if (!storedData[bezierName]) {\r\n        var curveSegments = defaultCurveSegments;\r\n        var k;\r\n        var i;\r\n        var len;\r\n        var ptCoord;\r\n        var perc;\r\n        var addedLength = 0;\r\n        var ptDistance;\r\n        var point;\r\n        var lastPoint = null;\r\n        if (pt1.length === 2 && (pt1[0] !== pt2[0] || pt1[1] !== pt2[1]) && pointOnLine2D(pt1[0], pt1[1], pt2[0], pt2[1], pt1[0] + pt3[0], pt1[1] + pt3[1]) && pointOnLine2D(pt1[0], pt1[1], pt2[0], pt2[1], pt2[0] + pt4[0], pt2[1] + pt4[1])) {\r\n          curveSegments = 2;\r\n        }\r\n        var bezierData = new BezierData(curveSegments);\r\n        len = pt3.length;\r\n        for (k = 0; k < curveSegments; k += 1) {\r\n          point = createSizedArray(len);\r\n          perc = k / (curveSegments - 1);\r\n          ptDistance = 0;\r\n          for (i = 0; i < len; i += 1) {\r\n            ptCoord = bmPow(1 - perc, 3) * pt1[i] + 3 * bmPow(1 - perc, 2) * perc * (pt1[i] + pt3[i]) + 3 * (1 - perc) * bmPow(perc, 2) * (pt2[i] + pt4[i]) + bmPow(perc, 3) * pt2[i];\r\n            point[i] = ptCoord;\r\n            if (lastPoint !== null) {\r\n              ptDistance += bmPow(point[i] - lastPoint[i], 2);\r\n            }\r\n          }\r\n          ptDistance = bmSqrt(ptDistance);\r\n          addedLength += ptDistance;\r\n          bezierData.points[k] = new PointData(ptDistance, point);\r\n          lastPoint = point;\r\n        }\r\n        bezierData.segmentLength = addedLength;\r\n        storedData[bezierName] = bezierData;\r\n      }\r\n      return storedData[bezierName];\r\n    };\r\n  }());\r\n\r\n  function getDistancePerc(perc, bezierData) {\r\n    var percents = bezierData.percents;\r\n    var lengths = bezierData.lengths;\r\n    var len = percents.length;\r\n    var initPos = bmFloor((len - 1) * perc);\r\n    var lengthPos = perc * bezierData.addedLength;\r\n    var lPerc = 0;\r\n    if (initPos === len - 1 || initPos === 0 || lengthPos === lengths[initPos]) {\r\n      return percents[initPos];\r\n    }\r\n    var dir = lengths[initPos] > lengthPos ? -1 : 1;\r\n    var flag = true;\r\n    while (flag) {\r\n      if (lengths[initPos] <= lengthPos && lengths[initPos + 1] > lengthPos) {\r\n        lPerc = (lengthPos - lengths[initPos]) / (lengths[initPos + 1] - lengths[initPos]);\r\n        flag = false;\r\n      } else {\r\n        initPos += dir;\r\n      }\r\n      if (initPos < 0 || initPos >= len - 1) {\r\n        // FIX for TypedArrays that don't store floating point values with enough accuracy\r\n        if (initPos === len - 1) {\r\n          return percents[initPos];\r\n        }\r\n        flag = false;\r\n      }\r\n    }\r\n    return percents[initPos] + (percents[initPos + 1] - percents[initPos]) * lPerc;\r\n  }\r\n\r\n  function getPointInSegment(pt1, pt2, pt3, pt4, percent, bezierData) {\r\n    var t1 = getDistancePerc(percent, bezierData);\r\n    var u1 = 1 - t1;\r\n    var ptX = math.round((u1 * u1 * u1 * pt1[0] + (t1 * u1 * u1 + u1 * t1 * u1 + u1 * u1 * t1) * pt3[0] + (t1 * t1 * u1 + u1 * t1 * t1 + t1 * u1 * t1) * pt4[0] + t1 * t1 * t1 * pt2[0]) * 1000) / 1000;\r\n    var ptY = math.round((u1 * u1 * u1 * pt1[1] + (t1 * u1 * u1 + u1 * t1 * u1 + u1 * u1 * t1) * pt3[1] + (t1 * t1 * u1 + u1 * t1 * t1 + t1 * u1 * t1) * pt4[1] + t1 * t1 * t1 * pt2[1]) * 1000) / 1000;\r\n    return [ptX, ptY];\r\n  }\r\n\r\n  var bezierSegmentPoints = createTypedArray('float32', 8);\r\n\r\n  function getNewSegment(pt1, pt2, pt3, pt4, startPerc, endPerc, bezierData) {\r\n    if (startPerc < 0) {\r\n      startPerc = 0;\r\n    } else if (startPerc > 1) {\r\n      startPerc = 1;\r\n    }\r\n    var t0 = getDistancePerc(startPerc, bezierData);\r\n    endPerc = endPerc > 1 ? 1 : endPerc;\r\n    var t1 = getDistancePerc(endPerc, bezierData);\r\n    var i;\r\n    var len = pt1.length;\r\n    var u0 = 1 - t0;\r\n    var u1 = 1 - t1;\r\n    var u0u0u0 = u0 * u0 * u0;\r\n    var t0u0u0_3 = t0 * u0 * u0 * 3; // eslint-disable-line camelcase\r\n    var t0t0u0_3 = t0 * t0 * u0 * 3; // eslint-disable-line camelcase\r\n    var t0t0t0 = t0 * t0 * t0;\r\n    //\r\n    var u0u0u1 = u0 * u0 * u1;\r\n    var t0u0u1_3 = t0 * u0 * u1 + u0 * t0 * u1 + u0 * u0 * t1; // eslint-disable-line camelcase\r\n    var t0t0u1_3 = t0 * t0 * u1 + u0 * t0 * t1 + t0 * u0 * t1; // eslint-disable-line camelcase\r\n    var t0t0t1 = t0 * t0 * t1;\r\n    //\r\n    var u0u1u1 = u0 * u1 * u1;\r\n    var t0u1u1_3 = t0 * u1 * u1 + u0 * t1 * u1 + u0 * u1 * t1; // eslint-disable-line camelcase\r\n    var t0t1u1_3 = t0 * t1 * u1 + u0 * t1 * t1 + t0 * u1 * t1; // eslint-disable-line camelcase\r\n    var t0t1t1 = t0 * t1 * t1;\r\n    //\r\n    var u1u1u1 = u1 * u1 * u1;\r\n    var t1u1u1_3 = t1 * u1 * u1 + u1 * t1 * u1 + u1 * u1 * t1; // eslint-disable-line camelcase\r\n    var t1t1u1_3 = t1 * t1 * u1 + u1 * t1 * t1 + t1 * u1 * t1; // eslint-disable-line camelcase\r\n    var t1t1t1 = t1 * t1 * t1;\r\n    for (i = 0; i < len; i += 1) {\r\n      bezierSegmentPoints[i * 4] = math.round((u0u0u0 * pt1[i] + t0u0u0_3 * pt3[i] + t0t0u0_3 * pt4[i] + t0t0t0 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\r\n      bezierSegmentPoints[i * 4 + 1] = math.round((u0u0u1 * pt1[i] + t0u0u1_3 * pt3[i] + t0t0u1_3 * pt4[i] + t0t0t1 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\r\n      bezierSegmentPoints[i * 4 + 2] = math.round((u0u1u1 * pt1[i] + t0u1u1_3 * pt3[i] + t0t1u1_3 * pt4[i] + t0t1t1 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\r\n      bezierSegmentPoints[i * 4 + 3] = math.round((u1u1u1 * pt1[i] + t1u1u1_3 * pt3[i] + t1t1u1_3 * pt4[i] + t1t1t1 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\r\n    }\r\n\r\n    return bezierSegmentPoints;\r\n  }\r\n\r\n  return {\r\n    getSegmentsLength: getSegmentsLength,\r\n    getNewSegment: getNewSegment,\r\n    getPointInSegment: getPointInSegment,\r\n    buildBezierData: buildBezierData,\r\n    pointOnLine2D: pointOnLine2D,\r\n    pointOnLine3D: pointOnLine3D,\r\n  };\r\n}\r\n\r\nvar bez = bezFunction();\r\n\r\n/* global _useWebWorker */\r\n\r\nvar dataManager = (function () {\r\n  var _counterId = 1;\r\n  var processes = [];\r\n  var workerFn;\r\n  var workerInstance;\r\n  var workerProxy = {\r\n    onmessage: function () {\r\n\r\n    },\r\n    postMessage: function (path) {\r\n      workerFn({\r\n        data: path,\r\n      });\r\n    },\r\n  };\r\n  var _workerSelf = {\r\n    postMessage: function (data) {\r\n      workerProxy.onmessage({\r\n        data: data,\r\n      });\r\n    },\r\n  };\r\n  function createWorker(fn) {\r\n    if (window.Worker && window.Blob && _useWebWorker) {\r\n      var blob = new Blob(['var _workerSelf = self; self.onmessage = ', fn.toString()], { type: 'text/javascript' });\r\n      // var blob = new Blob(['self.onmessage = ', fn.toString()], { type: 'text/javascript' });\r\n      var url = URL.createObjectURL(blob);\r\n      return new Worker(url);\r\n    }\r\n    workerFn = fn;\r\n    return workerProxy;\r\n  }\r\n\r\n  function setupWorker() {\r\n    if (!workerInstance) {\r\n      workerInstance = createWorker(function workerStart(e) {\r\n        /* exported dataManager */\r\n\r\n        function dataFunctionManager() {\r\n          // var tCanvasHelper = createTag('canvas').getContext('2d');\r\n\r\n          function completeLayers(layers, comps) {\r\n            var layerData;\r\n            var i;\r\n            var len = layers.length;\r\n            var j;\r\n            var jLen;\r\n            var k;\r\n            var kLen;\r\n            for (i = 0; i < len; i += 1) {\r\n              layerData = layers[i];\r\n              if (('ks' in layerData) && !layerData.completed) {\r\n                layerData.completed = true;\r\n                if (layerData.tt) {\r\n                  layers[i - 1].td = layerData.tt;\r\n                }\r\n                if (layerData.hasMask) {\r\n                  var maskProps = layerData.masksProperties;\r\n                  jLen = maskProps.length;\r\n                  for (j = 0; j < jLen; j += 1) {\r\n                    if (maskProps[j].pt.k.i) {\r\n                      convertPathsToAbsoluteValues(maskProps[j].pt.k);\r\n                    } else {\r\n                      kLen = maskProps[j].pt.k.length;\r\n                      for (k = 0; k < kLen; k += 1) {\r\n                        if (maskProps[j].pt.k[k].s) {\r\n                          convertPathsToAbsoluteValues(maskProps[j].pt.k[k].s[0]);\r\n                        }\r\n                        if (maskProps[j].pt.k[k].e) {\r\n                          convertPathsToAbsoluteValues(maskProps[j].pt.k[k].e[0]);\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n                if (layerData.ty === 0) {\r\n                  layerData.layers = findCompLayers(layerData.refId, comps);\r\n                  completeLayers(layerData.layers, comps);\r\n                } else if (layerData.ty === 4) {\r\n                  completeShapes(layerData.shapes);\r\n                } else if (layerData.ty === 5) {\r\n                  completeText(layerData);\r\n                }\r\n              }\r\n            }\r\n          }\r\n\r\n          function findCompLayers(id, comps) {\r\n            var i = 0;\r\n            var len = comps.length;\r\n            while (i < len) {\r\n              if (comps[i].id === id) {\r\n                if (!comps[i].layers.__used) {\r\n                  comps[i].layers.__used = true;\r\n                  return comps[i].layers;\r\n                }\r\n                return JSON.parse(JSON.stringify(comps[i].layers));\r\n              }\r\n              i += 1;\r\n            }\r\n            return null;\r\n          }\r\n\r\n          function completeShapes(arr) {\r\n            var i;\r\n            var len = arr.length;\r\n            var j;\r\n            var jLen;\r\n            for (i = len - 1; i >= 0; i -= 1) {\r\n              if (arr[i].ty === 'sh') {\r\n                if (arr[i].ks.k.i) {\r\n                  convertPathsToAbsoluteValues(arr[i].ks.k);\r\n                } else {\r\n                  jLen = arr[i].ks.k.length;\r\n                  for (j = 0; j < jLen; j += 1) {\r\n                    if (arr[i].ks.k[j].s) {\r\n                      convertPathsToAbsoluteValues(arr[i].ks.k[j].s[0]);\r\n                    }\r\n                    if (arr[i].ks.k[j].e) {\r\n                      convertPathsToAbsoluteValues(arr[i].ks.k[j].e[0]);\r\n                    }\r\n                  }\r\n                }\r\n              } else if (arr[i].ty === 'gr') {\r\n                completeShapes(arr[i].it);\r\n              }\r\n            }\r\n          }\r\n\r\n          function convertPathsToAbsoluteValues(path) {\r\n            var i;\r\n            var len = path.i.length;\r\n            for (i = 0; i < len; i += 1) {\r\n              path.i[i][0] += path.v[i][0];\r\n              path.i[i][1] += path.v[i][1];\r\n              path.o[i][0] += path.v[i][0];\r\n              path.o[i][1] += path.v[i][1];\r\n            }\r\n          }\r\n\r\n          function checkVersion(minimum, animVersionString) {\r\n            var animVersion = animVersionString ? animVersionString.split('.') : [100, 100, 100];\r\n            if (minimum[0] > animVersion[0]) {\r\n              return true;\r\n            } if (animVersion[0] > minimum[0]) {\r\n              return false;\r\n            }\r\n            if (minimum[1] > animVersion[1]) {\r\n              return true;\r\n            } if (animVersion[1] > minimum[1]) {\r\n              return false;\r\n            }\r\n            if (minimum[2] > animVersion[2]) {\r\n              return true;\r\n            } if (animVersion[2] > minimum[2]) {\r\n              return false;\r\n            }\r\n            return null;\r\n          }\r\n\r\n          var checkText = (function () {\r\n            var minimumVersion = [4, 4, 14];\r\n\r\n            function updateTextLayer(textLayer) {\r\n              var documentData = textLayer.t.d;\r\n              textLayer.t.d = {\r\n                k: [\r\n                  {\r\n                    s: documentData,\r\n                    t: 0,\r\n                  },\r\n                ],\r\n              };\r\n            }\r\n\r\n            function iterateLayers(layers) {\r\n              var i;\r\n              var len = layers.length;\r\n              for (i = 0; i < len; i += 1) {\r\n                if (layers[i].ty === 5) {\r\n                  updateTextLayer(layers[i]);\r\n                }\r\n              }\r\n            }\r\n\r\n            return function (animationData) {\r\n              if (checkVersion(minimumVersion, animationData.v)) {\r\n                iterateLayers(animationData.layers);\r\n                if (animationData.assets) {\r\n                  var i;\r\n                  var len = animationData.assets.length;\r\n                  for (i = 0; i < len; i += 1) {\r\n                    if (animationData.assets[i].layers) {\r\n                      iterateLayers(animationData.assets[i].layers);\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            };\r\n          }());\r\n\r\n          var checkChars = (function () {\r\n            var minimumVersion = [4, 7, 99];\r\n            return function (animationData) {\r\n              if (animationData.chars && !checkVersion(minimumVersion, animationData.v)) {\r\n                var i;\r\n                var len = animationData.chars.length;\r\n                var j;\r\n                var jLen;\r\n                var pathData;\r\n                var paths;\r\n                for (i = 0; i < len; i += 1) {\r\n                  if (animationData.chars[i].data && animationData.chars[i].data.shapes) {\r\n                    paths = animationData.chars[i].data.shapes[0].it;\r\n                    jLen = paths.length;\r\n\r\n                    for (j = 0; j < jLen; j += 1) {\r\n                      pathData = paths[j].ks.k;\r\n                      if (!pathData.__converted) {\r\n                        convertPathsToAbsoluteValues(paths[j].ks.k);\r\n                        pathData.__converted = true;\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            };\r\n          }());\r\n\r\n          var checkPathProperties = (function () {\r\n            var minimumVersion = [5, 7, 15];\r\n\r\n            function updateTextLayer(textLayer) {\r\n              var pathData = textLayer.t.p;\r\n              if (typeof pathData.a === 'number') {\r\n                pathData.a = {\r\n                  a: 0,\r\n                  k: pathData.a,\r\n                };\r\n              }\r\n              if (typeof pathData.p === 'number') {\r\n                pathData.p = {\r\n                  a: 0,\r\n                  k: pathData.p,\r\n                };\r\n              }\r\n              if (typeof pathData.r === 'number') {\r\n                pathData.r = {\r\n                  a: 0,\r\n                  k: pathData.r,\r\n                };\r\n              }\r\n            }\r\n\r\n            function iterateLayers(layers) {\r\n              var i;\r\n              var len = layers.length;\r\n              for (i = 0; i < len; i += 1) {\r\n                if (layers[i].ty === 5) {\r\n                  updateTextLayer(layers[i]);\r\n                }\r\n              }\r\n            }\r\n\r\n            return function (animationData) {\r\n              if (checkVersion(minimumVersion, animationData.v)) {\r\n                iterateLayers(animationData.layers);\r\n                if (animationData.assets) {\r\n                  var i;\r\n                  var len = animationData.assets.length;\r\n                  for (i = 0; i < len; i += 1) {\r\n                    if (animationData.assets[i].layers) {\r\n                      iterateLayers(animationData.assets[i].layers);\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            };\r\n          }());\r\n\r\n          var checkColors = (function () {\r\n            var minimumVersion = [4, 1, 9];\r\n\r\n            function iterateShapes(shapes) {\r\n              var i;\r\n              var len = shapes.length;\r\n              var j;\r\n              var jLen;\r\n              for (i = 0; i < len; i += 1) {\r\n                if (shapes[i].ty === 'gr') {\r\n                  iterateShapes(shapes[i].it);\r\n                } else if (shapes[i].ty === 'fl' || shapes[i].ty === 'st') {\r\n                  if (shapes[i].c.k && shapes[i].c.k[0].i) {\r\n                    jLen = shapes[i].c.k.length;\r\n                    for (j = 0; j < jLen; j += 1) {\r\n                      if (shapes[i].c.k[j].s) {\r\n                        shapes[i].c.k[j].s[0] /= 255;\r\n                        shapes[i].c.k[j].s[1] /= 255;\r\n                        shapes[i].c.k[j].s[2] /= 255;\r\n                        shapes[i].c.k[j].s[3] /= 255;\r\n                      }\r\n                      if (shapes[i].c.k[j].e) {\r\n                        shapes[i].c.k[j].e[0] /= 255;\r\n                        shapes[i].c.k[j].e[1] /= 255;\r\n                        shapes[i].c.k[j].e[2] /= 255;\r\n                        shapes[i].c.k[j].e[3] /= 255;\r\n                      }\r\n                    }\r\n                  } else {\r\n                    shapes[i].c.k[0] /= 255;\r\n                    shapes[i].c.k[1] /= 255;\r\n                    shapes[i].c.k[2] /= 255;\r\n                    shapes[i].c.k[3] /= 255;\r\n                  }\r\n                }\r\n              }\r\n            }\r\n\r\n            function iterateLayers(layers) {\r\n              var i;\r\n              var len = layers.length;\r\n              for (i = 0; i < len; i += 1) {\r\n                if (layers[i].ty === 4) {\r\n                  iterateShapes(layers[i].shapes);\r\n                }\r\n              }\r\n            }\r\n\r\n            return function (animationData) {\r\n              if (checkVersion(minimumVersion, animationData.v)) {\r\n                iterateLayers(animationData.layers);\r\n                if (animationData.assets) {\r\n                  var i;\r\n                  var len = animationData.assets.length;\r\n                  for (i = 0; i < len; i += 1) {\r\n                    if (animationData.assets[i].layers) {\r\n                      iterateLayers(animationData.assets[i].layers);\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            };\r\n          }());\r\n\r\n          var checkShapes = (function () {\r\n            var minimumVersion = [4, 4, 18];\r\n\r\n            function completeClosingShapes(arr) {\r\n              var i;\r\n              var len = arr.length;\r\n              var j;\r\n              var jLen;\r\n              for (i = len - 1; i >= 0; i -= 1) {\r\n                if (arr[i].ty === 'sh') {\r\n                  if (arr[i].ks.k.i) {\r\n                    arr[i].ks.k.c = arr[i].closed;\r\n                  } else {\r\n                    jLen = arr[i].ks.k.length;\r\n                    for (j = 0; j < jLen; j += 1) {\r\n                      if (arr[i].ks.k[j].s) {\r\n                        arr[i].ks.k[j].s[0].c = arr[i].closed;\r\n                      }\r\n                      if (arr[i].ks.k[j].e) {\r\n                        arr[i].ks.k[j].e[0].c = arr[i].closed;\r\n                      }\r\n                    }\r\n                  }\r\n                } else if (arr[i].ty === 'gr') {\r\n                  completeClosingShapes(arr[i].it);\r\n                }\r\n              }\r\n            }\r\n\r\n            function iterateLayers(layers) {\r\n              var layerData;\r\n              var i;\r\n              var len = layers.length;\r\n              var j;\r\n              var jLen;\r\n              var k;\r\n              var kLen;\r\n              for (i = 0; i < len; i += 1) {\r\n                layerData = layers[i];\r\n                if (layerData.hasMask) {\r\n                  var maskProps = layerData.masksProperties;\r\n                  jLen = maskProps.length;\r\n                  for (j = 0; j < jLen; j += 1) {\r\n                    if (maskProps[j].pt.k.i) {\r\n                      maskProps[j].pt.k.c = maskProps[j].cl;\r\n                    } else {\r\n                      kLen = maskProps[j].pt.k.length;\r\n                      for (k = 0; k < kLen; k += 1) {\r\n                        if (maskProps[j].pt.k[k].s) {\r\n                          maskProps[j].pt.k[k].s[0].c = maskProps[j].cl;\r\n                        }\r\n                        if (maskProps[j].pt.k[k].e) {\r\n                          maskProps[j].pt.k[k].e[0].c = maskProps[j].cl;\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n                if (layerData.ty === 4) {\r\n                  completeClosingShapes(layerData.shapes);\r\n                }\r\n              }\r\n            }\r\n\r\n            return function (animationData) {\r\n              if (checkVersion(minimumVersion, animationData.v)) {\r\n                iterateLayers(animationData.layers);\r\n                if (animationData.assets) {\r\n                  var i;\r\n                  var len = animationData.assets.length;\r\n                  for (i = 0; i < len; i += 1) {\r\n                    if (animationData.assets[i].layers) {\r\n                      iterateLayers(animationData.assets[i].layers);\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            };\r\n          }());\r\n\r\n          function completeData(animationData) {\r\n            if (animationData.__complete) {\r\n              return;\r\n            }\r\n            checkColors(animationData);\r\n            checkText(animationData);\r\n            checkChars(animationData);\r\n            checkPathProperties(animationData);\r\n            checkShapes(animationData);\r\n            completeLayers(animationData.layers, animationData.assets);\r\n            animationData.__complete = true;\r\n          }\r\n\r\n          function completeText(data) {\r\n            if (data.t.a.length === 0 && !('m' in data.t.p)) {\r\n              data.singleShape = true;\r\n            }\r\n          }\r\n\r\n          var moduleOb = {};\r\n          moduleOb.completeData = completeData;\r\n          moduleOb.checkColors = checkColors;\r\n          moduleOb.checkChars = checkChars;\r\n          moduleOb.checkPathProperties = checkPathProperties;\r\n          moduleOb.checkShapes = checkShapes;\r\n          moduleOb.completeLayers = completeLayers;\r\n\r\n          return moduleOb;\r\n        }\r\n        if (!_workerSelf.dataManager) {\r\n          _workerSelf.dataManager = dataFunctionManager();\r\n        }\r\n\r\n        /* exported assetLoader */\r\n        if (!_workerSelf.assetLoader) {\r\n          _workerSelf.assetLoader = (function () {\r\n            function formatResponse(xhr) {\r\n              // using typeof doubles the time of execution of this method,\r\n              // so if available, it's better to use the header to validate the type\r\n              var contentTypeHeader = xhr.getResponseHeader('content-type');\r\n              if (contentTypeHeader && xhr.responseType === 'json' && contentTypeHeader.indexOf('json') !== -1) {\r\n                return xhr.response;\r\n              }\r\n              if (xhr.response && typeof xhr.response === 'object') {\r\n                return xhr.response;\r\n              } if (xhr.response && typeof xhr.response === 'string') {\r\n                return JSON.parse(xhr.response);\r\n              } if (xhr.responseText) {\r\n                return JSON.parse(xhr.responseText);\r\n              }\r\n              return null;\r\n            }\r\n\r\n            function loadAsset(path, fullPath, callback, errorCallback) {\r\n              var response;\r\n              var xhr = new XMLHttpRequest();\r\n              // set responseType after calling open or IE will break.\r\n              try {\r\n                // This crashes on Android WebView prior to KitKat\r\n                xhr.responseType = 'json';\r\n              } catch (err) {} // eslint-disable-line no-empty\r\n              xhr.onreadystatechange = function () {\r\n                if (xhr.readyState === 4) {\r\n                  if (xhr.status === 200) {\r\n                    response = formatResponse(xhr);\r\n                    callback(response);\r\n                  } else {\r\n                    try {\r\n                      response = formatResponse(xhr);\r\n                      callback(response);\r\n                    } catch (err) {\r\n                      if (errorCallback) {\r\n                        errorCallback(err);\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              };\r\n              try {\r\n                xhr.open('GET', path, true);\r\n              } catch (error) {\r\n                xhr.open('GET', fullPath + '/' + path, true);\r\n              }\r\n              xhr.send();\r\n            }\r\n            return {\r\n              load: loadAsset,\r\n            };\r\n          }());\r\n        }\r\n\r\n        if (e.data.type === 'loadAnimation') {\r\n          _workerSelf.assetLoader.load(\r\n            e.data.path,\r\n            e.data.fullPath,\r\n            function (data) {\r\n              _workerSelf.dataManager.completeData(data);\r\n              _workerSelf.postMessage({\r\n                id: e.data.id,\r\n                payload: data,\r\n                status: 'success',\r\n              });\r\n            },\r\n            function () {\r\n              _workerSelf.postMessage({\r\n                id: e.data.id,\r\n                status: 'error',\r\n              });\r\n            }\r\n          );\r\n        } else if (e.data.type === 'complete') {\r\n          var animation = e.data.animation;\r\n          _workerSelf.dataManager.completeData(animation);\r\n          _workerSelf.postMessage({\r\n            id: e.data.id,\r\n            payload: animation,\r\n            status: 'success',\r\n          });\r\n        } else if (e.data.type === 'loadData') {\r\n          _workerSelf.assetLoader.load(\r\n            e.data.path,\r\n            e.data.fullPath,\r\n            function (data) {\r\n              _workerSelf.postMessage({\r\n                id: e.data.id,\r\n                payload: data,\r\n                status: 'success',\r\n              });\r\n            },\r\n            function () {\r\n              _workerSelf.postMessage({\r\n                id: e.data.id,\r\n                status: 'error',\r\n              });\r\n            }\r\n          );\r\n        }\r\n      });\r\n\r\n      workerInstance.onmessage = function (event) {\r\n        var data = event.data;\r\n        var id = data.id;\r\n        var process = processes[id];\r\n        processes[id] = null;\r\n        if (data.status === 'success') {\r\n          process.onComplete(data.payload);\r\n        } else if (process.onError) {\r\n          process.onError();\r\n        }\r\n      };\r\n    }\r\n  }\r\n\r\n  function createProcess(onComplete, onError) {\r\n    _counterId += 1;\r\n    var id = 'processId_' + _counterId;\r\n    processes[id] = {\r\n      onComplete: onComplete,\r\n      onError: onError,\r\n    };\r\n    return id;\r\n  }\r\n\r\n  function loadAnimation(path, onComplete, onError) {\r\n    setupWorker();\r\n    var processId = createProcess(onComplete, onError);\r\n    workerInstance.postMessage({\r\n      type: 'loadAnimation',\r\n      path: path,\r\n      fullPath: window.location.origin + window.location.pathname,\r\n      id: processId,\r\n    });\r\n  }\r\n\r\n  function loadData(path, onComplete, onError) {\r\n    setupWorker();\r\n    var processId = createProcess(onComplete, onError);\r\n    workerInstance.postMessage({\r\n      type: 'loadData',\r\n      path: path,\r\n      fullPath: window.location.origin + window.location.pathname,\r\n      id: processId,\r\n    });\r\n  }\r\n\r\n  function completeAnimation(anim, onComplete, onError) {\r\n    setupWorker();\r\n    var processId = createProcess(onComplete, onError);\r\n    workerInstance.postMessage({\r\n      type: 'complete',\r\n      animation: anim,\r\n      id: processId,\r\n    });\r\n  }\r\n\r\n  return {\r\n    loadAnimation: loadAnimation,\r\n    loadData: loadData,\r\n    completeAnimation: completeAnimation,\r\n  };\r\n}());\r\n\r\n/* exported getFontProperties */\r\n\r\nfunction getFontProperties(fontData) {\r\n  var styles = fontData.fStyle ? fontData.fStyle.split(' ') : [];\r\n\r\n  var fWeight = 'normal'; var\r\n    fStyle = 'normal';\r\n  var len = styles.length;\r\n  var styleName;\r\n  for (var i = 0; i < len; i += 1) {\r\n    styleName = styles[i].toLowerCase();\r\n    switch (styleName) {\r\n      case 'italic':\r\n        fStyle = 'italic';\r\n        break;\r\n      case 'bold':\r\n        fWeight = '700';\r\n        break;\r\n      case 'black':\r\n        fWeight = '900';\r\n        break;\r\n      case 'medium':\r\n        fWeight = '500';\r\n        break;\r\n      case 'regular':\r\n      case 'normal':\r\n        fWeight = '400';\r\n        break;\r\n      case 'light':\r\n      case 'thin':\r\n        fWeight = '200';\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  return {\r\n    style: fStyle,\r\n    weight: fontData.fWeight || fWeight,\r\n  };\r\n}\r\n\r\n/* global createNS, createTag, getFontProperties */\r\n/* exported FontManager */\r\n\r\nvar FontManager = (function () {\r\n  var maxWaitingTime = 5000;\r\n  var emptyChar = {\r\n    w: 0,\r\n    size: 0,\r\n    shapes: [],\r\n  };\r\n  var combinedCharacters = [];\r\n  // Hindi characters\r\n  combinedCharacters = combinedCharacters.concat([2304, 2305, 2306, 2307, 2362, 2363, 2364, 2364, 2366,\r\n    2367, 2368, 2369, 2370, 2371, 2372, 2373, 2374, 2375, 2376, 2377, 2378, 2379,\r\n    2380, 2381, 2382, 2383, 2387, 2388, 2389, 2390, 2391, 2402, 2403]);\r\n\r\n  var surrogateModifiers = [\r\n    'd83cdffb',\r\n    'd83cdffc',\r\n    'd83cdffd',\r\n    'd83cdffe',\r\n    'd83cdfff',\r\n  ];\r\n\r\n  var zeroWidthJoiner = [65039, 8205];\r\n\r\n  function trimFontOptions(font) {\r\n    var familyArray = font.split(',');\r\n    var i;\r\n    var len = familyArray.length;\r\n    var enabledFamilies = [];\r\n    for (i = 0; i < len; i += 1) {\r\n      if (familyArray[i] !== 'sans-serif' && familyArray[i] !== 'monospace') {\r\n        enabledFamilies.push(familyArray[i]);\r\n      }\r\n    }\r\n    return enabledFamilies.join(',');\r\n  }\r\n\r\n  function setUpNode(font, family) {\r\n    var parentNode = createTag('span');\r\n    // Node is invisible to screen readers.\r\n    parentNode.setAttribute('aria-hidden', true);\r\n    parentNode.style.fontFamily = family;\r\n    var node = createTag('span');\r\n    // Characters that vary significantly among different fonts\r\n    node.innerText = 'giItT1WQy@!-/#';\r\n    // Visible - so we can measure it - but not on the screen\r\n    parentNode.style.position = 'absolute';\r\n    parentNode.style.left = '-10000px';\r\n    parentNode.style.top = '-10000px';\r\n    // Large font size makes even subtle changes obvious\r\n    parentNode.style.fontSize = '300px';\r\n    // Reset any font properties\r\n    parentNode.style.fontVariant = 'normal';\r\n    parentNode.style.fontStyle = 'normal';\r\n    parentNode.style.fontWeight = 'normal';\r\n    parentNode.style.letterSpacing = '0';\r\n    parentNode.appendChild(node);\r\n    document.body.appendChild(parentNode);\r\n\r\n    // Remember width with no applied web font\r\n    var width = node.offsetWidth;\r\n    node.style.fontFamily = trimFontOptions(font) + ', ' + family;\r\n    return { node: node, w: width, parent: parentNode };\r\n  }\r\n\r\n  function checkLoadedFonts() {\r\n    var i;\r\n    var len = this.fonts.length;\r\n    var node;\r\n    var w;\r\n    var loadedCount = len;\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.fonts[i].loaded) {\r\n        loadedCount -= 1;\r\n      } else if (this.fonts[i].fOrigin === 'n' || this.fonts[i].origin === 0) {\r\n        this.fonts[i].loaded = true;\r\n      } else {\r\n        node = this.fonts[i].monoCase.node;\r\n        w = this.fonts[i].monoCase.w;\r\n        if (node.offsetWidth !== w) {\r\n          loadedCount -= 1;\r\n          this.fonts[i].loaded = true;\r\n        } else {\r\n          node = this.fonts[i].sansCase.node;\r\n          w = this.fonts[i].sansCase.w;\r\n          if (node.offsetWidth !== w) {\r\n            loadedCount -= 1;\r\n            this.fonts[i].loaded = true;\r\n          }\r\n        }\r\n        if (this.fonts[i].loaded) {\r\n          this.fonts[i].sansCase.parent.parentNode.removeChild(this.fonts[i].sansCase.parent);\r\n          this.fonts[i].monoCase.parent.parentNode.removeChild(this.fonts[i].monoCase.parent);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (loadedCount !== 0 && Date.now() - this.initTime < maxWaitingTime) {\r\n      setTimeout(this.checkLoadedFontsBinded, 20);\r\n    } else {\r\n      setTimeout(this.setIsLoadedBinded, 10);\r\n    }\r\n  }\r\n\r\n  function createHelper(def, fontData) {\r\n    var tHelper = createNS('text');\r\n    tHelper.style.fontSize = '100px';\r\n    // tHelper.style.fontFamily = fontData.fFamily;\r\n\r\n    var fontProps = getFontProperties(fontData);\r\n    tHelper.setAttribute('font-family', fontData.fFamily);\r\n    tHelper.setAttribute('font-style', fontProps.style);\r\n    tHelper.setAttribute('font-weight', fontProps.weight);\r\n    tHelper.textContent = '1';\r\n    if (fontData.fClass) {\r\n      tHelper.style.fontFamily = 'inherit';\r\n      tHelper.setAttribute('class', fontData.fClass);\r\n    } else {\r\n      tHelper.style.fontFamily = fontData.fFamily;\r\n    }\r\n    def.appendChild(tHelper);\r\n    var tCanvasHelper = createTag('canvas').getContext('2d');\r\n    tCanvasHelper.font = fontData.fWeight + ' ' + fontData.fStyle + ' 100px ' + fontData.fFamily;\r\n    // tCanvasHelper.font = ' 100px '+ fontData.fFamily;\r\n    return tHelper;\r\n  }\r\n\r\n  function addFonts(fontData, defs) {\r\n    if (!fontData) {\r\n      this.isLoaded = true;\r\n      return;\r\n    }\r\n    if (this.chars) {\r\n      this.isLoaded = true;\r\n      this.fonts = fontData.list;\r\n      return;\r\n    }\r\n\r\n    var fontArr = fontData.list;\r\n    var i;\r\n    var len = fontArr.length;\r\n    var _pendingFonts = len;\r\n    for (i = 0; i < len; i += 1) {\r\n      var shouldLoadFont = true;\r\n      var loadedSelector;\r\n      var j;\r\n      fontArr[i].loaded = false;\r\n      fontArr[i].monoCase = setUpNode(fontArr[i].fFamily, 'monospace');\r\n      fontArr[i].sansCase = setUpNode(fontArr[i].fFamily, 'sans-serif');\r\n      if (!fontArr[i].fPath) {\r\n        fontArr[i].loaded = true;\r\n        _pendingFonts -= 1;\r\n      } else if (fontArr[i].fOrigin === 'p' || fontArr[i].origin === 3) {\r\n        loadedSelector = document.querySelectorAll('style[f-forigin=\"p\"][f-family=\"' + fontArr[i].fFamily + '\"], style[f-origin=\"3\"][f-family=\"' + fontArr[i].fFamily + '\"]');\r\n\r\n        if (loadedSelector.length > 0) {\r\n          shouldLoadFont = false;\r\n        }\r\n\r\n        if (shouldLoadFont) {\r\n          var s = createTag('style');\r\n          s.setAttribute('f-forigin', fontArr[i].fOrigin);\r\n          s.setAttribute('f-origin', fontArr[i].origin);\r\n          s.setAttribute('f-family', fontArr[i].fFamily);\r\n          s.type = 'text/css';\r\n          s.innerText = '@font-face {font-family: ' + fontArr[i].fFamily + \"; font-style: normal; src: url('\" + fontArr[i].fPath + \"');}\";\r\n          defs.appendChild(s);\r\n        }\r\n      } else if (fontArr[i].fOrigin === 'g' || fontArr[i].origin === 1) {\r\n        loadedSelector = document.querySelectorAll('link[f-forigin=\"g\"], link[f-origin=\"1\"]');\r\n\r\n        for (j = 0; j < loadedSelector.length; j += 1) {\r\n          if (loadedSelector[j].href.indexOf(fontArr[i].fPath) !== -1) {\r\n            // Font is already loaded\r\n            shouldLoadFont = false;\r\n          }\r\n        }\r\n\r\n        if (shouldLoadFont) {\r\n          var l = createTag('link');\r\n          l.setAttribute('f-forigin', fontArr[i].fOrigin);\r\n          l.setAttribute('f-origin', fontArr[i].origin);\r\n          l.type = 'text/css';\r\n          l.rel = 'stylesheet';\r\n          l.href = fontArr[i].fPath;\r\n          document.body.appendChild(l);\r\n        }\r\n      } else if (fontArr[i].fOrigin === 't' || fontArr[i].origin === 2) {\r\n        loadedSelector = document.querySelectorAll('script[f-forigin=\"t\"], script[f-origin=\"2\"]');\r\n\r\n        for (j = 0; j < loadedSelector.length; j += 1) {\r\n          if (fontArr[i].fPath === loadedSelector[j].src) {\r\n            // Font is already loaded\r\n            shouldLoadFont = false;\r\n          }\r\n        }\r\n\r\n        if (shouldLoadFont) {\r\n          var sc = createTag('link');\r\n          sc.setAttribute('f-forigin', fontArr[i].fOrigin);\r\n          sc.setAttribute('f-origin', fontArr[i].origin);\r\n          sc.setAttribute('rel', 'stylesheet');\r\n          sc.setAttribute('href', fontArr[i].fPath);\r\n          defs.appendChild(sc);\r\n        }\r\n      }\r\n      fontArr[i].helper = createHelper(defs, fontArr[i]);\r\n      fontArr[i].cache = {};\r\n      this.fonts.push(fontArr[i]);\r\n    }\r\n    if (_pendingFonts === 0) {\r\n      this.isLoaded = true;\r\n    } else {\r\n      // On some cases even if the font is loaded, it won't load correctly when measuring text on canvas.\r\n      // Adding this timeout seems to fix it\r\n      setTimeout(this.checkLoadedFonts.bind(this), 100);\r\n    }\r\n  }\r\n\r\n  function addChars(chars) {\r\n    if (!chars) {\r\n      return;\r\n    }\r\n    if (!this.chars) {\r\n      this.chars = [];\r\n    }\r\n    var i;\r\n    var len = chars.length;\r\n    var j;\r\n    var jLen = this.chars.length;\r\n    var found;\r\n    for (i = 0; i < len; i += 1) {\r\n      j = 0;\r\n      found = false;\r\n      while (j < jLen) {\r\n        if (this.chars[j].style === chars[i].style && this.chars[j].fFamily === chars[i].fFamily && this.chars[j].ch === chars[i].ch) {\r\n          found = true;\r\n        }\r\n        j += 1;\r\n      }\r\n      if (!found) {\r\n        this.chars.push(chars[i]);\r\n        jLen += 1;\r\n      }\r\n    }\r\n  }\r\n\r\n  function getCharData(char, style, font) {\r\n    var i = 0;\r\n    var len = this.chars.length;\r\n    while (i < len) {\r\n      if (this.chars[i].ch === char && this.chars[i].style === style && this.chars[i].fFamily === font) {\r\n        return this.chars[i];\r\n      }\r\n      i += 1;\r\n    }\r\n    if (((typeof char === 'string' && char.charCodeAt(0) !== 13) || !char)\r\n            && console\r\n            && console.warn // eslint-disable-line no-console\r\n            && !this._warned\r\n    ) {\r\n      this._warned = true;\r\n      console.warn('Missing character from exported characters list: ', char, style, font); // eslint-disable-line no-console\r\n    }\r\n    return emptyChar;\r\n  }\r\n\r\n  function measureText(char, fontName, size) {\r\n    var fontData = this.getFontByName(fontName);\r\n    var index = char.charCodeAt(0);\r\n    if (!fontData.cache[index + 1]) {\r\n      var tHelper = fontData.helper;\r\n      // Canvas version\r\n      // fontData.cache[index] = tHelper.measureText(char).width / 100;\r\n      // SVG version\r\n      // console.log(tHelper.getBBox().width)\r\n      if (char === ' ') {\r\n        tHelper.textContent = '|' + char + '|';\r\n        var doubleSize = tHelper.getComputedTextLength();\r\n        tHelper.textContent = '||';\r\n        var singleSize = tHelper.getComputedTextLength();\r\n        fontData.cache[index + 1] = (doubleSize - singleSize) / 100;\r\n      } else {\r\n        tHelper.textContent = char;\r\n        fontData.cache[index + 1] = (tHelper.getComputedTextLength()) / 100;\r\n      }\r\n    }\r\n    return fontData.cache[index + 1] * size;\r\n  }\r\n\r\n  function getFontByName(name) {\r\n    var i = 0;\r\n    var len = this.fonts.length;\r\n    while (i < len) {\r\n      if (this.fonts[i].fName === name) {\r\n        return this.fonts[i];\r\n      }\r\n      i += 1;\r\n    }\r\n    return this.fonts[0];\r\n  }\r\n\r\n  function isModifier(firstCharCode, secondCharCode) {\r\n    var sum = firstCharCode.toString(16) + secondCharCode.toString(16);\r\n    return surrogateModifiers.indexOf(sum) !== -1;\r\n  }\r\n\r\n  function isZeroWidthJoiner(firstCharCode, secondCharCode) {\r\n    if (!secondCharCode) {\r\n      return firstCharCode === zeroWidthJoiner[1];\r\n    }\r\n    return firstCharCode === zeroWidthJoiner[0] && secondCharCode === zeroWidthJoiner[1];\r\n  }\r\n\r\n  function isCombinedCharacter(char) {\r\n    return combinedCharacters.indexOf(char) !== -1;\r\n  }\r\n\r\n  function setIsLoaded() {\r\n    this.isLoaded = true;\r\n  }\r\n\r\n  var Font = function () {\r\n    this.fonts = [];\r\n    this.chars = null;\r\n    this.typekitLoaded = 0;\r\n    this.isLoaded = false;\r\n    this._warned = false;\r\n    this.initTime = Date.now();\r\n    this.setIsLoadedBinded = this.setIsLoaded.bind(this);\r\n    this.checkLoadedFontsBinded = this.checkLoadedFonts.bind(this);\r\n  };\r\n  Font.isModifier = isModifier;\r\n  Font.isZeroWidthJoiner = isZeroWidthJoiner;\r\n  Font.isCombinedCharacter = isCombinedCharacter;\r\n\r\n  var fontPrototype = {\r\n    addChars: addChars,\r\n    addFonts: addFonts,\r\n    getCharData: getCharData,\r\n    getFontByName: getFontByName,\r\n    measureText: measureText,\r\n    checkLoadedFonts: checkLoadedFonts,\r\n    setIsLoaded: setIsLoaded,\r\n  };\r\n\r\n  Font.prototype = fontPrototype;\r\n\r\n  return Font;\r\n}());\r\n\r\n/* global initialDefaultFrame, BezierFactory, degToRads, bez, createTypedArray */\r\n/* exported PropertyFactory */\r\n\r\nvar PropertyFactory = (function () {\r\n  var initFrame = initialDefaultFrame;\r\n  var mathAbs = Math.abs;\r\n\r\n  function interpolateValue(frameNum, caching) {\r\n    var offsetTime = this.offsetTime;\r\n    var newValue;\r\n    if (this.propType === 'multidimensional') {\r\n      newValue = createTypedArray('float32', this.pv.length);\r\n    }\r\n    var iterationIndex = caching.lastIndex;\r\n    var i = iterationIndex;\r\n    var len = this.keyframes.length - 1;\r\n    var flag = true;\r\n    var keyData;\r\n    var nextKeyData;\r\n    var keyframeMetadata;\r\n\r\n    while (flag) {\r\n      keyData = this.keyframes[i];\r\n      nextKeyData = this.keyframes[i + 1];\r\n      if (i === len - 1 && frameNum >= nextKeyData.t - offsetTime) {\r\n        if (keyData.h) {\r\n          keyData = nextKeyData;\r\n        }\r\n        iterationIndex = 0;\r\n        break;\r\n      }\r\n      if ((nextKeyData.t - offsetTime) > frameNum) {\r\n        iterationIndex = i;\r\n        break;\r\n      }\r\n      if (i < len - 1) {\r\n        i += 1;\r\n      } else {\r\n        iterationIndex = 0;\r\n        flag = false;\r\n      }\r\n    }\r\n    keyframeMetadata = this.keyframesMetadata[i] || {};\r\n\r\n    var k;\r\n    var kLen;\r\n    var perc;\r\n    var jLen;\r\n    var j;\r\n    var fnc;\r\n    var nextKeyTime = nextKeyData.t - offsetTime;\r\n    var keyTime = keyData.t - offsetTime;\r\n    var endValue;\r\n    if (keyData.to) {\r\n      if (!keyframeMetadata.bezierData) {\r\n        keyframeMetadata.bezierData = bez.buildBezierData(keyData.s, nextKeyData.s || keyData.e, keyData.to, keyData.ti);\r\n      }\r\n      var bezierData = keyframeMetadata.bezierData;\r\n      if (frameNum >= nextKeyTime || frameNum < keyTime) {\r\n        var ind = frameNum >= nextKeyTime ? bezierData.points.length - 1 : 0;\r\n        kLen = bezierData.points[ind].point.length;\r\n        for (k = 0; k < kLen; k += 1) {\r\n          newValue[k] = bezierData.points[ind].point[k];\r\n        }\r\n        // caching._lastKeyframeIndex = -1;\r\n      } else {\r\n        if (keyframeMetadata.__fnct) {\r\n          fnc = keyframeMetadata.__fnct;\r\n        } else {\r\n          fnc = BezierFactory.getBezierEasing(keyData.o.x, keyData.o.y, keyData.i.x, keyData.i.y, keyData.n).get;\r\n          keyframeMetadata.__fnct = fnc;\r\n        }\r\n        perc = fnc((frameNum - keyTime) / (nextKeyTime - keyTime));\r\n        var distanceInLine = bezierData.segmentLength * perc;\r\n\r\n        var segmentPerc;\r\n        var addedLength = (caching.lastFrame < frameNum && caching._lastKeyframeIndex === i) ? caching._lastAddedLength : 0;\r\n        j = (caching.lastFrame < frameNum && caching._lastKeyframeIndex === i) ? caching._lastPoint : 0;\r\n        flag = true;\r\n        jLen = bezierData.points.length;\r\n        while (flag) {\r\n          addedLength += bezierData.points[j].partialLength;\r\n          if (distanceInLine === 0 || perc === 0 || j === bezierData.points.length - 1) {\r\n            kLen = bezierData.points[j].point.length;\r\n            for (k = 0; k < kLen; k += 1) {\r\n              newValue[k] = bezierData.points[j].point[k];\r\n            }\r\n            break;\r\n          } else if (distanceInLine >= addedLength && distanceInLine < addedLength + bezierData.points[j + 1].partialLength) {\r\n            segmentPerc = (distanceInLine - addedLength) / bezierData.points[j + 1].partialLength;\r\n            kLen = bezierData.points[j].point.length;\r\n            for (k = 0; k < kLen; k += 1) {\r\n              newValue[k] = bezierData.points[j].point[k] + (bezierData.points[j + 1].point[k] - bezierData.points[j].point[k]) * segmentPerc;\r\n            }\r\n            break;\r\n          }\r\n          if (j < jLen - 1) {\r\n            j += 1;\r\n          } else {\r\n            flag = false;\r\n          }\r\n        }\r\n        caching._lastPoint = j;\r\n        caching._lastAddedLength = addedLength - bezierData.points[j].partialLength;\r\n        caching._lastKeyframeIndex = i;\r\n      }\r\n    } else {\r\n      var outX;\r\n      var outY;\r\n      var inX;\r\n      var inY;\r\n      var keyValue;\r\n      len = keyData.s.length;\r\n      endValue = nextKeyData.s || keyData.e;\r\n      if (this.sh && keyData.h !== 1) {\r\n        if (frameNum >= nextKeyTime) {\r\n          newValue[0] = endValue[0];\r\n          newValue[1] = endValue[1];\r\n          newValue[2] = endValue[2];\r\n        } else if (frameNum <= keyTime) {\r\n          newValue[0] = keyData.s[0];\r\n          newValue[1] = keyData.s[1];\r\n          newValue[2] = keyData.s[2];\r\n        } else {\r\n          var quatStart = createQuaternion(keyData.s);\r\n          var quatEnd = createQuaternion(endValue);\r\n          var time = (frameNum - keyTime) / (nextKeyTime - keyTime);\r\n          quaternionToEuler(newValue, slerp(quatStart, quatEnd, time));\r\n        }\r\n      } else {\r\n        for (i = 0; i < len; i += 1) {\r\n          if (keyData.h !== 1) {\r\n            if (frameNum >= nextKeyTime) {\r\n              perc = 1;\r\n            } else if (frameNum < keyTime) {\r\n              perc = 0;\r\n            } else {\r\n              if (keyData.o.x.constructor === Array) {\r\n                if (!keyframeMetadata.__fnct) {\r\n                  keyframeMetadata.__fnct = [];\r\n                }\r\n                if (!keyframeMetadata.__fnct[i]) {\r\n                  outX = keyData.o.x[i] === undefined ? keyData.o.x[0] : keyData.o.x[i];\r\n                  outY = keyData.o.y[i] === undefined ? keyData.o.y[0] : keyData.o.y[i];\r\n                  inX = keyData.i.x[i] === undefined ? keyData.i.x[0] : keyData.i.x[i];\r\n                  inY = keyData.i.y[i] === undefined ? keyData.i.y[0] : keyData.i.y[i];\r\n                  fnc = BezierFactory.getBezierEasing(outX, outY, inX, inY).get;\r\n                  keyframeMetadata.__fnct[i] = fnc;\r\n                } else {\r\n                  fnc = keyframeMetadata.__fnct[i];\r\n                }\r\n              } else if (!keyframeMetadata.__fnct) {\r\n                outX = keyData.o.x;\r\n                outY = keyData.o.y;\r\n                inX = keyData.i.x;\r\n                inY = keyData.i.y;\r\n                fnc = BezierFactory.getBezierEasing(outX, outY, inX, inY).get;\r\n                keyData.keyframeMetadata = fnc;\r\n              } else {\r\n                fnc = keyframeMetadata.__fnct;\r\n              }\r\n              perc = fnc((frameNum - keyTime) / (nextKeyTime - keyTime));\r\n            }\r\n          }\r\n\r\n          endValue = nextKeyData.s || keyData.e;\r\n          keyValue = keyData.h === 1 ? keyData.s[i] : keyData.s[i] + (endValue[i] - keyData.s[i]) * perc;\r\n\r\n          if (this.propType === 'multidimensional') {\r\n            newValue[i] = keyValue;\r\n          } else {\r\n            newValue = keyValue;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    caching.lastIndex = iterationIndex;\r\n    return newValue;\r\n  }\r\n\r\n  // based on @Toji's https://github.com/toji/gl-matrix/\r\n  function slerp(a, b, t) {\r\n    var out = [];\r\n    var ax = a[0];\r\n    var ay = a[1];\r\n    var az = a[2];\r\n    var aw = a[3];\r\n    var bx = b[0];\r\n    var by = b[1];\r\n    var bz = b[2];\r\n    var bw = b[3];\r\n\r\n    var omega;\r\n    var cosom;\r\n    var sinom;\r\n    var scale0;\r\n    var scale1;\r\n\r\n    cosom = ax * bx + ay * by + az * bz + aw * bw;\r\n    if (cosom < 0.0) {\r\n      cosom = -cosom;\r\n      bx = -bx;\r\n      by = -by;\r\n      bz = -bz;\r\n      bw = -bw;\r\n    }\r\n    if ((1.0 - cosom) > 0.000001) {\r\n      omega = Math.acos(cosom);\r\n      sinom = Math.sin(omega);\r\n      scale0 = Math.sin((1.0 - t) * omega) / sinom;\r\n      scale1 = Math.sin(t * omega) / sinom;\r\n    } else {\r\n      scale0 = 1.0 - t;\r\n      scale1 = t;\r\n    }\r\n    out[0] = scale0 * ax + scale1 * bx;\r\n    out[1] = scale0 * ay + scale1 * by;\r\n    out[2] = scale0 * az + scale1 * bz;\r\n    out[3] = scale0 * aw + scale1 * bw;\r\n\r\n    return out;\r\n  }\r\n\r\n  function quaternionToEuler(out, quat) {\r\n    var qx = quat[0];\r\n    var qy = quat[1];\r\n    var qz = quat[2];\r\n    var qw = quat[3];\r\n    var heading = Math.atan2(2 * qy * qw - 2 * qx * qz, 1 - 2 * qy * qy - 2 * qz * qz);\r\n    var attitude = Math.asin(2 * qx * qy + 2 * qz * qw);\r\n    var bank = Math.atan2(2 * qx * qw - 2 * qy * qz, 1 - 2 * qx * qx - 2 * qz * qz);\r\n    out[0] = heading / degToRads;\r\n    out[1] = attitude / degToRads;\r\n    out[2] = bank / degToRads;\r\n  }\r\n\r\n  function createQuaternion(values) {\r\n    var heading = values[0] * degToRads;\r\n    var attitude = values[1] * degToRads;\r\n    var bank = values[2] * degToRads;\r\n    var c1 = Math.cos(heading / 2);\r\n    var c2 = Math.cos(attitude / 2);\r\n    var c3 = Math.cos(bank / 2);\r\n    var s1 = Math.sin(heading / 2);\r\n    var s2 = Math.sin(attitude / 2);\r\n    var s3 = Math.sin(bank / 2);\r\n    var w = c1 * c2 * c3 - s1 * s2 * s3;\r\n    var x = s1 * s2 * c3 + c1 * c2 * s3;\r\n    var y = s1 * c2 * c3 + c1 * s2 * s3;\r\n    var z = c1 * s2 * c3 - s1 * c2 * s3;\r\n\r\n    return [x, y, z, w];\r\n  }\r\n\r\n  function getValueAtCurrentTime() {\r\n    var frameNum = this.comp.renderedFrame - this.offsetTime;\r\n    var initTime = this.keyframes[0].t - this.offsetTime;\r\n    var endTime = this.keyframes[this.keyframes.length - 1].t - this.offsetTime;\r\n    if (!(frameNum === this._caching.lastFrame || (this._caching.lastFrame !== initFrame && ((this._caching.lastFrame >= endTime && frameNum >= endTime) || (this._caching.lastFrame < initTime && frameNum < initTime))))) {\r\n      if (this._caching.lastFrame >= frameNum) {\r\n        this._caching._lastKeyframeIndex = -1;\r\n        this._caching.lastIndex = 0;\r\n      }\r\n\r\n      var renderResult = this.interpolateValue(frameNum, this._caching);\r\n      this.pv = renderResult;\r\n    }\r\n    this._caching.lastFrame = frameNum;\r\n    return this.pv;\r\n  }\r\n\r\n  function setVValue(val) {\r\n    var multipliedValue;\r\n    if (this.propType === 'unidimensional') {\r\n      multipliedValue = val * this.mult;\r\n      if (mathAbs(this.v - multipliedValue) > 0.00001) {\r\n        this.v = multipliedValue;\r\n        this._mdf = true;\r\n      }\r\n    } else {\r\n      var i = 0;\r\n      var len = this.v.length;\r\n      while (i < len) {\r\n        multipliedValue = val[i] * this.mult;\r\n        if (mathAbs(this.v[i] - multipliedValue) > 0.00001) {\r\n          this.v[i] = multipliedValue;\r\n          this._mdf = true;\r\n        }\r\n        i += 1;\r\n      }\r\n    }\r\n  }\r\n\r\n  function processEffectsSequence() {\r\n    if (this.elem.globalData.frameId === this.frameId || !this.effectsSequence.length) {\r\n      return;\r\n    }\r\n    if (this.lock) {\r\n      this.setVValue(this.pv);\r\n      return;\r\n    }\r\n    this.lock = true;\r\n    this._mdf = this._isFirstFrame;\r\n    var i;\r\n    var len = this.effectsSequence.length;\r\n    var finalValue = this.kf ? this.pv : this.data.k;\r\n    for (i = 0; i < len; i += 1) {\r\n      finalValue = this.effectsSequence[i](finalValue);\r\n    }\r\n    this.setVValue(finalValue);\r\n    this._isFirstFrame = false;\r\n    this.lock = false;\r\n    this.frameId = this.elem.globalData.frameId;\r\n  }\r\n\r\n  function addEffect(effectFunction) {\r\n    this.effectsSequence.push(effectFunction);\r\n    this.container.addDynamicProperty(this);\r\n  }\r\n\r\n  function ValueProperty(elem, data, mult, container) {\r\n    this.propType = 'unidimensional';\r\n    this.mult = mult || 1;\r\n    this.data = data;\r\n    this.v = mult ? data.k * mult : data.k;\r\n    this.pv = data.k;\r\n    this._mdf = false;\r\n    this.elem = elem;\r\n    this.container = container;\r\n    this.comp = elem.comp;\r\n    this.k = false;\r\n    this.kf = false;\r\n    this.vel = 0;\r\n    this.effectsSequence = [];\r\n    this._isFirstFrame = true;\r\n    this.getValue = processEffectsSequence;\r\n    this.setVValue = setVValue;\r\n    this.addEffect = addEffect;\r\n  }\r\n\r\n  function MultiDimensionalProperty(elem, data, mult, container) {\r\n    this.propType = 'multidimensional';\r\n    this.mult = mult || 1;\r\n    this.data = data;\r\n    this._mdf = false;\r\n    this.elem = elem;\r\n    this.container = container;\r\n    this.comp = elem.comp;\r\n    this.k = false;\r\n    this.kf = false;\r\n    this.frameId = -1;\r\n    var i;\r\n    var len = data.k.length;\r\n    this.v = createTypedArray('float32', len);\r\n    this.pv = createTypedArray('float32', len);\r\n    this.vel = createTypedArray('float32', len);\r\n    for (i = 0; i < len; i += 1) {\r\n      this.v[i] = data.k[i] * this.mult;\r\n      this.pv[i] = data.k[i];\r\n    }\r\n    this._isFirstFrame = true;\r\n    this.effectsSequence = [];\r\n    this.getValue = processEffectsSequence;\r\n    this.setVValue = setVValue;\r\n    this.addEffect = addEffect;\r\n  }\r\n\r\n  function KeyframedValueProperty(elem, data, mult, container) {\r\n    this.propType = 'unidimensional';\r\n    this.keyframes = data.k;\r\n    this.keyframesMetadata = [];\r\n    this.offsetTime = elem.data.st;\r\n    this.frameId = -1;\r\n    this._caching = {\r\n      lastFrame: initFrame, lastIndex: 0, value: 0, _lastKeyframeIndex: -1,\r\n    };\r\n    this.k = true;\r\n    this.kf = true;\r\n    this.data = data;\r\n    this.mult = mult || 1;\r\n    this.elem = elem;\r\n    this.container = container;\r\n    this.comp = elem.comp;\r\n    this.v = initFrame;\r\n    this.pv = initFrame;\r\n    this._isFirstFrame = true;\r\n    this.getValue = processEffectsSequence;\r\n    this.setVValue = setVValue;\r\n    this.interpolateValue = interpolateValue;\r\n    this.effectsSequence = [getValueAtCurrentTime.bind(this)];\r\n    this.addEffect = addEffect;\r\n  }\r\n\r\n  function KeyframedMultidimensionalProperty(elem, data, mult, container) {\r\n    this.propType = 'multidimensional';\r\n    var i;\r\n    var len = data.k.length;\r\n    var s;\r\n    var e;\r\n    var to;\r\n    var ti;\r\n    for (i = 0; i < len - 1; i += 1) {\r\n      if (data.k[i].to && data.k[i].s && data.k[i + 1] && data.k[i + 1].s) {\r\n        s = data.k[i].s;\r\n        e = data.k[i + 1].s;\r\n        to = data.k[i].to;\r\n        ti = data.k[i].ti;\r\n        if ((s.length === 2 && !(s[0] === e[0] && s[1] === e[1]) && bez.pointOnLine2D(s[0], s[1], e[0], e[1], s[0] + to[0], s[1] + to[1]) && bez.pointOnLine2D(s[0], s[1], e[0], e[1], e[0] + ti[0], e[1] + ti[1])) || (s.length === 3 && !(s[0] === e[0] && s[1] === e[1] && s[2] === e[2]) && bez.pointOnLine3D(s[0], s[1], s[2], e[0], e[1], e[2], s[0] + to[0], s[1] + to[1], s[2] + to[2]) && bez.pointOnLine3D(s[0], s[1], s[2], e[0], e[1], e[2], e[0] + ti[0], e[1] + ti[1], e[2] + ti[2]))) {\r\n          data.k[i].to = null;\r\n          data.k[i].ti = null;\r\n        }\r\n        if (s[0] === e[0] && s[1] === e[1] && to[0] === 0 && to[1] === 0 && ti[0] === 0 && ti[1] === 0) {\r\n          if (s.length === 2 || (s[2] === e[2] && to[2] === 0 && ti[2] === 0)) {\r\n            data.k[i].to = null;\r\n            data.k[i].ti = null;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    this.effectsSequence = [getValueAtCurrentTime.bind(this)];\r\n    this.data = data;\r\n    this.keyframes = data.k;\r\n    this.keyframesMetadata = [];\r\n    this.offsetTime = elem.data.st;\r\n    this.k = true;\r\n    this.kf = true;\r\n    this._isFirstFrame = true;\r\n    this.mult = mult || 1;\r\n    this.elem = elem;\r\n    this.container = container;\r\n    this.comp = elem.comp;\r\n    this.getValue = processEffectsSequence;\r\n    this.setVValue = setVValue;\r\n    this.interpolateValue = interpolateValue;\r\n    this.frameId = -1;\r\n    var arrLen = data.k[0].s.length;\r\n    this.v = createTypedArray('float32', arrLen);\r\n    this.pv = createTypedArray('float32', arrLen);\r\n    for (i = 0; i < arrLen; i += 1) {\r\n      this.v[i] = initFrame;\r\n      this.pv[i] = initFrame;\r\n    }\r\n    this._caching = { lastFrame: initFrame, lastIndex: 0, value: createTypedArray('float32', arrLen) };\r\n    this.addEffect = addEffect;\r\n  }\r\n\r\n  function getProp(elem, data, type, mult, container) {\r\n    var p;\r\n    if (!data.k.length) {\r\n      p = new ValueProperty(elem, data, mult, container);\r\n    } else if (typeof (data.k[0]) === 'number') {\r\n      p = new MultiDimensionalProperty(elem, data, mult, container);\r\n    } else {\r\n      switch (type) {\r\n        case 0:\r\n          p = new KeyframedValueProperty(elem, data, mult, container);\r\n          break;\r\n        case 1:\r\n          p = new KeyframedMultidimensionalProperty(elem, data, mult, container);\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n    if (p.effectsSequence.length) {\r\n      container.addDynamicProperty(p);\r\n    }\r\n    return p;\r\n  }\r\n\r\n  var ob = {\r\n    getProp: getProp,\r\n  };\r\n  return ob;\r\n}());\r\n\r\n/* global Matrix, degToRads, PropertyFactory, extendPrototype, DynamicPropertyContainer */\r\n/* exported TransformPropertyFactory */\r\n\r\nvar TransformPropertyFactory = (function () {\r\n  var defaultVector = [0, 0];\r\n\r\n  function applyToMatrix(mat) {\r\n    var _mdf = this._mdf;\r\n    this.iterateDynamicProperties();\r\n    this._mdf = this._mdf || _mdf;\r\n    if (this.a) {\r\n      mat.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\r\n    }\r\n    if (this.s) {\r\n      mat.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\r\n    }\r\n    if (this.sk) {\r\n      mat.skewFromAxis(-this.sk.v, this.sa.v);\r\n    }\r\n    if (this.r) {\r\n      mat.rotate(-this.r.v);\r\n    } else {\r\n      mat.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2])\r\n        .rotateY(this.or.v[1])\r\n        .rotateX(this.or.v[0]);\r\n    }\r\n    if (this.data.p.s) {\r\n      if (this.data.p.z) {\r\n        mat.translate(this.px.v, this.py.v, -this.pz.v);\r\n      } else {\r\n        mat.translate(this.px.v, this.py.v, 0);\r\n      }\r\n    } else {\r\n      mat.translate(this.p.v[0], this.p.v[1], -this.p.v[2]);\r\n    }\r\n  }\r\n  function processKeys(forceRender) {\r\n    if (this.elem.globalData.frameId === this.frameId) {\r\n      return;\r\n    }\r\n    if (this._isDirty) {\r\n      this.precalculateMatrix();\r\n      this._isDirty = false;\r\n    }\r\n\r\n    this.iterateDynamicProperties();\r\n\r\n    if (this._mdf || forceRender) {\r\n      var frameRate;\r\n      this.v.cloneFromProps(this.pre.props);\r\n      if (this.appliedTransformations < 1) {\r\n        this.v.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\r\n      }\r\n      if (this.appliedTransformations < 2) {\r\n        this.v.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\r\n      }\r\n      if (this.sk && this.appliedTransformations < 3) {\r\n        this.v.skewFromAxis(-this.sk.v, this.sa.v);\r\n      }\r\n      if (this.r && this.appliedTransformations < 4) {\r\n        this.v.rotate(-this.r.v);\r\n      } else if (!this.r && this.appliedTransformations < 4) {\r\n        this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2])\r\n          .rotateY(this.or.v[1])\r\n          .rotateX(this.or.v[0]);\r\n      }\r\n      if (this.autoOriented) {\r\n        var v1;\r\n        var v2;\r\n        frameRate = this.elem.globalData.frameRate;\r\n        if (this.p && this.p.keyframes && this.p.getValueAtTime) {\r\n          if (this.p._caching.lastFrame + this.p.offsetTime <= this.p.keyframes[0].t) {\r\n            v1 = this.p.getValueAtTime((this.p.keyframes[0].t + 0.01) / frameRate, 0);\r\n            v2 = this.p.getValueAtTime(this.p.keyframes[0].t / frameRate, 0);\r\n          } else if (this.p._caching.lastFrame + this.p.offsetTime >= this.p.keyframes[this.p.keyframes.length - 1].t) {\r\n            v1 = this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length - 1].t / frameRate), 0);\r\n            v2 = this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length - 1].t - 0.05) / frameRate, 0);\r\n          } else {\r\n            v1 = this.p.pv;\r\n            v2 = this.p.getValueAtTime((this.p._caching.lastFrame + this.p.offsetTime - 0.01) / frameRate, this.p.offsetTime);\r\n          }\r\n        } else if (this.px && this.px.keyframes && this.py.keyframes && this.px.getValueAtTime && this.py.getValueAtTime) {\r\n          v1 = [];\r\n          v2 = [];\r\n          var px = this.px;\r\n          var py = this.py;\r\n          if (px._caching.lastFrame + px.offsetTime <= px.keyframes[0].t) {\r\n            v1[0] = px.getValueAtTime((px.keyframes[0].t + 0.01) / frameRate, 0);\r\n            v1[1] = py.getValueAtTime((py.keyframes[0].t + 0.01) / frameRate, 0);\r\n            v2[0] = px.getValueAtTime((px.keyframes[0].t) / frameRate, 0);\r\n            v2[1] = py.getValueAtTime((py.keyframes[0].t) / frameRate, 0);\r\n          } else if (px._caching.lastFrame + px.offsetTime >= px.keyframes[px.keyframes.length - 1].t) {\r\n            v1[0] = px.getValueAtTime((px.keyframes[px.keyframes.length - 1].t / frameRate), 0);\r\n            v1[1] = py.getValueAtTime((py.keyframes[py.keyframes.length - 1].t / frameRate), 0);\r\n            v2[0] = px.getValueAtTime((px.keyframes[px.keyframes.length - 1].t - 0.01) / frameRate, 0);\r\n            v2[1] = py.getValueAtTime((py.keyframes[py.keyframes.length - 1].t - 0.01) / frameRate, 0);\r\n          } else {\r\n            v1 = [px.pv, py.pv];\r\n            v2[0] = px.getValueAtTime((px._caching.lastFrame + px.offsetTime - 0.01) / frameRate, px.offsetTime);\r\n            v2[1] = py.getValueAtTime((py._caching.lastFrame + py.offsetTime - 0.01) / frameRate, py.offsetTime);\r\n          }\r\n        } else {\r\n          v2 = defaultVector;\r\n          v1 = v2;\r\n        }\r\n        this.v.rotate(-Math.atan2(v1[1] - v2[1], v1[0] - v2[0]));\r\n      }\r\n      if (this.data.p && this.data.p.s) {\r\n        if (this.data.p.z) {\r\n          this.v.translate(this.px.v, this.py.v, -this.pz.v);\r\n        } else {\r\n          this.v.translate(this.px.v, this.py.v, 0);\r\n        }\r\n      } else {\r\n        this.v.translate(this.p.v[0], this.p.v[1], -this.p.v[2]);\r\n      }\r\n    }\r\n    this.frameId = this.elem.globalData.frameId;\r\n  }\r\n\r\n  function precalculateMatrix() {\r\n    if (!this.a.k) {\r\n      this.pre.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\r\n      this.appliedTransformations = 1;\r\n    } else {\r\n      return;\r\n    }\r\n    if (!this.s.effectsSequence.length) {\r\n      this.pre.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\r\n      this.appliedTransformations = 2;\r\n    } else {\r\n      return;\r\n    }\r\n    if (this.sk) {\r\n      if (!this.sk.effectsSequence.length && !this.sa.effectsSequence.length) {\r\n        this.pre.skewFromAxis(-this.sk.v, this.sa.v);\r\n        this.appliedTransformations = 3;\r\n      } else {\r\n        return;\r\n      }\r\n    }\r\n    if (this.r) {\r\n      if (!this.r.effectsSequence.length) {\r\n        this.pre.rotate(-this.r.v);\r\n        this.appliedTransformations = 4;\r\n      }\r\n    } else if (!this.rz.effectsSequence.length && !this.ry.effectsSequence.length && !this.rx.effectsSequence.length && !this.or.effectsSequence.length) {\r\n      this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2])\r\n        .rotateY(this.or.v[1])\r\n        .rotateX(this.or.v[0]);\r\n      this.appliedTransformations = 4;\r\n    }\r\n  }\r\n\r\n  function autoOrient() {\r\n    //\r\n    // var prevP = this.getValueAtTime();\r\n  }\r\n\r\n  function addDynamicProperty(prop) {\r\n    this._addDynamicProperty(prop);\r\n    this.elem.addDynamicProperty(prop);\r\n    this._isDirty = true;\r\n  }\r\n\r\n  function TransformProperty(elem, data, container) {\r\n    this.elem = elem;\r\n    this.frameId = -1;\r\n    this.propType = 'transform';\r\n    this.data = data;\r\n    this.v = new Matrix();\r\n    // Precalculated matrix with non animated properties\r\n    this.pre = new Matrix();\r\n    this.appliedTransformations = 0;\r\n    this.initDynamicPropertyContainer(container || elem);\r\n    if (data.p && data.p.s) {\r\n      this.px = PropertyFactory.getProp(elem, data.p.x, 0, 0, this);\r\n      this.py = PropertyFactory.getProp(elem, data.p.y, 0, 0, this);\r\n      if (data.p.z) {\r\n        this.pz = PropertyFactory.getProp(elem, data.p.z, 0, 0, this);\r\n      }\r\n    } else {\r\n      this.p = PropertyFactory.getProp(elem, data.p || { k: [0, 0, 0] }, 1, 0, this);\r\n    }\r\n    if (data.rx) {\r\n      this.rx = PropertyFactory.getProp(elem, data.rx, 0, degToRads, this);\r\n      this.ry = PropertyFactory.getProp(elem, data.ry, 0, degToRads, this);\r\n      this.rz = PropertyFactory.getProp(elem, data.rz, 0, degToRads, this);\r\n      if (data.or.k[0].ti) {\r\n        var i;\r\n        var len = data.or.k.length;\r\n        for (i = 0; i < len; i += 1) {\r\n          data.or.k[i].to = null;\r\n          data.or.k[i].ti = null;\r\n        }\r\n      }\r\n      this.or = PropertyFactory.getProp(elem, data.or, 1, degToRads, this);\r\n      // sh Indicates it needs to be capped between -180 and 180\r\n      this.or.sh = true;\r\n    } else {\r\n      this.r = PropertyFactory.getProp(elem, data.r || { k: 0 }, 0, degToRads, this);\r\n    }\r\n    if (data.sk) {\r\n      this.sk = PropertyFactory.getProp(elem, data.sk, 0, degToRads, this);\r\n      this.sa = PropertyFactory.getProp(elem, data.sa, 0, degToRads, this);\r\n    }\r\n    this.a = PropertyFactory.getProp(elem, data.a || { k: [0, 0, 0] }, 1, 0, this);\r\n    this.s = PropertyFactory.getProp(elem, data.s || { k: [100, 100, 100] }, 1, 0.01, this);\r\n    // Opacity is not part of the transform properties, that's why it won't use this.dynamicProperties. That way transforms won't get updated if opacity changes.\r\n    if (data.o) {\r\n      this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, elem);\r\n    } else {\r\n      this.o = { _mdf: false, v: 1 };\r\n    }\r\n    this._isDirty = true;\r\n    if (!this.dynamicProperties.length) {\r\n      this.getValue(true);\r\n    }\r\n  }\r\n\r\n  TransformProperty.prototype = {\r\n    applyToMatrix: applyToMatrix,\r\n    getValue: processKeys,\r\n    precalculateMatrix: precalculateMatrix,\r\n    autoOrient: autoOrient,\r\n  };\r\n\r\n  extendPrototype([DynamicPropertyContainer], TransformProperty);\r\n  TransformProperty.prototype.addDynamicProperty = addDynamicProperty;\r\n  TransformProperty.prototype._addDynamicProperty = DynamicPropertyContainer.prototype.addDynamicProperty;\r\n\r\n  function getTransformProperty(elem, data, container) {\r\n    return new TransformProperty(elem, data, container);\r\n  }\r\n\r\n  return {\r\n    getTransformProperty: getTransformProperty,\r\n  };\r\n}());\r\n\r\n/* global createSizedArray, createSizedArray, pointPool */\r\n\r\nfunction ShapePath() {\r\n  this.c = false;\r\n  this._length = 0;\r\n  this._maxLength = 8;\r\n  this.v = createSizedArray(this._maxLength);\r\n  this.o = createSizedArray(this._maxLength);\r\n  this.i = createSizedArray(this._maxLength);\r\n}\r\n\r\nShapePath.prototype.setPathData = function (closed, len) {\r\n  this.c = closed;\r\n  this.setLength(len);\r\n  var i = 0;\r\n  while (i < len) {\r\n    this.v[i] = pointPool.newElement();\r\n    this.o[i] = pointPool.newElement();\r\n    this.i[i] = pointPool.newElement();\r\n    i += 1;\r\n  }\r\n};\r\n\r\nShapePath.prototype.setLength = function (len) {\r\n  while (this._maxLength < len) {\r\n    this.doubleArrayLength();\r\n  }\r\n  this._length = len;\r\n};\r\n\r\nShapePath.prototype.doubleArrayLength = function () {\r\n  this.v = this.v.concat(createSizedArray(this._maxLength));\r\n  this.i = this.i.concat(createSizedArray(this._maxLength));\r\n  this.o = this.o.concat(createSizedArray(this._maxLength));\r\n  this._maxLength *= 2;\r\n};\r\n\r\nShapePath.prototype.setXYAt = function (x, y, type, pos, replace) {\r\n  var arr;\r\n  this._length = Math.max(this._length, pos + 1);\r\n  if (this._length >= this._maxLength) {\r\n    this.doubleArrayLength();\r\n  }\r\n  switch (type) {\r\n    case 'v':\r\n      arr = this.v;\r\n      break;\r\n    case 'i':\r\n      arr = this.i;\r\n      break;\r\n    case 'o':\r\n      arr = this.o;\r\n      break;\r\n    default:\r\n      arr = [];\r\n      break;\r\n  }\r\n  if (!arr[pos] || (arr[pos] && !replace)) {\r\n    arr[pos] = pointPool.newElement();\r\n  }\r\n  arr[pos][0] = x;\r\n  arr[pos][1] = y;\r\n};\r\n\r\nShapePath.prototype.setTripleAt = function (vX, vY, oX, oY, iX, iY, pos, replace) {\r\n  this.setXYAt(vX, vY, 'v', pos, replace);\r\n  this.setXYAt(oX, oY, 'o', pos, replace);\r\n  this.setXYAt(iX, iY, 'i', pos, replace);\r\n};\r\n\r\nShapePath.prototype.reverse = function () {\r\n  var newPath = new ShapePath();\r\n  newPath.setPathData(this.c, this._length);\r\n  var vertices = this.v;\r\n  var outPoints = this.o;\r\n  var inPoints = this.i;\r\n  var init = 0;\r\n  if (this.c) {\r\n    newPath.setTripleAt(vertices[0][0], vertices[0][1], inPoints[0][0], inPoints[0][1], outPoints[0][0], outPoints[0][1], 0, false);\r\n    init = 1;\r\n  }\r\n  var cnt = this._length - 1;\r\n  var len = this._length;\r\n\r\n  var i;\r\n  for (i = init; i < len; i += 1) {\r\n    newPath.setTripleAt(vertices[cnt][0], vertices[cnt][1], inPoints[cnt][0], inPoints[cnt][1], outPoints[cnt][0], outPoints[cnt][1], i, false);\r\n    cnt -= 1;\r\n  }\r\n  return newPath;\r\n};\r\n\r\n/* global extendPrototype, roundCorner, BezierFactory, shapePool, degToRads,\r\n  shapeCollectionPool, PropertyFactory, bmMin, DynamicPropertyContainer */\r\n/* exported ShapePropertyFactory */\r\n\r\nvar ShapePropertyFactory = (function () {\r\n  var initFrame = -999999;\r\n\r\n  function interpolateShape(frameNum, previousValue, caching) {\r\n    var iterationIndex = caching.lastIndex;\r\n    var keyPropS;\r\n    var keyPropE;\r\n    var isHold;\r\n    var j;\r\n    var k;\r\n    var jLen;\r\n    var kLen;\r\n    var perc;\r\n    var vertexValue;\r\n    var kf = this.keyframes;\r\n    if (frameNum < kf[0].t - this.offsetTime) {\r\n      keyPropS = kf[0].s[0];\r\n      isHold = true;\r\n      iterationIndex = 0;\r\n    } else if (frameNum >= kf[kf.length - 1].t - this.offsetTime) {\r\n      keyPropS = kf[kf.length - 1].s ? kf[kf.length - 1].s[0] : kf[kf.length - 2].e[0];\r\n      /* if(kf[kf.length - 1].s){\r\n                keyPropS = kf[kf.length - 1].s[0];\r\n            }else{\r\n                keyPropS = kf[kf.length - 2].e[0];\r\n            } */\r\n      isHold = true;\r\n    } else {\r\n      var i = iterationIndex;\r\n      var len = kf.length - 1;\r\n      var flag = true;\r\n      var keyData;\r\n      var nextKeyData;\r\n      var keyframeMetadata;\r\n      while (flag) {\r\n        keyData = kf[i];\r\n        nextKeyData = kf[i + 1];\r\n        if ((nextKeyData.t - this.offsetTime) > frameNum) {\r\n          break;\r\n        }\r\n        if (i < len - 1) {\r\n          i += 1;\r\n        } else {\r\n          flag = false;\r\n        }\r\n      }\r\n      keyframeMetadata = this.keyframesMetadata[i] || {};\r\n      isHold = keyData.h === 1;\r\n      iterationIndex = i;\r\n      if (!isHold) {\r\n        if (frameNum >= nextKeyData.t - this.offsetTime) {\r\n          perc = 1;\r\n        } else if (frameNum < keyData.t - this.offsetTime) {\r\n          perc = 0;\r\n        } else {\r\n          var fnc;\r\n          if (keyframeMetadata.__fnct) {\r\n            fnc = keyframeMetadata.__fnct;\r\n          } else {\r\n            fnc = BezierFactory.getBezierEasing(keyData.o.x, keyData.o.y, keyData.i.x, keyData.i.y).get;\r\n            keyframeMetadata.__fnct = fnc;\r\n          }\r\n          perc = fnc((frameNum - (keyData.t - this.offsetTime)) / ((nextKeyData.t - this.offsetTime) - (keyData.t - this.offsetTime)));\r\n        }\r\n        keyPropE = nextKeyData.s ? nextKeyData.s[0] : keyData.e[0];\r\n      }\r\n      keyPropS = keyData.s[0];\r\n    }\r\n    jLen = previousValue._length;\r\n    kLen = keyPropS.i[0].length;\r\n    caching.lastIndex = iterationIndex;\r\n\r\n    for (j = 0; j < jLen; j += 1) {\r\n      for (k = 0; k < kLen; k += 1) {\r\n        vertexValue = isHold ? keyPropS.i[j][k] : keyPropS.i[j][k] + (keyPropE.i[j][k] - keyPropS.i[j][k]) * perc;\r\n        previousValue.i[j][k] = vertexValue;\r\n        vertexValue = isHold ? keyPropS.o[j][k] : keyPropS.o[j][k] + (keyPropE.o[j][k] - keyPropS.o[j][k]) * perc;\r\n        previousValue.o[j][k] = vertexValue;\r\n        vertexValue = isHold ? keyPropS.v[j][k] : keyPropS.v[j][k] + (keyPropE.v[j][k] - keyPropS.v[j][k]) * perc;\r\n        previousValue.v[j][k] = vertexValue;\r\n      }\r\n    }\r\n  }\r\n\r\n  function interpolateShapeCurrentTime() {\r\n    var frameNum = this.comp.renderedFrame - this.offsetTime;\r\n    var initTime = this.keyframes[0].t - this.offsetTime;\r\n    var endTime = this.keyframes[this.keyframes.length - 1].t - this.offsetTime;\r\n    var lastFrame = this._caching.lastFrame;\r\n    if (!(lastFrame !== initFrame && ((lastFrame < initTime && frameNum < initTime) || (lastFrame > endTime && frameNum > endTime)))) {\r\n      /// /\r\n      this._caching.lastIndex = lastFrame < frameNum ? this._caching.lastIndex : 0;\r\n      this.interpolateShape(frameNum, this.pv, this._caching);\r\n      /// /\r\n    }\r\n    this._caching.lastFrame = frameNum;\r\n    return this.pv;\r\n  }\r\n\r\n  function resetShape() {\r\n    this.paths = this.localShapeCollection;\r\n  }\r\n\r\n  function shapesEqual(shape1, shape2) {\r\n    if (shape1._length !== shape2._length || shape1.c !== shape2.c) {\r\n      return false;\r\n    }\r\n    var i;\r\n    var len = shape1._length;\r\n    for (i = 0; i < len; i += 1) {\r\n      if (shape1.v[i][0] !== shape2.v[i][0]\r\n            || shape1.v[i][1] !== shape2.v[i][1]\r\n            || shape1.o[i][0] !== shape2.o[i][0]\r\n            || shape1.o[i][1] !== shape2.o[i][1]\r\n            || shape1.i[i][0] !== shape2.i[i][0]\r\n            || shape1.i[i][1] !== shape2.i[i][1]) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  function setVValue(newPath) {\r\n    if (!shapesEqual(this.v, newPath)) {\r\n      this.v = shapePool.clone(newPath);\r\n      this.localShapeCollection.releaseShapes();\r\n      this.localShapeCollection.addShape(this.v);\r\n      this._mdf = true;\r\n      this.paths = this.localShapeCollection;\r\n    }\r\n  }\r\n\r\n  function processEffectsSequence() {\r\n    if (this.elem.globalData.frameId === this.frameId) {\r\n      return;\r\n    } if (!this.effectsSequence.length) {\r\n      this._mdf = false;\r\n      return;\r\n    }\r\n    if (this.lock) {\r\n      this.setVValue(this.pv);\r\n      return;\r\n    }\r\n    this.lock = true;\r\n    this._mdf = false;\r\n    var finalValue;\r\n    if (this.kf) {\r\n      finalValue = this.pv;\r\n    } else if (this.data.ks) {\r\n      finalValue = this.data.ks.k;\r\n    } else {\r\n      finalValue = this.data.pt.k;\r\n    }\r\n    var i;\r\n    var len = this.effectsSequence.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      finalValue = this.effectsSequence[i](finalValue);\r\n    }\r\n    this.setVValue(finalValue);\r\n    this.lock = false;\r\n    this.frameId = this.elem.globalData.frameId;\r\n  }\r\n\r\n  function ShapeProperty(elem, data, type) {\r\n    this.propType = 'shape';\r\n    this.comp = elem.comp;\r\n    this.container = elem;\r\n    this.elem = elem;\r\n    this.data = data;\r\n    this.k = false;\r\n    this.kf = false;\r\n    this._mdf = false;\r\n    var pathData = type === 3 ? data.pt.k : data.ks.k;\r\n    this.v = shapePool.clone(pathData);\r\n    this.pv = shapePool.clone(this.v);\r\n    this.localShapeCollection = shapeCollectionPool.newShapeCollection();\r\n    this.paths = this.localShapeCollection;\r\n    this.paths.addShape(this.v);\r\n    this.reset = resetShape;\r\n    this.effectsSequence = [];\r\n  }\r\n\r\n  function addEffect(effectFunction) {\r\n    this.effectsSequence.push(effectFunction);\r\n    this.container.addDynamicProperty(this);\r\n  }\r\n\r\n  ShapeProperty.prototype.interpolateShape = interpolateShape;\r\n  ShapeProperty.prototype.getValue = processEffectsSequence;\r\n  ShapeProperty.prototype.setVValue = setVValue;\r\n  ShapeProperty.prototype.addEffect = addEffect;\r\n\r\n  function KeyframedShapeProperty(elem, data, type) {\r\n    this.propType = 'shape';\r\n    this.comp = elem.comp;\r\n    this.elem = elem;\r\n    this.container = elem;\r\n    this.offsetTime = elem.data.st;\r\n    this.keyframes = type === 3 ? data.pt.k : data.ks.k;\r\n    this.keyframesMetadata = [];\r\n    this.k = true;\r\n    this.kf = true;\r\n    var len = this.keyframes[0].s[0].i.length;\r\n    this.v = shapePool.newElement();\r\n    this.v.setPathData(this.keyframes[0].s[0].c, len);\r\n    this.pv = shapePool.clone(this.v);\r\n    this.localShapeCollection = shapeCollectionPool.newShapeCollection();\r\n    this.paths = this.localShapeCollection;\r\n    this.paths.addShape(this.v);\r\n    this.lastFrame = initFrame;\r\n    this.reset = resetShape;\r\n    this._caching = { lastFrame: initFrame, lastIndex: 0 };\r\n    this.effectsSequence = [interpolateShapeCurrentTime.bind(this)];\r\n  }\r\n  KeyframedShapeProperty.prototype.getValue = processEffectsSequence;\r\n  KeyframedShapeProperty.prototype.interpolateShape = interpolateShape;\r\n  KeyframedShapeProperty.prototype.setVValue = setVValue;\r\n  KeyframedShapeProperty.prototype.addEffect = addEffect;\r\n\r\n  var EllShapeProperty = (function () {\r\n    var cPoint = roundCorner;\r\n\r\n    function EllShapePropertyFactory(elem, data) {\r\n      /* this.v = {\r\n                v: createSizedArray(4),\r\n                i: createSizedArray(4),\r\n                o: createSizedArray(4),\r\n                c: true\r\n            }; */\r\n      this.v = shapePool.newElement();\r\n      this.v.setPathData(true, 4);\r\n      this.localShapeCollection = shapeCollectionPool.newShapeCollection();\r\n      this.paths = this.localShapeCollection;\r\n      this.localShapeCollection.addShape(this.v);\r\n      this.d = data.d;\r\n      this.elem = elem;\r\n      this.comp = elem.comp;\r\n      this.frameId = -1;\r\n      this.initDynamicPropertyContainer(elem);\r\n      this.p = PropertyFactory.getProp(elem, data.p, 1, 0, this);\r\n      this.s = PropertyFactory.getProp(elem, data.s, 1, 0, this);\r\n      if (this.dynamicProperties.length) {\r\n        this.k = true;\r\n      } else {\r\n        this.k = false;\r\n        this.convertEllToPath();\r\n      }\r\n    }\r\n\r\n    EllShapePropertyFactory.prototype = {\r\n      reset: resetShape,\r\n      getValue: function () {\r\n        if (this.elem.globalData.frameId === this.frameId) {\r\n          return;\r\n        }\r\n        this.frameId = this.elem.globalData.frameId;\r\n        this.iterateDynamicProperties();\r\n\r\n        if (this._mdf) {\r\n          this.convertEllToPath();\r\n        }\r\n      },\r\n      convertEllToPath: function () {\r\n        var p0 = this.p.v[0];\r\n        var p1 = this.p.v[1];\r\n        var s0 = this.s.v[0] / 2;\r\n        var s1 = this.s.v[1] / 2;\r\n        var _cw = this.d !== 3;\r\n        var _v = this.v;\r\n        _v.v[0][0] = p0;\r\n        _v.v[0][1] = p1 - s1;\r\n        _v.v[1][0] = _cw ? p0 + s0 : p0 - s0;\r\n        _v.v[1][1] = p1;\r\n        _v.v[2][0] = p0;\r\n        _v.v[2][1] = p1 + s1;\r\n        _v.v[3][0] = _cw ? p0 - s0 : p0 + s0;\r\n        _v.v[3][1] = p1;\r\n        _v.i[0][0] = _cw ? p0 - s0 * cPoint : p0 + s0 * cPoint;\r\n        _v.i[0][1] = p1 - s1;\r\n        _v.i[1][0] = _cw ? p0 + s0 : p0 - s0;\r\n        _v.i[1][1] = p1 - s1 * cPoint;\r\n        _v.i[2][0] = _cw ? p0 + s0 * cPoint : p0 - s0 * cPoint;\r\n        _v.i[2][1] = p1 + s1;\r\n        _v.i[3][0] = _cw ? p0 - s0 : p0 + s0;\r\n        _v.i[3][1] = p1 + s1 * cPoint;\r\n        _v.o[0][0] = _cw ? p0 + s0 * cPoint : p0 - s0 * cPoint;\r\n        _v.o[0][1] = p1 - s1;\r\n        _v.o[1][0] = _cw ? p0 + s0 : p0 - s0;\r\n        _v.o[1][1] = p1 + s1 * cPoint;\r\n        _v.o[2][0] = _cw ? p0 - s0 * cPoint : p0 + s0 * cPoint;\r\n        _v.o[2][1] = p1 + s1;\r\n        _v.o[3][0] = _cw ? p0 - s0 : p0 + s0;\r\n        _v.o[3][1] = p1 - s1 * cPoint;\r\n      },\r\n    };\r\n\r\n    extendPrototype([DynamicPropertyContainer], EllShapePropertyFactory);\r\n\r\n    return EllShapePropertyFactory;\r\n  }());\r\n\r\n  var StarShapeProperty = (function () {\r\n    function StarShapePropertyFactory(elem, data) {\r\n      this.v = shapePool.newElement();\r\n      this.v.setPathData(true, 0);\r\n      this.elem = elem;\r\n      this.comp = elem.comp;\r\n      this.data = data;\r\n      this.frameId = -1;\r\n      this.d = data.d;\r\n      this.initDynamicPropertyContainer(elem);\r\n      if (data.sy === 1) {\r\n        this.ir = PropertyFactory.getProp(elem, data.ir, 0, 0, this);\r\n        this.is = PropertyFactory.getProp(elem, data.is, 0, 0.01, this);\r\n        this.convertToPath = this.convertStarToPath;\r\n      } else {\r\n        this.convertToPath = this.convertPolygonToPath;\r\n      }\r\n      this.pt = PropertyFactory.getProp(elem, data.pt, 0, 0, this);\r\n      this.p = PropertyFactory.getProp(elem, data.p, 1, 0, this);\r\n      this.r = PropertyFactory.getProp(elem, data.r, 0, degToRads, this);\r\n      this.or = PropertyFactory.getProp(elem, data.or, 0, 0, this);\r\n      this.os = PropertyFactory.getProp(elem, data.os, 0, 0.01, this);\r\n      this.localShapeCollection = shapeCollectionPool.newShapeCollection();\r\n      this.localShapeCollection.addShape(this.v);\r\n      this.paths = this.localShapeCollection;\r\n      if (this.dynamicProperties.length) {\r\n        this.k = true;\r\n      } else {\r\n        this.k = false;\r\n        this.convertToPath();\r\n      }\r\n    }\r\n\r\n    StarShapePropertyFactory.prototype = {\r\n      reset: resetShape,\r\n      getValue: function () {\r\n        if (this.elem.globalData.frameId === this.frameId) {\r\n          return;\r\n        }\r\n        this.frameId = this.elem.globalData.frameId;\r\n        this.iterateDynamicProperties();\r\n        if (this._mdf) {\r\n          this.convertToPath();\r\n        }\r\n      },\r\n      convertStarToPath: function () {\r\n        var numPts = Math.floor(this.pt.v) * 2;\r\n        var angle = (Math.PI * 2) / numPts;\r\n        /* this.v.v.length = numPts;\r\n                this.v.i.length = numPts;\r\n                this.v.o.length = numPts; */\r\n        var longFlag = true;\r\n        var longRad = this.or.v;\r\n        var shortRad = this.ir.v;\r\n        var longRound = this.os.v;\r\n        var shortRound = this.is.v;\r\n        var longPerimSegment = (2 * Math.PI * longRad) / (numPts * 2);\r\n        var shortPerimSegment = (2 * Math.PI * shortRad) / (numPts * 2);\r\n        var i;\r\n        var rad;\r\n        var roundness;\r\n        var perimSegment;\r\n        var currentAng = -Math.PI / 2;\r\n        currentAng += this.r.v;\r\n        var dir = this.data.d === 3 ? -1 : 1;\r\n        this.v._length = 0;\r\n        for (i = 0; i < numPts; i += 1) {\r\n          rad = longFlag ? longRad : shortRad;\r\n          roundness = longFlag ? longRound : shortRound;\r\n          perimSegment = longFlag ? longPerimSegment : shortPerimSegment;\r\n          var x = rad * Math.cos(currentAng);\r\n          var y = rad * Math.sin(currentAng);\r\n          var ox = x === 0 && y === 0 ? 0 : y / Math.sqrt(x * x + y * y);\r\n          var oy = x === 0 && y === 0 ? 0 : -x / Math.sqrt(x * x + y * y);\r\n          x += +this.p.v[0];\r\n          y += +this.p.v[1];\r\n          this.v.setTripleAt(x, y, x - ox * perimSegment * roundness * dir, y - oy * perimSegment * roundness * dir, x + ox * perimSegment * roundness * dir, y + oy * perimSegment * roundness * dir, i, true);\r\n\r\n          /* this.v.v[i] = [x,y];\r\n                    this.v.i[i] = [x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir];\r\n                    this.v.o[i] = [x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir];\r\n                    this.v._length = numPts; */\r\n          longFlag = !longFlag;\r\n          currentAng += angle * dir;\r\n        }\r\n      },\r\n      convertPolygonToPath: function () {\r\n        var numPts = Math.floor(this.pt.v);\r\n        var angle = (Math.PI * 2) / numPts;\r\n        var rad = this.or.v;\r\n        var roundness = this.os.v;\r\n        var perimSegment = (2 * Math.PI * rad) / (numPts * 4);\r\n        var i;\r\n        var currentAng = -Math.PI * 0.5;\r\n        var dir = this.data.d === 3 ? -1 : 1;\r\n        currentAng += this.r.v;\r\n        this.v._length = 0;\r\n        for (i = 0; i < numPts; i += 1) {\r\n          var x = rad * Math.cos(currentAng);\r\n          var y = rad * Math.sin(currentAng);\r\n          var ox = x === 0 && y === 0 ? 0 : y / Math.sqrt(x * x + y * y);\r\n          var oy = x === 0 && y === 0 ? 0 : -x / Math.sqrt(x * x + y * y);\r\n          x += +this.p.v[0];\r\n          y += +this.p.v[1];\r\n          this.v.setTripleAt(x, y, x - ox * perimSegment * roundness * dir, y - oy * perimSegment * roundness * dir, x + ox * perimSegment * roundness * dir, y + oy * perimSegment * roundness * dir, i, true);\r\n          currentAng += angle * dir;\r\n        }\r\n        this.paths.length = 0;\r\n        this.paths[0] = this.v;\r\n      },\r\n\r\n    };\r\n    extendPrototype([DynamicPropertyContainer], StarShapePropertyFactory);\r\n\r\n    return StarShapePropertyFactory;\r\n  }());\r\n\r\n  var RectShapeProperty = (function () {\r\n    function RectShapePropertyFactory(elem, data) {\r\n      this.v = shapePool.newElement();\r\n      this.v.c = true;\r\n      this.localShapeCollection = shapeCollectionPool.newShapeCollection();\r\n      this.localShapeCollection.addShape(this.v);\r\n      this.paths = this.localShapeCollection;\r\n      this.elem = elem;\r\n      this.comp = elem.comp;\r\n      this.frameId = -1;\r\n      this.d = data.d;\r\n      this.initDynamicPropertyContainer(elem);\r\n      this.p = PropertyFactory.getProp(elem, data.p, 1, 0, this);\r\n      this.s = PropertyFactory.getProp(elem, data.s, 1, 0, this);\r\n      this.r = PropertyFactory.getProp(elem, data.r, 0, 0, this);\r\n      if (this.dynamicProperties.length) {\r\n        this.k = true;\r\n      } else {\r\n        this.k = false;\r\n        this.convertRectToPath();\r\n      }\r\n    }\r\n\r\n    RectShapePropertyFactory.prototype = {\r\n      convertRectToPath: function () {\r\n        var p0 = this.p.v[0];\r\n        var p1 = this.p.v[1];\r\n        var v0 = this.s.v[0] / 2;\r\n        var v1 = this.s.v[1] / 2;\r\n        var round = bmMin(v0, v1, this.r.v);\r\n        var cPoint = round * (1 - roundCorner);\r\n        this.v._length = 0;\r\n\r\n        if (this.d === 2 || this.d === 1) {\r\n          this.v.setTripleAt(p0 + v0, p1 - v1 + round, p0 + v0, p1 - v1 + round, p0 + v0, p1 - v1 + cPoint, 0, true);\r\n          this.v.setTripleAt(p0 + v0, p1 + v1 - round, p0 + v0, p1 + v1 - cPoint, p0 + v0, p1 + v1 - round, 1, true);\r\n          if (round !== 0) {\r\n            this.v.setTripleAt(p0 + v0 - round, p1 + v1, p0 + v0 - round, p1 + v1, p0 + v0 - cPoint, p1 + v1, 2, true);\r\n            this.v.setTripleAt(p0 - v0 + round, p1 + v1, p0 - v0 + cPoint, p1 + v1, p0 - v0 + round, p1 + v1, 3, true);\r\n            this.v.setTripleAt(p0 - v0, p1 + v1 - round, p0 - v0, p1 + v1 - round, p0 - v0, p1 + v1 - cPoint, 4, true);\r\n            this.v.setTripleAt(p0 - v0, p1 - v1 + round, p0 - v0, p1 - v1 + cPoint, p0 - v0, p1 - v1 + round, 5, true);\r\n            this.v.setTripleAt(p0 - v0 + round, p1 - v1, p0 - v0 + round, p1 - v1, p0 - v0 + cPoint, p1 - v1, 6, true);\r\n            this.v.setTripleAt(p0 + v0 - round, p1 - v1, p0 + v0 - cPoint, p1 - v1, p0 + v0 - round, p1 - v1, 7, true);\r\n          } else {\r\n            this.v.setTripleAt(p0 - v0, p1 + v1, p0 - v0 + cPoint, p1 + v1, p0 - v0, p1 + v1, 2);\r\n            this.v.setTripleAt(p0 - v0, p1 - v1, p0 - v0, p1 - v1 + cPoint, p0 - v0, p1 - v1, 3);\r\n          }\r\n        } else {\r\n          this.v.setTripleAt(p0 + v0, p1 - v1 + round, p0 + v0, p1 - v1 + cPoint, p0 + v0, p1 - v1 + round, 0, true);\r\n          if (round !== 0) {\r\n            this.v.setTripleAt(p0 + v0 - round, p1 - v1, p0 + v0 - round, p1 - v1, p0 + v0 - cPoint, p1 - v1, 1, true);\r\n            this.v.setTripleAt(p0 - v0 + round, p1 - v1, p0 - v0 + cPoint, p1 - v1, p0 - v0 + round, p1 - v1, 2, true);\r\n            this.v.setTripleAt(p0 - v0, p1 - v1 + round, p0 - v0, p1 - v1 + round, p0 - v0, p1 - v1 + cPoint, 3, true);\r\n            this.v.setTripleAt(p0 - v0, p1 + v1 - round, p0 - v0, p1 + v1 - cPoint, p0 - v0, p1 + v1 - round, 4, true);\r\n            this.v.setTripleAt(p0 - v0 + round, p1 + v1, p0 - v0 + round, p1 + v1, p0 - v0 + cPoint, p1 + v1, 5, true);\r\n            this.v.setTripleAt(p0 + v0 - round, p1 + v1, p0 + v0 - cPoint, p1 + v1, p0 + v0 - round, p1 + v1, 6, true);\r\n            this.v.setTripleAt(p0 + v0, p1 + v1 - round, p0 + v0, p1 + v1 - round, p0 + v0, p1 + v1 - cPoint, 7, true);\r\n          } else {\r\n            this.v.setTripleAt(p0 - v0, p1 - v1, p0 - v0 + cPoint, p1 - v1, p0 - v0, p1 - v1, 1, true);\r\n            this.v.setTripleAt(p0 - v0, p1 + v1, p0 - v0, p1 + v1 - cPoint, p0 - v0, p1 + v1, 2, true);\r\n            this.v.setTripleAt(p0 + v0, p1 + v1, p0 + v0 - cPoint, p1 + v1, p0 + v0, p1 + v1, 3, true);\r\n          }\r\n        }\r\n      },\r\n      getValue: function () {\r\n        if (this.elem.globalData.frameId === this.frameId) {\r\n          return;\r\n        }\r\n        this.frameId = this.elem.globalData.frameId;\r\n        this.iterateDynamicProperties();\r\n        if (this._mdf) {\r\n          this.convertRectToPath();\r\n        }\r\n      },\r\n      reset: resetShape,\r\n    };\r\n    extendPrototype([DynamicPropertyContainer], RectShapePropertyFactory);\r\n\r\n    return RectShapePropertyFactory;\r\n  }());\r\n\r\n  function getShapeProp(elem, data, type) {\r\n    var prop;\r\n    if (type === 3 || type === 4) {\r\n      var dataProp = type === 3 ? data.pt : data.ks;\r\n      var keys = dataProp.k;\r\n      if (keys.length) {\r\n        prop = new KeyframedShapeProperty(elem, data, type);\r\n      } else {\r\n        prop = new ShapeProperty(elem, data, type);\r\n      }\r\n    } else if (type === 5) {\r\n      prop = new RectShapeProperty(elem, data);\r\n    } else if (type === 6) {\r\n      prop = new EllShapeProperty(elem, data);\r\n    } else if (type === 7) {\r\n      prop = new StarShapeProperty(elem, data);\r\n    }\r\n    if (prop.k) {\r\n      elem.addDynamicProperty(prop);\r\n    }\r\n    return prop;\r\n  }\r\n\r\n  function getConstructorFunction() {\r\n    return ShapeProperty;\r\n  }\r\n\r\n  function getKeyframedConstructorFunction() {\r\n    return KeyframedShapeProperty;\r\n  }\r\n\r\n  var ob = {};\r\n  ob.getShapeProp = getShapeProp;\r\n  ob.getConstructorFunction = getConstructorFunction;\r\n  ob.getKeyframedConstructorFunction = getKeyframedConstructorFunction;\r\n  return ob;\r\n}());\r\n\r\n/* global shapeCollectionPool, initialDefaultFrame, extendPrototype, DynamicPropertyContainer */\r\n/* exported ShapeModifiers */\r\n\r\nvar ShapeModifiers = (function () {\r\n  var ob = {};\r\n  var modifiers = {};\r\n  ob.registerModifier = registerModifier;\r\n  ob.getModifier = getModifier;\r\n\r\n  function registerModifier(nm, factory) {\r\n    if (!modifiers[nm]) {\r\n      modifiers[nm] = factory;\r\n    }\r\n  }\r\n\r\n  function getModifier(nm, elem, data) {\r\n    return new modifiers[nm](elem, data);\r\n  }\r\n\r\n  return ob;\r\n}());\r\n\r\nfunction ShapeModifier() {}\r\nShapeModifier.prototype.initModifierProperties = function () {};\r\nShapeModifier.prototype.addShapeToModifier = function () {};\r\nShapeModifier.prototype.addShape = function (data) {\r\n  if (!this.closed) {\r\n    // Adding shape to dynamic properties. It covers the case where a shape has no effects applied, to reset it's _mdf state on every tick.\r\n    data.sh.container.addDynamicProperty(data.sh);\r\n    var shapeData = { shape: data.sh, data: data, localShapeCollection: shapeCollectionPool.newShapeCollection() };\r\n    this.shapes.push(shapeData);\r\n    this.addShapeToModifier(shapeData);\r\n    if (this._isAnimated) {\r\n      data.setAsAnimated();\r\n    }\r\n  }\r\n};\r\nShapeModifier.prototype.init = function (elem, data) {\r\n  this.shapes = [];\r\n  this.elem = elem;\r\n  this.initDynamicPropertyContainer(elem);\r\n  this.initModifierProperties(elem, data);\r\n  this.frameId = initialDefaultFrame;\r\n  this.closed = false;\r\n  this.k = false;\r\n  if (this.dynamicProperties.length) {\r\n    this.k = true;\r\n  } else {\r\n    this.getValue(true);\r\n  }\r\n};\r\nShapeModifier.prototype.processKeys = function () {\r\n  if (this.elem.globalData.frameId === this.frameId) {\r\n    return;\r\n  }\r\n  this.frameId = this.elem.globalData.frameId;\r\n  this.iterateDynamicProperties();\r\n};\r\n\r\nextendPrototype([DynamicPropertyContainer], ShapeModifier);\r\n\r\n/* global extendPrototype, ShapeModifier, PropertyFactory, segmentsLengthPool, bez, shapePool, ShapeModifiers */\r\n\r\nfunction TrimModifier() {\r\n}\r\nextendPrototype([ShapeModifier], TrimModifier);\r\nTrimModifier.prototype.initModifierProperties = function (elem, data) {\r\n  this.s = PropertyFactory.getProp(elem, data.s, 0, 0.01, this);\r\n  this.e = PropertyFactory.getProp(elem, data.e, 0, 0.01, this);\r\n  this.o = PropertyFactory.getProp(elem, data.o, 0, 0, this);\r\n  this.sValue = 0;\r\n  this.eValue = 0;\r\n  this.getValue = this.processKeys;\r\n  this.m = data.m;\r\n  this._isAnimated = !!this.s.effectsSequence.length || !!this.e.effectsSequence.length || !!this.o.effectsSequence.length;\r\n};\r\n\r\nTrimModifier.prototype.addShapeToModifier = function (shapeData) {\r\n  shapeData.pathsData = [];\r\n};\r\n\r\nTrimModifier.prototype.calculateShapeEdges = function (s, e, shapeLength, addedLength, totalModifierLength) {\r\n  var segments = [];\r\n  if (e <= 1) {\r\n    segments.push({\r\n      s: s,\r\n      e: e,\r\n    });\r\n  } else if (s >= 1) {\r\n    segments.push({\r\n      s: s - 1,\r\n      e: e - 1,\r\n    });\r\n  } else {\r\n    segments.push({\r\n      s: s,\r\n      e: 1,\r\n    });\r\n    segments.push({\r\n      s: 0,\r\n      e: e - 1,\r\n    });\r\n  }\r\n  var shapeSegments = [];\r\n  var i;\r\n  var len = segments.length;\r\n  var segmentOb;\r\n  for (i = 0; i < len; i += 1) {\r\n    segmentOb = segments[i];\r\n    if (!(segmentOb.e * totalModifierLength < addedLength || segmentOb.s * totalModifierLength > addedLength + shapeLength)) {\r\n      var shapeS;\r\n      var shapeE;\r\n      if (segmentOb.s * totalModifierLength <= addedLength) {\r\n        shapeS = 0;\r\n      } else {\r\n        shapeS = (segmentOb.s * totalModifierLength - addedLength) / shapeLength;\r\n      }\r\n      if (segmentOb.e * totalModifierLength >= addedLength + shapeLength) {\r\n        shapeE = 1;\r\n      } else {\r\n        shapeE = ((segmentOb.e * totalModifierLength - addedLength) / shapeLength);\r\n      }\r\n      shapeSegments.push([shapeS, shapeE]);\r\n    }\r\n  }\r\n  if (!shapeSegments.length) {\r\n    shapeSegments.push([0, 0]);\r\n  }\r\n  return shapeSegments;\r\n};\r\n\r\nTrimModifier.prototype.releasePathsData = function (pathsData) {\r\n  var i;\r\n  var len = pathsData.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    segmentsLengthPool.release(pathsData[i]);\r\n  }\r\n  pathsData.length = 0;\r\n  return pathsData;\r\n};\r\n\r\nTrimModifier.prototype.processShapes = function (_isFirstFrame) {\r\n  var s;\r\n  var e;\r\n  if (this._mdf || _isFirstFrame) {\r\n    var o = (this.o.v % 360) / 360;\r\n    if (o < 0) {\r\n      o += 1;\r\n    }\r\n    if (this.s.v > 1) {\r\n      s = 1 + o;\r\n    } else if (this.s.v < 0) {\r\n      s = 0 + o;\r\n    } else {\r\n      s = this.s.v + o;\r\n    }\r\n    if (this.e.v > 1) {\r\n      e = 1 + o;\r\n    } else if (this.e.v < 0) {\r\n      e = 0 + o;\r\n    } else {\r\n      e = this.e.v + o;\r\n    }\r\n\r\n    if (s > e) {\r\n      var _s = s;\r\n      s = e;\r\n      e = _s;\r\n    }\r\n    s = Math.round(s * 10000) * 0.0001;\r\n    e = Math.round(e * 10000) * 0.0001;\r\n    this.sValue = s;\r\n    this.eValue = e;\r\n  } else {\r\n    s = this.sValue;\r\n    e = this.eValue;\r\n  }\r\n  var shapePaths;\r\n  var i;\r\n  var len = this.shapes.length;\r\n  var j;\r\n  var jLen;\r\n  var pathsData;\r\n  var pathData;\r\n  var totalShapeLength;\r\n  var totalModifierLength = 0;\r\n\r\n  if (e === s) {\r\n    for (i = 0; i < len; i += 1) {\r\n      this.shapes[i].localShapeCollection.releaseShapes();\r\n      this.shapes[i].shape._mdf = true;\r\n      this.shapes[i].shape.paths = this.shapes[i].localShapeCollection;\r\n      if (this._mdf) {\r\n        this.shapes[i].pathsData.length = 0;\r\n      }\r\n    }\r\n  } else if (!((e === 1 && s === 0) || (e === 0 && s === 1))) {\r\n    var segments = [];\r\n    var shapeData;\r\n    var localShapeCollection;\r\n    for (i = 0; i < len; i += 1) {\r\n      shapeData = this.shapes[i];\r\n      // if shape hasn't changed and trim properties haven't changed, cached previous path can be used\r\n      if (!shapeData.shape._mdf && !this._mdf && !_isFirstFrame && this.m !== 2) {\r\n        shapeData.shape.paths = shapeData.localShapeCollection;\r\n      } else {\r\n        shapePaths = shapeData.shape.paths;\r\n        jLen = shapePaths._length;\r\n        totalShapeLength = 0;\r\n        if (!shapeData.shape._mdf && shapeData.pathsData.length) {\r\n          totalShapeLength = shapeData.totalShapeLength;\r\n        } else {\r\n          pathsData = this.releasePathsData(shapeData.pathsData);\r\n          for (j = 0; j < jLen; j += 1) {\r\n            pathData = bez.getSegmentsLength(shapePaths.shapes[j]);\r\n            pathsData.push(pathData);\r\n            totalShapeLength += pathData.totalLength;\r\n          }\r\n          shapeData.totalShapeLength = totalShapeLength;\r\n          shapeData.pathsData = pathsData;\r\n        }\r\n\r\n        totalModifierLength += totalShapeLength;\r\n        shapeData.shape._mdf = true;\r\n      }\r\n    }\r\n    var shapeS = s;\r\n    var shapeE = e;\r\n    var addedLength = 0;\r\n    var edges;\r\n    for (i = len - 1; i >= 0; i -= 1) {\r\n      shapeData = this.shapes[i];\r\n      if (shapeData.shape._mdf) {\r\n        localShapeCollection = shapeData.localShapeCollection;\r\n        localShapeCollection.releaseShapes();\r\n        // if m === 2 means paths are trimmed individually so edges need to be found for this specific shape relative to whoel group\r\n        if (this.m === 2 && len > 1) {\r\n          edges = this.calculateShapeEdges(s, e, shapeData.totalShapeLength, addedLength, totalModifierLength);\r\n          addedLength += shapeData.totalShapeLength;\r\n        } else {\r\n          edges = [[shapeS, shapeE]];\r\n        }\r\n        jLen = edges.length;\r\n        for (j = 0; j < jLen; j += 1) {\r\n          shapeS = edges[j][0];\r\n          shapeE = edges[j][1];\r\n          segments.length = 0;\r\n          if (shapeE <= 1) {\r\n            segments.push({\r\n              s: shapeData.totalShapeLength * shapeS,\r\n              e: shapeData.totalShapeLength * shapeE,\r\n            });\r\n          } else if (shapeS >= 1) {\r\n            segments.push({\r\n              s: shapeData.totalShapeLength * (shapeS - 1),\r\n              e: shapeData.totalShapeLength * (shapeE - 1),\r\n            });\r\n          } else {\r\n            segments.push({\r\n              s: shapeData.totalShapeLength * shapeS,\r\n              e: shapeData.totalShapeLength,\r\n            });\r\n            segments.push({\r\n              s: 0,\r\n              e: shapeData.totalShapeLength * (shapeE - 1),\r\n            });\r\n          }\r\n          var newShapesData = this.addShapes(shapeData, segments[0]);\r\n          if (segments[0].s !== segments[0].e) {\r\n            if (segments.length > 1) {\r\n              var lastShapeInCollection = shapeData.shape.paths.shapes[shapeData.shape.paths._length - 1];\r\n              if (lastShapeInCollection.c) {\r\n                var lastShape = newShapesData.pop();\r\n                this.addPaths(newShapesData, localShapeCollection);\r\n                newShapesData = this.addShapes(shapeData, segments[1], lastShape);\r\n              } else {\r\n                this.addPaths(newShapesData, localShapeCollection);\r\n                newShapesData = this.addShapes(shapeData, segments[1]);\r\n              }\r\n            }\r\n            this.addPaths(newShapesData, localShapeCollection);\r\n          }\r\n        }\r\n        shapeData.shape.paths = localShapeCollection;\r\n      }\r\n    }\r\n  } else if (this._mdf) {\r\n    for (i = 0; i < len; i += 1) {\r\n      // Releasign Trim Cached paths data when no trim applied in case shapes are modified inbetween.\r\n      // Don't remove this even if it's losing cached info.\r\n      this.shapes[i].pathsData.length = 0;\r\n      this.shapes[i].shape._mdf = true;\r\n    }\r\n  }\r\n};\r\n\r\nTrimModifier.prototype.addPaths = function (newPaths, localShapeCollection) {\r\n  var i;\r\n  var len = newPaths.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    localShapeCollection.addShape(newPaths[i]);\r\n  }\r\n};\r\n\r\nTrimModifier.prototype.addSegment = function (pt1, pt2, pt3, pt4, shapePath, pos, newShape) {\r\n  shapePath.setXYAt(pt2[0], pt2[1], 'o', pos);\r\n  shapePath.setXYAt(pt3[0], pt3[1], 'i', pos + 1);\r\n  if (newShape) {\r\n    shapePath.setXYAt(pt1[0], pt1[1], 'v', pos);\r\n  }\r\n  shapePath.setXYAt(pt4[0], pt4[1], 'v', pos + 1);\r\n};\r\n\r\nTrimModifier.prototype.addSegmentFromArray = function (points, shapePath, pos, newShape) {\r\n  shapePath.setXYAt(points[1], points[5], 'o', pos);\r\n  shapePath.setXYAt(points[2], points[6], 'i', pos + 1);\r\n  if (newShape) {\r\n    shapePath.setXYAt(points[0], points[4], 'v', pos);\r\n  }\r\n  shapePath.setXYAt(points[3], points[7], 'v', pos + 1);\r\n};\r\n\r\nTrimModifier.prototype.addShapes = function (shapeData, shapeSegment, shapePath) {\r\n  var pathsData = shapeData.pathsData;\r\n  var shapePaths = shapeData.shape.paths.shapes;\r\n  var i;\r\n  var len = shapeData.shape.paths._length;\r\n  var j;\r\n  var jLen;\r\n  var addedLength = 0;\r\n  var currentLengthData;\r\n  var segmentCount;\r\n  var lengths;\r\n  var segment;\r\n  var shapes = [];\r\n  var initPos;\r\n  var newShape = true;\r\n  if (!shapePath) {\r\n    shapePath = shapePool.newElement();\r\n    segmentCount = 0;\r\n    initPos = 0;\r\n  } else {\r\n    segmentCount = shapePath._length;\r\n    initPos = shapePath._length;\r\n  }\r\n  shapes.push(shapePath);\r\n  for (i = 0; i < len; i += 1) {\r\n    lengths = pathsData[i].lengths;\r\n    shapePath.c = shapePaths[i].c;\r\n    jLen = shapePaths[i].c ? lengths.length : lengths.length + 1;\r\n    for (j = 1; j < jLen; j += 1) {\r\n      currentLengthData = lengths[j - 1];\r\n      if (addedLength + currentLengthData.addedLength < shapeSegment.s) {\r\n        addedLength += currentLengthData.addedLength;\r\n        shapePath.c = false;\r\n      } else if (addedLength > shapeSegment.e) {\r\n        shapePath.c = false;\r\n        break;\r\n      } else {\r\n        if (shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + currentLengthData.addedLength) {\r\n          this.addSegment(shapePaths[i].v[j - 1], shapePaths[i].o[j - 1], shapePaths[i].i[j], shapePaths[i].v[j], shapePath, segmentCount, newShape);\r\n          newShape = false;\r\n        } else {\r\n          segment = bez.getNewSegment(shapePaths[i].v[j - 1], shapePaths[i].v[j], shapePaths[i].o[j - 1], shapePaths[i].i[j], (shapeSegment.s - addedLength) / currentLengthData.addedLength, (shapeSegment.e - addedLength) / currentLengthData.addedLength, lengths[j - 1]);\r\n          this.addSegmentFromArray(segment, shapePath, segmentCount, newShape);\r\n          // this.addSegment(segment.pt1, segment.pt3, segment.pt4, segment.pt2, shapePath, segmentCount, newShape);\r\n          newShape = false;\r\n          shapePath.c = false;\r\n        }\r\n        addedLength += currentLengthData.addedLength;\r\n        segmentCount += 1;\r\n      }\r\n    }\r\n    if (shapePaths[i].c && lengths.length) {\r\n      currentLengthData = lengths[j - 1];\r\n      if (addedLength <= shapeSegment.e) {\r\n        var segmentLength = lengths[j - 1].addedLength;\r\n        if (shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + segmentLength) {\r\n          this.addSegment(shapePaths[i].v[j - 1], shapePaths[i].o[j - 1], shapePaths[i].i[0], shapePaths[i].v[0], shapePath, segmentCount, newShape);\r\n          newShape = false;\r\n        } else {\r\n          segment = bez.getNewSegment(shapePaths[i].v[j - 1], shapePaths[i].v[0], shapePaths[i].o[j - 1], shapePaths[i].i[0], (shapeSegment.s - addedLength) / segmentLength, (shapeSegment.e - addedLength) / segmentLength, lengths[j - 1]);\r\n          this.addSegmentFromArray(segment, shapePath, segmentCount, newShape);\r\n          // this.addSegment(segment.pt1, segment.pt3, segment.pt4, segment.pt2, shapePath, segmentCount, newShape);\r\n          newShape = false;\r\n          shapePath.c = false;\r\n        }\r\n      } else {\r\n        shapePath.c = false;\r\n      }\r\n      addedLength += currentLengthData.addedLength;\r\n      segmentCount += 1;\r\n    }\r\n    if (shapePath._length) {\r\n      shapePath.setXYAt(shapePath.v[initPos][0], shapePath.v[initPos][1], 'i', initPos);\r\n      shapePath.setXYAt(shapePath.v[shapePath._length - 1][0], shapePath.v[shapePath._length - 1][1], 'o', shapePath._length - 1);\r\n    }\r\n    if (addedLength > shapeSegment.e) {\r\n      break;\r\n    }\r\n    if (i < len - 1) {\r\n      shapePath = shapePool.newElement();\r\n      newShape = true;\r\n      shapes.push(shapePath);\r\n      segmentCount = 0;\r\n    }\r\n  }\r\n  return shapes;\r\n};\r\n\r\nShapeModifiers.registerModifier('tm', TrimModifier);\r\n\r\n/* global extendPrototype, ShapeModifier, PropertyFactory, shapePool, roundCorner, ShapeModifiers */\r\n\r\nfunction RoundCornersModifier() {}\r\nextendPrototype([ShapeModifier], RoundCornersModifier);\r\nRoundCornersModifier.prototype.initModifierProperties = function (elem, data) {\r\n  this.getValue = this.processKeys;\r\n  this.rd = PropertyFactory.getProp(elem, data.r, 0, null, this);\r\n  this._isAnimated = !!this.rd.effectsSequence.length;\r\n};\r\n\r\nRoundCornersModifier.prototype.processPath = function (path, round) {\r\n  var clonedPath = shapePool.newElement();\r\n  clonedPath.c = path.c;\r\n  var i;\r\n  var len = path._length;\r\n  var currentV;\r\n  var currentI;\r\n  var currentO;\r\n  var closerV;\r\n  var distance;\r\n  var newPosPerc;\r\n  var index = 0;\r\n  var vX;\r\n  var vY;\r\n  var oX;\r\n  var oY;\r\n  var iX;\r\n  var iY;\r\n  for (i = 0; i < len; i += 1) {\r\n    currentV = path.v[i];\r\n    currentO = path.o[i];\r\n    currentI = path.i[i];\r\n    if (currentV[0] === currentO[0] && currentV[1] === currentO[1] && currentV[0] === currentI[0] && currentV[1] === currentI[1]) {\r\n      if ((i === 0 || i === len - 1) && !path.c) {\r\n        clonedPath.setTripleAt(currentV[0], currentV[1], currentO[0], currentO[1], currentI[0], currentI[1], index);\r\n        /* clonedPath.v[index] = currentV;\r\n                clonedPath.o[index] = currentO;\r\n                clonedPath.i[index] = currentI; */\r\n        index += 1;\r\n      } else {\r\n        if (i === 0) {\r\n          closerV = path.v[len - 1];\r\n        } else {\r\n          closerV = path.v[i - 1];\r\n        }\r\n        distance = Math.sqrt(Math.pow(currentV[0] - closerV[0], 2) + Math.pow(currentV[1] - closerV[1], 2));\r\n        newPosPerc = distance ? Math.min(distance / 2, round) / distance : 0;\r\n        iX = currentV[0] + (closerV[0] - currentV[0]) * newPosPerc;\r\n        vX = iX;\r\n        iY = currentV[1] - (currentV[1] - closerV[1]) * newPosPerc;\r\n        vY = iY;\r\n        oX = vX - (vX - currentV[0]) * roundCorner;\r\n        oY = vY - (vY - currentV[1]) * roundCorner;\r\n        clonedPath.setTripleAt(vX, vY, oX, oY, iX, iY, index);\r\n        index += 1;\r\n\r\n        if (i === len - 1) {\r\n          closerV = path.v[0];\r\n        } else {\r\n          closerV = path.v[i + 1];\r\n        }\r\n        distance = Math.sqrt(Math.pow(currentV[0] - closerV[0], 2) + Math.pow(currentV[1] - closerV[1], 2));\r\n        newPosPerc = distance ? Math.min(distance / 2, round) / distance : 0;\r\n        oX = currentV[0] + (closerV[0] - currentV[0]) * newPosPerc;\r\n        vX = oX;\r\n        oY = currentV[1] + (closerV[1] - currentV[1]) * newPosPerc;\r\n        vY = oY;\r\n        iX = vX - (vX - currentV[0]) * roundCorner;\r\n        iY = vY - (vY - currentV[1]) * roundCorner;\r\n        clonedPath.setTripleAt(vX, vY, oX, oY, iX, iY, index);\r\n        index += 1;\r\n      }\r\n    } else {\r\n      clonedPath.setTripleAt(path.v[i][0], path.v[i][1], path.o[i][0], path.o[i][1], path.i[i][0], path.i[i][1], index);\r\n      index += 1;\r\n    }\r\n  }\r\n  return clonedPath;\r\n};\r\n\r\nRoundCornersModifier.prototype.processShapes = function (_isFirstFrame) {\r\n  var shapePaths;\r\n  var i;\r\n  var len = this.shapes.length;\r\n  var j;\r\n  var jLen;\r\n  var rd = this.rd.v;\r\n\r\n  if (rd !== 0) {\r\n    var shapeData;\r\n    var localShapeCollection;\r\n    for (i = 0; i < len; i += 1) {\r\n      shapeData = this.shapes[i];\r\n      localShapeCollection = shapeData.localShapeCollection;\r\n      if (!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)) {\r\n        localShapeCollection.releaseShapes();\r\n        shapeData.shape._mdf = true;\r\n        shapePaths = shapeData.shape.paths.shapes;\r\n        jLen = shapeData.shape.paths._length;\r\n        for (j = 0; j < jLen; j += 1) {\r\n          localShapeCollection.addShape(this.processPath(shapePaths[j], rd));\r\n        }\r\n      }\r\n      shapeData.shape.paths = shapeData.localShapeCollection;\r\n    }\r\n  }\r\n  if (!this.dynamicProperties.length) {\r\n    this._mdf = false;\r\n  }\r\n};\r\n\r\nShapeModifiers.registerModifier('rd', RoundCornersModifier);\r\n\r\n/* global extendPrototype, ShapeModifier, PropertyFactory, shapePool, ShapeModifiers */\r\n\r\nfunction PuckerAndBloatModifier() {}\r\nextendPrototype([ShapeModifier], PuckerAndBloatModifier);\r\nPuckerAndBloatModifier.prototype.initModifierProperties = function (elem, data) {\r\n  this.getValue = this.processKeys;\r\n  this.amount = PropertyFactory.getProp(elem, data.a, 0, null, this);\r\n  this._isAnimated = !!this.amount.effectsSequence.length;\r\n};\r\n\r\nPuckerAndBloatModifier.prototype.processPath = function (path, amount) {\r\n  var percent = amount / 100;\r\n  var centerPoint = [0, 0];\r\n  var pathLength = path._length;\r\n  var i = 0;\r\n  for (i = 0; i < pathLength; i += 1) {\r\n    centerPoint[0] += path.v[i][0];\r\n    centerPoint[1] += path.v[i][1];\r\n  }\r\n  centerPoint[0] /= pathLength;\r\n  centerPoint[1] /= pathLength;\r\n  var clonedPath = shapePool.newElement();\r\n  clonedPath.c = path.c;\r\n  var vX;\r\n  var vY;\r\n  var oX;\r\n  var oY;\r\n  var iX;\r\n  var iY;\r\n  for (i = 0; i < pathLength; i += 1) {\r\n    vX = path.v[i][0] + (centerPoint[0] - path.v[i][0]) * percent;\r\n    vY = path.v[i][1] + (centerPoint[1] - path.v[i][1]) * percent;\r\n    oX = path.o[i][0] + (centerPoint[0] - path.o[i][0]) * -percent;\r\n    oY = path.o[i][1] + (centerPoint[1] - path.o[i][1]) * -percent;\r\n    iX = path.i[i][0] + (centerPoint[0] - path.i[i][0]) * -percent;\r\n    iY = path.i[i][1] + (centerPoint[1] - path.i[i][1]) * -percent;\r\n    clonedPath.setTripleAt(vX, vY, oX, oY, iX, iY, i);\r\n  }\r\n  return clonedPath;\r\n};\r\n\r\nPuckerAndBloatModifier.prototype.processShapes = function (_isFirstFrame) {\r\n  var shapePaths;\r\n  var i;\r\n  var len = this.shapes.length;\r\n  var j;\r\n  var jLen;\r\n  var amount = this.amount.v;\r\n\r\n  if (amount !== 0) {\r\n    var shapeData;\r\n    var localShapeCollection;\r\n    for (i = 0; i < len; i += 1) {\r\n      shapeData = this.shapes[i];\r\n      localShapeCollection = shapeData.localShapeCollection;\r\n      if (!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)) {\r\n        localShapeCollection.releaseShapes();\r\n        shapeData.shape._mdf = true;\r\n        shapePaths = shapeData.shape.paths.shapes;\r\n        jLen = shapeData.shape.paths._length;\r\n        for (j = 0; j < jLen; j += 1) {\r\n          localShapeCollection.addShape(this.processPath(shapePaths[j], amount));\r\n        }\r\n      }\r\n      shapeData.shape.paths = shapeData.localShapeCollection;\r\n    }\r\n  }\r\n  if (!this.dynamicProperties.length) {\r\n    this._mdf = false;\r\n  }\r\n};\r\nShapeModifiers.registerModifier('pb', PuckerAndBloatModifier);\r\n\r\n/* global extendPrototype, ShapeModifier, TransformPropertyFactory, PropertyFactory, Matrix, ShapeModifiers */\r\n\r\nfunction RepeaterModifier() {}\r\nextendPrototype([ShapeModifier], RepeaterModifier);\r\n\r\nRepeaterModifier.prototype.initModifierProperties = function (elem, data) {\r\n  this.getValue = this.processKeys;\r\n  this.c = PropertyFactory.getProp(elem, data.c, 0, null, this);\r\n  this.o = PropertyFactory.getProp(elem, data.o, 0, null, this);\r\n  this.tr = TransformPropertyFactory.getTransformProperty(elem, data.tr, this);\r\n  this.so = PropertyFactory.getProp(elem, data.tr.so, 0, 0.01, this);\r\n  this.eo = PropertyFactory.getProp(elem, data.tr.eo, 0, 0.01, this);\r\n  this.data = data;\r\n  if (!this.dynamicProperties.length) {\r\n    this.getValue(true);\r\n  }\r\n  this._isAnimated = !!this.dynamicProperties.length;\r\n  this.pMatrix = new Matrix();\r\n  this.rMatrix = new Matrix();\r\n  this.sMatrix = new Matrix();\r\n  this.tMatrix = new Matrix();\r\n  this.matrix = new Matrix();\r\n};\r\n\r\nRepeaterModifier.prototype.applyTransforms = function (pMatrix, rMatrix, sMatrix, transform, perc, inv) {\r\n  var dir = inv ? -1 : 1;\r\n  var scaleX = transform.s.v[0] + (1 - transform.s.v[0]) * (1 - perc);\r\n  var scaleY = transform.s.v[1] + (1 - transform.s.v[1]) * (1 - perc);\r\n  pMatrix.translate(transform.p.v[0] * dir * perc, transform.p.v[1] * dir * perc, transform.p.v[2]);\r\n  rMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\r\n  rMatrix.rotate(-transform.r.v * dir * perc);\r\n  rMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\r\n  sMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\r\n  sMatrix.scale(inv ? 1 / scaleX : scaleX, inv ? 1 / scaleY : scaleY);\r\n  sMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\r\n};\r\n\r\nRepeaterModifier.prototype.init = function (elem, arr, pos, elemsData) {\r\n  this.elem = elem;\r\n  this.arr = arr;\r\n  this.pos = pos;\r\n  this.elemsData = elemsData;\r\n  this._currentCopies = 0;\r\n  this._elements = [];\r\n  this._groups = [];\r\n  this.frameId = -1;\r\n  this.initDynamicPropertyContainer(elem);\r\n  this.initModifierProperties(elem, arr[pos]);\r\n  while (pos > 0) {\r\n    pos -= 1;\r\n    // this._elements.unshift(arr.splice(pos,1)[0]);\r\n    this._elements.unshift(arr[pos]);\r\n  }\r\n  if (this.dynamicProperties.length) {\r\n    this.k = true;\r\n  } else {\r\n    this.getValue(true);\r\n  }\r\n};\r\n\r\nRepeaterModifier.prototype.resetElements = function (elements) {\r\n  var i;\r\n  var len = elements.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    elements[i]._processed = false;\r\n    if (elements[i].ty === 'gr') {\r\n      this.resetElements(elements[i].it);\r\n    }\r\n  }\r\n};\r\n\r\nRepeaterModifier.prototype.cloneElements = function (elements) {\r\n  var newElements = JSON.parse(JSON.stringify(elements));\r\n  this.resetElements(newElements);\r\n  return newElements;\r\n};\r\n\r\nRepeaterModifier.prototype.changeGroupRender = function (elements, renderFlag) {\r\n  var i;\r\n  var len = elements.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    elements[i]._render = renderFlag;\r\n    if (elements[i].ty === 'gr') {\r\n      this.changeGroupRender(elements[i].it, renderFlag);\r\n    }\r\n  }\r\n};\r\n\r\nRepeaterModifier.prototype.processShapes = function (_isFirstFrame) {\r\n  var items;\r\n  var itemsTransform;\r\n  var i;\r\n  var dir;\r\n  var cont;\r\n  var hasReloaded = false;\r\n  if (this._mdf || _isFirstFrame) {\r\n    var copies = Math.ceil(this.c.v);\r\n    if (this._groups.length < copies) {\r\n      while (this._groups.length < copies) {\r\n        var group = {\r\n          it: this.cloneElements(this._elements),\r\n          ty: 'gr',\r\n        };\r\n        group.it.push({\r\n          a: { a: 0, ix: 1, k: [0, 0] }, nm: 'Transform', o: { a: 0, ix: 7, k: 100 }, p: { a: 0, ix: 2, k: [0, 0] }, r: { a: 1, ix: 6, k: [{ s: 0, e: 0, t: 0 }, { s: 0, e: 0, t: 1 }] }, s: { a: 0, ix: 3, k: [100, 100] }, sa: { a: 0, ix: 5, k: 0 }, sk: { a: 0, ix: 4, k: 0 }, ty: 'tr',\r\n        });\r\n\r\n        this.arr.splice(0, 0, group);\r\n        this._groups.splice(0, 0, group);\r\n        this._currentCopies += 1;\r\n      }\r\n      this.elem.reloadShapes();\r\n      hasReloaded = true;\r\n    }\r\n    cont = 0;\r\n    var renderFlag;\r\n    for (i = 0; i <= this._groups.length - 1; i += 1) {\r\n      renderFlag = cont < copies;\r\n      this._groups[i]._render = renderFlag;\r\n      this.changeGroupRender(this._groups[i].it, renderFlag);\r\n      if (!renderFlag) {\r\n        var elems = this.elemsData[i].it;\r\n        var transformData = elems[elems.length - 1];\r\n        if (transformData.transform.op.v !== 0) {\r\n          transformData.transform.op._mdf = true;\r\n          transformData.transform.op.v = 0;\r\n        } else {\r\n          transformData.transform.op._mdf = false;\r\n        }\r\n      }\r\n      cont += 1;\r\n    }\r\n\r\n    this._currentCopies = copies;\r\n    /// /\r\n\r\n    var offset = this.o.v;\r\n    var offsetModulo = offset % 1;\r\n    var roundOffset = offset > 0 ? Math.floor(offset) : Math.ceil(offset);\r\n    var pProps = this.pMatrix.props;\r\n    var rProps = this.rMatrix.props;\r\n    var sProps = this.sMatrix.props;\r\n    this.pMatrix.reset();\r\n    this.rMatrix.reset();\r\n    this.sMatrix.reset();\r\n    this.tMatrix.reset();\r\n    this.matrix.reset();\r\n    var iteration = 0;\r\n\r\n    if (offset > 0) {\r\n      while (iteration < roundOffset) {\r\n        this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\r\n        iteration += 1;\r\n      }\r\n      if (offsetModulo) {\r\n        this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, offsetModulo, false);\r\n        iteration += offsetModulo;\r\n      }\r\n    } else if (offset < 0) {\r\n      while (iteration > roundOffset) {\r\n        this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, true);\r\n        iteration -= 1;\r\n      }\r\n      if (offsetModulo) {\r\n        this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, -offsetModulo, true);\r\n        iteration -= offsetModulo;\r\n      }\r\n    }\r\n    i = this.data.m === 1 ? 0 : this._currentCopies - 1;\r\n    dir = this.data.m === 1 ? 1 : -1;\r\n    cont = this._currentCopies;\r\n    var j;\r\n    var jLen;\r\n    while (cont) {\r\n      items = this.elemsData[i].it;\r\n      itemsTransform = items[items.length - 1].transform.mProps.v.props;\r\n      jLen = itemsTransform.length;\r\n      items[items.length - 1].transform.mProps._mdf = true;\r\n      items[items.length - 1].transform.op._mdf = true;\r\n      items[items.length - 1].transform.op.v = this._currentCopies === 1\r\n        ? this.so.v\r\n        : this.so.v + (this.eo.v - this.so.v) * (i / (this._currentCopies - 1));\r\n\r\n      if (iteration !== 0) {\r\n        if ((i !== 0 && dir === 1) || (i !== this._currentCopies - 1 && dir === -1)) {\r\n          this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\r\n        }\r\n        this.matrix.transform(rProps[0], rProps[1], rProps[2], rProps[3], rProps[4], rProps[5], rProps[6], rProps[7], rProps[8], rProps[9], rProps[10], rProps[11], rProps[12], rProps[13], rProps[14], rProps[15]);\r\n        this.matrix.transform(sProps[0], sProps[1], sProps[2], sProps[3], sProps[4], sProps[5], sProps[6], sProps[7], sProps[8], sProps[9], sProps[10], sProps[11], sProps[12], sProps[13], sProps[14], sProps[15]);\r\n        this.matrix.transform(pProps[0], pProps[1], pProps[2], pProps[3], pProps[4], pProps[5], pProps[6], pProps[7], pProps[8], pProps[9], pProps[10], pProps[11], pProps[12], pProps[13], pProps[14], pProps[15]);\r\n\r\n        for (j = 0; j < jLen; j += 1) {\r\n          itemsTransform[j] = this.matrix.props[j];\r\n        }\r\n        this.matrix.reset();\r\n      } else {\r\n        this.matrix.reset();\r\n        for (j = 0; j < jLen; j += 1) {\r\n          itemsTransform[j] = this.matrix.props[j];\r\n        }\r\n      }\r\n      iteration += 1;\r\n      cont -= 1;\r\n      i += dir;\r\n    }\r\n  } else {\r\n    cont = this._currentCopies;\r\n    i = 0;\r\n    dir = 1;\r\n    while (cont) {\r\n      items = this.elemsData[i].it;\r\n      itemsTransform = items[items.length - 1].transform.mProps.v.props;\r\n      items[items.length - 1].transform.mProps._mdf = false;\r\n      items[items.length - 1].transform.op._mdf = false;\r\n      cont -= 1;\r\n      i += dir;\r\n    }\r\n  }\r\n  return hasReloaded;\r\n};\r\n\r\nRepeaterModifier.prototype.addShape = function () {};\r\n\r\nShapeModifiers.registerModifier('rp', RepeaterModifier);\r\n\r\n/* global createSizedArray, shapePool */\r\n\r\nfunction ShapeCollection() {\r\n  this._length = 0;\r\n  this._maxLength = 4;\r\n  this.shapes = createSizedArray(this._maxLength);\r\n}\r\n\r\nShapeCollection.prototype.addShape = function (shapeData) {\r\n  if (this._length === this._maxLength) {\r\n    this.shapes = this.shapes.concat(createSizedArray(this._maxLength));\r\n    this._maxLength *= 2;\r\n  }\r\n  this.shapes[this._length] = shapeData;\r\n  this._length += 1;\r\n};\r\n\r\nShapeCollection.prototype.releaseShapes = function () {\r\n  var i;\r\n  for (i = 0; i < this._length; i += 1) {\r\n    shapePool.release(this.shapes[i]);\r\n  }\r\n  this._length = 0;\r\n};\r\n\r\n/* global createSizedArray, createTypedArray, PropertyFactory, extendPrototype, DynamicPropertyContainer */\r\n\r\nfunction DashProperty(elem, data, renderer, container) {\r\n  this.elem = elem;\r\n  this.frameId = -1;\r\n  this.dataProps = createSizedArray(data.length);\r\n  this.renderer = renderer;\r\n  this.k = false;\r\n  this.dashStr = '';\r\n  this.dashArray = createTypedArray('float32', data.length ? data.length - 1 : 0);\r\n  this.dashoffset = createTypedArray('float32', 1);\r\n  this.initDynamicPropertyContainer(container);\r\n  var i;\r\n  var len = data.length || 0;\r\n  var prop;\r\n  for (i = 0; i < len; i += 1) {\r\n    prop = PropertyFactory.getProp(elem, data[i].v, 0, 0, this);\r\n    this.k = prop.k || this.k;\r\n    this.dataProps[i] = { n: data[i].n, p: prop };\r\n  }\r\n  if (!this.k) {\r\n    this.getValue(true);\r\n  }\r\n  this._isAnimated = this.k;\r\n}\r\n\r\nDashProperty.prototype.getValue = function (forceRender) {\r\n  if (this.elem.globalData.frameId === this.frameId && !forceRender) {\r\n    return;\r\n  }\r\n  this.frameId = this.elem.globalData.frameId;\r\n  this.iterateDynamicProperties();\r\n  this._mdf = this._mdf || forceRender;\r\n  if (this._mdf) {\r\n    var i = 0;\r\n    var len = this.dataProps.length;\r\n    if (this.renderer === 'svg') {\r\n      this.dashStr = '';\r\n    }\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.dataProps[i].n !== 'o') {\r\n        if (this.renderer === 'svg') {\r\n          this.dashStr += ' ' + this.dataProps[i].p.v;\r\n        } else {\r\n          this.dashArray[i] = this.dataProps[i].p.v;\r\n        }\r\n      } else {\r\n        this.dashoffset[0] = this.dataProps[i].p.v;\r\n      }\r\n    }\r\n  }\r\n};\r\nextendPrototype([DynamicPropertyContainer], DashProperty);\r\n\r\n/* global createTypedArray, PropertyFactory, extendPrototype, DynamicPropertyContainer */\r\nfunction GradientProperty(elem, data, container) {\r\n  this.data = data;\r\n  this.c = createTypedArray('uint8c', data.p * 4);\r\n  var cLength = data.k.k[0].s ? (data.k.k[0].s.length - data.p * 4) : data.k.k.length - data.p * 4;\r\n  this.o = createTypedArray('float32', cLength);\r\n  this._cmdf = false;\r\n  this._omdf = false;\r\n  this._collapsable = this.checkCollapsable();\r\n  this._hasOpacity = cLength;\r\n  this.initDynamicPropertyContainer(container);\r\n  this.prop = PropertyFactory.getProp(elem, data.k, 1, null, this);\r\n  this.k = this.prop.k;\r\n  this.getValue(true);\r\n}\r\n\r\nGradientProperty.prototype.comparePoints = function (values, points) {\r\n  var i = 0;\r\n  var len = this.o.length / 2;\r\n  var diff;\r\n  while (i < len) {\r\n    diff = Math.abs(values[i * 4] - values[points * 4 + i * 2]);\r\n    if (diff > 0.01) {\r\n      return false;\r\n    }\r\n    i += 1;\r\n  }\r\n  return true;\r\n};\r\n\r\nGradientProperty.prototype.checkCollapsable = function () {\r\n  if (this.o.length / 2 !== this.c.length / 4) {\r\n    return false;\r\n  }\r\n  if (this.data.k.k[0].s) {\r\n    var i = 0;\r\n    var len = this.data.k.k.length;\r\n    while (i < len) {\r\n      if (!this.comparePoints(this.data.k.k[i].s, this.data.p)) {\r\n        return false;\r\n      }\r\n      i += 1;\r\n    }\r\n  } else if (!this.comparePoints(this.data.k.k, this.data.p)) {\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nGradientProperty.prototype.getValue = function (forceRender) {\r\n  this.prop.getValue();\r\n  this._mdf = false;\r\n  this._cmdf = false;\r\n  this._omdf = false;\r\n  if (this.prop._mdf || forceRender) {\r\n    var i;\r\n    var len = this.data.p * 4;\r\n    var mult;\r\n    var val;\r\n    for (i = 0; i < len; i += 1) {\r\n      mult = i % 4 === 0 ? 100 : 255;\r\n      val = Math.round(this.prop.v[i] * mult);\r\n      if (this.c[i] !== val) {\r\n        this.c[i] = val;\r\n        this._cmdf = !forceRender;\r\n      }\r\n    }\r\n    if (this.o.length) {\r\n      len = this.prop.v.length;\r\n      for (i = this.data.p * 4; i < len; i += 1) {\r\n        mult = i % 2 === 0 ? 100 : 1;\r\n        val = i % 2 === 0 ? Math.round(this.prop.v[i] * 100) : this.prop.v[i];\r\n        if (this.o[i - this.data.p * 4] !== val) {\r\n          this.o[i - this.data.p * 4] = val;\r\n          this._omdf = !forceRender;\r\n        }\r\n      }\r\n    }\r\n    this._mdf = !forceRender;\r\n  }\r\n};\r\n\r\nextendPrototype([DynamicPropertyContainer], GradientProperty);\r\n\r\n/* exported buildShapeString */\r\n\r\nvar buildShapeString = function (pathNodes, length, closed, mat) {\r\n  if (length === 0) {\r\n    return '';\r\n  }\r\n  var _o = pathNodes.o;\r\n  var _i = pathNodes.i;\r\n  var _v = pathNodes.v;\r\n  var i;\r\n  var shapeString = ' M' + mat.applyToPointStringified(_v[0][0], _v[0][1]);\r\n  for (i = 1; i < length; i += 1) {\r\n    shapeString += ' C' + mat.applyToPointStringified(_o[i - 1][0], _o[i - 1][1]) + ' ' + mat.applyToPointStringified(_i[i][0], _i[i][1]) + ' ' + mat.applyToPointStringified(_v[i][0], _v[i][1]);\r\n  }\r\n  if (closed && length) {\r\n    shapeString += ' C' + mat.applyToPointStringified(_o[i - 1][0], _o[i - 1][1]) + ' ' + mat.applyToPointStringified(_i[0][0], _i[0][1]) + ' ' + mat.applyToPointStringified(_v[0][0], _v[0][1]);\r\n    shapeString += 'z';\r\n  }\r\n  return shapeString;\r\n};\r\n\r\n/* global Howl */\r\n/* exported audioControllerFactory */\r\n\r\nvar audioControllerFactory = (function () {\r\n  function AudioController(audioFactory) {\r\n    this.audios = [];\r\n    this.audioFactory = audioFactory;\r\n    this._volume = 1;\r\n    this._isMuted = false;\r\n  }\r\n\r\n  AudioController.prototype = {\r\n    addAudio: function (audio) {\r\n      this.audios.push(audio);\r\n    },\r\n    pause: function () {\r\n      var i;\r\n      var len = this.audios.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        this.audios[i].pause();\r\n      }\r\n    },\r\n    resume: function () {\r\n      var i;\r\n      var len = this.audios.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        this.audios[i].resume();\r\n      }\r\n    },\r\n    setRate: function (rateValue) {\r\n      var i;\r\n      var len = this.audios.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        this.audios[i].setRate(rateValue);\r\n      }\r\n    },\r\n    createAudio: function (assetPath) {\r\n      if (this.audioFactory) {\r\n        return this.audioFactory(assetPath);\r\n      } if (Howl) {\r\n        return new Howl({\r\n          src: [assetPath],\r\n        });\r\n      }\r\n      return {\r\n        isPlaying: false,\r\n        play: function () { this.isPlaying = true; },\r\n        seek: function () { this.isPlaying = false; },\r\n        playing: function () {},\r\n        rate: function () {},\r\n        setVolume: function () {},\r\n      };\r\n    },\r\n    setAudioFactory: function (audioFactory) {\r\n      this.audioFactory = audioFactory;\r\n    },\r\n    setVolume: function (value) {\r\n      this._volume = value;\r\n      this._updateVolume();\r\n    },\r\n    mute: function () {\r\n      this._isMuted = true;\r\n      this._updateVolume();\r\n    },\r\n    unmute: function () {\r\n      this._isMuted = false;\r\n      this._updateVolume();\r\n    },\r\n    getVolume: function () {\r\n      return this._volume;\r\n    },\r\n    _updateVolume: function () {\r\n      var i;\r\n      var len = this.audios.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        this.audios[i].volume(this._volume * (this._isMuted ? 0 : 1));\r\n      }\r\n    },\r\n  };\r\n\r\n  return function () {\r\n    return new AudioController();\r\n  };\r\n}());\r\n\r\n/* global createTag, createNS, isSafari, dataManager */\r\n/* exported ImagePreloader */\r\n\r\nvar ImagePreloader = (function () {\r\n  var proxyImage = (function () {\r\n    var canvas = createTag('canvas');\r\n    canvas.width = 1;\r\n    canvas.height = 1;\r\n    var ctx = canvas.getContext('2d');\r\n    ctx.fillStyle = 'rgba(0,0,0,0)';\r\n    ctx.fillRect(0, 0, 1, 1);\r\n    return canvas;\r\n  }());\r\n\r\n  function imageLoaded() {\r\n    this.loadedAssets += 1;\r\n    if (this.loadedAssets === this.totalImages && this.loadedFootagesCount === this.totalFootages) {\r\n      if (this.imagesLoadedCb) {\r\n        this.imagesLoadedCb(null);\r\n      }\r\n    }\r\n  }\r\n  function footageLoaded() {\r\n    this.loadedFootagesCount += 1;\r\n    if (this.loadedAssets === this.totalImages && this.loadedFootagesCount === this.totalFootages) {\r\n      if (this.imagesLoadedCb) {\r\n        this.imagesLoadedCb(null);\r\n      }\r\n    }\r\n  }\r\n\r\n  function getAssetsPath(assetData, assetsPath, originalPath) {\r\n    var path = '';\r\n    if (assetData.e) {\r\n      path = assetData.p;\r\n    } else if (assetsPath) {\r\n      var imagePath = assetData.p;\r\n      if (imagePath.indexOf('images/') !== -1) {\r\n        imagePath = imagePath.split('/')[1];\r\n      }\r\n      path = assetsPath + imagePath;\r\n    } else {\r\n      path = originalPath;\r\n      path += assetData.u ? assetData.u : '';\r\n      path += assetData.p;\r\n    }\r\n    return path;\r\n  }\r\n\r\n  function testImageLoaded(img) {\r\n    var _count = 0;\r\n    var intervalId = setInterval(function () {\r\n      var box = img.getBBox();\r\n      if (box.width || _count > 500) {\r\n        this._imageLoaded();\r\n        clearInterval(intervalId);\r\n      }\r\n      _count += 1;\r\n    }.bind(this), 50);\r\n  }\r\n\r\n  function createImageData(assetData) {\r\n    var path = getAssetsPath(assetData, this.assetsPath, this.path);\r\n    var img = createNS('image');\r\n    if (isSafari) {\r\n      this.testImageLoaded(img);\r\n    } else {\r\n      img.addEventListener('load', this._imageLoaded, false);\r\n    }\r\n    img.addEventListener('error', function () {\r\n      ob.img = proxyImage;\r\n      this._imageLoaded();\r\n    }.bind(this), false);\r\n    img.setAttributeNS('http://www.w3.org/1999/xlink', 'href', path);\r\n    if (this._elementHelper.append) {\r\n      this._elementHelper.append(img);\r\n    } else {\r\n      this._elementHelper.appendChild(img);\r\n    }\r\n    var ob = {\r\n      img: img,\r\n      assetData: assetData,\r\n    };\r\n    return ob;\r\n  }\r\n\r\n  function createImgData(assetData) {\r\n    var path = getAssetsPath(assetData, this.assetsPath, this.path);\r\n    var img = createTag('img');\r\n    img.crossOrigin = 'anonymous';\r\n    img.addEventListener('load', this._imageLoaded, false);\r\n    img.addEventListener('error', function () {\r\n      ob.img = proxyImage;\r\n      this._imageLoaded();\r\n    }.bind(this), false);\r\n    img.src = path;\r\n    var ob = {\r\n      img: img,\r\n      assetData: assetData,\r\n    };\r\n    return ob;\r\n  }\r\n\r\n  function createFootageData(data) {\r\n    var ob = {\r\n      assetData: data,\r\n    };\r\n    var path = getAssetsPath(data, this.assetsPath, this.path);\r\n    dataManager.loadData(path, function (footageData) {\r\n      ob.img = footageData;\r\n      this._footageLoaded();\r\n    }.bind(this), function () {\r\n      ob.img = {};\r\n      this._footageLoaded();\r\n    }.bind(this));\r\n    return ob;\r\n  }\r\n\r\n  function loadAssets(assets, cb) {\r\n    this.imagesLoadedCb = cb;\r\n    var i;\r\n    var len = assets.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      if (!assets[i].layers) {\r\n        if (!assets[i].t || assets[i].t === 'seq') {\r\n          this.totalImages += 1;\r\n          this.images.push(this._createImageData(assets[i]));\r\n        } else if (assets[i].t === 3) {\r\n          this.totalFootages += 1;\r\n          this.images.push(this.createFootageData(assets[i]));\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function setPath(path) {\r\n    this.path = path || '';\r\n  }\r\n\r\n  function setAssetsPath(path) {\r\n    this.assetsPath = path || '';\r\n  }\r\n\r\n  function getAsset(assetData) {\r\n    var i = 0;\r\n    var len = this.images.length;\r\n    while (i < len) {\r\n      if (this.images[i].assetData === assetData) {\r\n        return this.images[i].img;\r\n      }\r\n      i += 1;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  function destroy() {\r\n    this.imagesLoadedCb = null;\r\n    this.images.length = 0;\r\n  }\r\n\r\n  function loadedImages() {\r\n    return this.totalImages === this.loadedAssets;\r\n  }\r\n\r\n  function loadedFootages() {\r\n    return this.totalFootages === this.loadedFootagesCount;\r\n  }\r\n\r\n  function setCacheType(type, elementHelper) {\r\n    if (type === 'svg') {\r\n      this._elementHelper = elementHelper;\r\n      this._createImageData = this.createImageData.bind(this);\r\n    } else {\r\n      this._createImageData = this.createImgData.bind(this);\r\n    }\r\n  }\r\n\r\n  function ImagePreloaderFactory() {\r\n    this._imageLoaded = imageLoaded.bind(this);\r\n    this._footageLoaded = footageLoaded.bind(this);\r\n    this.testImageLoaded = testImageLoaded.bind(this);\r\n    this.createFootageData = createFootageData.bind(this);\r\n    this.assetsPath = '';\r\n    this.path = '';\r\n    this.totalImages = 0;\r\n    this.totalFootages = 0;\r\n    this.loadedAssets = 0;\r\n    this.loadedFootagesCount = 0;\r\n    this.imagesLoadedCb = null;\r\n    this.images = [];\r\n  }\r\n\r\n  ImagePreloaderFactory.prototype = {\r\n    loadAssets: loadAssets,\r\n    setAssetsPath: setAssetsPath,\r\n    setPath: setPath,\r\n    loadedImages: loadedImages,\r\n    loadedFootages: loadedFootages,\r\n    destroy: destroy,\r\n    getAsset: getAsset,\r\n    createImgData: createImgData,\r\n    createImageData: createImageData,\r\n    imageLoaded: imageLoaded,\r\n    footageLoaded: footageLoaded,\r\n    setCacheType: setCacheType,\r\n  };\r\n\r\n  return ImagePreloaderFactory;\r\n}());\r\n\r\n/* exported featureSupport */\r\n\r\nvar featureSupport = (function () {\r\n  var ob = {\r\n    maskType: true,\r\n  };\r\n  if (/MSIE 10/i.test(navigator.userAgent) || /MSIE 9/i.test(navigator.userAgent) || /rv:11.0/i.test(navigator.userAgent) || /Edge\\/\\d./i.test(navigator.userAgent)) {\r\n    ob.maskType = false;\r\n  }\r\n  return ob;\r\n}());\r\n\r\n/* global createNS */\r\n/* exported filtersFactory */\r\n\r\nvar filtersFactory = (function () {\r\n  var ob = {};\r\n  ob.createFilter = createFilter;\r\n  ob.createAlphaToLuminanceFilter = createAlphaToLuminanceFilter;\r\n\r\n  function createFilter(filId, skipCoordinates) {\r\n    var fil = createNS('filter');\r\n    fil.setAttribute('id', filId);\r\n    if (skipCoordinates !== true) {\r\n      fil.setAttribute('filterUnits', 'objectBoundingBox');\r\n      fil.setAttribute('x', '0%');\r\n      fil.setAttribute('y', '0%');\r\n      fil.setAttribute('width', '100%');\r\n      fil.setAttribute('height', '100%');\r\n    }\r\n    return fil;\r\n  }\r\n\r\n  function createAlphaToLuminanceFilter() {\r\n    var feColorMatrix = createNS('feColorMatrix');\r\n    feColorMatrix.setAttribute('type', 'matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\r\n    feColorMatrix.setAttribute('values', '0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1');\r\n    return feColorMatrix;\r\n  }\r\n\r\n  return ob;\r\n}());\r\n\r\n/* global createSizedArray, PropertyFactory, TextAnimatorDataProperty, bez, addHueToRGB,\r\n  addSaturationToRGB, addBrightnessToRGB, LetterProps, Matrix, extendPrototype, DynamicPropertyContainer */\r\n\r\nfunction TextAnimatorProperty(textData, renderType, elem) {\r\n  this._isFirstFrame = true;\r\n  this._hasMaskedPath = false;\r\n  this._frameId = -1;\r\n  this._textData = textData;\r\n  this._renderType = renderType;\r\n  this._elem = elem;\r\n  this._animatorsData = createSizedArray(this._textData.a.length);\r\n  this._pathData = {};\r\n  this._moreOptions = {\r\n    alignment: {},\r\n  };\r\n  this.renderedLetters = [];\r\n  this.lettersChangedFlag = false;\r\n  this.initDynamicPropertyContainer(elem);\r\n}\r\n\r\nTextAnimatorProperty.prototype.searchProperties = function () {\r\n  var i;\r\n  var len = this._textData.a.length;\r\n  var animatorProps;\r\n  var getProp = PropertyFactory.getProp;\r\n  for (i = 0; i < len; i += 1) {\r\n    animatorProps = this._textData.a[i];\r\n    this._animatorsData[i] = new TextAnimatorDataProperty(this._elem, animatorProps, this);\r\n  }\r\n  if (this._textData.p && 'm' in this._textData.p) {\r\n    this._pathData = {\r\n      a: getProp(this._elem, this._textData.p.a, 0, 0, this),\r\n      f: getProp(this._elem, this._textData.p.f, 0, 0, this),\r\n      l: getProp(this._elem, this._textData.p.l, 0, 0, this),\r\n      r: getProp(this._elem, this._textData.p.r, 0, 0, this),\r\n      p: getProp(this._elem, this._textData.p.p, 0, 0, this),\r\n      m: this._elem.maskManager.getMaskProperty(this._textData.p.m),\r\n    };\r\n    this._hasMaskedPath = true;\r\n  } else {\r\n    this._hasMaskedPath = false;\r\n  }\r\n  this._moreOptions.alignment = getProp(this._elem, this._textData.m.a, 1, 0, this);\r\n};\r\n\r\nTextAnimatorProperty.prototype.getMeasures = function (documentData, lettersChangedFlag) {\r\n  this.lettersChangedFlag = lettersChangedFlag;\r\n  if (!this._mdf && !this._isFirstFrame && !lettersChangedFlag && (!this._hasMaskedPath || !this._pathData.m._mdf)) {\r\n    return;\r\n  }\r\n  this._isFirstFrame = false;\r\n  var alignment = this._moreOptions.alignment.v;\r\n  var animators = this._animatorsData;\r\n  var textData = this._textData;\r\n  var matrixHelper = this.mHelper;\r\n  var renderType = this._renderType;\r\n  var renderedLettersCount = this.renderedLetters.length;\r\n  var xPos;\r\n  var yPos;\r\n  var i;\r\n  var len;\r\n  var letters = documentData.l;\r\n  var pathInfo;\r\n  var currentLength;\r\n  var currentPoint;\r\n  var segmentLength;\r\n  var flag;\r\n  var pointInd;\r\n  var segmentInd;\r\n  var prevPoint;\r\n  var points;\r\n  var segments;\r\n  var partialLength;\r\n  var totalLength;\r\n  var perc;\r\n  var tanAngle;\r\n  var mask;\r\n  if (this._hasMaskedPath) {\r\n    mask = this._pathData.m;\r\n    if (!this._pathData.n || this._pathData._mdf) {\r\n      var paths = mask.v;\r\n      if (this._pathData.r.v) {\r\n        paths = paths.reverse();\r\n      }\r\n      // TODO: release bezier data cached from previous pathInfo: this._pathData.pi\r\n      pathInfo = {\r\n        tLength: 0,\r\n        segments: [],\r\n      };\r\n      len = paths._length - 1;\r\n      var bezierData;\r\n      totalLength = 0;\r\n      for (i = 0; i < len; i += 1) {\r\n        bezierData = bez.buildBezierData(paths.v[i],\r\n          paths.v[i + 1],\r\n          [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]],\r\n          [paths.i[i + 1][0] - paths.v[i + 1][0], paths.i[i + 1][1] - paths.v[i + 1][1]]);\r\n        pathInfo.tLength += bezierData.segmentLength;\r\n        pathInfo.segments.push(bezierData);\r\n        totalLength += bezierData.segmentLength;\r\n      }\r\n      i = len;\r\n      if (mask.v.c) {\r\n        bezierData = bez.buildBezierData(paths.v[i],\r\n          paths.v[0],\r\n          [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]],\r\n          [paths.i[0][0] - paths.v[0][0], paths.i[0][1] - paths.v[0][1]]);\r\n        pathInfo.tLength += bezierData.segmentLength;\r\n        pathInfo.segments.push(bezierData);\r\n        totalLength += bezierData.segmentLength;\r\n      }\r\n      this._pathData.pi = pathInfo;\r\n    }\r\n    pathInfo = this._pathData.pi;\r\n\r\n    currentLength = this._pathData.f.v;\r\n    segmentInd = 0;\r\n    pointInd = 1;\r\n    segmentLength = 0;\r\n    flag = true;\r\n    segments = pathInfo.segments;\r\n    if (currentLength < 0 && mask.v.c) {\r\n      if (pathInfo.tLength < Math.abs(currentLength)) {\r\n        currentLength = -Math.abs(currentLength) % pathInfo.tLength;\r\n      }\r\n      segmentInd = segments.length - 1;\r\n      points = segments[segmentInd].points;\r\n      pointInd = points.length - 1;\r\n      while (currentLength < 0) {\r\n        currentLength += points[pointInd].partialLength;\r\n        pointInd -= 1;\r\n        if (pointInd < 0) {\r\n          segmentInd -= 1;\r\n          points = segments[segmentInd].points;\r\n          pointInd = points.length - 1;\r\n        }\r\n      }\r\n    }\r\n    points = segments[segmentInd].points;\r\n    prevPoint = points[pointInd - 1];\r\n    currentPoint = points[pointInd];\r\n    partialLength = currentPoint.partialLength;\r\n  }\r\n\r\n  len = letters.length;\r\n  xPos = 0;\r\n  yPos = 0;\r\n  var yOff = documentData.finalSize * 1.2 * 0.714;\r\n  var firstLine = true;\r\n  var animatorProps;\r\n  var animatorSelector;\r\n  var j;\r\n  var jLen;\r\n  var letterValue;\r\n\r\n  jLen = animators.length;\r\n\r\n  var mult;\r\n  var ind = -1;\r\n  var offf;\r\n  var xPathPos;\r\n  var yPathPos;\r\n  var initPathPos = currentLength;\r\n  var initSegmentInd = segmentInd;\r\n  var initPointInd = pointInd;\r\n  var currentLine = -1;\r\n  var elemOpacity;\r\n  var sc;\r\n  var sw;\r\n  var fc;\r\n  var k;\r\n  var letterSw;\r\n  var letterSc;\r\n  var letterFc;\r\n  var letterM = '';\r\n  var letterP = this.defaultPropsArray;\r\n  var letterO;\r\n\r\n  //\r\n  if (documentData.j === 2 || documentData.j === 1) {\r\n    var animatorJustifyOffset = 0;\r\n    var animatorFirstCharOffset = 0;\r\n    var justifyOffsetMult = documentData.j === 2 ? -0.5 : -1;\r\n    var lastIndex = 0;\r\n    var isNewLine = true;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (letters[i].n) {\r\n        if (animatorJustifyOffset) {\r\n          animatorJustifyOffset += animatorFirstCharOffset;\r\n        }\r\n        while (lastIndex < i) {\r\n          letters[lastIndex].animatorJustifyOffset = animatorJustifyOffset;\r\n          lastIndex += 1;\r\n        }\r\n        animatorJustifyOffset = 0;\r\n        isNewLine = true;\r\n      } else {\r\n        for (j = 0; j < jLen; j += 1) {\r\n          animatorProps = animators[j].a;\r\n          if (animatorProps.t.propType) {\r\n            if (isNewLine && documentData.j === 2) {\r\n              animatorFirstCharOffset += animatorProps.t.v * justifyOffsetMult;\r\n            }\r\n            animatorSelector = animators[j].s;\r\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n            if (mult.length) {\r\n              animatorJustifyOffset += animatorProps.t.v * mult[0] * justifyOffsetMult;\r\n            } else {\r\n              animatorJustifyOffset += animatorProps.t.v * mult * justifyOffsetMult;\r\n            }\r\n          }\r\n        }\r\n        isNewLine = false;\r\n      }\r\n    }\r\n    if (animatorJustifyOffset) {\r\n      animatorJustifyOffset += animatorFirstCharOffset;\r\n    }\r\n    while (lastIndex < i) {\r\n      letters[lastIndex].animatorJustifyOffset = animatorJustifyOffset;\r\n      lastIndex += 1;\r\n    }\r\n  }\r\n  //\r\n\r\n  for (i = 0; i < len; i += 1) {\r\n    matrixHelper.reset();\r\n    elemOpacity = 1;\r\n    if (letters[i].n) {\r\n      xPos = 0;\r\n      yPos += documentData.yOffset;\r\n      yPos += firstLine ? 1 : 0;\r\n      currentLength = initPathPos;\r\n      firstLine = false;\r\n      if (this._hasMaskedPath) {\r\n        segmentInd = initSegmentInd;\r\n        pointInd = initPointInd;\r\n        points = segments[segmentInd].points;\r\n        prevPoint = points[pointInd - 1];\r\n        currentPoint = points[pointInd];\r\n        partialLength = currentPoint.partialLength;\r\n        segmentLength = 0;\r\n      }\r\n      letterM = '';\r\n      letterFc = '';\r\n      letterSw = '';\r\n      letterO = '';\r\n      letterP = this.defaultPropsArray;\r\n    } else {\r\n      if (this._hasMaskedPath) {\r\n        if (currentLine !== letters[i].line) {\r\n          switch (documentData.j) {\r\n            case 1:\r\n              currentLength += totalLength - documentData.lineWidths[letters[i].line];\r\n              break;\r\n            case 2:\r\n              currentLength += (totalLength - documentData.lineWidths[letters[i].line]) / 2;\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n          currentLine = letters[i].line;\r\n        }\r\n        if (ind !== letters[i].ind) {\r\n          if (letters[ind]) {\r\n            currentLength += letters[ind].extra;\r\n          }\r\n          currentLength += letters[i].an / 2;\r\n          ind = letters[i].ind;\r\n        }\r\n        currentLength += (alignment[0] * letters[i].an) * 0.005;\r\n        var animatorOffset = 0;\r\n        for (j = 0; j < jLen; j += 1) {\r\n          animatorProps = animators[j].a;\r\n          if (animatorProps.p.propType) {\r\n            animatorSelector = animators[j].s;\r\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n            if (mult.length) {\r\n              animatorOffset += animatorProps.p.v[0] * mult[0];\r\n            } else {\r\n              animatorOffset += animatorProps.p.v[0] * mult;\r\n            }\r\n          }\r\n          if (animatorProps.a.propType) {\r\n            animatorSelector = animators[j].s;\r\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n            if (mult.length) {\r\n              animatorOffset += animatorProps.a.v[0] * mult[0];\r\n            } else {\r\n              animatorOffset += animatorProps.a.v[0] * mult;\r\n            }\r\n          }\r\n        }\r\n        flag = true;\r\n        // Force alignment only works with a single line for now\r\n        if (this._pathData.a.v) {\r\n          currentLength = letters[0].an * 0.5 + ((totalLength - this._pathData.f.v - letters[0].an * 0.5 - letters[letters.length - 1].an * 0.5) * ind) / (len - 1);\r\n          currentLength += this._pathData.f.v;\r\n        }\r\n        while (flag) {\r\n          if (segmentLength + partialLength >= currentLength + animatorOffset || !points) {\r\n            perc = (currentLength + animatorOffset - segmentLength) / currentPoint.partialLength;\r\n            xPathPos = prevPoint.point[0] + (currentPoint.point[0] - prevPoint.point[0]) * perc;\r\n            yPathPos = prevPoint.point[1] + (currentPoint.point[1] - prevPoint.point[1]) * perc;\r\n            matrixHelper.translate((-alignment[0] * letters[i].an) * 0.005, -(alignment[1] * yOff) * 0.01);\r\n            flag = false;\r\n          } else if (points) {\r\n            segmentLength += currentPoint.partialLength;\r\n            pointInd += 1;\r\n            if (pointInd >= points.length) {\r\n              pointInd = 0;\r\n              segmentInd += 1;\r\n              if (!segments[segmentInd]) {\r\n                if (mask.v.c) {\r\n                  pointInd = 0;\r\n                  segmentInd = 0;\r\n                  points = segments[segmentInd].points;\r\n                } else {\r\n                  segmentLength -= currentPoint.partialLength;\r\n                  points = null;\r\n                }\r\n              } else {\r\n                points = segments[segmentInd].points;\r\n              }\r\n            }\r\n            if (points) {\r\n              prevPoint = currentPoint;\r\n              currentPoint = points[pointInd];\r\n              partialLength = currentPoint.partialLength;\r\n            }\r\n          }\r\n        }\r\n        offf = letters[i].an / 2 - letters[i].add;\r\n        matrixHelper.translate(-offf, 0, 0);\r\n      } else {\r\n        offf = letters[i].an / 2 - letters[i].add;\r\n        matrixHelper.translate(-offf, 0, 0);\r\n\r\n        // Grouping alignment\r\n        matrixHelper.translate((-alignment[0] * letters[i].an) * 0.005, (-alignment[1] * yOff) * 0.01, 0);\r\n      }\r\n\r\n      for (j = 0; j < jLen; j += 1) {\r\n        animatorProps = animators[j].a;\r\n        if (animatorProps.t.propType) {\r\n          animatorSelector = animators[j].s;\r\n          mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n          // This condition is to prevent applying tracking to first character in each line. Might be better to use a boolean \"isNewLine\"\r\n          if (xPos !== 0 || documentData.j !== 0) {\r\n            if (this._hasMaskedPath) {\r\n              if (mult.length) {\r\n                currentLength += animatorProps.t.v * mult[0];\r\n              } else {\r\n                currentLength += animatorProps.t.v * mult;\r\n              }\r\n            } else if (mult.length) {\r\n              xPos += animatorProps.t.v * mult[0];\r\n            } else {\r\n              xPos += animatorProps.t.v * mult;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      if (documentData.strokeWidthAnim) {\r\n        sw = documentData.sw || 0;\r\n      }\r\n      if (documentData.strokeColorAnim) {\r\n        if (documentData.sc) {\r\n          sc = [documentData.sc[0], documentData.sc[1], documentData.sc[2]];\r\n        } else {\r\n          sc = [0, 0, 0];\r\n        }\r\n      }\r\n      if (documentData.fillColorAnim && documentData.fc) {\r\n        fc = [documentData.fc[0], documentData.fc[1], documentData.fc[2]];\r\n      }\r\n      for (j = 0; j < jLen; j += 1) {\r\n        animatorProps = animators[j].a;\r\n        if (animatorProps.a.propType) {\r\n          animatorSelector = animators[j].s;\r\n          mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n\r\n          if (mult.length) {\r\n            matrixHelper.translate(-animatorProps.a.v[0] * mult[0], -animatorProps.a.v[1] * mult[1], animatorProps.a.v[2] * mult[2]);\r\n          } else {\r\n            matrixHelper.translate(-animatorProps.a.v[0] * mult, -animatorProps.a.v[1] * mult, animatorProps.a.v[2] * mult);\r\n          }\r\n        }\r\n      }\r\n      for (j = 0; j < jLen; j += 1) {\r\n        animatorProps = animators[j].a;\r\n        if (animatorProps.s.propType) {\r\n          animatorSelector = animators[j].s;\r\n          mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n          if (mult.length) {\r\n            matrixHelper.scale(1 + ((animatorProps.s.v[0] - 1) * mult[0]), 1 + ((animatorProps.s.v[1] - 1) * mult[1]), 1);\r\n          } else {\r\n            matrixHelper.scale(1 + ((animatorProps.s.v[0] - 1) * mult), 1 + ((animatorProps.s.v[1] - 1) * mult), 1);\r\n          }\r\n        }\r\n      }\r\n      for (j = 0; j < jLen; j += 1) {\r\n        animatorProps = animators[j].a;\r\n        animatorSelector = animators[j].s;\r\n        mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n        if (animatorProps.sk.propType) {\r\n          if (mult.length) {\r\n            matrixHelper.skewFromAxis(-animatorProps.sk.v * mult[0], animatorProps.sa.v * mult[1]);\r\n          } else {\r\n            matrixHelper.skewFromAxis(-animatorProps.sk.v * mult, animatorProps.sa.v * mult);\r\n          }\r\n        }\r\n        if (animatorProps.r.propType) {\r\n          if (mult.length) {\r\n            matrixHelper.rotateZ(-animatorProps.r.v * mult[2]);\r\n          } else {\r\n            matrixHelper.rotateZ(-animatorProps.r.v * mult);\r\n          }\r\n        }\r\n        if (animatorProps.ry.propType) {\r\n          if (mult.length) {\r\n            matrixHelper.rotateY(animatorProps.ry.v * mult[1]);\r\n          } else {\r\n            matrixHelper.rotateY(animatorProps.ry.v * mult);\r\n          }\r\n        }\r\n        if (animatorProps.rx.propType) {\r\n          if (mult.length) {\r\n            matrixHelper.rotateX(animatorProps.rx.v * mult[0]);\r\n          } else {\r\n            matrixHelper.rotateX(animatorProps.rx.v * mult);\r\n          }\r\n        }\r\n        if (animatorProps.o.propType) {\r\n          if (mult.length) {\r\n            elemOpacity += ((animatorProps.o.v) * mult[0] - elemOpacity) * mult[0];\r\n          } else {\r\n            elemOpacity += ((animatorProps.o.v) * mult - elemOpacity) * mult;\r\n          }\r\n        }\r\n        if (documentData.strokeWidthAnim && animatorProps.sw.propType) {\r\n          if (mult.length) {\r\n            sw += animatorProps.sw.v * mult[0];\r\n          } else {\r\n            sw += animatorProps.sw.v * mult;\r\n          }\r\n        }\r\n        if (documentData.strokeColorAnim && animatorProps.sc.propType) {\r\n          for (k = 0; k < 3; k += 1) {\r\n            if (mult.length) {\r\n              sc[k] += (animatorProps.sc.v[k] - sc[k]) * mult[0];\r\n            } else {\r\n              sc[k] += (animatorProps.sc.v[k] - sc[k]) * mult;\r\n            }\r\n          }\r\n        }\r\n        if (documentData.fillColorAnim && documentData.fc) {\r\n          if (animatorProps.fc.propType) {\r\n            for (k = 0; k < 3; k += 1) {\r\n              if (mult.length) {\r\n                fc[k] += (animatorProps.fc.v[k] - fc[k]) * mult[0];\r\n              } else {\r\n                fc[k] += (animatorProps.fc.v[k] - fc[k]) * mult;\r\n              }\r\n            }\r\n          }\r\n          if (animatorProps.fh.propType) {\r\n            if (mult.length) {\r\n              fc = addHueToRGB(fc, animatorProps.fh.v * mult[0]);\r\n            } else {\r\n              fc = addHueToRGB(fc, animatorProps.fh.v * mult);\r\n            }\r\n          }\r\n          if (animatorProps.fs.propType) {\r\n            if (mult.length) {\r\n              fc = addSaturationToRGB(fc, animatorProps.fs.v * mult[0]);\r\n            } else {\r\n              fc = addSaturationToRGB(fc, animatorProps.fs.v * mult);\r\n            }\r\n          }\r\n          if (animatorProps.fb.propType) {\r\n            if (mult.length) {\r\n              fc = addBrightnessToRGB(fc, animatorProps.fb.v * mult[0]);\r\n            } else {\r\n              fc = addBrightnessToRGB(fc, animatorProps.fb.v * mult);\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      for (j = 0; j < jLen; j += 1) {\r\n        animatorProps = animators[j].a;\r\n\r\n        if (animatorProps.p.propType) {\r\n          animatorSelector = animators[j].s;\r\n          mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n          if (this._hasMaskedPath) {\r\n            if (mult.length) {\r\n              matrixHelper.translate(0, animatorProps.p.v[1] * mult[0], -animatorProps.p.v[2] * mult[1]);\r\n            } else {\r\n              matrixHelper.translate(0, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\r\n            }\r\n          } else if (mult.length) {\r\n            matrixHelper.translate(animatorProps.p.v[0] * mult[0], animatorProps.p.v[1] * mult[1], -animatorProps.p.v[2] * mult[2]);\r\n          } else {\r\n            matrixHelper.translate(animatorProps.p.v[0] * mult, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\r\n          }\r\n        }\r\n      }\r\n      if (documentData.strokeWidthAnim) {\r\n        letterSw = sw < 0 ? 0 : sw;\r\n      }\r\n      if (documentData.strokeColorAnim) {\r\n        letterSc = 'rgb(' + Math.round(sc[0] * 255) + ',' + Math.round(sc[1] * 255) + ',' + Math.round(sc[2] * 255) + ')';\r\n      }\r\n      if (documentData.fillColorAnim && documentData.fc) {\r\n        letterFc = 'rgb(' + Math.round(fc[0] * 255) + ',' + Math.round(fc[1] * 255) + ',' + Math.round(fc[2] * 255) + ')';\r\n      }\r\n\r\n      if (this._hasMaskedPath) {\r\n        matrixHelper.translate(0, -documentData.ls);\r\n\r\n        matrixHelper.translate(0, (alignment[1] * yOff) * 0.01 + yPos, 0);\r\n        if (this._pathData.p.v) {\r\n          tanAngle = (currentPoint.point[1] - prevPoint.point[1]) / (currentPoint.point[0] - prevPoint.point[0]);\r\n          var rot = (Math.atan(tanAngle) * 180) / Math.PI;\r\n          if (currentPoint.point[0] < prevPoint.point[0]) {\r\n            rot += 180;\r\n          }\r\n          matrixHelper.rotate((-rot * Math.PI) / 180);\r\n        }\r\n        matrixHelper.translate(xPathPos, yPathPos, 0);\r\n        currentLength -= (alignment[0] * letters[i].an) * 0.005;\r\n        if (letters[i + 1] && ind !== letters[i + 1].ind) {\r\n          currentLength += letters[i].an / 2;\r\n          currentLength += (documentData.tr * 0.001) * documentData.finalSize;\r\n        }\r\n      } else {\r\n        matrixHelper.translate(xPos, yPos, 0);\r\n\r\n        if (documentData.ps) {\r\n          // matrixHelper.translate(documentData.ps[0],documentData.ps[1],0);\r\n          matrixHelper.translate(documentData.ps[0], documentData.ps[1] + documentData.ascent, 0);\r\n        }\r\n        switch (documentData.j) {\r\n          case 1:\r\n            matrixHelper.translate(letters[i].animatorJustifyOffset + documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line]), 0, 0);\r\n            break;\r\n          case 2:\r\n            matrixHelper.translate(letters[i].animatorJustifyOffset + documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line]) / 2, 0, 0);\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        matrixHelper.translate(0, -documentData.ls);\r\n        matrixHelper.translate(offf, 0, 0);\r\n        matrixHelper.translate((alignment[0] * letters[i].an) * 0.005, (alignment[1] * yOff) * 0.01, 0);\r\n        xPos += letters[i].l + (documentData.tr * 0.001) * documentData.finalSize;\r\n      }\r\n      if (renderType === 'html') {\r\n        letterM = matrixHelper.toCSS();\r\n      } else if (renderType === 'svg') {\r\n        letterM = matrixHelper.to2dCSS();\r\n      } else {\r\n        letterP = [matrixHelper.props[0], matrixHelper.props[1], matrixHelper.props[2], matrixHelper.props[3], matrixHelper.props[4], matrixHelper.props[5], matrixHelper.props[6], matrixHelper.props[7], matrixHelper.props[8], matrixHelper.props[9], matrixHelper.props[10], matrixHelper.props[11], matrixHelper.props[12], matrixHelper.props[13], matrixHelper.props[14], matrixHelper.props[15]];\r\n      }\r\n      letterO = elemOpacity;\r\n    }\r\n\r\n    if (renderedLettersCount <= i) {\r\n      letterValue = new LetterProps(letterO, letterSw, letterSc, letterFc, letterM, letterP);\r\n      this.renderedLetters.push(letterValue);\r\n      renderedLettersCount += 1;\r\n      this.lettersChangedFlag = true;\r\n    } else {\r\n      letterValue = this.renderedLetters[i];\r\n      this.lettersChangedFlag = letterValue.update(letterO, letterSw, letterSc, letterFc, letterM, letterP) || this.lettersChangedFlag;\r\n    }\r\n  }\r\n};\r\n\r\nTextAnimatorProperty.prototype.getValue = function () {\r\n  if (this._elem.globalData.frameId === this._frameId) {\r\n    return;\r\n  }\r\n  this._frameId = this._elem.globalData.frameId;\r\n  this.iterateDynamicProperties();\r\n};\r\n\r\nTextAnimatorProperty.prototype.mHelper = new Matrix();\r\nTextAnimatorProperty.prototype.defaultPropsArray = [];\r\nextendPrototype([DynamicPropertyContainer], TextAnimatorProperty);\r\n\r\n/* global PropertyFactory, degToRads, TextSelectorProp */\r\n/* exported TextAnimatorDataProperty */\r\n\r\nfunction TextAnimatorDataProperty(elem, animatorProps, container) {\r\n  var defaultData = { propType: false };\r\n  var getProp = PropertyFactory.getProp;\r\n  var textAnimatorAnimatables = animatorProps.a;\r\n  this.a = {\r\n    r: textAnimatorAnimatables.r ? getProp(elem, textAnimatorAnimatables.r, 0, degToRads, container) : defaultData,\r\n    rx: textAnimatorAnimatables.rx ? getProp(elem, textAnimatorAnimatables.rx, 0, degToRads, container) : defaultData,\r\n    ry: textAnimatorAnimatables.ry ? getProp(elem, textAnimatorAnimatables.ry, 0, degToRads, container) : defaultData,\r\n    sk: textAnimatorAnimatables.sk ? getProp(elem, textAnimatorAnimatables.sk, 0, degToRads, container) : defaultData,\r\n    sa: textAnimatorAnimatables.sa ? getProp(elem, textAnimatorAnimatables.sa, 0, degToRads, container) : defaultData,\r\n    s: textAnimatorAnimatables.s ? getProp(elem, textAnimatorAnimatables.s, 1, 0.01, container) : defaultData,\r\n    a: textAnimatorAnimatables.a ? getProp(elem, textAnimatorAnimatables.a, 1, 0, container) : defaultData,\r\n    o: textAnimatorAnimatables.o ? getProp(elem, textAnimatorAnimatables.o, 0, 0.01, container) : defaultData,\r\n    p: textAnimatorAnimatables.p ? getProp(elem, textAnimatorAnimatables.p, 1, 0, container) : defaultData,\r\n    sw: textAnimatorAnimatables.sw ? getProp(elem, textAnimatorAnimatables.sw, 0, 0, container) : defaultData,\r\n    sc: textAnimatorAnimatables.sc ? getProp(elem, textAnimatorAnimatables.sc, 1, 0, container) : defaultData,\r\n    fc: textAnimatorAnimatables.fc ? getProp(elem, textAnimatorAnimatables.fc, 1, 0, container) : defaultData,\r\n    fh: textAnimatorAnimatables.fh ? getProp(elem, textAnimatorAnimatables.fh, 0, 0, container) : defaultData,\r\n    fs: textAnimatorAnimatables.fs ? getProp(elem, textAnimatorAnimatables.fs, 0, 0.01, container) : defaultData,\r\n    fb: textAnimatorAnimatables.fb ? getProp(elem, textAnimatorAnimatables.fb, 0, 0.01, container) : defaultData,\r\n    t: textAnimatorAnimatables.t ? getProp(elem, textAnimatorAnimatables.t, 0, 0, container) : defaultData,\r\n  };\r\n\r\n  this.s = TextSelectorProp.getTextSelectorProp(elem, animatorProps.s, container);\r\n  this.s.t = animatorProps.s.t;\r\n}\r\n\r\nfunction LetterProps(o, sw, sc, fc, m, p) {\r\n  this.o = o;\r\n  this.sw = sw;\r\n  this.sc = sc;\r\n  this.fc = fc;\r\n  this.m = m;\r\n  this.p = p;\r\n  this._mdf = {\r\n    o: true,\r\n    sw: !!sw,\r\n    sc: !!sc,\r\n    fc: !!fc,\r\n    m: true,\r\n    p: true,\r\n  };\r\n}\r\n\r\nLetterProps.prototype.update = function (o, sw, sc, fc, m, p) {\r\n  this._mdf.o = false;\r\n  this._mdf.sw = false;\r\n  this._mdf.sc = false;\r\n  this._mdf.fc = false;\r\n  this._mdf.m = false;\r\n  this._mdf.p = false;\r\n  var updated = false;\r\n\r\n  if (this.o !== o) {\r\n    this.o = o;\r\n    this._mdf.o = true;\r\n    updated = true;\r\n  }\r\n  if (this.sw !== sw) {\r\n    this.sw = sw;\r\n    this._mdf.sw = true;\r\n    updated = true;\r\n  }\r\n  if (this.sc !== sc) {\r\n    this.sc = sc;\r\n    this._mdf.sc = true;\r\n    updated = true;\r\n  }\r\n  if (this.fc !== fc) {\r\n    this.fc = fc;\r\n    this._mdf.fc = true;\r\n    updated = true;\r\n  }\r\n  if (this.m !== m) {\r\n    this.m = m;\r\n    this._mdf.m = true;\r\n    updated = true;\r\n  }\r\n  if (p.length && (this.p[0] !== p[0] || this.p[1] !== p[1] || this.p[4] !== p[4] || this.p[5] !== p[5] || this.p[12] !== p[12] || this.p[13] !== p[13])) {\r\n    this.p = p;\r\n    this._mdf.p = true;\r\n    updated = true;\r\n  }\r\n  return updated;\r\n};\r\n\r\n/* global FontManager, initialDefaultFrame, getFontProperties */\r\n/* exported TextProperty */\r\n\r\nfunction TextProperty(elem, data) {\r\n  this._frameId = initialDefaultFrame;\r\n  this.pv = '';\r\n  this.v = '';\r\n  this.kf = false;\r\n  this._isFirstFrame = true;\r\n  this._mdf = false;\r\n  this.data = data;\r\n  this.elem = elem;\r\n  this.comp = this.elem.comp;\r\n  this.keysIndex = 0;\r\n  this.canResize = false;\r\n  this.minimumFontSize = 1;\r\n  this.effectsSequence = [];\r\n  this.currentData = {\r\n    ascent: 0,\r\n    boxWidth: this.defaultBoxWidth,\r\n    f: '',\r\n    fStyle: '',\r\n    fWeight: '',\r\n    fc: '',\r\n    j: '',\r\n    justifyOffset: '',\r\n    l: [],\r\n    lh: 0,\r\n    lineWidths: [],\r\n    ls: '',\r\n    of: '',\r\n    s: '',\r\n    sc: '',\r\n    sw: 0,\r\n    t: 0,\r\n    tr: 0,\r\n    sz: 0,\r\n    ps: null,\r\n    fillColorAnim: false,\r\n    strokeColorAnim: false,\r\n    strokeWidthAnim: false,\r\n    yOffset: 0,\r\n    finalSize: 0,\r\n    finalText: [],\r\n    finalLineHeight: 0,\r\n    __complete: false,\r\n\r\n  };\r\n  this.copyData(this.currentData, this.data.d.k[0].s);\r\n\r\n  if (!this.searchProperty()) {\r\n    this.completeTextData(this.currentData);\r\n  }\r\n}\r\n\r\nTextProperty.prototype.defaultBoxWidth = [0, 0];\r\n\r\nTextProperty.prototype.copyData = function (obj, data) {\r\n  for (var s in data) {\r\n    if (Object.prototype.hasOwnProperty.call(data, s)) {\r\n      obj[s] = data[s];\r\n    }\r\n  }\r\n  return obj;\r\n};\r\n\r\nTextProperty.prototype.setCurrentData = function (data) {\r\n  if (!data.__complete) {\r\n    this.completeTextData(data);\r\n  }\r\n  this.currentData = data;\r\n  this.currentData.boxWidth = this.currentData.boxWidth || this.defaultBoxWidth;\r\n  this._mdf = true;\r\n};\r\n\r\nTextProperty.prototype.searchProperty = function () {\r\n  return this.searchKeyframes();\r\n};\r\n\r\nTextProperty.prototype.searchKeyframes = function () {\r\n  this.kf = this.data.d.k.length > 1;\r\n  if (this.kf) {\r\n    this.addEffect(this.getKeyframeValue.bind(this));\r\n  }\r\n  return this.kf;\r\n};\r\n\r\nTextProperty.prototype.addEffect = function (effectFunction) {\r\n  this.effectsSequence.push(effectFunction);\r\n  this.elem.addDynamicProperty(this);\r\n};\r\n\r\nTextProperty.prototype.getValue = function (_finalValue) {\r\n  if ((this.elem.globalData.frameId === this.frameId || !this.effectsSequence.length) && !_finalValue) {\r\n    return;\r\n  }\r\n  this.currentData.t = this.data.d.k[this.keysIndex].s.t;\r\n  var currentValue = this.currentData;\r\n  var currentIndex = this.keysIndex;\r\n  if (this.lock) {\r\n    this.setCurrentData(this.currentData);\r\n    return;\r\n  }\r\n  this.lock = true;\r\n  this._mdf = false;\r\n  var i; var\r\n    len = this.effectsSequence.length;\r\n  var finalValue = _finalValue || this.data.d.k[this.keysIndex].s;\r\n  for (i = 0; i < len; i += 1) {\r\n    // Checking if index changed to prevent creating a new object every time the expression updates.\r\n    if (currentIndex !== this.keysIndex) {\r\n      finalValue = this.effectsSequence[i](finalValue, finalValue.t);\r\n    } else {\r\n      finalValue = this.effectsSequence[i](this.currentData, finalValue.t);\r\n    }\r\n  }\r\n  if (currentValue !== finalValue) {\r\n    this.setCurrentData(finalValue);\r\n  }\r\n  this.v = this.currentData;\r\n  this.pv = this.v;\r\n  this.lock = false;\r\n  this.frameId = this.elem.globalData.frameId;\r\n};\r\n\r\nTextProperty.prototype.getKeyframeValue = function () {\r\n  var textKeys = this.data.d.k;\r\n  var frameNum = this.elem.comp.renderedFrame;\r\n  var i = 0; var\r\n    len = textKeys.length;\r\n  while (i <= len - 1) {\r\n    if (i === len - 1 || textKeys[i + 1].t > frameNum) {\r\n      break;\r\n    }\r\n    i += 1;\r\n  }\r\n  if (this.keysIndex !== i) {\r\n    this.keysIndex = i;\r\n  }\r\n  return this.data.d.k[this.keysIndex].s;\r\n};\r\n\r\nTextProperty.prototype.buildFinalText = function (text) {\r\n  var charactersArray = [];\r\n  var i = 0;\r\n  var len = text.length;\r\n  var charCode;\r\n  var secondCharCode;\r\n  var shouldCombine = false;\r\n  while (i < len) {\r\n    charCode = text.charCodeAt(i);\r\n    if (FontManager.isCombinedCharacter(charCode)) {\r\n      charactersArray[charactersArray.length - 1] += text.charAt(i);\r\n    } else if (charCode >= 0xD800 && charCode <= 0xDBFF) {\r\n      secondCharCode = text.charCodeAt(i + 1);\r\n      if (secondCharCode >= 0xDC00 && secondCharCode <= 0xDFFF) {\r\n        if (shouldCombine || FontManager.isModifier(charCode, secondCharCode)) {\r\n          charactersArray[charactersArray.length - 1] += text.substr(i, 2);\r\n          shouldCombine = false;\r\n        } else {\r\n          charactersArray.push(text.substr(i, 2));\r\n        }\r\n        i += 1;\r\n      } else {\r\n        charactersArray.push(text.charAt(i));\r\n      }\r\n    } else if (charCode > 0xDBFF) {\r\n      secondCharCode = text.charCodeAt(i + 1);\r\n      if (FontManager.isZeroWidthJoiner(charCode, secondCharCode)) {\r\n        shouldCombine = true;\r\n        charactersArray[charactersArray.length - 1] += text.substr(i, 2);\r\n        i += 1;\r\n      } else {\r\n        charactersArray.push(text.charAt(i));\r\n      }\r\n    } else if (FontManager.isZeroWidthJoiner(charCode)) {\r\n      charactersArray[charactersArray.length - 1] += text.charAt(i);\r\n      shouldCombine = true;\r\n    } else {\r\n      charactersArray.push(text.charAt(i));\r\n    }\r\n    i += 1;\r\n  }\r\n  return charactersArray;\r\n};\r\n\r\nTextProperty.prototype.completeTextData = function (documentData) {\r\n  documentData.__complete = true;\r\n  var fontManager = this.elem.globalData.fontManager;\r\n  var data = this.data;\r\n  var letters = [];\r\n  var i; var\r\n    len;\r\n  var newLineFlag; var index = 0; var\r\n    val;\r\n  var anchorGrouping = data.m.g;\r\n  var currentSize = 0; var currentPos = 0; var currentLine = 0; var\r\n    lineWidths = [];\r\n  var lineWidth = 0;\r\n  var maxLineWidth = 0;\r\n  var j; var\r\n    jLen;\r\n  var fontData = fontManager.getFontByName(documentData.f);\r\n  var charData; var\r\n    cLength = 0;\r\n\r\n  var fontProps = getFontProperties(fontData);\r\n  documentData.fWeight = fontProps.weight;\r\n  documentData.fStyle = fontProps.style;\r\n  documentData.finalSize = documentData.s;\r\n  documentData.finalText = this.buildFinalText(documentData.t);\r\n  len = documentData.finalText.length;\r\n  documentData.finalLineHeight = documentData.lh;\r\n  var trackingOffset = (documentData.tr / 1000) * documentData.finalSize;\r\n  var charCode;\r\n  if (documentData.sz) {\r\n    var flag = true;\r\n    var boxWidth = documentData.sz[0];\r\n    var boxHeight = documentData.sz[1];\r\n    var currentHeight; var\r\n      finalText;\r\n    while (flag) {\r\n      finalText = this.buildFinalText(documentData.t);\r\n      currentHeight = 0;\r\n      lineWidth = 0;\r\n      len = finalText.length;\r\n      trackingOffset = (documentData.tr / 1000) * documentData.finalSize;\r\n      var lastSpaceIndex = -1;\r\n      for (i = 0; i < len; i += 1) {\r\n        charCode = finalText[i].charCodeAt(0);\r\n        newLineFlag = false;\r\n        if (finalText[i] === ' ') {\r\n          lastSpaceIndex = i;\r\n        } else if (charCode === 13 || charCode === 3) {\r\n          lineWidth = 0;\r\n          newLineFlag = true;\r\n          currentHeight += documentData.finalLineHeight || documentData.finalSize * 1.2;\r\n        }\r\n        if (fontManager.chars) {\r\n          charData = fontManager.getCharData(finalText[i], fontData.fStyle, fontData.fFamily);\r\n          cLength = newLineFlag ? 0 : (charData.w * documentData.finalSize) / 100;\r\n        } else {\r\n          // tCanvasHelper.font = documentData.s + 'px '+ fontData.fFamily;\r\n          cLength = fontManager.measureText(finalText[i], documentData.f, documentData.finalSize);\r\n        }\r\n        if (lineWidth + cLength > boxWidth && finalText[i] !== ' ') {\r\n          if (lastSpaceIndex === -1) {\r\n            len += 1;\r\n          } else {\r\n            i = lastSpaceIndex;\r\n          }\r\n          currentHeight += documentData.finalLineHeight || documentData.finalSize * 1.2;\r\n          finalText.splice(i, lastSpaceIndex === i ? 1 : 0, '\\r');\r\n          // finalText = finalText.substr(0,i) + \"\\r\" + finalText.substr(i === lastSpaceIndex ? i + 1 : i);\r\n          lastSpaceIndex = -1;\r\n          lineWidth = 0;\r\n        } else {\r\n          lineWidth += cLength;\r\n          lineWidth += trackingOffset;\r\n        }\r\n      }\r\n      currentHeight += (fontData.ascent * documentData.finalSize) / 100;\r\n      if (this.canResize && documentData.finalSize > this.minimumFontSize && boxHeight < currentHeight) {\r\n        documentData.finalSize -= 1;\r\n        documentData.finalLineHeight = (documentData.finalSize * documentData.lh) / documentData.s;\r\n      } else {\r\n        documentData.finalText = finalText;\r\n        len = documentData.finalText.length;\r\n        flag = false;\r\n      }\r\n    }\r\n  }\r\n  lineWidth = -trackingOffset;\r\n  cLength = 0;\r\n  var uncollapsedSpaces = 0;\r\n  var currentChar;\r\n  for (i = 0; i < len; i += 1) {\r\n    newLineFlag = false;\r\n    currentChar = documentData.finalText[i];\r\n    charCode = currentChar.charCodeAt(0);\r\n    if (charCode === 13 || charCode === 3) {\r\n      uncollapsedSpaces = 0;\r\n      lineWidths.push(lineWidth);\r\n      maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\r\n      lineWidth = -2 * trackingOffset;\r\n      val = '';\r\n      newLineFlag = true;\r\n      currentLine += 1;\r\n    } else {\r\n      val = currentChar;\r\n    }\r\n    if (fontManager.chars) {\r\n      charData = fontManager.getCharData(currentChar, fontData.fStyle, fontManager.getFontByName(documentData.f).fFamily);\r\n      cLength = newLineFlag ? 0 : (charData.w * documentData.finalSize) / 100;\r\n    } else {\r\n      // var charWidth = fontManager.measureText(val, documentData.f, documentData.finalSize);\r\n      // tCanvasHelper.font = documentData.finalSize + 'px '+ fontManager.getFontByName(documentData.f).fFamily;\r\n      cLength = fontManager.measureText(val, documentData.f, documentData.finalSize);\r\n    }\r\n\r\n    //\r\n    if (currentChar === ' ') {\r\n      uncollapsedSpaces += cLength + trackingOffset;\r\n    } else {\r\n      lineWidth += cLength + trackingOffset + uncollapsedSpaces;\r\n      uncollapsedSpaces = 0;\r\n    }\r\n    letters.push({\r\n      l: cLength, an: cLength, add: currentSize, n: newLineFlag, anIndexes: [], val: val, line: currentLine, animatorJustifyOffset: 0,\r\n    });\r\n    if (anchorGrouping == 2) { // eslint-disable-line eqeqeq\r\n      currentSize += cLength;\r\n      if (val === '' || val === ' ' || i === len - 1) {\r\n        if (val === '' || val === ' ') {\r\n          currentSize -= cLength;\r\n        }\r\n        while (currentPos <= i) {\r\n          letters[currentPos].an = currentSize;\r\n          letters[currentPos].ind = index;\r\n          letters[currentPos].extra = cLength;\r\n          currentPos += 1;\r\n        }\r\n        index += 1;\r\n        currentSize = 0;\r\n      }\r\n    } else if (anchorGrouping == 3) { // eslint-disable-line eqeqeq\r\n      currentSize += cLength;\r\n      if (val === '' || i === len - 1) {\r\n        if (val === '') {\r\n          currentSize -= cLength;\r\n        }\r\n        while (currentPos <= i) {\r\n          letters[currentPos].an = currentSize;\r\n          letters[currentPos].ind = index;\r\n          letters[currentPos].extra = cLength;\r\n          currentPos += 1;\r\n        }\r\n        currentSize = 0;\r\n        index += 1;\r\n      }\r\n    } else {\r\n      letters[index].ind = index;\r\n      letters[index].extra = 0;\r\n      index += 1;\r\n    }\r\n  }\r\n  documentData.l = letters;\r\n  maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\r\n  lineWidths.push(lineWidth);\r\n  if (documentData.sz) {\r\n    documentData.boxWidth = documentData.sz[0];\r\n    documentData.justifyOffset = 0;\r\n  } else {\r\n    documentData.boxWidth = maxLineWidth;\r\n    switch (documentData.j) {\r\n      case 1:\r\n        documentData.justifyOffset = -documentData.boxWidth;\r\n        break;\r\n      case 2:\r\n        documentData.justifyOffset = -documentData.boxWidth / 2;\r\n        break;\r\n      default:\r\n        documentData.justifyOffset = 0;\r\n    }\r\n  }\r\n  documentData.lineWidths = lineWidths;\r\n\r\n  var animators = data.a; var animatorData; var\r\n    letterData;\r\n  jLen = animators.length;\r\n  var based; var ind; var\r\n    indexes = [];\r\n  for (j = 0; j < jLen; j += 1) {\r\n    animatorData = animators[j];\r\n    if (animatorData.a.sc) {\r\n      documentData.strokeColorAnim = true;\r\n    }\r\n    if (animatorData.a.sw) {\r\n      documentData.strokeWidthAnim = true;\r\n    }\r\n    if (animatorData.a.fc || animatorData.a.fh || animatorData.a.fs || animatorData.a.fb) {\r\n      documentData.fillColorAnim = true;\r\n    }\r\n    ind = 0;\r\n    based = animatorData.s.b;\r\n    for (i = 0; i < len; i += 1) {\r\n      letterData = letters[i];\r\n      letterData.anIndexes[j] = ind;\r\n      if ((based == 1 && letterData.val !== '') || (based == 2 && letterData.val !== '' && letterData.val !== ' ') || (based == 3 && (letterData.n || letterData.val == ' ' || i == len - 1)) || (based == 4 && (letterData.n || i == len - 1))) { // eslint-disable-line eqeqeq\r\n        if (animatorData.s.rn === 1) {\r\n          indexes.push(ind);\r\n        }\r\n        ind += 1;\r\n      }\r\n    }\r\n    data.a[j].s.totalChars = ind;\r\n    var currentInd = -1; var\r\n      newInd;\r\n    if (animatorData.s.rn === 1) {\r\n      for (i = 0; i < len; i += 1) {\r\n        letterData = letters[i];\r\n        if (currentInd != letterData.anIndexes[j]) { // eslint-disable-line eqeqeq\r\n          currentInd = letterData.anIndexes[j];\r\n          newInd = indexes.splice(Math.floor(Math.random() * indexes.length), 1)[0];\r\n        }\r\n        letterData.anIndexes[j] = newInd;\r\n      }\r\n    }\r\n  }\r\n  documentData.yOffset = documentData.finalLineHeight || documentData.finalSize * 1.2;\r\n  documentData.ls = documentData.ls || 0;\r\n  documentData.ascent = (fontData.ascent * documentData.finalSize) / 100;\r\n};\r\n\r\nTextProperty.prototype.updateDocumentData = function (newData, index) {\r\n  index = index === undefined ? this.keysIndex : index;\r\n  var dData = this.copyData({}, this.data.d.k[index].s);\r\n  dData = this.copyData(dData, newData);\r\n  this.data.d.k[index].s = dData;\r\n  this.recalculate(index);\r\n  this.elem.addDynamicProperty(this);\r\n};\r\n\r\nTextProperty.prototype.recalculate = function (index) {\r\n  var dData = this.data.d.k[index].s;\r\n  dData.__complete = false;\r\n  this.keysIndex = 0;\r\n  this._isFirstFrame = true;\r\n  this.getValue(dData);\r\n};\r\n\r\nTextProperty.prototype.canResizeFont = function (_canResize) {\r\n  this.canResize = _canResize;\r\n  this.recalculate(this.keysIndex);\r\n  this.elem.addDynamicProperty(this);\r\n};\r\n\r\nTextProperty.prototype.setMinimumFontSize = function (_fontValue) {\r\n  this.minimumFontSize = Math.floor(_fontValue) || 1;\r\n  this.recalculate(this.keysIndex);\r\n  this.elem.addDynamicProperty(this);\r\n};\r\n\r\n/* global extendPrototype, BezierFactory, PropertyFactory, DynamicPropertyContainer */\r\n/* exported TextSelectorProp */\r\n\r\nvar TextSelectorProp = (function () {\r\n  var max = Math.max;\r\n  var min = Math.min;\r\n  var floor = Math.floor;\r\n\r\n  function TextSelectorPropFactory(elem, data) {\r\n    this._currentTextLength = -1;\r\n    this.k = false;\r\n    this.data = data;\r\n    this.elem = elem;\r\n    this.comp = elem.comp;\r\n    this.finalS = 0;\r\n    this.finalE = 0;\r\n    this.initDynamicPropertyContainer(elem);\r\n    this.s = PropertyFactory.getProp(elem, data.s || { k: 0 }, 0, 0, this);\r\n    if ('e' in data) {\r\n      this.e = PropertyFactory.getProp(elem, data.e, 0, 0, this);\r\n    } else {\r\n      this.e = { v: 100 };\r\n    }\r\n    this.o = PropertyFactory.getProp(elem, data.o || { k: 0 }, 0, 0, this);\r\n    this.xe = PropertyFactory.getProp(elem, data.xe || { k: 0 }, 0, 0, this);\r\n    this.ne = PropertyFactory.getProp(elem, data.ne || { k: 0 }, 0, 0, this);\r\n    this.sm = PropertyFactory.getProp(elem, data.sm || { k: 100 }, 0, 0, this);\r\n    this.a = PropertyFactory.getProp(elem, data.a, 0, 0.01, this);\r\n    if (!this.dynamicProperties.length) {\r\n      this.getValue();\r\n    }\r\n  }\r\n\r\n  TextSelectorPropFactory.prototype = {\r\n    getMult: function (ind) {\r\n      if (this._currentTextLength !== this.elem.textProperty.currentData.l.length) {\r\n        this.getValue();\r\n      }\r\n      // var easer = bez.getEasingCurve(this.ne.v/100,0,1-this.xe.v/100,1);\r\n      var x1 = 0;\r\n      var y1 = 0;\r\n      var x2 = 1;\r\n      var y2 = 1;\r\n      if (this.ne.v > 0) {\r\n        x1 = this.ne.v / 100.0;\r\n      } else {\r\n        y1 = -this.ne.v / 100.0;\r\n      }\r\n      if (this.xe.v > 0) {\r\n        x2 = 1.0 - this.xe.v / 100.0;\r\n      } else {\r\n        y2 = 1.0 + this.xe.v / 100.0;\r\n      }\r\n      var easer = BezierFactory.getBezierEasing(x1, y1, x2, y2).get;\r\n\r\n      var mult = 0;\r\n      var s = this.finalS;\r\n      var e = this.finalE;\r\n      var type = this.data.sh;\r\n      if (type === 2) {\r\n        if (e === s) {\r\n          mult = ind >= e ? 1 : 0;\r\n        } else {\r\n          mult = max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\r\n        }\r\n        mult = easer(mult);\r\n      } else if (type === 3) {\r\n        if (e === s) {\r\n          mult = ind >= e ? 0 : 1;\r\n        } else {\r\n          mult = 1 - max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\r\n        }\r\n\r\n        mult = easer(mult);\r\n      } else if (type === 4) {\r\n        if (e === s) {\r\n          mult = 0;\r\n        } else {\r\n          mult = max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\r\n          if (mult < 0.5) {\r\n            mult *= 2;\r\n          } else {\r\n            mult = 1 - 2 * (mult - 0.5);\r\n          }\r\n        }\r\n        mult = easer(mult);\r\n      } else if (type === 5) {\r\n        if (e === s) {\r\n          mult = 0;\r\n        } else {\r\n          var tot = e - s;\r\n          /* ind += 0.5;\r\n                    mult = -4/(tot*tot)*(ind*ind)+(4/tot)*ind; */\r\n          ind = min(max(0, ind + 0.5 - s), e - s);\r\n          var x = -tot / 2 + ind;\r\n          var a = tot / 2;\r\n          mult = Math.sqrt(1 - (x * x) / (a * a));\r\n        }\r\n        mult = easer(mult);\r\n      } else if (type === 6) {\r\n        if (e === s) {\r\n          mult = 0;\r\n        } else {\r\n          ind = min(max(0, ind + 0.5 - s), e - s);\r\n          mult = (1 + (Math.cos((Math.PI + Math.PI * 2 * (ind) / (e - s))))) / 2; // eslint-disable-line\r\n        }\r\n        mult = easer(mult);\r\n      } else {\r\n        if (ind >= floor(s)) {\r\n          if (ind - s < 0) {\r\n            mult = max(0, min(min(e, 1) - (s - ind), 1));\r\n          } else {\r\n            mult = max(0, min(e - ind, 1));\r\n          }\r\n        }\r\n        mult = easer(mult);\r\n      }\r\n      // Smoothness implementation.\r\n      // The smoothness represents a reduced range of the original [0; 1] range.\r\n      // if smoothness is 25%, the new range will be [0.375; 0.625]\r\n      // Steps are:\r\n      // - find the lower value of the new range (threshold)\r\n      // - if multiplier is smaller than that value, floor it to 0\r\n      // - if it is larger,\r\n      //     - subtract the threshold\r\n      //     - divide it by the smoothness (this will return the range to [0; 1])\r\n      // Note: If it doesn't work on some scenarios, consider applying it before the easer.\r\n      if (this.sm.v !== 100) {\r\n        var smoothness = this.sm.v * 0.01;\r\n        if (smoothness === 0) {\r\n          smoothness = 0.00000001;\r\n        }\r\n        var threshold = 0.5 - smoothness * 0.5;\r\n        if (mult < threshold) {\r\n          mult = 0;\r\n        } else {\r\n          mult = (mult - threshold) / smoothness;\r\n          if (mult > 1) {\r\n            mult = 1;\r\n          }\r\n        }\r\n      }\r\n      return mult * this.a.v;\r\n    },\r\n    getValue: function (newCharsFlag) {\r\n      this.iterateDynamicProperties();\r\n      this._mdf = newCharsFlag || this._mdf;\r\n      this._currentTextLength = this.elem.textProperty.currentData.l.length || 0;\r\n      if (newCharsFlag && this.data.r === 2) {\r\n        this.e.v = this._currentTextLength;\r\n      }\r\n      var divisor = this.data.r === 2 ? 1 : 100 / this.data.totalChars;\r\n      var o = this.o.v / divisor;\r\n      var s = this.s.v / divisor + o;\r\n      var e = (this.e.v / divisor) + o;\r\n      if (s > e) {\r\n        var _s = s;\r\n        s = e;\r\n        e = _s;\r\n      }\r\n      this.finalS = s;\r\n      this.finalE = e;\r\n    },\r\n  };\r\n  extendPrototype([DynamicPropertyContainer], TextSelectorPropFactory);\r\n\r\n  function getTextSelectorProp(elem, data, arr) {\r\n    return new TextSelectorPropFactory(elem, data, arr);\r\n  }\r\n\r\n  return {\r\n    getTextSelectorProp: getTextSelectorProp,\r\n  };\r\n}());\r\n\r\n/* global createSizedArray, pooling */\r\n/* exported poolFactory */\r\n\r\nvar poolFactory = (function () {\r\n  return function (initialLength, _create, _release) {\r\n    var _length = 0;\r\n    var _maxLength = initialLength;\r\n    var pool = createSizedArray(_maxLength);\r\n\r\n    var ob = {\r\n      newElement: newElement,\r\n      release: release,\r\n    };\r\n\r\n    function newElement() {\r\n      var element;\r\n      if (_length) {\r\n        _length -= 1;\r\n        element = pool[_length];\r\n      } else {\r\n        element = _create();\r\n      }\r\n      return element;\r\n    }\r\n\r\n    function release(element) {\r\n      if (_length === _maxLength) {\r\n        pool = pooling.double(pool);\r\n        _maxLength *= 2;\r\n      }\r\n      if (_release) {\r\n        _release(element);\r\n      }\r\n      pool[_length] = element;\r\n      _length += 1;\r\n    }\r\n\r\n    return ob;\r\n  };\r\n}());\r\n\r\n/* global createSizedArray */\r\n/* exported pooling */\r\n\r\nvar pooling = (function () {\r\n  function double(arr) {\r\n    return arr.concat(createSizedArray(arr.length));\r\n  }\r\n\r\n  return {\r\n    double: double,\r\n  };\r\n}());\r\n\r\n/* global createTypedArray, poolFactory */\r\n/* exported pointPool */\r\n\r\nvar pointPool = (function () {\r\n  function create() {\r\n    return createTypedArray('float32', 2);\r\n  }\r\n  return poolFactory(8, create);\r\n}());\r\n\r\n/* global ShapePath, pointPool, poolFactory */\r\n/* exported shapePool */\r\n\r\nvar shapePool = (function () {\r\n  function create() {\r\n    return new ShapePath();\r\n  }\r\n\r\n  function release(shapePath) {\r\n    var len = shapePath._length;\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      pointPool.release(shapePath.v[i]);\r\n      pointPool.release(shapePath.i[i]);\r\n      pointPool.release(shapePath.o[i]);\r\n      shapePath.v[i] = null;\r\n      shapePath.i[i] = null;\r\n      shapePath.o[i] = null;\r\n    }\r\n    shapePath._length = 0;\r\n    shapePath.c = false;\r\n  }\r\n\r\n  function clone(shape) {\r\n    var cloned = factory.newElement();\r\n    var i;\r\n    var len = shape._length === undefined ? shape.v.length : shape._length;\r\n    cloned.setLength(len);\r\n    cloned.c = shape.c;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      cloned.setTripleAt(shape.v[i][0], shape.v[i][1], shape.o[i][0], shape.o[i][1], shape.i[i][0], shape.i[i][1], i);\r\n    }\r\n    return cloned;\r\n  }\r\n\r\n  var factory = poolFactory(4, create, release);\r\n  factory.clone = clone;\r\n\r\n  return factory;\r\n}());\r\n\r\n/* global createSizedArray, ShapeCollection, shapePool, pooling */\r\n/* exported shapeCollectionPool */\r\n\r\nvar shapeCollectionPool = (function () {\r\n  var ob = {\r\n    newShapeCollection: newShapeCollection,\r\n    release: release,\r\n  };\r\n\r\n  var _length = 0;\r\n  var _maxLength = 4;\r\n  var pool = createSizedArray(_maxLength);\r\n\r\n  function newShapeCollection() {\r\n    var shapeCollection;\r\n    if (_length) {\r\n      _length -= 1;\r\n      shapeCollection = pool[_length];\r\n    } else {\r\n      shapeCollection = new ShapeCollection();\r\n    }\r\n    return shapeCollection;\r\n  }\r\n\r\n  function release(shapeCollection) {\r\n    var i;\r\n    var len = shapeCollection._length;\r\n    for (i = 0; i < len; i += 1) {\r\n      shapePool.release(shapeCollection.shapes[i]);\r\n    }\r\n    shapeCollection._length = 0;\r\n\r\n    if (_length === _maxLength) {\r\n      pool = pooling.double(pool);\r\n      _maxLength *= 2;\r\n    }\r\n    pool[_length] = shapeCollection;\r\n    _length += 1;\r\n  }\r\n\r\n  return ob;\r\n}());\r\n\r\n/* global poolFactory, bezierLengthPool */\r\n/* exported segmentsLengthPool */\r\n\r\nvar segmentsLengthPool = (function () {\r\n  function create() {\r\n    return {\r\n      lengths: [],\r\n      totalLength: 0,\r\n    };\r\n  }\r\n\r\n  function release(element) {\r\n    var i;\r\n    var len = element.lengths.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      bezierLengthPool.release(element.lengths[i]);\r\n    }\r\n    element.lengths.length = 0;\r\n  }\r\n\r\n  return poolFactory(8, create, release);\r\n}());\r\n\r\n/* global createTypedArray, defaultCurveSegments, poolFactory */\r\n/* exported bezierLengthPool */\r\n\r\nvar bezierLengthPool = (function () {\r\n  function create() {\r\n    return {\r\n      addedLength: 0,\r\n      percents: createTypedArray('float32', defaultCurveSegments),\r\n      lengths: createTypedArray('float32', defaultCurveSegments),\r\n    };\r\n  }\r\n  return poolFactory(8, create);\r\n}());\r\n\r\n/* exported markerParser */\r\n\r\nvar markerParser = (\r\n\r\n  function () {\r\n    function parsePayloadLines(payload) {\r\n      var lines = payload.split('\\r\\n');\r\n      var keys = {};\r\n      var line;\r\n      var keysCount = 0;\r\n      for (var i = 0; i < lines.length; i += 1) {\r\n        line = lines[i].split(':');\r\n        if (line.length === 2) {\r\n          keys[line[0]] = line[1].trim();\r\n          keysCount += 1;\r\n        }\r\n      }\r\n      if (keysCount === 0) {\r\n        throw new Error();\r\n      }\r\n      return keys;\r\n    }\r\n\r\n    return function (_markers) {\r\n      var markers = [];\r\n      for (var i = 0; i < _markers.length; i += 1) {\r\n        var _marker = _markers[i];\r\n        var markerData = {\r\n          time: _marker.tm,\r\n          duration: _marker.dr,\r\n        };\r\n        try {\r\n          markerData.payload = JSON.parse(_markers[i].cm);\r\n        } catch (_) {\r\n          try {\r\n            markerData.payload = parsePayloadLines(_markers[i].cm);\r\n          } catch (__) {\r\n            markerData.payload = {\r\n              name: _markers[i],\r\n            };\r\n          }\r\n        }\r\n        markers.push(markerData);\r\n      }\r\n      return markers;\r\n    };\r\n  }());\r\n\r\n/* global AudioElement, FootageElement, FontManager */\r\n\r\nfunction BaseRenderer() {}\r\nBaseRenderer.prototype.checkLayers = function (num) {\r\n  var i;\r\n  var len = this.layers.length;\r\n  var data;\r\n  this.completeLayers = true;\r\n  for (i = len - 1; i >= 0; i -= 1) {\r\n    if (!this.elements[i]) {\r\n      data = this.layers[i];\r\n      if (data.ip - data.st <= (num - this.layers[i].st) && data.op - data.st > (num - this.layers[i].st)) {\r\n        this.buildItem(i);\r\n      }\r\n    }\r\n    this.completeLayers = this.elements[i] ? this.completeLayers : false;\r\n  }\r\n  this.checkPendingElements();\r\n};\r\n\r\nBaseRenderer.prototype.createItem = function (layer) {\r\n  switch (layer.ty) {\r\n    case 2:\r\n      return this.createImage(layer);\r\n    case 0:\r\n      return this.createComp(layer);\r\n    case 1:\r\n      return this.createSolid(layer);\r\n    case 3:\r\n      return this.createNull(layer);\r\n    case 4:\r\n      return this.createShape(layer);\r\n    case 5:\r\n      return this.createText(layer);\r\n    case 6:\r\n      return this.createAudio(layer);\r\n    case 13:\r\n      return this.createCamera(layer);\r\n    case 15:\r\n      return this.createFootage(layer);\r\n    default:\r\n      return this.createNull(layer);\r\n  }\r\n};\r\n\r\nBaseRenderer.prototype.createCamera = function () {\r\n  throw new Error('You\\'re using a 3d camera. Try the html renderer.');\r\n};\r\n\r\nBaseRenderer.prototype.createAudio = function (data) {\r\n  return new AudioElement(data, this.globalData, this);\r\n};\r\n\r\nBaseRenderer.prototype.createFootage = function (data) {\r\n  return new FootageElement(data, this.globalData, this);\r\n};\r\n\r\nBaseRenderer.prototype.buildAllItems = function () {\r\n  var i;\r\n  var len = this.layers.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    this.buildItem(i);\r\n  }\r\n  this.checkPendingElements();\r\n};\r\n\r\nBaseRenderer.prototype.includeLayers = function (newLayers) {\r\n  this.completeLayers = false;\r\n  var i;\r\n  var len = newLayers.length;\r\n  var j;\r\n  var jLen = this.layers.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    j = 0;\r\n    while (j < jLen) {\r\n      if (this.layers[j].id === newLayers[i].id) {\r\n        this.layers[j] = newLayers[i];\r\n        break;\r\n      }\r\n      j += 1;\r\n    }\r\n  }\r\n};\r\n\r\nBaseRenderer.prototype.setProjectInterface = function (pInterface) {\r\n  this.globalData.projectInterface = pInterface;\r\n};\r\n\r\nBaseRenderer.prototype.initItems = function () {\r\n  if (!this.globalData.progressiveLoad) {\r\n    this.buildAllItems();\r\n  }\r\n};\r\nBaseRenderer.prototype.buildElementParenting = function (element, parentName, hierarchy) {\r\n  var elements = this.elements;\r\n  var layers = this.layers;\r\n  var i = 0;\r\n  var len = layers.length;\r\n  while (i < len) {\r\n    if (layers[i].ind == parentName) { // eslint-disable-line eqeqeq\r\n      if (!elements[i] || elements[i] === true) {\r\n        this.buildItem(i);\r\n        this.addPendingElement(element);\r\n      } else {\r\n        hierarchy.push(elements[i]);\r\n        elements[i].setAsParent();\r\n        if (layers[i].parent !== undefined) {\r\n          this.buildElementParenting(element, layers[i].parent, hierarchy);\r\n        } else {\r\n          element.setHierarchy(hierarchy);\r\n        }\r\n      }\r\n    }\r\n    i += 1;\r\n  }\r\n};\r\n\r\nBaseRenderer.prototype.addPendingElement = function (element) {\r\n  this.pendingElements.push(element);\r\n};\r\n\r\nBaseRenderer.prototype.searchExtraCompositions = function (assets) {\r\n  var i;\r\n  var len = assets.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (assets[i].xt) {\r\n      var comp = this.createComp(assets[i]);\r\n      comp.initExpressions();\r\n      this.globalData.projectInterface.registerComposition(comp);\r\n    }\r\n  }\r\n};\r\n\r\nBaseRenderer.prototype.setupGlobalData = function (animData, fontsContainer) {\r\n  this.globalData.fontManager = new FontManager();\r\n  this.globalData.fontManager.addChars(animData.chars);\r\n  this.globalData.fontManager.addFonts(animData.fonts, fontsContainer);\r\n  this.globalData.getAssetData = this.animationItem.getAssetData.bind(this.animationItem);\r\n  this.globalData.getAssetsPath = this.animationItem.getAssetsPath.bind(this.animationItem);\r\n  this.globalData.imageLoader = this.animationItem.imagePreloader;\r\n  this.globalData.audioController = this.animationItem.audioController;\r\n  this.globalData.frameId = 0;\r\n  this.globalData.frameRate = animData.fr;\r\n  this.globalData.nm = animData.nm;\r\n  this.globalData.compSize = {\r\n    w: animData.w,\r\n    h: animData.h,\r\n  };\r\n};\r\n\r\n/* global createElementID, extendPrototype, BaseRenderer, NullElement, SVGShapeElement, SVGTextLottieElement,\r\nIImageElement, SVGCompElement, ISolidElement, createNS, locationHref, createSizedArray, expressionsPlugin */\r\n\r\nfunction SVGRenderer(animationItem, config) {\r\n  this.animationItem = animationItem;\r\n  this.layers = null;\r\n  this.renderedFrame = -1;\r\n  this.svgElement = createNS('svg');\r\n  var ariaLabel = '';\r\n  if (config && config.title) {\r\n    var titleElement = createNS('title');\r\n    var titleId = createElementID();\r\n    titleElement.setAttribute('id', titleId);\r\n    titleElement.textContent = config.title;\r\n    this.svgElement.appendChild(titleElement);\r\n    ariaLabel += titleId;\r\n  }\r\n  if (config && config.description) {\r\n    var descElement = createNS('desc');\r\n    var descId = createElementID();\r\n    descElement.setAttribute('id', descId);\r\n    descElement.textContent = config.description;\r\n    this.svgElement.appendChild(descElement);\r\n    ariaLabel += ' ' + descId;\r\n  }\r\n  if (ariaLabel) {\r\n    this.svgElement.setAttribute('aria-labelledby', ariaLabel);\r\n  }\r\n  var defs = createNS('defs');\r\n  this.svgElement.appendChild(defs);\r\n  var maskElement = createNS('g');\r\n  this.svgElement.appendChild(maskElement);\r\n  this.layerElement = maskElement;\r\n  this.renderConfig = {\r\n    preserveAspectRatio: (config && config.preserveAspectRatio) || 'xMidYMid meet',\r\n    imagePreserveAspectRatio: (config && config.imagePreserveAspectRatio) || 'xMidYMid slice',\r\n    contentVisibility: (config && config.contentVisibility) || 'visible',\r\n    progressiveLoad: (config && config.progressiveLoad) || false,\r\n    hideOnTransparent: !((config && config.hideOnTransparent === false)),\r\n    viewBoxOnly: (config && config.viewBoxOnly) || false,\r\n    viewBoxSize: (config && config.viewBoxSize) || false,\r\n    className: (config && config.className) || '',\r\n    id: (config && config.id) || '',\r\n    focusable: config && config.focusable,\r\n    filterSize: {\r\n      width: (config && config.filterSize && config.filterSize.width) || '100%',\r\n      height: (config && config.filterSize && config.filterSize.height) || '100%',\r\n      x: (config && config.filterSize && config.filterSize.x) || '0%',\r\n      y: (config && config.filterSize && config.filterSize.y) || '0%',\r\n    },\r\n  };\r\n\r\n  this.globalData = {\r\n    _mdf: false,\r\n    frameNum: -1,\r\n    defs: defs,\r\n    renderConfig: this.renderConfig,\r\n  };\r\n  this.elements = [];\r\n  this.pendingElements = [];\r\n  this.destroyed = false;\r\n  this.rendererType = 'svg';\r\n}\r\n\r\nextendPrototype([BaseRenderer], SVGRenderer);\r\n\r\nSVGRenderer.prototype.createNull = function (data) {\r\n  return new NullElement(data, this.globalData, this);\r\n};\r\n\r\nSVGRenderer.prototype.createShape = function (data) {\r\n  return new SVGShapeElement(data, this.globalData, this);\r\n};\r\n\r\nSVGRenderer.prototype.createText = function (data) {\r\n  return new SVGTextLottieElement(data, this.globalData, this);\r\n};\r\n\r\nSVGRenderer.prototype.createImage = function (data) {\r\n  return new IImageElement(data, this.globalData, this);\r\n};\r\n\r\nSVGRenderer.prototype.createComp = function (data) {\r\n  return new SVGCompElement(data, this.globalData, this);\r\n};\r\n\r\nSVGRenderer.prototype.createSolid = function (data) {\r\n  return new ISolidElement(data, this.globalData, this);\r\n};\r\n\r\nSVGRenderer.prototype.configAnimation = function (animData) {\r\n  this.svgElement.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\r\n  if (this.renderConfig.viewBoxSize) {\r\n    this.svgElement.setAttribute('viewBox', this.renderConfig.viewBoxSize);\r\n  } else {\r\n    this.svgElement.setAttribute('viewBox', '0 0 ' + animData.w + ' ' + animData.h);\r\n  }\r\n\r\n  if (!this.renderConfig.viewBoxOnly) {\r\n    this.svgElement.setAttribute('width', animData.w);\r\n    this.svgElement.setAttribute('height', animData.h);\r\n    this.svgElement.style.width = '100%';\r\n    this.svgElement.style.height = '100%';\r\n    this.svgElement.style.transform = 'translate3d(0,0,0)';\r\n    this.svgElement.style.contentVisibility = this.renderConfig.contentVisibility;\r\n  }\r\n  if (this.renderConfig.className) {\r\n    this.svgElement.setAttribute('class', this.renderConfig.className);\r\n  }\r\n  if (this.renderConfig.id) {\r\n    this.svgElement.setAttribute('id', this.renderConfig.id);\r\n  }\r\n  if (this.renderConfig.focusable !== undefined) {\r\n    this.svgElement.setAttribute('focusable', this.renderConfig.focusable);\r\n  }\r\n  this.svgElement.setAttribute('preserveAspectRatio', this.renderConfig.preserveAspectRatio);\r\n  // this.layerElement.style.transform = 'translate3d(0,0,0)';\r\n  // this.layerElement.style.transformOrigin = this.layerElement.style.mozTransformOrigin = this.layerElement.style.webkitTransformOrigin = this.layerElement.style['-webkit-transform'] = \"0px 0px 0px\";\r\n  this.animationItem.wrapper.appendChild(this.svgElement);\r\n  // Mask animation\r\n  var defs = this.globalData.defs;\r\n\r\n  this.setupGlobalData(animData, defs);\r\n  this.globalData.progressiveLoad = this.renderConfig.progressiveLoad;\r\n  this.data = animData;\r\n\r\n  var maskElement = createNS('clipPath');\r\n  var rect = createNS('rect');\r\n  rect.setAttribute('width', animData.w);\r\n  rect.setAttribute('height', animData.h);\r\n  rect.setAttribute('x', 0);\r\n  rect.setAttribute('y', 0);\r\n  var maskId = createElementID();\r\n  maskElement.setAttribute('id', maskId);\r\n  maskElement.appendChild(rect);\r\n  this.layerElement.setAttribute('clip-path', 'url(' + locationHref + '#' + maskId + ')');\r\n\r\n  defs.appendChild(maskElement);\r\n  this.layers = animData.layers;\r\n  this.elements = createSizedArray(animData.layers.length);\r\n};\r\n\r\nSVGRenderer.prototype.destroy = function () {\r\n  if (this.animationItem.wrapper) {\r\n    this.animationItem.wrapper.innerText = '';\r\n  }\r\n  this.layerElement = null;\r\n  this.globalData.defs = null;\r\n  var i;\r\n  var len = this.layers ? this.layers.length : 0;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.elements[i]) {\r\n      this.elements[i].destroy();\r\n    }\r\n  }\r\n  this.elements.length = 0;\r\n  this.destroyed = true;\r\n  this.animationItem = null;\r\n};\r\n\r\nSVGRenderer.prototype.updateContainerSize = function () {\r\n};\r\n\r\nSVGRenderer.prototype.buildItem = function (pos) {\r\n  var elements = this.elements;\r\n  if (elements[pos] || this.layers[pos].ty === 99) {\r\n    return;\r\n  }\r\n  elements[pos] = true;\r\n  var element = this.createItem(this.layers[pos]);\r\n\r\n  elements[pos] = element;\r\n  if (expressionsPlugin) {\r\n    if (this.layers[pos].ty === 0) {\r\n      this.globalData.projectInterface.registerComposition(element);\r\n    }\r\n    element.initExpressions();\r\n  }\r\n  this.appendElementInPos(element, pos);\r\n  if (this.layers[pos].tt) {\r\n    if (!this.elements[pos - 1] || this.elements[pos - 1] === true) {\r\n      this.buildItem(pos - 1);\r\n      this.addPendingElement(element);\r\n    } else {\r\n      element.setMatte(elements[pos - 1].layerId);\r\n    }\r\n  }\r\n};\r\n\r\nSVGRenderer.prototype.checkPendingElements = function () {\r\n  while (this.pendingElements.length) {\r\n    var element = this.pendingElements.pop();\r\n    element.checkParenting();\r\n    if (element.data.tt) {\r\n      var i = 0;\r\n      var len = this.elements.length;\r\n      while (i < len) {\r\n        if (this.elements[i] === element) {\r\n          element.setMatte(this.elements[i - 1].layerId);\r\n          break;\r\n        }\r\n        i += 1;\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nSVGRenderer.prototype.renderFrame = function (num) {\r\n  if (this.renderedFrame === num || this.destroyed) {\r\n    return;\r\n  }\r\n  if (num === null) {\r\n    num = this.renderedFrame;\r\n  } else {\r\n    this.renderedFrame = num;\r\n  }\r\n  // console.log('-------');\r\n  // console.log('FRAME ',num);\r\n  this.globalData.frameNum = num;\r\n  this.globalData.frameId += 1;\r\n  this.globalData.projectInterface.currentFrame = num;\r\n  this.globalData._mdf = false;\r\n  var i;\r\n  var len = this.layers.length;\r\n  if (!this.completeLayers) {\r\n    this.checkLayers(num);\r\n  }\r\n  for (i = len - 1; i >= 0; i -= 1) {\r\n    if (this.completeLayers || this.elements[i]) {\r\n      this.elements[i].prepareFrame(num - this.layers[i].st);\r\n    }\r\n  }\r\n  if (this.globalData._mdf) {\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.completeLayers || this.elements[i]) {\r\n        this.elements[i].renderFrame();\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nSVGRenderer.prototype.appendElementInPos = function (element, pos) {\r\n  var newElement = element.getBaseElement();\r\n  if (!newElement) {\r\n    return;\r\n  }\r\n  var i = 0;\r\n  var nextElement;\r\n  while (i < pos) {\r\n    if (this.elements[i] && this.elements[i] !== true && this.elements[i].getBaseElement()) {\r\n      nextElement = this.elements[i].getBaseElement();\r\n    }\r\n    i += 1;\r\n  }\r\n  if (nextElement) {\r\n    this.layerElement.insertBefore(newElement, nextElement);\r\n  } else {\r\n    this.layerElement.appendChild(newElement);\r\n  }\r\n};\r\n\r\nSVGRenderer.prototype.hide = function () {\r\n  this.layerElement.style.display = 'none';\r\n};\r\n\r\nSVGRenderer.prototype.show = function () {\r\n  this.layerElement.style.display = 'block';\r\n};\r\n\r\n/* global CVContextData, Matrix, extendPrototype, BaseRenderer, CVShapeElement, CVTextElement,\r\nCVImageElement, CVCompElement, CVSolidElement, SVGRenderer, createTag, createSizedArray */\r\n\r\nfunction CanvasRenderer(animationItem, config) {\r\n  this.animationItem = animationItem;\r\n  this.renderConfig = {\r\n    clearCanvas: (config && config.clearCanvas !== undefined) ? config.clearCanvas : true,\r\n    context: (config && config.context) || null,\r\n    progressiveLoad: (config && config.progressiveLoad) || false,\r\n    preserveAspectRatio: (config && config.preserveAspectRatio) || 'xMidYMid meet',\r\n    imagePreserveAspectRatio: (config && config.imagePreserveAspectRatio) || 'xMidYMid slice',\r\n    contentVisibility: (config && config.contentVisibility) || 'visible',\r\n    className: (config && config.className) || '',\r\n    id: (config && config.id) || '',\r\n  };\r\n  this.renderConfig.dpr = (config && config.dpr) || 1;\r\n  if (this.animationItem.wrapper) {\r\n    this.renderConfig.dpr = (config && config.dpr) || window.devicePixelRatio || 1;\r\n  }\r\n  this.renderedFrame = -1;\r\n  this.globalData = {\r\n    frameNum: -1,\r\n    _mdf: false,\r\n    renderConfig: this.renderConfig,\r\n    currentGlobalAlpha: -1,\r\n  };\r\n  this.contextData = new CVContextData();\r\n  this.elements = [];\r\n  this.pendingElements = [];\r\n  this.transformMat = new Matrix();\r\n  this.completeLayers = false;\r\n  this.rendererType = 'canvas';\r\n}\r\nextendPrototype([BaseRenderer], CanvasRenderer);\r\n\r\nCanvasRenderer.prototype.createShape = function (data) {\r\n  return new CVShapeElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRenderer.prototype.createText = function (data) {\r\n  return new CVTextElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRenderer.prototype.createImage = function (data) {\r\n  return new CVImageElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRenderer.prototype.createComp = function (data) {\r\n  return new CVCompElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRenderer.prototype.createSolid = function (data) {\r\n  return new CVSolidElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRenderer.prototype.createNull = SVGRenderer.prototype.createNull;\r\n\r\nCanvasRenderer.prototype.ctxTransform = function (props) {\r\n  if (props[0] === 1 && props[1] === 0 && props[4] === 0 && props[5] === 1 && props[12] === 0 && props[13] === 0) {\r\n    return;\r\n  }\r\n  if (!this.renderConfig.clearCanvas) {\r\n    this.canvasContext.transform(props[0], props[1], props[4], props[5], props[12], props[13]);\r\n    return;\r\n  }\r\n  this.transformMat.cloneFromProps(props);\r\n  var cProps = this.contextData.cTr.props;\r\n  this.transformMat.transform(cProps[0], cProps[1], cProps[2], cProps[3], cProps[4], cProps[5], cProps[6], cProps[7], cProps[8], cProps[9], cProps[10], cProps[11], cProps[12], cProps[13], cProps[14], cProps[15]);\r\n  // this.contextData.cTr.transform(props[0],props[1],props[2],props[3],props[4],props[5],props[6],props[7],props[8],props[9],props[10],props[11],props[12],props[13],props[14],props[15]);\r\n  this.contextData.cTr.cloneFromProps(this.transformMat.props);\r\n  var trProps = this.contextData.cTr.props;\r\n  this.canvasContext.setTransform(trProps[0], trProps[1], trProps[4], trProps[5], trProps[12], trProps[13]);\r\n};\r\n\r\nCanvasRenderer.prototype.ctxOpacity = function (op) {\r\n  /* if(op === 1){\r\n        return;\r\n    } */\r\n  if (!this.renderConfig.clearCanvas) {\r\n    this.canvasContext.globalAlpha *= op < 0 ? 0 : op;\r\n    this.globalData.currentGlobalAlpha = this.contextData.cO;\r\n    return;\r\n  }\r\n  this.contextData.cO *= op < 0 ? 0 : op;\r\n  if (this.globalData.currentGlobalAlpha !== this.contextData.cO) {\r\n    this.canvasContext.globalAlpha = this.contextData.cO;\r\n    this.globalData.currentGlobalAlpha = this.contextData.cO;\r\n  }\r\n};\r\n\r\nCanvasRenderer.prototype.reset = function () {\r\n  if (!this.renderConfig.clearCanvas) {\r\n    this.canvasContext.restore();\r\n    return;\r\n  }\r\n  this.contextData.reset();\r\n};\r\n\r\nCanvasRenderer.prototype.save = function (actionFlag) {\r\n  if (!this.renderConfig.clearCanvas) {\r\n    this.canvasContext.save();\r\n    return;\r\n  }\r\n  if (actionFlag) {\r\n    this.canvasContext.save();\r\n  }\r\n  var props = this.contextData.cTr.props;\r\n  if (this.contextData._length <= this.contextData.cArrPos) {\r\n    this.contextData.duplicate();\r\n  }\r\n  var i;\r\n  var arr = this.contextData.saved[this.contextData.cArrPos];\r\n  for (i = 0; i < 16; i += 1) {\r\n    arr[i] = props[i];\r\n  }\r\n  this.contextData.savedOp[this.contextData.cArrPos] = this.contextData.cO;\r\n  this.contextData.cArrPos += 1;\r\n};\r\n\r\nCanvasRenderer.prototype.restore = function (actionFlag) {\r\n  if (!this.renderConfig.clearCanvas) {\r\n    this.canvasContext.restore();\r\n    return;\r\n  }\r\n  if (actionFlag) {\r\n    this.canvasContext.restore();\r\n    this.globalData.blendMode = 'source-over';\r\n  }\r\n  this.contextData.cArrPos -= 1;\r\n  var popped = this.contextData.saved[this.contextData.cArrPos];\r\n  var i;\r\n  var arr = this.contextData.cTr.props;\r\n  for (i = 0; i < 16; i += 1) {\r\n    arr[i] = popped[i];\r\n  }\r\n  this.canvasContext.setTransform(popped[0], popped[1], popped[4], popped[5], popped[12], popped[13]);\r\n  popped = this.contextData.savedOp[this.contextData.cArrPos];\r\n  this.contextData.cO = popped;\r\n  if (this.globalData.currentGlobalAlpha !== popped) {\r\n    this.canvasContext.globalAlpha = popped;\r\n    this.globalData.currentGlobalAlpha = popped;\r\n  }\r\n};\r\n\r\nCanvasRenderer.prototype.configAnimation = function (animData) {\r\n  if (this.animationItem.wrapper) {\r\n    this.animationItem.container = createTag('canvas');\r\n    var containerStyle = this.animationItem.container.style;\r\n    containerStyle.width = '100%';\r\n    containerStyle.height = '100%';\r\n    var origin = '0px 0px 0px';\r\n    containerStyle.transformOrigin = origin;\r\n    containerStyle.mozTransformOrigin = origin;\r\n    containerStyle.webkitTransformOrigin = origin;\r\n    containerStyle['-webkit-transform'] = origin;\r\n    containerStyle.contentVisibility = this.renderConfig.contentVisibility;\r\n    this.animationItem.wrapper.appendChild(this.animationItem.container);\r\n    this.canvasContext = this.animationItem.container.getContext('2d');\r\n    if (this.renderConfig.className) {\r\n      this.animationItem.container.setAttribute('class', this.renderConfig.className);\r\n    }\r\n    if (this.renderConfig.id) {\r\n      this.animationItem.container.setAttribute('id', this.renderConfig.id);\r\n    }\r\n  } else {\r\n    this.canvasContext = this.renderConfig.context;\r\n  }\r\n  this.data = animData;\r\n  this.layers = animData.layers;\r\n  this.transformCanvas = {\r\n    w: animData.w,\r\n    h: animData.h,\r\n    sx: 0,\r\n    sy: 0,\r\n    tx: 0,\r\n    ty: 0,\r\n  };\r\n  this.setupGlobalData(animData, document.body);\r\n  this.globalData.canvasContext = this.canvasContext;\r\n  this.globalData.renderer = this;\r\n  this.globalData.isDashed = false;\r\n  this.globalData.progressiveLoad = this.renderConfig.progressiveLoad;\r\n  this.globalData.transformCanvas = this.transformCanvas;\r\n  this.elements = createSizedArray(animData.layers.length);\r\n\r\n  this.updateContainerSize();\r\n};\r\n\r\nCanvasRenderer.prototype.updateContainerSize = function () {\r\n  this.reset();\r\n  var elementWidth;\r\n  var elementHeight;\r\n  if (this.animationItem.wrapper && this.animationItem.container) {\r\n    elementWidth = this.animationItem.wrapper.offsetWidth;\r\n    elementHeight = this.animationItem.wrapper.offsetHeight;\r\n    this.animationItem.container.setAttribute('width', elementWidth * this.renderConfig.dpr);\r\n    this.animationItem.container.setAttribute('height', elementHeight * this.renderConfig.dpr);\r\n  } else {\r\n    elementWidth = this.canvasContext.canvas.width * this.renderConfig.dpr;\r\n    elementHeight = this.canvasContext.canvas.height * this.renderConfig.dpr;\r\n  }\r\n  var elementRel;\r\n  var animationRel;\r\n  if (this.renderConfig.preserveAspectRatio.indexOf('meet') !== -1 || this.renderConfig.preserveAspectRatio.indexOf('slice') !== -1) {\r\n    var par = this.renderConfig.preserveAspectRatio.split(' ');\r\n    var fillType = par[1] || 'meet';\r\n    var pos = par[0] || 'xMidYMid';\r\n    var xPos = pos.substr(0, 4);\r\n    var yPos = pos.substr(4);\r\n    elementRel = elementWidth / elementHeight;\r\n    animationRel = this.transformCanvas.w / this.transformCanvas.h;\r\n    if ((animationRel > elementRel && fillType === 'meet') || (animationRel < elementRel && fillType === 'slice')) {\r\n      this.transformCanvas.sx = elementWidth / (this.transformCanvas.w / this.renderConfig.dpr);\r\n      this.transformCanvas.sy = elementWidth / (this.transformCanvas.w / this.renderConfig.dpr);\r\n    } else {\r\n      this.transformCanvas.sx = elementHeight / (this.transformCanvas.h / this.renderConfig.dpr);\r\n      this.transformCanvas.sy = elementHeight / (this.transformCanvas.h / this.renderConfig.dpr);\r\n    }\r\n\r\n    if (xPos === 'xMid' && ((animationRel < elementRel && fillType === 'meet') || (animationRel > elementRel && fillType === 'slice'))) {\r\n      this.transformCanvas.tx = ((elementWidth - this.transformCanvas.w * (elementHeight / this.transformCanvas.h)) / 2) * this.renderConfig.dpr;\r\n    } else if (xPos === 'xMax' && ((animationRel < elementRel && fillType === 'meet') || (animationRel > elementRel && fillType === 'slice'))) {\r\n      this.transformCanvas.tx = (elementWidth - this.transformCanvas.w * (elementHeight / this.transformCanvas.h)) * this.renderConfig.dpr;\r\n    } else {\r\n      this.transformCanvas.tx = 0;\r\n    }\r\n    if (yPos === 'YMid' && ((animationRel > elementRel && fillType === 'meet') || (animationRel < elementRel && fillType === 'slice'))) {\r\n      this.transformCanvas.ty = ((elementHeight - this.transformCanvas.h * (elementWidth / this.transformCanvas.w)) / 2) * this.renderConfig.dpr;\r\n    } else if (yPos === 'YMax' && ((animationRel > elementRel && fillType === 'meet') || (animationRel < elementRel && fillType === 'slice'))) {\r\n      this.transformCanvas.ty = ((elementHeight - this.transformCanvas.h * (elementWidth / this.transformCanvas.w))) * this.renderConfig.dpr;\r\n    } else {\r\n      this.transformCanvas.ty = 0;\r\n    }\r\n  } else if (this.renderConfig.preserveAspectRatio === 'none') {\r\n    this.transformCanvas.sx = elementWidth / (this.transformCanvas.w / this.renderConfig.dpr);\r\n    this.transformCanvas.sy = elementHeight / (this.transformCanvas.h / this.renderConfig.dpr);\r\n    this.transformCanvas.tx = 0;\r\n    this.transformCanvas.ty = 0;\r\n  } else {\r\n    this.transformCanvas.sx = this.renderConfig.dpr;\r\n    this.transformCanvas.sy = this.renderConfig.dpr;\r\n    this.transformCanvas.tx = 0;\r\n    this.transformCanvas.ty = 0;\r\n  }\r\n  this.transformCanvas.props = [this.transformCanvas.sx, 0, 0, 0, 0, this.transformCanvas.sy, 0, 0, 0, 0, 1, 0, this.transformCanvas.tx, this.transformCanvas.ty, 0, 1];\r\n  /* var i, len = this.elements.length;\r\n    for(i=0;i<len;i+=1){\r\n        if(this.elements[i] && this.elements[i].data.ty === 0){\r\n            this.elements[i].resize(this.globalData.transformCanvas);\r\n        }\r\n    } */\r\n  this.ctxTransform(this.transformCanvas.props);\r\n  this.canvasContext.beginPath();\r\n  this.canvasContext.rect(0, 0, this.transformCanvas.w, this.transformCanvas.h);\r\n  this.canvasContext.closePath();\r\n  this.canvasContext.clip();\r\n\r\n  this.renderFrame(this.renderedFrame, true);\r\n};\r\n\r\nCanvasRenderer.prototype.destroy = function () {\r\n  if (this.renderConfig.clearCanvas && this.animationItem.wrapper) {\r\n    this.animationItem.wrapper.innerText = '';\r\n  }\r\n  var i;\r\n  var len = this.layers ? this.layers.length : 0;\r\n  for (i = len - 1; i >= 0; i -= 1) {\r\n    if (this.elements[i]) {\r\n      this.elements[i].destroy();\r\n    }\r\n  }\r\n  this.elements.length = 0;\r\n  this.globalData.canvasContext = null;\r\n  this.animationItem.container = null;\r\n  this.destroyed = true;\r\n};\r\n\r\nCanvasRenderer.prototype.renderFrame = function (num, forceRender) {\r\n  if ((this.renderedFrame === num && this.renderConfig.clearCanvas === true && !forceRender) || this.destroyed || num === -1) {\r\n    return;\r\n  }\r\n  this.renderedFrame = num;\r\n  this.globalData.frameNum = num - this.animationItem._isFirstFrame;\r\n  this.globalData.frameId += 1;\r\n  this.globalData._mdf = !this.renderConfig.clearCanvas || forceRender;\r\n  this.globalData.projectInterface.currentFrame = num;\r\n\r\n  // console.log('--------');\r\n  // console.log('NEW: ',num);\r\n  var i;\r\n  var len = this.layers.length;\r\n  if (!this.completeLayers) {\r\n    this.checkLayers(num);\r\n  }\r\n\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.completeLayers || this.elements[i]) {\r\n      this.elements[i].prepareFrame(num - this.layers[i].st);\r\n    }\r\n  }\r\n  if (this.globalData._mdf) {\r\n    if (this.renderConfig.clearCanvas === true) {\r\n      this.canvasContext.clearRect(0, 0, this.transformCanvas.w, this.transformCanvas.h);\r\n    } else {\r\n      this.save();\r\n    }\r\n    for (i = len - 1; i >= 0; i -= 1) {\r\n      if (this.completeLayers || this.elements[i]) {\r\n        this.elements[i].renderFrame();\r\n      }\r\n    }\r\n    if (this.renderConfig.clearCanvas !== true) {\r\n      this.restore();\r\n    }\r\n  }\r\n};\r\n\r\nCanvasRenderer.prototype.buildItem = function (pos) {\r\n  var elements = this.elements;\r\n  if (elements[pos] || this.layers[pos].ty === 99) {\r\n    return;\r\n  }\r\n  var element = this.createItem(this.layers[pos], this, this.globalData);\r\n  elements[pos] = element;\r\n  element.initExpressions();\r\n  /* if(this.layers[pos].ty === 0){\r\n        element.resize(this.globalData.transformCanvas);\r\n    } */\r\n};\r\n\r\nCanvasRenderer.prototype.checkPendingElements = function () {\r\n  while (this.pendingElements.length) {\r\n    var element = this.pendingElements.pop();\r\n    element.checkParenting();\r\n  }\r\n};\r\n\r\nCanvasRenderer.prototype.hide = function () {\r\n  this.animationItem.container.style.display = 'none';\r\n};\r\n\r\nCanvasRenderer.prototype.show = function () {\r\n  this.animationItem.container.style.display = 'block';\r\n};\r\n\r\n/* global extendPrototype, BaseRenderer, SVGRenderer, SVGShapeElement, HShapeElement, SVGTextLottieElement,\r\nHTextElement, HCameraElement, IImageElement, HImageElement, SVGCompElement, HCompElement, ISolidElement,\r\nHSolidElement, styleDiv, createTag, createNS */\r\n\r\nfunction HybridRenderer(animationItem, config) {\r\n  this.animationItem = animationItem;\r\n  this.layers = null;\r\n  this.renderedFrame = -1;\r\n  this.renderConfig = {\r\n    className: (config && config.className) || '',\r\n    imagePreserveAspectRatio: (config && config.imagePreserveAspectRatio) || 'xMidYMid slice',\r\n    hideOnTransparent: !(config && config.hideOnTransparent === false),\r\n    filterSize: {\r\n      width: (config && config.filterSize && config.filterSize.width) || '400%',\r\n      height: (config && config.filterSize && config.filterSize.height) || '400%',\r\n      x: (config && config.filterSize && config.filterSize.x) || '-100%',\r\n      y: (config && config.filterSize && config.filterSize.y) || '-100%',\r\n    },\r\n  };\r\n  this.globalData = {\r\n    _mdf: false,\r\n    frameNum: -1,\r\n    renderConfig: this.renderConfig,\r\n  };\r\n  this.pendingElements = [];\r\n  this.elements = [];\r\n  this.threeDElements = [];\r\n  this.destroyed = false;\r\n  this.camera = null;\r\n  this.supports3d = true;\r\n  this.rendererType = 'html';\r\n}\r\n\r\nextendPrototype([BaseRenderer], HybridRenderer);\r\n\r\nHybridRenderer.prototype.buildItem = SVGRenderer.prototype.buildItem;\r\n\r\nHybridRenderer.prototype.checkPendingElements = function () {\r\n  while (this.pendingElements.length) {\r\n    var element = this.pendingElements.pop();\r\n    element.checkParenting();\r\n  }\r\n};\r\n\r\nHybridRenderer.prototype.appendElementInPos = function (element, pos) {\r\n  var newDOMElement = element.getBaseElement();\r\n  if (!newDOMElement) {\r\n    return;\r\n  }\r\n  var layer = this.layers[pos];\r\n  if (!layer.ddd || !this.supports3d) {\r\n    if (this.threeDElements) {\r\n      this.addTo3dContainer(newDOMElement, pos);\r\n    } else {\r\n      var i = 0;\r\n      var nextDOMElement;\r\n      var nextLayer;\r\n      var tmpDOMElement;\r\n      while (i < pos) {\r\n        if (this.elements[i] && this.elements[i] !== true && this.elements[i].getBaseElement) {\r\n          nextLayer = this.elements[i];\r\n          tmpDOMElement = this.layers[i].ddd ? this.getThreeDContainerByPos(i) : nextLayer.getBaseElement();\r\n          nextDOMElement = tmpDOMElement || nextDOMElement;\r\n        }\r\n        i += 1;\r\n      }\r\n      if (nextDOMElement) {\r\n        if (!layer.ddd || !this.supports3d) {\r\n          this.layerElement.insertBefore(newDOMElement, nextDOMElement);\r\n        }\r\n      } else if (!layer.ddd || !this.supports3d) {\r\n        this.layerElement.appendChild(newDOMElement);\r\n      }\r\n    }\r\n  } else {\r\n    this.addTo3dContainer(newDOMElement, pos);\r\n  }\r\n};\r\n\r\nHybridRenderer.prototype.createShape = function (data) {\r\n  if (!this.supports3d) {\r\n    return new SVGShapeElement(data, this.globalData, this);\r\n  }\r\n  return new HShapeElement(data, this.globalData, this);\r\n};\r\n\r\nHybridRenderer.prototype.createText = function (data) {\r\n  if (!this.supports3d) {\r\n    return new SVGTextLottieElement(data, this.globalData, this);\r\n  }\r\n  return new HTextElement(data, this.globalData, this);\r\n};\r\n\r\nHybridRenderer.prototype.createCamera = function (data) {\r\n  this.camera = new HCameraElement(data, this.globalData, this);\r\n  return this.camera;\r\n};\r\n\r\nHybridRenderer.prototype.createImage = function (data) {\r\n  if (!this.supports3d) {\r\n    return new IImageElement(data, this.globalData, this);\r\n  }\r\n  return new HImageElement(data, this.globalData, this);\r\n};\r\n\r\nHybridRenderer.prototype.createComp = function (data) {\r\n  if (!this.supports3d) {\r\n    return new SVGCompElement(data, this.globalData, this);\r\n  }\r\n  return new HCompElement(data, this.globalData, this);\r\n};\r\n\r\nHybridRenderer.prototype.createSolid = function (data) {\r\n  if (!this.supports3d) {\r\n    return new ISolidElement(data, this.globalData, this);\r\n  }\r\n  return new HSolidElement(data, this.globalData, this);\r\n};\r\n\r\nHybridRenderer.prototype.createNull = SVGRenderer.prototype.createNull;\r\n\r\nHybridRenderer.prototype.getThreeDContainerByPos = function (pos) {\r\n  var i = 0;\r\n  var len = this.threeDElements.length;\r\n  while (i < len) {\r\n    if (this.threeDElements[i].startPos <= pos && this.threeDElements[i].endPos >= pos) {\r\n      return this.threeDElements[i].perspectiveElem;\r\n    }\r\n    i += 1;\r\n  }\r\n  return null;\r\n};\r\n\r\nHybridRenderer.prototype.createThreeDContainer = function (pos, type) {\r\n  var perspectiveElem = createTag('div');\r\n  var style;\r\n  var containerStyle;\r\n  styleDiv(perspectiveElem);\r\n  var container = createTag('div');\r\n  styleDiv(container);\r\n  if (type === '3d') {\r\n    style = perspectiveElem.style;\r\n    style.width = this.globalData.compSize.w + 'px';\r\n    style.height = this.globalData.compSize.h + 'px';\r\n    var center = '50% 50%';\r\n    style.webkitTransformOrigin = center;\r\n    style.mozTransformOrigin = center;\r\n    style.transformOrigin = center;\r\n    containerStyle = container.style;\r\n    var matrix = 'matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)';\r\n    containerStyle.transform = matrix;\r\n    containerStyle.webkitTransform = matrix;\r\n  }\r\n\r\n  perspectiveElem.appendChild(container);\r\n  // this.resizerElem.appendChild(perspectiveElem);\r\n  var threeDContainerData = {\r\n    container: container,\r\n    perspectiveElem: perspectiveElem,\r\n    startPos: pos,\r\n    endPos: pos,\r\n    type: type,\r\n  };\r\n  this.threeDElements.push(threeDContainerData);\r\n  return threeDContainerData;\r\n};\r\n\r\nHybridRenderer.prototype.build3dContainers = function () {\r\n  var i;\r\n  var len = this.layers.length;\r\n  var lastThreeDContainerData;\r\n  var currentContainer = '';\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.layers[i].ddd && this.layers[i].ty !== 3) {\r\n      if (currentContainer !== '3d') {\r\n        currentContainer = '3d';\r\n        lastThreeDContainerData = this.createThreeDContainer(i, '3d');\r\n      }\r\n      lastThreeDContainerData.endPos = Math.max(lastThreeDContainerData.endPos, i);\r\n    } else {\r\n      if (currentContainer !== '2d') {\r\n        currentContainer = '2d';\r\n        lastThreeDContainerData = this.createThreeDContainer(i, '2d');\r\n      }\r\n      lastThreeDContainerData.endPos = Math.max(lastThreeDContainerData.endPos, i);\r\n    }\r\n  }\r\n  len = this.threeDElements.length;\r\n  for (i = len - 1; i >= 0; i -= 1) {\r\n    this.resizerElem.appendChild(this.threeDElements[i].perspectiveElem);\r\n  }\r\n};\r\n\r\nHybridRenderer.prototype.addTo3dContainer = function (elem, pos) {\r\n  var i = 0;\r\n  var len = this.threeDElements.length;\r\n  while (i < len) {\r\n    if (pos <= this.threeDElements[i].endPos) {\r\n      var j = this.threeDElements[i].startPos;\r\n      var nextElement;\r\n      while (j < pos) {\r\n        if (this.elements[j] && this.elements[j].getBaseElement) {\r\n          nextElement = this.elements[j].getBaseElement();\r\n        }\r\n        j += 1;\r\n      }\r\n      if (nextElement) {\r\n        this.threeDElements[i].container.insertBefore(elem, nextElement);\r\n      } else {\r\n        this.threeDElements[i].container.appendChild(elem);\r\n      }\r\n      break;\r\n    }\r\n    i += 1;\r\n  }\r\n};\r\n\r\nHybridRenderer.prototype.configAnimation = function (animData) {\r\n  var resizerElem = createTag('div');\r\n  var wrapper = this.animationItem.wrapper;\r\n  var style = resizerElem.style;\r\n  style.width = animData.w + 'px';\r\n  style.height = animData.h + 'px';\r\n  this.resizerElem = resizerElem;\r\n  styleDiv(resizerElem);\r\n  style.transformStyle = 'flat';\r\n  style.mozTransformStyle = 'flat';\r\n  style.webkitTransformStyle = 'flat';\r\n  if (this.renderConfig.className) {\r\n    resizerElem.setAttribute('class', this.renderConfig.className);\r\n  }\r\n  wrapper.appendChild(resizerElem);\r\n\r\n  style.overflow = 'hidden';\r\n  var svg = createNS('svg');\r\n  svg.setAttribute('width', '1');\r\n  svg.setAttribute('height', '1');\r\n  styleDiv(svg);\r\n  this.resizerElem.appendChild(svg);\r\n  var defs = createNS('defs');\r\n  svg.appendChild(defs);\r\n  this.data = animData;\r\n  // Mask animation\r\n  this.setupGlobalData(animData, svg);\r\n  this.globalData.defs = defs;\r\n  this.layers = animData.layers;\r\n  this.layerElement = this.resizerElem;\r\n  this.build3dContainers();\r\n  this.updateContainerSize();\r\n};\r\n\r\nHybridRenderer.prototype.destroy = function () {\r\n  if (this.animationItem.wrapper) {\r\n    this.animationItem.wrapper.innerText = '';\r\n  }\r\n  this.animationItem.container = null;\r\n  this.globalData.defs = null;\r\n  var i;\r\n  var len = this.layers ? this.layers.length : 0;\r\n  for (i = 0; i < len; i += 1) {\r\n    this.elements[i].destroy();\r\n  }\r\n  this.elements.length = 0;\r\n  this.destroyed = true;\r\n  this.animationItem = null;\r\n};\r\n\r\nHybridRenderer.prototype.updateContainerSize = function () {\r\n  var elementWidth = this.animationItem.wrapper.offsetWidth;\r\n  var elementHeight = this.animationItem.wrapper.offsetHeight;\r\n  var elementRel = elementWidth / elementHeight;\r\n  var animationRel = this.globalData.compSize.w / this.globalData.compSize.h;\r\n  var sx;\r\n  var sy;\r\n  var tx;\r\n  var ty;\r\n  if (animationRel > elementRel) {\r\n    sx = elementWidth / (this.globalData.compSize.w);\r\n    sy = elementWidth / (this.globalData.compSize.w);\r\n    tx = 0;\r\n    ty = ((elementHeight - this.globalData.compSize.h * (elementWidth / this.globalData.compSize.w)) / 2);\r\n  } else {\r\n    sx = elementHeight / (this.globalData.compSize.h);\r\n    sy = elementHeight / (this.globalData.compSize.h);\r\n    tx = (elementWidth - this.globalData.compSize.w * (elementHeight / this.globalData.compSize.h)) / 2;\r\n    ty = 0;\r\n  }\r\n  var style = this.resizerElem.style;\r\n  style.webkitTransform = 'matrix3d(' + sx + ',0,0,0,0,' + sy + ',0,0,0,0,1,0,' + tx + ',' + ty + ',0,1)';\r\n  style.transform = style.webkitTransform;\r\n};\r\n\r\nHybridRenderer.prototype.renderFrame = SVGRenderer.prototype.renderFrame;\r\n\r\nHybridRenderer.prototype.hide = function () {\r\n  this.resizerElem.style.display = 'none';\r\n};\r\n\r\nHybridRenderer.prototype.show = function () {\r\n  this.resizerElem.style.display = 'block';\r\n};\r\n\r\nHybridRenderer.prototype.initItems = function () {\r\n  this.buildAllItems();\r\n  if (this.camera) {\r\n    this.camera.setup();\r\n  } else {\r\n    var cWidth = this.globalData.compSize.w;\r\n    var cHeight = this.globalData.compSize.h;\r\n    var i;\r\n    var len = this.threeDElements.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      var style = this.threeDElements[i].perspectiveElem.style;\r\n      style.webkitPerspective = Math.sqrt(Math.pow(cWidth, 2) + Math.pow(cHeight, 2)) + 'px';\r\n      style.perspective = style.webkitPerspective;\r\n    }\r\n  }\r\n};\r\n\r\nHybridRenderer.prototype.searchExtraCompositions = function (assets) {\r\n  var i;\r\n  var len = assets.length;\r\n  var floatingContainer = createTag('div');\r\n  for (i = 0; i < len; i += 1) {\r\n    if (assets[i].xt) {\r\n      var comp = this.createComp(assets[i], floatingContainer, this.globalData.comp, null);\r\n      comp.initExpressions();\r\n      this.globalData.projectInterface.registerComposition(comp);\r\n    }\r\n  }\r\n};\r\n\r\n/* global createSizedArray, createElementID, PropertyFactory, ShapePropertyFactory, createNS, locationHref */\r\n\r\nfunction MaskElement(data, element, globalData) {\r\n  this.data = data;\r\n  this.element = element;\r\n  this.globalData = globalData;\r\n  this.storedData = [];\r\n  this.masksProperties = this.data.masksProperties || [];\r\n  this.maskElement = null;\r\n  var defs = this.globalData.defs;\r\n  var i;\r\n  var len = this.masksProperties ? this.masksProperties.length : 0;\r\n  this.viewData = createSizedArray(len);\r\n  this.solidPath = '';\r\n\r\n  var path;\r\n  var properties = this.masksProperties;\r\n  var count = 0;\r\n  var currentMasks = [];\r\n  var j;\r\n  var jLen;\r\n  var layerId = createElementID();\r\n  var rect;\r\n  var expansor;\r\n  var feMorph;\r\n  var x;\r\n  var maskType = 'clipPath';\r\n  var maskRef = 'clip-path';\r\n  for (i = 0; i < len; i += 1) {\r\n    if ((properties[i].mode !== 'a' && properties[i].mode !== 'n') || properties[i].inv || properties[i].o.k !== 100 || properties[i].o.x) {\r\n      maskType = 'mask';\r\n      maskRef = 'mask';\r\n    }\r\n\r\n    if ((properties[i].mode === 's' || properties[i].mode === 'i') && count === 0) {\r\n      rect = createNS('rect');\r\n      rect.setAttribute('fill', '#ffffff');\r\n      rect.setAttribute('width', this.element.comp.data.w || 0);\r\n      rect.setAttribute('height', this.element.comp.data.h || 0);\r\n      currentMasks.push(rect);\r\n    } else {\r\n      rect = null;\r\n    }\r\n\r\n    path = createNS('path');\r\n    if (properties[i].mode === 'n') {\r\n      // TODO move this to a factory or to a constructor\r\n      this.viewData[i] = {\r\n        op: PropertyFactory.getProp(this.element, properties[i].o, 0, 0.01, this.element),\r\n        prop: ShapePropertyFactory.getShapeProp(this.element, properties[i], 3),\r\n        elem: path,\r\n        lastPath: '',\r\n      };\r\n      defs.appendChild(path);\r\n    } else {\r\n      count += 1;\r\n\r\n      path.setAttribute('fill', properties[i].mode === 's' ? '#000000' : '#ffffff');\r\n      path.setAttribute('clip-rule', 'nonzero');\r\n      var filterID;\r\n\r\n      if (properties[i].x.k !== 0) {\r\n        maskType = 'mask';\r\n        maskRef = 'mask';\r\n        x = PropertyFactory.getProp(this.element, properties[i].x, 0, null, this.element);\r\n        filterID = createElementID();\r\n        expansor = createNS('filter');\r\n        expansor.setAttribute('id', filterID);\r\n        feMorph = createNS('feMorphology');\r\n        feMorph.setAttribute('operator', 'erode');\r\n        feMorph.setAttribute('in', 'SourceGraphic');\r\n        feMorph.setAttribute('radius', '0');\r\n        expansor.appendChild(feMorph);\r\n        defs.appendChild(expansor);\r\n        path.setAttribute('stroke', properties[i].mode === 's' ? '#000000' : '#ffffff');\r\n      } else {\r\n        feMorph = null;\r\n        x = null;\r\n      }\r\n\r\n      // TODO move this to a factory or to a constructor\r\n      this.storedData[i] = {\r\n        elem: path,\r\n        x: x,\r\n        expan: feMorph,\r\n        lastPath: '',\r\n        lastOperator: '',\r\n        filterId: filterID,\r\n        lastRadius: 0,\r\n      };\r\n      if (properties[i].mode === 'i') {\r\n        jLen = currentMasks.length;\r\n        var g = createNS('g');\r\n        for (j = 0; j < jLen; j += 1) {\r\n          g.appendChild(currentMasks[j]);\r\n        }\r\n        var mask = createNS('mask');\r\n        mask.setAttribute('mask-type', 'alpha');\r\n        mask.setAttribute('id', layerId + '_' + count);\r\n        mask.appendChild(path);\r\n        defs.appendChild(mask);\r\n        g.setAttribute('mask', 'url(' + locationHref + '#' + layerId + '_' + count + ')');\r\n\r\n        currentMasks.length = 0;\r\n        currentMasks.push(g);\r\n      } else {\r\n        currentMasks.push(path);\r\n      }\r\n      if (properties[i].inv && !this.solidPath) {\r\n        this.solidPath = this.createLayerSolidPath();\r\n      }\r\n      // TODO move this to a factory or to a constructor\r\n      this.viewData[i] = {\r\n        elem: path,\r\n        lastPath: '',\r\n        op: PropertyFactory.getProp(this.element, properties[i].o, 0, 0.01, this.element),\r\n        prop: ShapePropertyFactory.getShapeProp(this.element, properties[i], 3),\r\n        invRect: rect,\r\n      };\r\n      if (!this.viewData[i].prop.k) {\r\n        this.drawPath(properties[i], this.viewData[i].prop.v, this.viewData[i]);\r\n      }\r\n    }\r\n  }\r\n\r\n  this.maskElement = createNS(maskType);\r\n\r\n  len = currentMasks.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    this.maskElement.appendChild(currentMasks[i]);\r\n  }\r\n\r\n  if (count > 0) {\r\n    this.maskElement.setAttribute('id', layerId);\r\n    this.element.maskedElement.setAttribute(maskRef, 'url(' + locationHref + '#' + layerId + ')');\r\n    defs.appendChild(this.maskElement);\r\n  }\r\n  if (this.viewData.length) {\r\n    this.element.addRenderableComponent(this);\r\n  }\r\n}\r\n\r\nMaskElement.prototype.getMaskProperty = function (pos) {\r\n  return this.viewData[pos].prop;\r\n};\r\n\r\nMaskElement.prototype.renderFrame = function (isFirstFrame) {\r\n  var finalMat = this.element.finalTransform.mat;\r\n  var i;\r\n  var len = this.masksProperties.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.viewData[i].prop._mdf || isFirstFrame) {\r\n      this.drawPath(this.masksProperties[i], this.viewData[i].prop.v, this.viewData[i]);\r\n    }\r\n    if (this.viewData[i].op._mdf || isFirstFrame) {\r\n      this.viewData[i].elem.setAttribute('fill-opacity', this.viewData[i].op.v);\r\n    }\r\n    if (this.masksProperties[i].mode !== 'n') {\r\n      if (this.viewData[i].invRect && (this.element.finalTransform.mProp._mdf || isFirstFrame)) {\r\n        this.viewData[i].invRect.setAttribute('transform', finalMat.getInverseMatrix().to2dCSS());\r\n      }\r\n      if (this.storedData[i].x && (this.storedData[i].x._mdf || isFirstFrame)) {\r\n        var feMorph = this.storedData[i].expan;\r\n        if (this.storedData[i].x.v < 0) {\r\n          if (this.storedData[i].lastOperator !== 'erode') {\r\n            this.storedData[i].lastOperator = 'erode';\r\n            this.storedData[i].elem.setAttribute('filter', 'url(' + locationHref + '#' + this.storedData[i].filterId + ')');\r\n          }\r\n          feMorph.setAttribute('radius', -this.storedData[i].x.v);\r\n        } else {\r\n          if (this.storedData[i].lastOperator !== 'dilate') {\r\n            this.storedData[i].lastOperator = 'dilate';\r\n            this.storedData[i].elem.setAttribute('filter', null);\r\n          }\r\n          this.storedData[i].elem.setAttribute('stroke-width', this.storedData[i].x.v * 2);\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nMaskElement.prototype.getMaskelement = function () {\r\n  return this.maskElement;\r\n};\r\n\r\nMaskElement.prototype.createLayerSolidPath = function () {\r\n  var path = 'M0,0 ';\r\n  path += ' h' + this.globalData.compSize.w;\r\n  path += ' v' + this.globalData.compSize.h;\r\n  path += ' h-' + this.globalData.compSize.w;\r\n  path += ' v-' + this.globalData.compSize.h + ' ';\r\n  return path;\r\n};\r\n\r\nMaskElement.prototype.drawPath = function (pathData, pathNodes, viewData) {\r\n  var pathString = ' M' + pathNodes.v[0][0] + ',' + pathNodes.v[0][1];\r\n  var i;\r\n  var len;\r\n  len = pathNodes._length;\r\n  for (i = 1; i < len; i += 1) {\r\n    // pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[i][0]+','+pathNodes.i[i][1] + \" \"+pathNodes.v[i][0]+','+pathNodes.v[i][1];\r\n    pathString += ' C' + pathNodes.o[i - 1][0] + ',' + pathNodes.o[i - 1][1] + ' ' + pathNodes.i[i][0] + ',' + pathNodes.i[i][1] + ' ' + pathNodes.v[i][0] + ',' + pathNodes.v[i][1];\r\n  }\r\n  // pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[0][0]+','+pathNodes.i[0][1] + \" \"+pathNodes.v[0][0]+','+pathNodes.v[0][1];\r\n  if (pathNodes.c && len > 1) {\r\n    pathString += ' C' + pathNodes.o[i - 1][0] + ',' + pathNodes.o[i - 1][1] + ' ' + pathNodes.i[0][0] + ',' + pathNodes.i[0][1] + ' ' + pathNodes.v[0][0] + ',' + pathNodes.v[0][1];\r\n  }\r\n  // pathNodes.__renderedString = pathString;\r\n\r\n  if (viewData.lastPath !== pathString) {\r\n    var pathShapeValue = '';\r\n    if (viewData.elem) {\r\n      if (pathNodes.c) {\r\n        pathShapeValue = pathData.inv ? this.solidPath + pathString : pathString;\r\n      }\r\n      viewData.elem.setAttribute('d', pathShapeValue);\r\n    }\r\n    viewData.lastPath = pathString;\r\n  }\r\n};\r\n\r\nMaskElement.prototype.destroy = function () {\r\n  this.element = null;\r\n  this.globalData = null;\r\n  this.maskElement = null;\r\n  this.data = null;\r\n  this.masksProperties = null;\r\n};\r\n\r\n/**\r\n * @file\r\n * Handles AE's layer parenting property.\r\n *\r\n */\r\n\r\nfunction HierarchyElement() {}\r\n\r\nHierarchyElement.prototype = {\r\n  /**\r\n     * @function\r\n     * Initializes hierarchy properties\r\n     *\r\n     */\r\n  initHierarchy: function () {\r\n    // element's parent list\r\n    this.hierarchy = [];\r\n    // if element is parent of another layer _isParent will be true\r\n    this._isParent = false;\r\n    this.checkParenting();\r\n  },\r\n  /**\r\n     * @function\r\n     * Sets layer's hierarchy.\r\n     * @param {array} hierarch\r\n     * layer's parent list\r\n     *\r\n     */\r\n  setHierarchy: function (hierarchy) {\r\n    this.hierarchy = hierarchy;\r\n  },\r\n  /**\r\n     * @function\r\n     * Sets layer as parent.\r\n     *\r\n     */\r\n  setAsParent: function () {\r\n    this._isParent = true;\r\n  },\r\n  /**\r\n     * @function\r\n     * Searches layer's parenting chain\r\n     *\r\n     */\r\n  checkParenting: function () {\r\n    if (this.data.parent !== undefined) {\r\n      this.comp.buildElementParenting(this, this.data.parent, []);\r\n    }\r\n  },\r\n};\r\n\r\n/**\r\n * @file\r\n * Handles element's layer frame update.\r\n * Checks layer in point and out point\r\n *\r\n */\r\n\r\nfunction FrameElement() {}\r\n\r\nFrameElement.prototype = {\r\n  /**\r\n     * @function\r\n     * Initializes frame related properties.\r\n     *\r\n     */\r\n  initFrame: function () {\r\n    // set to true when inpoint is rendered\r\n    this._isFirstFrame = false;\r\n    // list of animated properties\r\n    this.dynamicProperties = [];\r\n    // If layer has been modified in current tick this will be true\r\n    this._mdf = false;\r\n  },\r\n  /**\r\n     * @function\r\n     * Calculates all dynamic values\r\n     *\r\n     * @param {number} num\r\n     * current frame number in Layer's time\r\n     * @param {boolean} isVisible\r\n     * if layers is currently in range\r\n     *\r\n     */\r\n  prepareProperties: function (num, isVisible) {\r\n    var i;\r\n    var len = this.dynamicProperties.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      if (isVisible || (this._isParent && this.dynamicProperties[i].propType === 'transform')) {\r\n        this.dynamicProperties[i].getValue();\r\n        if (this.dynamicProperties[i]._mdf) {\r\n          this.globalData._mdf = true;\r\n          this._mdf = true;\r\n        }\r\n      }\r\n    }\r\n  },\r\n  addDynamicProperty: function (prop) {\r\n    if (this.dynamicProperties.indexOf(prop) === -1) {\r\n      this.dynamicProperties.push(prop);\r\n    }\r\n  },\r\n};\r\n\r\n/* global TransformPropertyFactory, Matrix */\r\n\r\nfunction TransformElement() {}\r\n\r\nTransformElement.prototype = {\r\n  initTransform: function () {\r\n    this.finalTransform = {\r\n      mProp: this.data.ks ? TransformPropertyFactory.getTransformProperty(this, this.data.ks, this) : { o: 0 },\r\n      _matMdf: false,\r\n      _opMdf: false,\r\n      mat: new Matrix(),\r\n    };\r\n    if (this.data.ao) {\r\n      this.finalTransform.mProp.autoOriented = true;\r\n    }\r\n\r\n    // TODO: check TYPE 11: Guided elements\r\n    if (this.data.ty !== 11) {\r\n      // this.createElements();\r\n    }\r\n  },\r\n  renderTransform: function () {\r\n    this.finalTransform._opMdf = this.finalTransform.mProp.o._mdf || this._isFirstFrame;\r\n    this.finalTransform._matMdf = this.finalTransform.mProp._mdf || this._isFirstFrame;\r\n\r\n    if (this.hierarchy) {\r\n      var mat;\r\n      var finalMat = this.finalTransform.mat;\r\n      var i = 0;\r\n      var len = this.hierarchy.length;\r\n      // Checking if any of the transformation matrices in the hierarchy chain has changed.\r\n      if (!this.finalTransform._matMdf) {\r\n        while (i < len) {\r\n          if (this.hierarchy[i].finalTransform.mProp._mdf) {\r\n            this.finalTransform._matMdf = true;\r\n            break;\r\n          }\r\n          i += 1;\r\n        }\r\n      }\r\n\r\n      if (this.finalTransform._matMdf) {\r\n        mat = this.finalTransform.mProp.v.props;\r\n        finalMat.cloneFromProps(mat);\r\n        for (i = 0; i < len; i += 1) {\r\n          mat = this.hierarchy[i].finalTransform.mProp.v.props;\r\n          finalMat.transform(mat[0], mat[1], mat[2], mat[3], mat[4], mat[5], mat[6], mat[7], mat[8], mat[9], mat[10], mat[11], mat[12], mat[13], mat[14], mat[15]);\r\n        }\r\n      }\r\n    }\r\n  },\r\n  globalToLocal: function (pt) {\r\n    var transforms = [];\r\n    transforms.push(this.finalTransform);\r\n    var flag = true;\r\n    var comp = this.comp;\r\n    while (flag) {\r\n      if (comp.finalTransform) {\r\n        if (comp.data.hasMask) {\r\n          transforms.splice(0, 0, comp.finalTransform);\r\n        }\r\n        comp = comp.comp;\r\n      } else {\r\n        flag = false;\r\n      }\r\n    }\r\n    var i;\r\n    var len = transforms.length;\r\n    var ptNew;\r\n    for (i = 0; i < len; i += 1) {\r\n      ptNew = transforms[i].mat.applyToPointArray(0, 0, 0);\r\n      // ptNew = transforms[i].mat.applyToPointArray(pt[0],pt[1],pt[2]);\r\n      pt = [pt[0] - ptNew[0], pt[1] - ptNew[1], 0];\r\n    }\r\n    return pt;\r\n  },\r\n  mHelper: new Matrix(),\r\n};\r\n\r\nfunction RenderableElement() {\r\n\r\n}\r\n\r\nRenderableElement.prototype = {\r\n  initRenderable: function () {\r\n    // layer's visibility related to inpoint and outpoint. Rename isVisible to isInRange\r\n    this.isInRange = false;\r\n    // layer's display state\r\n    this.hidden = false;\r\n    // If layer's transparency equals 0, it can be hidden\r\n    this.isTransparent = false;\r\n    // list of animated components\r\n    this.renderableComponents = [];\r\n  },\r\n  addRenderableComponent: function (component) {\r\n    if (this.renderableComponents.indexOf(component) === -1) {\r\n      this.renderableComponents.push(component);\r\n    }\r\n  },\r\n  removeRenderableComponent: function (component) {\r\n    if (this.renderableComponents.indexOf(component) !== -1) {\r\n      this.renderableComponents.splice(this.renderableComponents.indexOf(component), 1);\r\n    }\r\n  },\r\n  prepareRenderableFrame: function (num) {\r\n    this.checkLayerLimits(num);\r\n  },\r\n  checkTransparency: function () {\r\n    if (this.finalTransform.mProp.o.v <= 0) {\r\n      if (!this.isTransparent && this.globalData.renderConfig.hideOnTransparent) {\r\n        this.isTransparent = true;\r\n        this.hide();\r\n      }\r\n    } else if (this.isTransparent) {\r\n      this.isTransparent = false;\r\n      this.show();\r\n    }\r\n  },\r\n  /**\r\n     * @function\r\n     * Initializes frame related properties.\r\n     *\r\n     * @param {number} num\r\n     * current frame number in Layer's time\r\n     *\r\n     */\r\n  checkLayerLimits: function (num) {\r\n    if (this.data.ip - this.data.st <= num && this.data.op - this.data.st > num) {\r\n      if (this.isInRange !== true) {\r\n        this.globalData._mdf = true;\r\n        this._mdf = true;\r\n        this.isInRange = true;\r\n        this.show();\r\n      }\r\n    } else if (this.isInRange !== false) {\r\n      this.globalData._mdf = true;\r\n      this.isInRange = false;\r\n      this.hide();\r\n    }\r\n  },\r\n  renderRenderable: function () {\r\n    var i;\r\n    var len = this.renderableComponents.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      this.renderableComponents[i].renderFrame(this._isFirstFrame);\r\n    }\r\n    /* this.maskManager.renderFrame(this.finalTransform.mat);\r\n        this.renderableEffectsManager.renderFrame(this._isFirstFrame); */\r\n  },\r\n  sourceRectAtTime: function () {\r\n    return {\r\n      top: 0,\r\n      left: 0,\r\n      width: 100,\r\n      height: 100,\r\n    };\r\n  },\r\n  getLayerSize: function () {\r\n    if (this.data.ty === 5) {\r\n      return { w: this.data.textData.width, h: this.data.textData.height };\r\n    }\r\n    return { w: this.data.width, h: this.data.height };\r\n  },\r\n};\r\n\r\n/* global extendPrototype, RenderableElement, createProxyFunction */\r\n\r\nfunction RenderableDOMElement() {}\r\n\r\n(function () {\r\n  var _prototype = {\r\n    initElement: function (data, globalData, comp) {\r\n      this.initFrame();\r\n      this.initBaseData(data, globalData, comp);\r\n      this.initTransform(data, globalData, comp);\r\n      this.initHierarchy();\r\n      this.initRenderable();\r\n      this.initRendererElement();\r\n      this.createContainerElements();\r\n      this.createRenderableComponents();\r\n      this.createContent();\r\n      this.hide();\r\n    },\r\n    hide: function () {\r\n      if (!this.hidden && (!this.isInRange || this.isTransparent)) {\r\n        var elem = this.baseElement || this.layerElement;\r\n        elem.style.display = 'none';\r\n        this.hidden = true;\r\n      }\r\n    },\r\n    show: function () {\r\n      if (this.isInRange && !this.isTransparent) {\r\n        if (!this.data.hd) {\r\n          var elem = this.baseElement || this.layerElement;\r\n          elem.style.display = 'block';\r\n        }\r\n        this.hidden = false;\r\n        this._isFirstFrame = true;\r\n      }\r\n    },\r\n    renderFrame: function () {\r\n      // If it is exported as hidden (data.hd === true) no need to render\r\n      // If it is not visible no need to render\r\n      if (this.data.hd || this.hidden) {\r\n        return;\r\n      }\r\n      this.renderTransform();\r\n      this.renderRenderable();\r\n      this.renderElement();\r\n      this.renderInnerContent();\r\n      if (this._isFirstFrame) {\r\n        this._isFirstFrame = false;\r\n      }\r\n    },\r\n    renderInnerContent: function () {},\r\n    prepareFrame: function (num) {\r\n      this._mdf = false;\r\n      this.prepareRenderableFrame(num);\r\n      this.prepareProperties(num, this.isInRange);\r\n      this.checkTransparency();\r\n    },\r\n    destroy: function () {\r\n      this.innerElem = null;\r\n      this.destroyBaseElement();\r\n    },\r\n  };\r\n  extendPrototype([RenderableElement, createProxyFunction(_prototype)], RenderableDOMElement);\r\n}());\r\n\r\n/* exported ProcessedElement */\r\n\r\nfunction ProcessedElement(element, position) {\r\n  this.elem = element;\r\n  this.pos = position;\r\n}\r\n\r\n/* global createNS */\r\n\r\nfunction SVGStyleData(data, level) {\r\n  this.data = data;\r\n  this.type = data.ty;\r\n  this.d = '';\r\n  this.lvl = level;\r\n  this._mdf = false;\r\n  this.closed = data.hd === true;\r\n  this.pElem = createNS('path');\r\n  this.msElem = null;\r\n}\r\n\r\nSVGStyleData.prototype.reset = function () {\r\n  this.d = '';\r\n  this._mdf = false;\r\n};\r\n\r\nfunction SVGShapeData(transformers, level, shape) {\r\n  this.caches = [];\r\n  this.styles = [];\r\n  this.transformers = transformers;\r\n  this.lStr = '';\r\n  this.sh = shape;\r\n  this.lvl = level;\r\n  // TODO find if there are some cases where _isAnimated can be false.\r\n  // For now, since shapes add up with other shapes. They have to be calculated every time.\r\n  // One way of finding out is checking if all styles associated to this shape depend only of this shape\r\n  this._isAnimated = !!shape.k;\r\n  // TODO: commenting this for now since all shapes are animated\r\n  var i = 0;\r\n  var len = transformers.length;\r\n  while (i < len) {\r\n    if (transformers[i].mProps.dynamicProperties.length) {\r\n      this._isAnimated = true;\r\n      break;\r\n    }\r\n    i += 1;\r\n  }\r\n}\r\n\r\nSVGShapeData.prototype.setAsAnimated = function () {\r\n  this._isAnimated = true;\r\n};\r\n\r\n/* exported SVGTransformData */\r\n\r\nfunction SVGTransformData(mProps, op, container) {\r\n  this.transform = {\r\n    mProps: mProps,\r\n    op: op,\r\n    container: container,\r\n  };\r\n  this.elements = [];\r\n  this._isAnimated = this.transform.mProps.dynamicProperties.length || this.transform.op.effectsSequence.length;\r\n}\r\n\r\n/* global DashProperty, PropertyFactory, extendPrototype, DynamicPropertyContainer */\r\n\r\nfunction SVGStrokeStyleData(elem, data, styleOb) {\r\n  this.initDynamicPropertyContainer(elem);\r\n  this.getValue = this.iterateDynamicProperties;\r\n  this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, this);\r\n  this.w = PropertyFactory.getProp(elem, data.w, 0, null, this);\r\n  this.d = new DashProperty(elem, data.d || {}, 'svg', this);\r\n  this.c = PropertyFactory.getProp(elem, data.c, 1, 255, this);\r\n  this.style = styleOb;\r\n  this._isAnimated = !!this._isAnimated;\r\n}\r\n\r\nextendPrototype([DynamicPropertyContainer], SVGStrokeStyleData);\r\n\r\n/* global PropertyFactory, extendPrototype, DynamicPropertyContainer */\r\n\r\nfunction SVGFillStyleData(elem, data, styleOb) {\r\n  this.initDynamicPropertyContainer(elem);\r\n  this.getValue = this.iterateDynamicProperties;\r\n  this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, this);\r\n  this.c = PropertyFactory.getProp(elem, data.c, 1, 255, this);\r\n  this.style = styleOb;\r\n}\r\n\r\nextendPrototype([DynamicPropertyContainer], SVGFillStyleData);\r\n\r\n/* global PropertyFactory, degToRads, GradientProperty, createElementID, createNS, locationHref,\r\nextendPrototype, DynamicPropertyContainer, lineCapEnum, lineJoinEnum */\r\n\r\nfunction SVGGradientFillStyleData(elem, data, styleOb) {\r\n  this.initDynamicPropertyContainer(elem);\r\n  this.getValue = this.iterateDynamicProperties;\r\n  this.initGradientData(elem, data, styleOb);\r\n}\r\n\r\nSVGGradientFillStyleData.prototype.initGradientData = function (elem, data, styleOb) {\r\n  this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, this);\r\n  this.s = PropertyFactory.getProp(elem, data.s, 1, null, this);\r\n  this.e = PropertyFactory.getProp(elem, data.e, 1, null, this);\r\n  this.h = PropertyFactory.getProp(elem, data.h || { k: 0 }, 0, 0.01, this);\r\n  this.a = PropertyFactory.getProp(elem, data.a || { k: 0 }, 0, degToRads, this);\r\n  this.g = new GradientProperty(elem, data.g, this);\r\n  this.style = styleOb;\r\n  this.stops = [];\r\n  this.setGradientData(styleOb.pElem, data);\r\n  this.setGradientOpacity(data, styleOb);\r\n  this._isAnimated = !!this._isAnimated;\r\n};\r\n\r\nSVGGradientFillStyleData.prototype.setGradientData = function (pathElement, data) {\r\n  var gradientId = createElementID();\r\n  var gfill = createNS(data.t === 1 ? 'linearGradient' : 'radialGradient');\r\n  gfill.setAttribute('id', gradientId);\r\n  gfill.setAttribute('spreadMethod', 'pad');\r\n  gfill.setAttribute('gradientUnits', 'userSpaceOnUse');\r\n  var stops = [];\r\n  var stop;\r\n  var j;\r\n  var jLen;\r\n  jLen = data.g.p * 4;\r\n  for (j = 0; j < jLen; j += 4) {\r\n    stop = createNS('stop');\r\n    gfill.appendChild(stop);\r\n    stops.push(stop);\r\n  }\r\n  pathElement.setAttribute(data.ty === 'gf' ? 'fill' : 'stroke', 'url(' + locationHref + '#' + gradientId + ')');\r\n  this.gf = gfill;\r\n  this.cst = stops;\r\n};\r\n\r\nSVGGradientFillStyleData.prototype.setGradientOpacity = function (data, styleOb) {\r\n  if (this.g._hasOpacity && !this.g._collapsable) {\r\n    var stop;\r\n    var j;\r\n    var jLen;\r\n    var mask = createNS('mask');\r\n    var maskElement = createNS('path');\r\n    mask.appendChild(maskElement);\r\n    var opacityId = createElementID();\r\n    var maskId = createElementID();\r\n    mask.setAttribute('id', maskId);\r\n    var opFill = createNS(data.t === 1 ? 'linearGradient' : 'radialGradient');\r\n    opFill.setAttribute('id', opacityId);\r\n    opFill.setAttribute('spreadMethod', 'pad');\r\n    opFill.setAttribute('gradientUnits', 'userSpaceOnUse');\r\n    jLen = data.g.k.k[0].s ? data.g.k.k[0].s.length : data.g.k.k.length;\r\n    var stops = this.stops;\r\n    for (j = data.g.p * 4; j < jLen; j += 2) {\r\n      stop = createNS('stop');\r\n      stop.setAttribute('stop-color', 'rgb(255,255,255)');\r\n      opFill.appendChild(stop);\r\n      stops.push(stop);\r\n    }\r\n    maskElement.setAttribute(data.ty === 'gf' ? 'fill' : 'stroke', 'url(' + locationHref + '#' + opacityId + ')');\r\n    if (data.ty === 'gs') {\r\n      maskElement.setAttribute('stroke-linecap', lineCapEnum[data.lc || 2]);\r\n      maskElement.setAttribute('stroke-linejoin', lineJoinEnum[data.lj || 2]);\r\n      if (data.lj === 1) {\r\n        maskElement.setAttribute('stroke-miterlimit', data.ml);\r\n      }\r\n    }\r\n    this.of = opFill;\r\n    this.ms = mask;\r\n    this.ost = stops;\r\n    this.maskId = maskId;\r\n    styleOb.msElem = maskElement;\r\n  }\r\n};\r\n\r\nextendPrototype([DynamicPropertyContainer], SVGGradientFillStyleData);\r\n\r\n/* global PropertyFactory, DashProperty, extendPrototype, SVGGradientFillStyleData, DynamicPropertyContainer */\r\n\r\nfunction SVGGradientStrokeStyleData(elem, data, styleOb) {\r\n  this.initDynamicPropertyContainer(elem);\r\n  this.getValue = this.iterateDynamicProperties;\r\n  this.w = PropertyFactory.getProp(elem, data.w, 0, null, this);\r\n  this.d = new DashProperty(elem, data.d || {}, 'svg', this);\r\n  this.initGradientData(elem, data, styleOb);\r\n  this._isAnimated = !!this._isAnimated;\r\n}\r\n\r\nextendPrototype([SVGGradientFillStyleData, DynamicPropertyContainer], SVGGradientStrokeStyleData);\r\n\r\n/* global createNS */\r\n/* exported ShapeGroupData */\r\n\r\nfunction ShapeGroupData() {\r\n  this.it = [];\r\n  this.prevViewData = [];\r\n  this.gr = createNS('g');\r\n}\r\n\r\n/* global Matrix, buildShapeString, bmFloor */\r\n/* exported SVGElementsRenderer */\r\n\r\nvar SVGElementsRenderer = (function () {\r\n  var _identityMatrix = new Matrix();\r\n  var _matrixHelper = new Matrix();\r\n\r\n  var ob = {\r\n    createRenderFunction: createRenderFunction,\r\n  };\r\n\r\n  function createRenderFunction(data) {\r\n    switch (data.ty) {\r\n      case 'fl':\r\n        return renderFill;\r\n      case 'gf':\r\n        return renderGradient;\r\n      case 'gs':\r\n        return renderGradientStroke;\r\n      case 'st':\r\n        return renderStroke;\r\n      case 'sh':\r\n      case 'el':\r\n      case 'rc':\r\n      case 'sr':\r\n        return renderPath;\r\n      case 'tr':\r\n        return renderContentTransform;\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n\r\n  function renderContentTransform(styleData, itemData, isFirstFrame) {\r\n    if (isFirstFrame || itemData.transform.op._mdf) {\r\n      itemData.transform.container.setAttribute('opacity', itemData.transform.op.v);\r\n    }\r\n    if (isFirstFrame || itemData.transform.mProps._mdf) {\r\n      itemData.transform.container.setAttribute('transform', itemData.transform.mProps.v.to2dCSS());\r\n    }\r\n  }\r\n\r\n  function renderPath(styleData, itemData, isFirstFrame) {\r\n    var j;\r\n    var jLen;\r\n    var pathStringTransformed;\r\n    var redraw;\r\n    var pathNodes;\r\n    var l;\r\n    var lLen = itemData.styles.length;\r\n    var lvl = itemData.lvl;\r\n    var paths;\r\n    var mat;\r\n    var props;\r\n    var iterations;\r\n    var k;\r\n    for (l = 0; l < lLen; l += 1) {\r\n      redraw = itemData.sh._mdf || isFirstFrame;\r\n      if (itemData.styles[l].lvl < lvl) {\r\n        mat = _matrixHelper.reset();\r\n        iterations = lvl - itemData.styles[l].lvl;\r\n        k = itemData.transformers.length - 1;\r\n        while (!redraw && iterations > 0) {\r\n          redraw = itemData.transformers[k].mProps._mdf || redraw;\r\n          iterations -= 1;\r\n          k -= 1;\r\n        }\r\n        if (redraw) {\r\n          iterations = lvl - itemData.styles[l].lvl;\r\n          k = itemData.transformers.length - 1;\r\n          while (iterations > 0) {\r\n            props = itemData.transformers[k].mProps.v.props;\r\n            mat.transform(props[0], props[1], props[2], props[3], props[4], props[5], props[6], props[7], props[8], props[9], props[10], props[11], props[12], props[13], props[14], props[15]);\r\n            iterations -= 1;\r\n            k -= 1;\r\n          }\r\n        }\r\n      } else {\r\n        mat = _identityMatrix;\r\n      }\r\n      paths = itemData.sh.paths;\r\n      jLen = paths._length;\r\n      if (redraw) {\r\n        pathStringTransformed = '';\r\n        for (j = 0; j < jLen; j += 1) {\r\n          pathNodes = paths.shapes[j];\r\n          if (pathNodes && pathNodes._length) {\r\n            pathStringTransformed += buildShapeString(pathNodes, pathNodes._length, pathNodes.c, mat);\r\n          }\r\n        }\r\n        itemData.caches[l] = pathStringTransformed;\r\n      } else {\r\n        pathStringTransformed = itemData.caches[l];\r\n      }\r\n      itemData.styles[l].d += styleData.hd === true ? '' : pathStringTransformed;\r\n      itemData.styles[l]._mdf = redraw || itemData.styles[l]._mdf;\r\n    }\r\n  }\r\n\r\n  function renderFill(styleData, itemData, isFirstFrame) {\r\n    var styleElem = itemData.style;\r\n\r\n    if (itemData.c._mdf || isFirstFrame) {\r\n      styleElem.pElem.setAttribute('fill', 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')');\r\n    }\r\n    if (itemData.o._mdf || isFirstFrame) {\r\n      styleElem.pElem.setAttribute('fill-opacity', itemData.o.v);\r\n    }\r\n  }\r\n\r\n  function renderGradientStroke(styleData, itemData, isFirstFrame) {\r\n    renderGradient(styleData, itemData, isFirstFrame);\r\n    renderStroke(styleData, itemData, isFirstFrame);\r\n  }\r\n\r\n  function renderGradient(styleData, itemData, isFirstFrame) {\r\n    var gfill = itemData.gf;\r\n    var hasOpacity = itemData.g._hasOpacity;\r\n    var pt1 = itemData.s.v;\r\n    var pt2 = itemData.e.v;\r\n\r\n    if (itemData.o._mdf || isFirstFrame) {\r\n      var attr = styleData.ty === 'gf' ? 'fill-opacity' : 'stroke-opacity';\r\n      itemData.style.pElem.setAttribute(attr, itemData.o.v);\r\n    }\r\n    if (itemData.s._mdf || isFirstFrame) {\r\n      var attr1 = styleData.t === 1 ? 'x1' : 'cx';\r\n      var attr2 = attr1 === 'x1' ? 'y1' : 'cy';\r\n      gfill.setAttribute(attr1, pt1[0]);\r\n      gfill.setAttribute(attr2, pt1[1]);\r\n      if (hasOpacity && !itemData.g._collapsable) {\r\n        itemData.of.setAttribute(attr1, pt1[0]);\r\n        itemData.of.setAttribute(attr2, pt1[1]);\r\n      }\r\n    }\r\n    var stops;\r\n    var i;\r\n    var len;\r\n    var stop;\r\n    if (itemData.g._cmdf || isFirstFrame) {\r\n      stops = itemData.cst;\r\n      var cValues = itemData.g.c;\r\n      len = stops.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        stop = stops[i];\r\n        stop.setAttribute('offset', cValues[i * 4] + '%');\r\n        stop.setAttribute('stop-color', 'rgb(' + cValues[i * 4 + 1] + ',' + cValues[i * 4 + 2] + ',' + cValues[i * 4 + 3] + ')');\r\n      }\r\n    }\r\n    if (hasOpacity && (itemData.g._omdf || isFirstFrame)) {\r\n      var oValues = itemData.g.o;\r\n      if (itemData.g._collapsable) {\r\n        stops = itemData.cst;\r\n      } else {\r\n        stops = itemData.ost;\r\n      }\r\n      len = stops.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        stop = stops[i];\r\n        if (!itemData.g._collapsable) {\r\n          stop.setAttribute('offset', oValues[i * 2] + '%');\r\n        }\r\n        stop.setAttribute('stop-opacity', oValues[i * 2 + 1]);\r\n      }\r\n    }\r\n    if (styleData.t === 1) {\r\n      if (itemData.e._mdf || isFirstFrame) {\r\n        gfill.setAttribute('x2', pt2[0]);\r\n        gfill.setAttribute('y2', pt2[1]);\r\n        if (hasOpacity && !itemData.g._collapsable) {\r\n          itemData.of.setAttribute('x2', pt2[0]);\r\n          itemData.of.setAttribute('y2', pt2[1]);\r\n        }\r\n      }\r\n    } else {\r\n      var rad;\r\n      if (itemData.s._mdf || itemData.e._mdf || isFirstFrame) {\r\n        rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\r\n        gfill.setAttribute('r', rad);\r\n        if (hasOpacity && !itemData.g._collapsable) {\r\n          itemData.of.setAttribute('r', rad);\r\n        }\r\n      }\r\n      if (itemData.e._mdf || itemData.h._mdf || itemData.a._mdf || isFirstFrame) {\r\n        if (!rad) {\r\n          rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\r\n        }\r\n        var ang = Math.atan2(pt2[1] - pt1[1], pt2[0] - pt1[0]);\r\n\r\n        var percent = itemData.h.v;\r\n        if (percent >= 1) {\r\n          percent = 0.99;\r\n        } else if (percent <= -1) {\r\n          percent = -0.99;\r\n        }\r\n        var dist = rad * percent;\r\n        var x = Math.cos(ang + itemData.a.v) * dist + pt1[0];\r\n        var y = Math.sin(ang + itemData.a.v) * dist + pt1[1];\r\n        gfill.setAttribute('fx', x);\r\n        gfill.setAttribute('fy', y);\r\n        if (hasOpacity && !itemData.g._collapsable) {\r\n          itemData.of.setAttribute('fx', x);\r\n          itemData.of.setAttribute('fy', y);\r\n        }\r\n      }\r\n      // gfill.setAttribute('fy','200');\r\n    }\r\n  }\r\n\r\n  function renderStroke(styleData, itemData, isFirstFrame) {\r\n    var styleElem = itemData.style;\r\n    var d = itemData.d;\r\n    if (d && (d._mdf || isFirstFrame) && d.dashStr) {\r\n      styleElem.pElem.setAttribute('stroke-dasharray', d.dashStr);\r\n      styleElem.pElem.setAttribute('stroke-dashoffset', d.dashoffset[0]);\r\n    }\r\n    if (itemData.c && (itemData.c._mdf || isFirstFrame)) {\r\n      styleElem.pElem.setAttribute('stroke', 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')');\r\n    }\r\n    if (itemData.o._mdf || isFirstFrame) {\r\n      styleElem.pElem.setAttribute('stroke-opacity', itemData.o.v);\r\n    }\r\n    if (itemData.w._mdf || isFirstFrame) {\r\n      styleElem.pElem.setAttribute('stroke-width', itemData.w.v);\r\n      if (styleElem.msElem) {\r\n        styleElem.msElem.setAttribute('stroke-width', itemData.w.v);\r\n      }\r\n    }\r\n  }\r\n\r\n  return ob;\r\n}());\r\n\r\n/* global Matrix */\r\n\r\nfunction ShapeTransformManager() {\r\n  this.sequences = {};\r\n  this.sequenceList = [];\r\n  this.transform_key_count = 0;\r\n}\r\n\r\nShapeTransformManager.prototype = {\r\n  addTransformSequence: function (transforms) {\r\n    var i;\r\n    var len = transforms.length;\r\n    var key = '_';\r\n    for (i = 0; i < len; i += 1) {\r\n      key += transforms[i].transform.key + '_';\r\n    }\r\n    var sequence = this.sequences[key];\r\n    if (!sequence) {\r\n      sequence = {\r\n        transforms: [].concat(transforms),\r\n        finalTransform: new Matrix(),\r\n        _mdf: false,\r\n      };\r\n      this.sequences[key] = sequence;\r\n      this.sequenceList.push(sequence);\r\n    }\r\n    return sequence;\r\n  },\r\n  processSequence: function (sequence, isFirstFrame) {\r\n    var i = 0;\r\n    var len = sequence.transforms.length;\r\n    var _mdf = isFirstFrame;\r\n    while (i < len && !isFirstFrame) {\r\n      if (sequence.transforms[i].transform.mProps._mdf) {\r\n        _mdf = true;\r\n        break;\r\n      }\r\n      i += 1;\r\n    }\r\n    if (_mdf) {\r\n      var props;\r\n      sequence.finalTransform.reset();\r\n      for (i = len - 1; i >= 0; i -= 1) {\r\n        props = sequence.transforms[i].transform.mProps.v.props;\r\n        sequence.finalTransform.transform(props[0], props[1], props[2], props[3], props[4], props[5], props[6], props[7], props[8], props[9], props[10], props[11], props[12], props[13], props[14], props[15]);\r\n      }\r\n    }\r\n    sequence._mdf = _mdf;\r\n  },\r\n  processSequences: function (isFirstFrame) {\r\n    var i;\r\n    var len = this.sequenceList.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      this.processSequence(this.sequenceList[i], isFirstFrame);\r\n    }\r\n  },\r\n  getNewKey: function () {\r\n    this.transform_key_count += 1;\r\n    return '_' + this.transform_key_count;\r\n  },\r\n};\r\n\r\n/* global ShapePropertyFactory, SVGShapeData */\r\n\r\nfunction CVShapeData(element, data, styles, transformsManager) {\r\n  this.styledShapes = [];\r\n  this.tr = [0, 0, 0, 0, 0, 0];\r\n  var ty = 4;\r\n  if (data.ty === 'rc') {\r\n    ty = 5;\r\n  } else if (data.ty === 'el') {\r\n    ty = 6;\r\n  } else if (data.ty === 'sr') {\r\n    ty = 7;\r\n  }\r\n  this.sh = ShapePropertyFactory.getShapeProp(element, data, ty, element);\r\n  var i;\r\n  var len = styles.length;\r\n  var styledShape;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (!styles[i].closed) {\r\n      styledShape = {\r\n        transforms: transformsManager.addTransformSequence(styles[i].transforms),\r\n        trNodes: [],\r\n      };\r\n      this.styledShapes.push(styledShape);\r\n      styles[i].elements.push(styledShape);\r\n    }\r\n  }\r\n}\r\n\r\nCVShapeData.prototype.setAsAnimated = SVGShapeData.prototype.setAsAnimated;\r\n\r\n/* global LayerExpressionInterface, EffectsExpressionInterface, CompExpressionInterface, ShapeExpressionInterface,\r\nTextExpressionInterface, getBlendMode,createElementID, EffectsManager */\r\n\r\nfunction BaseElement() {\r\n}\r\n\r\nBaseElement.prototype = {\r\n  checkMasks: function () {\r\n    if (!this.data.hasMask) {\r\n      return false;\r\n    }\r\n    var i = 0;\r\n    var len = this.data.masksProperties.length;\r\n    while (i < len) {\r\n      if ((this.data.masksProperties[i].mode !== 'n' && this.data.masksProperties[i].cl !== false)) {\r\n        return true;\r\n      }\r\n      i += 1;\r\n    }\r\n    return false;\r\n  },\r\n  initExpressions: function () {\r\n    this.layerInterface = LayerExpressionInterface(this);\r\n    if (this.data.hasMask && this.maskManager) {\r\n      this.layerInterface.registerMaskInterface(this.maskManager);\r\n    }\r\n    var effectsInterface = EffectsExpressionInterface.createEffectsInterface(this, this.layerInterface);\r\n    this.layerInterface.registerEffectsInterface(effectsInterface);\r\n\r\n    if (this.data.ty === 0 || this.data.xt) {\r\n      this.compInterface = CompExpressionInterface(this);\r\n    } else if (this.data.ty === 4) {\r\n      this.layerInterface.shapeInterface = ShapeExpressionInterface(this.shapesData, this.itemsData, this.layerInterface);\r\n      this.layerInterface.content = this.layerInterface.shapeInterface;\r\n    } else if (this.data.ty === 5) {\r\n      this.layerInterface.textInterface = TextExpressionInterface(this);\r\n      this.layerInterface.text = this.layerInterface.textInterface;\r\n    }\r\n  },\r\n  setBlendMode: function () {\r\n    var blendModeValue = getBlendMode(this.data.bm);\r\n    var elem = this.baseElement || this.layerElement;\r\n\r\n    elem.style['mix-blend-mode'] = blendModeValue;\r\n  },\r\n  initBaseData: function (data, globalData, comp) {\r\n    this.globalData = globalData;\r\n    this.comp = comp;\r\n    this.data = data;\r\n    this.layerId = createElementID();\r\n\r\n    // Stretch factor for old animations missing this property.\r\n    if (!this.data.sr) {\r\n      this.data.sr = 1;\r\n    }\r\n    // effects manager\r\n    this.effectsManager = new EffectsManager(this.data, this, this.dynamicProperties);\r\n  },\r\n  getType: function () {\r\n    return this.type;\r\n  },\r\n  sourceRectAtTime: function () {},\r\n};\r\n\r\n/* global extendPrototype, BaseElement, TransformElement, HierarchyElement, FrameElement */\r\n\r\nfunction NullElement(data, globalData, comp) {\r\n  this.initFrame();\r\n  this.initBaseData(data, globalData, comp);\r\n  this.initFrame();\r\n  this.initTransform(data, globalData, comp);\r\n  this.initHierarchy();\r\n}\r\n\r\nNullElement.prototype.prepareFrame = function (num) {\r\n  this.prepareProperties(num, true);\r\n};\r\n\r\nNullElement.prototype.renderFrame = function () {\r\n};\r\n\r\nNullElement.prototype.getBaseElement = function () {\r\n  return null;\r\n};\r\n\r\nNullElement.prototype.destroy = function () {\r\n};\r\n\r\nNullElement.prototype.sourceRectAtTime = function () {\r\n};\r\n\r\nNullElement.prototype.hide = function () {\r\n};\r\n\r\nextendPrototype([BaseElement, TransformElement, HierarchyElement, FrameElement], NullElement);\r\n\r\n/* global filtersFactory, featureSupport, filtersFactory, createElementID, createNS, MaskElement, SVGEffects, locationHref */\r\n\r\nfunction SVGBaseElement() {\r\n}\r\n\r\nSVGBaseElement.prototype = {\r\n  initRendererElement: function () {\r\n    this.layerElement = createNS('g');\r\n  },\r\n  createContainerElements: function () {\r\n    this.matteElement = createNS('g');\r\n    this.transformedElement = this.layerElement;\r\n    this.maskedElement = this.layerElement;\r\n    this._sizeChanged = false;\r\n    var layerElementParent = null;\r\n    // If this layer acts as a mask for the following layer\r\n    var filId;\r\n    var fil;\r\n    var gg;\r\n    if (this.data.td) {\r\n      if (this.data.td == 3 || this.data.td == 1) { // eslint-disable-line eqeqeq\r\n        var masker = createNS('mask');\r\n        masker.setAttribute('id', this.layerId);\r\n        masker.setAttribute('mask-type', this.data.td == 3 ? 'luminance' : 'alpha'); // eslint-disable-line eqeqeq\r\n        masker.appendChild(this.layerElement);\r\n        layerElementParent = masker;\r\n        this.globalData.defs.appendChild(masker);\r\n        // This is only for IE and Edge when mask if of type alpha\r\n        if (!featureSupport.maskType && this.data.td == 1) { // eslint-disable-line eqeqeq\r\n          masker.setAttribute('mask-type', 'luminance');\r\n          filId = createElementID();\r\n          fil = filtersFactory.createFilter(filId);\r\n          this.globalData.defs.appendChild(fil);\r\n          fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\r\n          gg = createNS('g');\r\n          gg.appendChild(this.layerElement);\r\n          layerElementParent = gg;\r\n          masker.appendChild(gg);\r\n          gg.setAttribute('filter', 'url(' + locationHref + '#' + filId + ')');\r\n        }\r\n      } else if (this.data.td == 2) { // eslint-disable-line eqeqeq\r\n        var maskGroup = createNS('mask');\r\n        maskGroup.setAttribute('id', this.layerId);\r\n        maskGroup.setAttribute('mask-type', 'alpha');\r\n        var maskGrouper = createNS('g');\r\n        maskGroup.appendChild(maskGrouper);\r\n        filId = createElementID();\r\n        fil = filtersFactory.createFilter(filId);\r\n        /// /\r\n\r\n        // This solution doesn't work on Android when meta tag with viewport attribute is set\r\n        /* var feColorMatrix = createNS('feColorMatrix');\r\n                feColorMatrix.setAttribute('type', 'matrix');\r\n                feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\r\n                feColorMatrix.setAttribute('values','1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 -1 1');\r\n                fil.appendChild(feColorMatrix); */\r\n        /// /\r\n        var feCTr = createNS('feComponentTransfer');\r\n        feCTr.setAttribute('in', 'SourceGraphic');\r\n        fil.appendChild(feCTr);\r\n        var feFunc = createNS('feFuncA');\r\n        feFunc.setAttribute('type', 'table');\r\n        feFunc.setAttribute('tableValues', '1.0 0.0');\r\n        feCTr.appendChild(feFunc);\r\n        /// /\r\n        this.globalData.defs.appendChild(fil);\r\n        var alphaRect = createNS('rect');\r\n        alphaRect.setAttribute('width', this.comp.data.w);\r\n        alphaRect.setAttribute('height', this.comp.data.h);\r\n        alphaRect.setAttribute('x', '0');\r\n        alphaRect.setAttribute('y', '0');\r\n        alphaRect.setAttribute('fill', '#ffffff');\r\n        alphaRect.setAttribute('opacity', '0');\r\n        maskGrouper.setAttribute('filter', 'url(' + locationHref + '#' + filId + ')');\r\n        maskGrouper.appendChild(alphaRect);\r\n        maskGrouper.appendChild(this.layerElement);\r\n        layerElementParent = maskGrouper;\r\n        if (!featureSupport.maskType) {\r\n          maskGroup.setAttribute('mask-type', 'luminance');\r\n          fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\r\n          gg = createNS('g');\r\n          maskGrouper.appendChild(alphaRect);\r\n          gg.appendChild(this.layerElement);\r\n          layerElementParent = gg;\r\n          maskGrouper.appendChild(gg);\r\n        }\r\n        this.globalData.defs.appendChild(maskGroup);\r\n      }\r\n    } else if (this.data.tt) {\r\n      this.matteElement.appendChild(this.layerElement);\r\n      layerElementParent = this.matteElement;\r\n      this.baseElement = this.matteElement;\r\n    } else {\r\n      this.baseElement = this.layerElement;\r\n    }\r\n    if (this.data.ln) {\r\n      this.layerElement.setAttribute('id', this.data.ln);\r\n    }\r\n    if (this.data.cl) {\r\n      this.layerElement.setAttribute('class', this.data.cl);\r\n    }\r\n    // Clipping compositions to hide content that exceeds boundaries. If collapsed transformations is on, component should not be clipped\r\n    if (this.data.ty === 0 && !this.data.hd) {\r\n      var cp = createNS('clipPath');\r\n      var pt = createNS('path');\r\n      pt.setAttribute('d', 'M0,0 L' + this.data.w + ',0 L' + this.data.w + ',' + this.data.h + ' L0,' + this.data.h + 'z');\r\n      var clipId = createElementID();\r\n      cp.setAttribute('id', clipId);\r\n      cp.appendChild(pt);\r\n      this.globalData.defs.appendChild(cp);\r\n\r\n      if (this.checkMasks()) {\r\n        var cpGroup = createNS('g');\r\n        cpGroup.setAttribute('clip-path', 'url(' + locationHref + '#' + clipId + ')');\r\n        cpGroup.appendChild(this.layerElement);\r\n        this.transformedElement = cpGroup;\r\n        if (layerElementParent) {\r\n          layerElementParent.appendChild(this.transformedElement);\r\n        } else {\r\n          this.baseElement = this.transformedElement;\r\n        }\r\n      } else {\r\n        this.layerElement.setAttribute('clip-path', 'url(' + locationHref + '#' + clipId + ')');\r\n      }\r\n    }\r\n    if (this.data.bm !== 0) {\r\n      this.setBlendMode();\r\n    }\r\n  },\r\n  renderElement: function () {\r\n    if (this.finalTransform._matMdf) {\r\n      this.transformedElement.setAttribute('transform', this.finalTransform.mat.to2dCSS());\r\n    }\r\n    if (this.finalTransform._opMdf) {\r\n      this.transformedElement.setAttribute('opacity', this.finalTransform.mProp.o.v);\r\n    }\r\n  },\r\n  destroyBaseElement: function () {\r\n    this.layerElement = null;\r\n    this.matteElement = null;\r\n    this.maskManager.destroy();\r\n  },\r\n  getBaseElement: function () {\r\n    if (this.data.hd) {\r\n      return null;\r\n    }\r\n    return this.baseElement;\r\n  },\r\n  createRenderableComponents: function () {\r\n    this.maskManager = new MaskElement(this.data, this, this.globalData);\r\n    this.renderableEffectsManager = new SVGEffects(this);\r\n  },\r\n  setMatte: function (id) {\r\n    if (!this.matteElement) {\r\n      return;\r\n    }\r\n    this.matteElement.setAttribute('mask', 'url(' + locationHref + '#' + id + ')');\r\n  },\r\n};\r\n\r\n/* global ProcessedElement */\r\n\r\nfunction IShapeElement() {\r\n}\r\n\r\nIShapeElement.prototype = {\r\n  addShapeToModifiers: function (data) {\r\n    var i;\r\n    var len = this.shapeModifiers.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      this.shapeModifiers[i].addShape(data);\r\n    }\r\n  },\r\n  isShapeInAnimatedModifiers: function (data) {\r\n    var i = 0;\r\n    var len = this.shapeModifiers.length;\r\n    while (i < len) {\r\n      if (this.shapeModifiers[i].isAnimatedWithShape(data)) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  },\r\n  renderModifiers: function () {\r\n    if (!this.shapeModifiers.length) {\r\n      return;\r\n    }\r\n    var i;\r\n    var len = this.shapes.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      this.shapes[i].sh.reset();\r\n    }\r\n\r\n    len = this.shapeModifiers.length;\r\n    var shouldBreakProcess;\r\n    for (i = len - 1; i >= 0; i -= 1) {\r\n      shouldBreakProcess = this.shapeModifiers[i].processShapes(this._isFirstFrame);\r\n      // workaround to fix cases where a repeater resets the shape so the following processes get called twice\r\n      // TODO: find a better solution for this\r\n      if (shouldBreakProcess) {\r\n        break;\r\n      }\r\n    }\r\n  },\r\n\r\n  searchProcessedElement: function (elem) {\r\n    var elements = this.processedElements;\r\n    var i = 0;\r\n    var len = elements.length;\r\n    while (i < len) {\r\n      if (elements[i].elem === elem) {\r\n        return elements[i].pos;\r\n      }\r\n      i += 1;\r\n    }\r\n    return 0;\r\n  },\r\n  addProcessedElement: function (elem, pos) {\r\n    var elements = this.processedElements;\r\n    var i = elements.length;\r\n    while (i) {\r\n      i -= 1;\r\n      if (elements[i].elem === elem) {\r\n        elements[i].pos = pos;\r\n        return;\r\n      }\r\n    }\r\n    elements.push(new ProcessedElement(elem, pos));\r\n  },\r\n  prepareFrame: function (num) {\r\n    this.prepareRenderableFrame(num);\r\n    this.prepareProperties(num, this.isInRange);\r\n  },\r\n};\r\n\r\n/* global TextProperty, TextAnimatorProperty, buildShapeString, LetterProps */\r\n\r\nfunction ITextElement() {\r\n}\r\n\r\nITextElement.prototype.initElement = function (data, globalData, comp) {\r\n  this.lettersChangedFlag = true;\r\n  this.initFrame();\r\n  this.initBaseData(data, globalData, comp);\r\n  this.textProperty = new TextProperty(this, data.t, this.dynamicProperties);\r\n  this.textAnimator = new TextAnimatorProperty(data.t, this.renderType, this);\r\n  this.initTransform(data, globalData, comp);\r\n  this.initHierarchy();\r\n  this.initRenderable();\r\n  this.initRendererElement();\r\n  this.createContainerElements();\r\n  this.createRenderableComponents();\r\n  this.createContent();\r\n  this.hide();\r\n  this.textAnimator.searchProperties(this.dynamicProperties);\r\n};\r\n\r\nITextElement.prototype.prepareFrame = function (num) {\r\n  this._mdf = false;\r\n  this.prepareRenderableFrame(num);\r\n  this.prepareProperties(num, this.isInRange);\r\n  if (this.textProperty._mdf || this.textProperty._isFirstFrame) {\r\n    this.buildNewText();\r\n    this.textProperty._isFirstFrame = false;\r\n    this.textProperty._mdf = false;\r\n  }\r\n};\r\n\r\nITextElement.prototype.createPathShape = function (matrixHelper, shapes) {\r\n  var j;\r\n  var jLen = shapes.length;\r\n  var pathNodes;\r\n  var shapeStr = '';\r\n  for (j = 0; j < jLen; j += 1) {\r\n    pathNodes = shapes[j].ks.k;\r\n    shapeStr += buildShapeString(pathNodes, pathNodes.i.length, true, matrixHelper);\r\n  }\r\n  return shapeStr;\r\n};\r\n\r\nITextElement.prototype.updateDocumentData = function (newData, index) {\r\n  this.textProperty.updateDocumentData(newData, index);\r\n};\r\n\r\nITextElement.prototype.canResizeFont = function (_canResize) {\r\n  this.textProperty.canResizeFont(_canResize);\r\n};\r\n\r\nITextElement.prototype.setMinimumFontSize = function (_fontSize) {\r\n  this.textProperty.setMinimumFontSize(_fontSize);\r\n};\r\n\r\nITextElement.prototype.applyTextPropertiesToMatrix = function (documentData, matrixHelper, lineNumber, xPos, yPos) {\r\n  if (documentData.ps) {\r\n    matrixHelper.translate(documentData.ps[0], documentData.ps[1] + documentData.ascent, 0);\r\n  }\r\n  matrixHelper.translate(0, -documentData.ls, 0);\r\n  switch (documentData.j) {\r\n    case 1:\r\n      matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber]), 0, 0);\r\n      break;\r\n    case 2:\r\n      matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber]) / 2, 0, 0);\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n  matrixHelper.translate(xPos, yPos, 0);\r\n};\r\n\r\nITextElement.prototype.buildColor = function (colorData) {\r\n  return 'rgb(' + Math.round(colorData[0] * 255) + ',' + Math.round(colorData[1] * 255) + ',' + Math.round(colorData[2] * 255) + ')';\r\n};\r\n\r\nITextElement.prototype.emptyProp = new LetterProps();\r\n\r\nITextElement.prototype.destroy = function () {\r\n\r\n};\r\n\r\n/* global extendPrototype, BaseElement, TransformElement, HierarchyElement, FrameElement, RenderableDOMElement */\r\n\r\nfunction ICompElement() {}\r\n\r\nextendPrototype([BaseElement, TransformElement, HierarchyElement, FrameElement, RenderableDOMElement], ICompElement);\r\n\r\nICompElement.prototype.initElement = function (data, globalData, comp) {\r\n  this.initFrame();\r\n  this.initBaseData(data, globalData, comp);\r\n  this.initTransform(data, globalData, comp);\r\n  this.initRenderable();\r\n  this.initHierarchy();\r\n  this.initRendererElement();\r\n  this.createContainerElements();\r\n  this.createRenderableComponents();\r\n  if (this.data.xt || !globalData.progressiveLoad) {\r\n    this.buildAllItems();\r\n  }\r\n  this.hide();\r\n};\r\n\r\n/* ICompElement.prototype.hide = function(){\r\n    if(!this.hidden){\r\n        this.hideElement();\r\n        var i,len = this.elements.length;\r\n        for( i = 0; i < len; i+=1 ){\r\n            if(this.elements[i]){\r\n                this.elements[i].hide();\r\n            }\r\n        }\r\n    }\r\n}; */\r\n\r\nICompElement.prototype.prepareFrame = function (num) {\r\n  this._mdf = false;\r\n  this.prepareRenderableFrame(num);\r\n  this.prepareProperties(num, this.isInRange);\r\n  if (!this.isInRange && !this.data.xt) {\r\n    return;\r\n  }\r\n\r\n  if (!this.tm._placeholder) {\r\n    var timeRemapped = this.tm.v;\r\n    if (timeRemapped === this.data.op) {\r\n      timeRemapped = this.data.op - 1;\r\n    }\r\n    this.renderedFrame = timeRemapped;\r\n  } else {\r\n    this.renderedFrame = num / this.data.sr;\r\n  }\r\n  var i;\r\n  var len = this.elements.length;\r\n  if (!this.completeLayers) {\r\n    this.checkLayers(this.renderedFrame);\r\n  }\r\n  // This iteration needs to be backwards because of how expressions connect between each other\r\n  for (i = len - 1; i >= 0; i -= 1) {\r\n    if (this.completeLayers || this.elements[i]) {\r\n      this.elements[i].prepareFrame(this.renderedFrame - this.layers[i].st);\r\n      if (this.elements[i]._mdf) {\r\n        this._mdf = true;\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nICompElement.prototype.renderInnerContent = function () {\r\n  var i;\r\n  var len = this.layers.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.completeLayers || this.elements[i]) {\r\n      this.elements[i].renderFrame();\r\n    }\r\n  }\r\n};\r\n\r\nICompElement.prototype.setElements = function (elems) {\r\n  this.elements = elems;\r\n};\r\n\r\nICompElement.prototype.getElements = function () {\r\n  return this.elements;\r\n};\r\n\r\nICompElement.prototype.destroyElements = function () {\r\n  var i;\r\n  var len = this.layers.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.elements[i]) {\r\n      this.elements[i].destroy();\r\n    }\r\n  }\r\n};\r\n\r\nICompElement.prototype.destroy = function () {\r\n  this.destroyElements();\r\n  this.destroyBaseElement();\r\n};\r\n\r\n/* global extendPrototype, BaseElement, TransformElement, SVGBaseElement, HierarchyElement, FrameElement, RenderableDOMElement, createNS */\r\n\r\nfunction IImageElement(data, globalData, comp) {\r\n  this.assetData = globalData.getAssetData(data.refId);\r\n  this.initElement(data, globalData, comp);\r\n  this.sourceRect = {\r\n    top: 0, left: 0, width: this.assetData.w, height: this.assetData.h,\r\n  };\r\n}\r\n\r\nextendPrototype([BaseElement, TransformElement, SVGBaseElement, HierarchyElement, FrameElement, RenderableDOMElement], IImageElement);\r\n\r\nIImageElement.prototype.createContent = function () {\r\n  var assetPath = this.globalData.getAssetsPath(this.assetData);\r\n\r\n  this.innerElem = createNS('image');\r\n  this.innerElem.setAttribute('width', this.assetData.w + 'px');\r\n  this.innerElem.setAttribute('height', this.assetData.h + 'px');\r\n  this.innerElem.setAttribute('preserveAspectRatio', this.assetData.pr || this.globalData.renderConfig.imagePreserveAspectRatio);\r\n  this.innerElem.setAttributeNS('http://www.w3.org/1999/xlink', 'href', assetPath);\r\n\r\n  this.layerElement.appendChild(this.innerElem);\r\n};\r\n\r\nIImageElement.prototype.sourceRectAtTime = function () {\r\n  return this.sourceRect;\r\n};\r\n\r\n/* global extendPrototype, IImageElement, createNS */\r\n\r\nfunction ISolidElement(data, globalData, comp) {\r\n  this.initElement(data, globalData, comp);\r\n}\r\nextendPrototype([IImageElement], ISolidElement);\r\n\r\nISolidElement.prototype.createContent = function () {\r\n  var rect = createNS('rect');\r\n  /// /rect.style.width = this.data.sw;\r\n  /// /rect.style.height = this.data.sh;\r\n  /// /rect.style.fill = this.data.sc;\r\n  rect.setAttribute('width', this.data.sw);\r\n  rect.setAttribute('height', this.data.sh);\r\n  rect.setAttribute('fill', this.data.sc);\r\n  this.layerElement.appendChild(rect);\r\n};\r\n\r\n/* global PropertyFactory, extendPrototype, RenderableElement, BaseElement, FrameElement */\r\n\r\nfunction AudioElement(data, globalData, comp) {\r\n  this.initFrame();\r\n  this.initRenderable();\r\n  this.assetData = globalData.getAssetData(data.refId);\r\n  this.initBaseData(data, globalData, comp);\r\n  this._isPlaying = false;\r\n  this._canPlay = false;\r\n  var assetPath = this.globalData.getAssetsPath(this.assetData);\r\n  this.audio = this.globalData.audioController.createAudio(assetPath);\r\n  this._currentTime = 0;\r\n  this.globalData.audioController.addAudio(this);\r\n  this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : { _placeholder: true };\r\n}\r\n\r\nAudioElement.prototype.prepareFrame = function (num) {\r\n  this.prepareRenderableFrame(num, true);\r\n  this.prepareProperties(num, true);\r\n  if (!this.tm._placeholder) {\r\n    var timeRemapped = this.tm.v;\r\n    this._currentTime = timeRemapped;\r\n  } else {\r\n    this._currentTime = num / this.data.sr;\r\n  }\r\n};\r\n\r\nextendPrototype([RenderableElement, BaseElement, FrameElement], AudioElement);\r\n\r\nAudioElement.prototype.renderFrame = function () {\r\n  if (this.isInRange && this._canPlay) {\r\n    if (!this._isPlaying) {\r\n      this.audio.play();\r\n      this.audio.seek(this._currentTime / this.globalData.frameRate);\r\n      this._isPlaying = true;\r\n    } else if (!this.audio.playing()\r\n      || Math.abs(this._currentTime / this.globalData.frameRate - this.audio.seek()) > 0.1\r\n    ) {\r\n      this.audio.seek(this._currentTime / this.globalData.frameRate);\r\n    }\r\n  }\r\n};\r\n\r\nAudioElement.prototype.show = function () {\r\n  // this.audio.play()\r\n};\r\n\r\nAudioElement.prototype.hide = function () {\r\n  this.audio.pause();\r\n  this._isPlaying = false;\r\n};\r\n\r\nAudioElement.prototype.pause = function () {\r\n  this.audio.pause();\r\n  this._isPlaying = false;\r\n  this._canPlay = false;\r\n};\r\n\r\nAudioElement.prototype.resume = function () {\r\n  this._canPlay = true;\r\n};\r\n\r\nAudioElement.prototype.setRate = function (rateValue) {\r\n  this.audio.rate(rateValue);\r\n};\r\n\r\nAudioElement.prototype.volume = function (volumeValue) {\r\n  this.audio.volume(volumeValue);\r\n};\r\n\r\nAudioElement.prototype.getBaseElement = function () {\r\n  return null;\r\n};\r\n\r\nAudioElement.prototype.destroy = function () {\r\n};\r\n\r\nAudioElement.prototype.sourceRectAtTime = function () {\r\n};\r\n\r\nAudioElement.prototype.initExpressions = function () {\r\n};\r\n\r\n/* global extendPrototype, RenderableElement, BaseElement, FrameElement, FootageInterface */\r\n\r\nfunction FootageElement(data, globalData, comp) {\r\n  this.initFrame();\r\n  this.initRenderable();\r\n  this.assetData = globalData.getAssetData(data.refId);\r\n  this.footageData = globalData.imageLoader.getAsset(this.assetData);\r\n  this.initBaseData(data, globalData, comp);\r\n}\r\n\r\nFootageElement.prototype.prepareFrame = function () {\r\n};\r\n\r\nextendPrototype([RenderableElement, BaseElement, FrameElement], FootageElement);\r\n\r\nFootageElement.prototype.getBaseElement = function () {\r\n  return null;\r\n};\r\n\r\nFootageElement.prototype.renderFrame = function () {\r\n};\r\n\r\nFootageElement.prototype.destroy = function () {\r\n};\r\n\r\nFootageElement.prototype.initExpressions = function () {\r\n  this.layerInterface = FootageInterface(this);\r\n};\r\n\r\nFootageElement.prototype.getFootageData = function () {\r\n  return this.footageData;\r\n};\r\n\r\n/* global createSizedArray, PropertyFactory, extendPrototype, SVGRenderer, ICompElement, SVGBaseElement */\r\n\r\nfunction SVGCompElement(data, globalData, comp) {\r\n  this.layers = data.layers;\r\n  this.supports3d = true;\r\n  this.completeLayers = false;\r\n  this.pendingElements = [];\r\n  this.elements = this.layers ? createSizedArray(this.layers.length) : [];\r\n  // this.layerElement = createNS('g');\r\n  this.initElement(data, globalData, comp);\r\n  this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : { _placeholder: true };\r\n}\r\n\r\nextendPrototype([SVGRenderer, ICompElement, SVGBaseElement], SVGCompElement);\r\n\r\n/* global extendPrototype, BaseElement, TransformElement, SVGBaseElement, HierarchyElement, FrameElement,\r\nRenderableDOMElement, ITextElement, createSizedArray, createNS */\r\n\r\nfunction SVGTextLottieElement(data, globalData, comp) {\r\n  this.textSpans = [];\r\n  this.renderType = 'svg';\r\n  this.initElement(data, globalData, comp);\r\n}\r\n\r\nextendPrototype([BaseElement, TransformElement, SVGBaseElement, HierarchyElement, FrameElement, RenderableDOMElement, ITextElement], SVGTextLottieElement);\r\n\r\nSVGTextLottieElement.prototype.createContent = function () {\r\n  if (this.data.singleShape && !this.globalData.fontManager.chars) {\r\n    this.textContainer = createNS('text');\r\n  }\r\n};\r\n\r\nSVGTextLottieElement.prototype.buildTextContents = function (textArray) {\r\n  var i = 0;\r\n  var len = textArray.length;\r\n  var textContents = [];\r\n  var currentTextContent = '';\r\n  while (i < len) {\r\n    if (textArray[i] === String.fromCharCode(13) || textArray[i] === String.fromCharCode(3)) {\r\n      textContents.push(currentTextContent);\r\n      currentTextContent = '';\r\n    } else {\r\n      currentTextContent += textArray[i];\r\n    }\r\n    i += 1;\r\n  }\r\n  textContents.push(currentTextContent);\r\n  return textContents;\r\n};\r\n\r\nSVGTextLottieElement.prototype.buildNewText = function () {\r\n  var i;\r\n  var len;\r\n\r\n  var documentData = this.textProperty.currentData;\r\n  this.renderedLetters = createSizedArray(documentData ? documentData.l.length : 0);\r\n  if (documentData.fc) {\r\n    this.layerElement.setAttribute('fill', this.buildColor(documentData.fc));\r\n  } else {\r\n    this.layerElement.setAttribute('fill', 'rgba(0,0,0,0)');\r\n  }\r\n  if (documentData.sc) {\r\n    this.layerElement.setAttribute('stroke', this.buildColor(documentData.sc));\r\n    this.layerElement.setAttribute('stroke-width', documentData.sw);\r\n  }\r\n  this.layerElement.setAttribute('font-size', documentData.finalSize);\r\n  var fontData = this.globalData.fontManager.getFontByName(documentData.f);\r\n  if (fontData.fClass) {\r\n    this.layerElement.setAttribute('class', fontData.fClass);\r\n  } else {\r\n    this.layerElement.setAttribute('font-family', fontData.fFamily);\r\n    var fWeight = documentData.fWeight;\r\n    var fStyle = documentData.fStyle;\r\n    this.layerElement.setAttribute('font-style', fStyle);\r\n    this.layerElement.setAttribute('font-weight', fWeight);\r\n  }\r\n  this.layerElement.setAttribute('aria-label', documentData.t);\r\n\r\n  var letters = documentData.l || [];\r\n  var usesGlyphs = !!this.globalData.fontManager.chars;\r\n  len = letters.length;\r\n\r\n  var tSpan;\r\n  var matrixHelper = this.mHelper;\r\n  var shapes;\r\n  var shapeStr = '';\r\n  var singleShape = this.data.singleShape;\r\n  var xPos = 0;\r\n  var yPos = 0;\r\n  var firstLine = true;\r\n  var trackingOffset = documentData.tr * 0.001 * documentData.finalSize;\r\n  if (singleShape && !usesGlyphs && !documentData.sz) {\r\n    var tElement = this.textContainer;\r\n    var justify = 'start';\r\n    switch (documentData.j) {\r\n      case 1:\r\n        justify = 'end';\r\n        break;\r\n      case 2:\r\n        justify = 'middle';\r\n        break;\r\n      default:\r\n        justify = 'start';\r\n        break;\r\n    }\r\n    tElement.setAttribute('text-anchor', justify);\r\n    tElement.setAttribute('letter-spacing', trackingOffset);\r\n    var textContent = this.buildTextContents(documentData.finalText);\r\n    len = textContent.length;\r\n    yPos = documentData.ps ? documentData.ps[1] + documentData.ascent : 0;\r\n    for (i = 0; i < len; i += 1) {\r\n      tSpan = this.textSpans[i] || createNS('tspan');\r\n      tSpan.textContent = textContent[i];\r\n      tSpan.setAttribute('x', 0);\r\n      tSpan.setAttribute('y', yPos);\r\n      tSpan.style.display = 'inherit';\r\n      tElement.appendChild(tSpan);\r\n      this.textSpans[i] = tSpan;\r\n      yPos += documentData.finalLineHeight;\r\n    }\r\n\r\n    this.layerElement.appendChild(tElement);\r\n  } else {\r\n    var cachedSpansLength = this.textSpans.length;\r\n    var shapeData;\r\n    var charData;\r\n    for (i = 0; i < len; i += 1) {\r\n      if (!usesGlyphs || !singleShape || i === 0) {\r\n        tSpan = cachedSpansLength > i ? this.textSpans[i] : createNS(usesGlyphs ? 'path' : 'text');\r\n        if (cachedSpansLength <= i) {\r\n          tSpan.setAttribute('stroke-linecap', 'butt');\r\n          tSpan.setAttribute('stroke-linejoin', 'round');\r\n          tSpan.setAttribute('stroke-miterlimit', '4');\r\n          this.textSpans[i] = tSpan;\r\n          this.layerElement.appendChild(tSpan);\r\n        }\r\n        tSpan.style.display = 'inherit';\r\n      }\r\n\r\n      matrixHelper.reset();\r\n      matrixHelper.scale(documentData.finalSize / 100, documentData.finalSize / 100);\r\n      if (singleShape) {\r\n        if (letters[i].n) {\r\n          xPos = -trackingOffset;\r\n          yPos += documentData.yOffset;\r\n          yPos += firstLine ? 1 : 0;\r\n          firstLine = false;\r\n        }\r\n        this.applyTextPropertiesToMatrix(documentData, matrixHelper, letters[i].line, xPos, yPos);\r\n        xPos += letters[i].l || 0;\r\n        // xPos += letters[i].val === ' ' ? 0 : trackingOffset;\r\n        xPos += trackingOffset;\r\n      }\r\n      if (usesGlyphs) {\r\n        charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\r\n        shapeData = (charData && charData.data) || {};\r\n        shapes = shapeData.shapes ? shapeData.shapes[0].it : [];\r\n        if (!singleShape) {\r\n          tSpan.setAttribute('d', this.createPathShape(matrixHelper, shapes));\r\n        } else {\r\n          shapeStr += this.createPathShape(matrixHelper, shapes);\r\n        }\r\n      } else {\r\n        if (singleShape) {\r\n          tSpan.setAttribute('transform', 'translate(' + matrixHelper.props[12] + ',' + matrixHelper.props[13] + ')');\r\n        }\r\n        tSpan.textContent = letters[i].val;\r\n        tSpan.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');\r\n      }\r\n      //\r\n    }\r\n    if (singleShape && tSpan) {\r\n      tSpan.setAttribute('d', shapeStr);\r\n    }\r\n  }\r\n  while (i < this.textSpans.length) {\r\n    this.textSpans[i].style.display = 'none';\r\n    i += 1;\r\n  }\r\n\r\n  this._sizeChanged = true;\r\n};\r\n\r\nSVGTextLottieElement.prototype.sourceRectAtTime = function () {\r\n  this.prepareFrame(this.comp.renderedFrame - this.data.st);\r\n  this.renderInnerContent();\r\n  if (this._sizeChanged) {\r\n    this._sizeChanged = false;\r\n    var textBox = this.layerElement.getBBox();\r\n    this.bbox = {\r\n      top: textBox.y,\r\n      left: textBox.x,\r\n      width: textBox.width,\r\n      height: textBox.height,\r\n    };\r\n  }\r\n  return this.bbox;\r\n};\r\n\r\nSVGTextLottieElement.prototype.renderInnerContent = function () {\r\n  if (!this.data.singleShape) {\r\n    this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\r\n    if (this.lettersChangedFlag || this.textAnimator.lettersChangedFlag) {\r\n      this._sizeChanged = true;\r\n      var i;\r\n      var len;\r\n      var renderedLetters = this.textAnimator.renderedLetters;\r\n\r\n      var letters = this.textProperty.currentData.l;\r\n\r\n      len = letters.length;\r\n      var renderedLetter;\r\n      var textSpan;\r\n      for (i = 0; i < len; i += 1) {\r\n        if (!letters[i].n) {\r\n          renderedLetter = renderedLetters[i];\r\n          textSpan = this.textSpans[i];\r\n          if (renderedLetter._mdf.m) {\r\n            textSpan.setAttribute('transform', renderedLetter.m);\r\n          }\r\n          if (renderedLetter._mdf.o) {\r\n            textSpan.setAttribute('opacity', renderedLetter.o);\r\n          }\r\n          if (renderedLetter._mdf.sw) {\r\n            textSpan.setAttribute('stroke-width', renderedLetter.sw);\r\n          }\r\n          if (renderedLetter._mdf.sc) {\r\n            textSpan.setAttribute('stroke', renderedLetter.sc);\r\n          }\r\n          if (renderedLetter._mdf.fc) {\r\n            textSpan.setAttribute('fill', renderedLetter.fc);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n/* global extendPrototype, BaseElement, TransformElement, SVGBaseElement, IShapeElement, HierarchyElement,\r\nFrameElement, RenderableDOMElement, Matrix, SVGStyleData, SVGStrokeStyleData, SVGFillStyleData,\r\nSVGGradientFillStyleData, SVGGradientStrokeStyleData, locationHref, getBlendMode, ShapeGroupData,\r\nTransformPropertyFactory, SVGTransformData, ShapePropertyFactory, SVGShapeData, SVGElementsRenderer, ShapeModifiers,\r\nlineCapEnum, lineJoinEnum */\r\n\r\nfunction SVGShapeElement(data, globalData, comp) {\r\n  // List of drawable elements\r\n  this.shapes = [];\r\n  // Full shape data\r\n  this.shapesData = data.shapes;\r\n  // List of styles that will be applied to shapes\r\n  this.stylesList = [];\r\n  // List of modifiers that will be applied to shapes\r\n  this.shapeModifiers = [];\r\n  // List of items in shape tree\r\n  this.itemsData = [];\r\n  // List of items in previous shape tree\r\n  this.processedElements = [];\r\n  // List of animated components\r\n  this.animatedContents = [];\r\n  this.initElement(data, globalData, comp);\r\n  // Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\r\n  // List of elements that have been created\r\n  this.prevViewData = [];\r\n  // Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\r\n}\r\n\r\nextendPrototype([BaseElement, TransformElement, SVGBaseElement, IShapeElement, HierarchyElement, FrameElement, RenderableDOMElement], SVGShapeElement);\r\n\r\nSVGShapeElement.prototype.initSecondaryElement = function () {\r\n};\r\n\r\nSVGShapeElement.prototype.identityMatrix = new Matrix();\r\n\r\nSVGShapeElement.prototype.buildExpressionInterface = function () {};\r\n\r\nSVGShapeElement.prototype.createContent = function () {\r\n  this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.layerElement, 0, [], true);\r\n  this.filterUniqueShapes();\r\n};\r\n\r\n/*\r\nThis method searches for multiple shapes that affect a single element and one of them is animated\r\n*/\r\nSVGShapeElement.prototype.filterUniqueShapes = function () {\r\n  var i;\r\n  var len = this.shapes.length;\r\n  var shape;\r\n  var j;\r\n  var jLen = this.stylesList.length;\r\n  var style;\r\n  var tempShapes = [];\r\n  var areAnimated = false;\r\n  for (j = 0; j < jLen; j += 1) {\r\n    style = this.stylesList[j];\r\n    areAnimated = false;\r\n    tempShapes.length = 0;\r\n    for (i = 0; i < len; i += 1) {\r\n      shape = this.shapes[i];\r\n      if (shape.styles.indexOf(style) !== -1) {\r\n        tempShapes.push(shape);\r\n        areAnimated = shape._isAnimated || areAnimated;\r\n      }\r\n    }\r\n    if (tempShapes.length > 1 && areAnimated) {\r\n      this.setShapesAsAnimated(tempShapes);\r\n    }\r\n  }\r\n};\r\n\r\nSVGShapeElement.prototype.setShapesAsAnimated = function (shapes) {\r\n  var i;\r\n  var len = shapes.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    shapes[i].setAsAnimated();\r\n  }\r\n};\r\n\r\nSVGShapeElement.prototype.createStyleElement = function (data, level) {\r\n  // TODO: prevent drawing of hidden styles\r\n  var elementData;\r\n  var styleOb = new SVGStyleData(data, level);\r\n\r\n  var pathElement = styleOb.pElem;\r\n  if (data.ty === 'st') {\r\n    elementData = new SVGStrokeStyleData(this, data, styleOb);\r\n  } else if (data.ty === 'fl') {\r\n    elementData = new SVGFillStyleData(this, data, styleOb);\r\n  } else if (data.ty === 'gf' || data.ty === 'gs') {\r\n    var GradientConstructor = data.ty === 'gf' ? SVGGradientFillStyleData : SVGGradientStrokeStyleData;\r\n    elementData = new GradientConstructor(this, data, styleOb);\r\n    this.globalData.defs.appendChild(elementData.gf);\r\n    if (elementData.maskId) {\r\n      this.globalData.defs.appendChild(elementData.ms);\r\n      this.globalData.defs.appendChild(elementData.of);\r\n      pathElement.setAttribute('mask', 'url(' + locationHref + '#' + elementData.maskId + ')');\r\n    }\r\n  }\r\n\r\n  if (data.ty === 'st' || data.ty === 'gs') {\r\n    pathElement.setAttribute('stroke-linecap', lineCapEnum[data.lc || 2]);\r\n    pathElement.setAttribute('stroke-linejoin', lineJoinEnum[data.lj || 2]);\r\n    pathElement.setAttribute('fill-opacity', '0');\r\n    if (data.lj === 1) {\r\n      pathElement.setAttribute('stroke-miterlimit', data.ml);\r\n    }\r\n  }\r\n\r\n  if (data.r === 2) {\r\n    pathElement.setAttribute('fill-rule', 'evenodd');\r\n  }\r\n\r\n  if (data.ln) {\r\n    pathElement.setAttribute('id', data.ln);\r\n  }\r\n  if (data.cl) {\r\n    pathElement.setAttribute('class', data.cl);\r\n  }\r\n  if (data.bm) {\r\n    pathElement.style['mix-blend-mode'] = getBlendMode(data.bm);\r\n  }\r\n  this.stylesList.push(styleOb);\r\n  this.addToAnimatedContents(data, elementData);\r\n  return elementData;\r\n};\r\n\r\nSVGShapeElement.prototype.createGroupElement = function (data) {\r\n  var elementData = new ShapeGroupData();\r\n  if (data.ln) {\r\n    elementData.gr.setAttribute('id', data.ln);\r\n  }\r\n  if (data.cl) {\r\n    elementData.gr.setAttribute('class', data.cl);\r\n  }\r\n  if (data.bm) {\r\n    elementData.gr.style['mix-blend-mode'] = getBlendMode(data.bm);\r\n  }\r\n  return elementData;\r\n};\r\n\r\nSVGShapeElement.prototype.createTransformElement = function (data, container) {\r\n  var transformProperty = TransformPropertyFactory.getTransformProperty(this, data, this);\r\n  var elementData = new SVGTransformData(transformProperty, transformProperty.o, container);\r\n  this.addToAnimatedContents(data, elementData);\r\n  return elementData;\r\n};\r\n\r\nSVGShapeElement.prototype.createShapeElement = function (data, ownTransformers, level) {\r\n  var ty = 4;\r\n  if (data.ty === 'rc') {\r\n    ty = 5;\r\n  } else if (data.ty === 'el') {\r\n    ty = 6;\r\n  } else if (data.ty === 'sr') {\r\n    ty = 7;\r\n  }\r\n  var shapeProperty = ShapePropertyFactory.getShapeProp(this, data, ty, this);\r\n  var elementData = new SVGShapeData(ownTransformers, level, shapeProperty);\r\n  this.shapes.push(elementData);\r\n  this.addShapeToModifiers(elementData);\r\n  this.addToAnimatedContents(data, elementData);\r\n  return elementData;\r\n};\r\n\r\nSVGShapeElement.prototype.addToAnimatedContents = function (data, element) {\r\n  var i = 0;\r\n  var len = this.animatedContents.length;\r\n  while (i < len) {\r\n    if (this.animatedContents[i].element === element) {\r\n      return;\r\n    }\r\n    i += 1;\r\n  }\r\n  this.animatedContents.push({\r\n    fn: SVGElementsRenderer.createRenderFunction(data),\r\n    element: element,\r\n    data: data,\r\n  });\r\n};\r\n\r\nSVGShapeElement.prototype.setElementStyles = function (elementData) {\r\n  var arr = elementData.styles;\r\n  var j;\r\n  var jLen = this.stylesList.length;\r\n  for (j = 0; j < jLen; j += 1) {\r\n    if (!this.stylesList[j].closed) {\r\n      arr.push(this.stylesList[j]);\r\n    }\r\n  }\r\n};\r\n\r\nSVGShapeElement.prototype.reloadShapes = function () {\r\n  this._isFirstFrame = true;\r\n  var i;\r\n  var len = this.itemsData.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    this.prevViewData[i] = this.itemsData[i];\r\n  }\r\n  this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.layerElement, 0, [], true);\r\n  this.filterUniqueShapes();\r\n  len = this.dynamicProperties.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    this.dynamicProperties[i].getValue();\r\n  }\r\n  this.renderModifiers();\r\n};\r\n\r\nSVGShapeElement.prototype.searchShapes = function (arr, itemsData, prevViewData, container, level, transformers, render) {\r\n  var ownTransformers = [].concat(transformers);\r\n  var i;\r\n  var len = arr.length - 1;\r\n  var j;\r\n  var jLen;\r\n  var ownStyles = [];\r\n  var ownModifiers = [];\r\n  var currentTransform;\r\n  var modifier;\r\n  var processedPos;\r\n  for (i = len; i >= 0; i -= 1) {\r\n    processedPos = this.searchProcessedElement(arr[i]);\r\n    if (!processedPos) {\r\n      arr[i]._render = render;\r\n    } else {\r\n      itemsData[i] = prevViewData[processedPos - 1];\r\n    }\r\n    if (arr[i].ty === 'fl' || arr[i].ty === 'st' || arr[i].ty === 'gf' || arr[i].ty === 'gs') {\r\n      if (!processedPos) {\r\n        itemsData[i] = this.createStyleElement(arr[i], level);\r\n      } else {\r\n        itemsData[i].style.closed = false;\r\n      }\r\n      if (arr[i]._render) {\r\n        if (itemsData[i].style.pElem.parentNode !== container) {\r\n          container.appendChild(itemsData[i].style.pElem);\r\n        }\r\n      }\r\n      ownStyles.push(itemsData[i].style);\r\n    } else if (arr[i].ty === 'gr') {\r\n      if (!processedPos) {\r\n        itemsData[i] = this.createGroupElement(arr[i]);\r\n      } else {\r\n        jLen = itemsData[i].it.length;\r\n        for (j = 0; j < jLen; j += 1) {\r\n          itemsData[i].prevViewData[j] = itemsData[i].it[j];\r\n        }\r\n      }\r\n      this.searchShapes(arr[i].it, itemsData[i].it, itemsData[i].prevViewData, itemsData[i].gr, level + 1, ownTransformers, render);\r\n      if (arr[i]._render) {\r\n        if (itemsData[i].gr.parentNode !== container) {\r\n          container.appendChild(itemsData[i].gr);\r\n        }\r\n      }\r\n    } else if (arr[i].ty === 'tr') {\r\n      if (!processedPos) {\r\n        itemsData[i] = this.createTransformElement(arr[i], container);\r\n      }\r\n      currentTransform = itemsData[i].transform;\r\n      ownTransformers.push(currentTransform);\r\n    } else if (arr[i].ty === 'sh' || arr[i].ty === 'rc' || arr[i].ty === 'el' || arr[i].ty === 'sr') {\r\n      if (!processedPos) {\r\n        itemsData[i] = this.createShapeElement(arr[i], ownTransformers, level);\r\n      }\r\n      this.setElementStyles(itemsData[i]);\r\n    } else if (arr[i].ty === 'tm' || arr[i].ty === 'rd' || arr[i].ty === 'ms' || arr[i].ty === 'pb') {\r\n      if (!processedPos) {\r\n        modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n        modifier.init(this, arr[i]);\r\n        itemsData[i] = modifier;\r\n        this.shapeModifiers.push(modifier);\r\n      } else {\r\n        modifier = itemsData[i];\r\n        modifier.closed = false;\r\n      }\r\n      ownModifiers.push(modifier);\r\n    } else if (arr[i].ty === 'rp') {\r\n      if (!processedPos) {\r\n        modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n        itemsData[i] = modifier;\r\n        modifier.init(this, arr, i, itemsData);\r\n        this.shapeModifiers.push(modifier);\r\n        render = false;\r\n      } else {\r\n        modifier = itemsData[i];\r\n        modifier.closed = true;\r\n      }\r\n      ownModifiers.push(modifier);\r\n    }\r\n    this.addProcessedElement(arr[i], i + 1);\r\n  }\r\n  len = ownStyles.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    ownStyles[i].closed = true;\r\n  }\r\n  len = ownModifiers.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    ownModifiers[i].closed = true;\r\n  }\r\n};\r\n\r\nSVGShapeElement.prototype.renderInnerContent = function () {\r\n  this.renderModifiers();\r\n  var i;\r\n  var len = this.stylesList.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    this.stylesList[i].reset();\r\n  }\r\n  this.renderShape();\r\n\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.stylesList[i]._mdf || this._isFirstFrame) {\r\n      if (this.stylesList[i].msElem) {\r\n        this.stylesList[i].msElem.setAttribute('d', this.stylesList[i].d);\r\n        // Adding M0 0 fixes same mask bug on all browsers\r\n        this.stylesList[i].d = 'M0 0' + this.stylesList[i].d;\r\n      }\r\n      this.stylesList[i].pElem.setAttribute('d', this.stylesList[i].d || 'M0 0');\r\n    }\r\n  }\r\n};\r\n\r\nSVGShapeElement.prototype.renderShape = function () {\r\n  var i;\r\n  var len = this.animatedContents.length;\r\n  var animatedContent;\r\n  for (i = 0; i < len; i += 1) {\r\n    animatedContent = this.animatedContents[i];\r\n    if ((this._isFirstFrame || animatedContent.element._isAnimated) && animatedContent.data !== true) {\r\n      animatedContent.fn(animatedContent.data, animatedContent.element, this._isFirstFrame);\r\n    }\r\n  }\r\n};\r\n\r\nSVGShapeElement.prototype.destroy = function () {\r\n  this.destroyBaseElement();\r\n  this.shapesData = null;\r\n  this.itemsData = null;\r\n};\r\n\r\n/* global createNS */\r\n\r\nfunction SVGTintFilter(filter, filterManager) {\r\n  this.filterManager = filterManager;\r\n  var feColorMatrix = createNS('feColorMatrix');\r\n  feColorMatrix.setAttribute('type', 'matrix');\r\n  feColorMatrix.setAttribute('color-interpolation-filters', 'linearRGB');\r\n  feColorMatrix.setAttribute('values', '0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0');\r\n  feColorMatrix.setAttribute('result', 'f1');\r\n  filter.appendChild(feColorMatrix);\r\n  feColorMatrix = createNS('feColorMatrix');\r\n  feColorMatrix.setAttribute('type', 'matrix');\r\n  feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\r\n  feColorMatrix.setAttribute('values', '1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0');\r\n  feColorMatrix.setAttribute('result', 'f2');\r\n  filter.appendChild(feColorMatrix);\r\n  this.matrixFilter = feColorMatrix;\r\n  if (filterManager.effectElements[2].p.v !== 100 || filterManager.effectElements[2].p.k) {\r\n    var feMerge = createNS('feMerge');\r\n    filter.appendChild(feMerge);\r\n    var feMergeNode;\r\n    feMergeNode = createNS('feMergeNode');\r\n    feMergeNode.setAttribute('in', 'SourceGraphic');\r\n    feMerge.appendChild(feMergeNode);\r\n    feMergeNode = createNS('feMergeNode');\r\n    feMergeNode.setAttribute('in', 'f2');\r\n    feMerge.appendChild(feMergeNode);\r\n  }\r\n}\r\n\r\nSVGTintFilter.prototype.renderFrame = function (forceRender) {\r\n  if (forceRender || this.filterManager._mdf) {\r\n    var colorBlack = this.filterManager.effectElements[0].p.v;\r\n    var colorWhite = this.filterManager.effectElements[1].p.v;\r\n    var opacity = this.filterManager.effectElements[2].p.v / 100;\r\n    this.matrixFilter.setAttribute('values', (colorWhite[0] - colorBlack[0]) + ' 0 0 0 ' + colorBlack[0] + ' ' + (colorWhite[1] - colorBlack[1]) + ' 0 0 0 ' + colorBlack[1] + ' ' + (colorWhite[2] - colorBlack[2]) + ' 0 0 0 ' + colorBlack[2] + ' 0 0 0 ' + opacity + ' 0');\r\n  }\r\n};\r\n\r\n/* global createNS */\r\n\r\nfunction SVGFillFilter(filter, filterManager) {\r\n  this.filterManager = filterManager;\r\n  var feColorMatrix = createNS('feColorMatrix');\r\n  feColorMatrix.setAttribute('type', 'matrix');\r\n  feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\r\n  feColorMatrix.setAttribute('values', '1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0');\r\n  filter.appendChild(feColorMatrix);\r\n  this.matrixFilter = feColorMatrix;\r\n}\r\nSVGFillFilter.prototype.renderFrame = function (forceRender) {\r\n  if (forceRender || this.filterManager._mdf) {\r\n    var color = this.filterManager.effectElements[2].p.v;\r\n    var opacity = this.filterManager.effectElements[6].p.v;\r\n    this.matrixFilter.setAttribute('values', '0 0 0 0 ' + color[0] + ' 0 0 0 0 ' + color[1] + ' 0 0 0 0 ' + color[2] + ' 0 0 0 ' + opacity + ' 0');\r\n  }\r\n};\r\n\r\n/* global createNS */\r\n\r\nfunction SVGGaussianBlurEffect(filter, filterManager) {\r\n  // Outset the filter region by 100% on all sides to accommodate blur expansion.\r\n  filter.setAttribute('x', '-100%');\r\n  filter.setAttribute('y', '-100%');\r\n  filter.setAttribute('width', '300%');\r\n  filter.setAttribute('height', '300%');\r\n\r\n  this.filterManager = filterManager;\r\n  var feGaussianBlur = createNS('feGaussianBlur');\r\n  filter.appendChild(feGaussianBlur);\r\n  this.feGaussianBlur = feGaussianBlur;\r\n}\r\n\r\nSVGGaussianBlurEffect.prototype.renderFrame = function (forceRender) {\r\n  if (forceRender || this.filterManager._mdf) {\r\n    // Empirical value, matching AE's blur appearance.\r\n    var kBlurrinessToSigma = 0.3;\r\n    var sigma = this.filterManager.effectElements[0].p.v * kBlurrinessToSigma;\r\n\r\n    // Dimensions mapping:\r\n    //\r\n    //   1 -> horizontal & vertical\r\n    //   2 -> horizontal only\r\n    //   3 -> vertical only\r\n    //\r\n    var dimensions = this.filterManager.effectElements[1].p.v;\r\n    var sigmaX = (dimensions == 3) ? 0 : sigma; // eslint-disable-line eqeqeq\r\n    var sigmaY = (dimensions == 2) ? 0 : sigma; // eslint-disable-line eqeqeq\r\n\r\n    this.feGaussianBlur.setAttribute('stdDeviation', sigmaX + ' ' + sigmaY);\r\n\r\n    // Repeat edges mapping:\r\n    //\r\n    //   0 -> off -> duplicate\r\n    //   1 -> on  -> wrap\r\n    var edgeMode = (this.filterManager.effectElements[2].p.v == 1) ? 'wrap' : 'duplicate'; // eslint-disable-line eqeqeq\r\n    this.feGaussianBlur.setAttribute('edgeMode', edgeMode);\r\n  }\r\n};\r\n\r\n/* global createNS, createElementID, locationHref, bmFloor */\r\n\r\nfunction SVGStrokeEffect(elem, filterManager) {\r\n  this.initialized = false;\r\n  this.filterManager = filterManager;\r\n  this.elem = elem;\r\n  this.paths = [];\r\n}\r\n\r\nSVGStrokeEffect.prototype.initialize = function () {\r\n  var elemChildren = this.elem.layerElement.children || this.elem.layerElement.childNodes;\r\n  var path;\r\n  var groupPath;\r\n  var i;\r\n  var len;\r\n  if (this.filterManager.effectElements[1].p.v === 1) {\r\n    len = this.elem.maskManager.masksProperties.length;\r\n    i = 0;\r\n  } else {\r\n    i = this.filterManager.effectElements[0].p.v - 1;\r\n    len = i + 1;\r\n  }\r\n  groupPath = createNS('g');\r\n  groupPath.setAttribute('fill', 'none');\r\n  groupPath.setAttribute('stroke-linecap', 'round');\r\n  groupPath.setAttribute('stroke-dashoffset', 1);\r\n  for (i; i < len; i += 1) {\r\n    path = createNS('path');\r\n    groupPath.appendChild(path);\r\n    this.paths.push({ p: path, m: i });\r\n  }\r\n  if (this.filterManager.effectElements[10].p.v === 3) {\r\n    var mask = createNS('mask');\r\n    var id = createElementID();\r\n    mask.setAttribute('id', id);\r\n    mask.setAttribute('mask-type', 'alpha');\r\n    mask.appendChild(groupPath);\r\n    this.elem.globalData.defs.appendChild(mask);\r\n    var g = createNS('g');\r\n    g.setAttribute('mask', 'url(' + locationHref + '#' + id + ')');\r\n    while (elemChildren[0]) {\r\n      g.appendChild(elemChildren[0]);\r\n    }\r\n    this.elem.layerElement.appendChild(g);\r\n    this.masker = mask;\r\n    groupPath.setAttribute('stroke', '#fff');\r\n  } else if (this.filterManager.effectElements[10].p.v === 1 || this.filterManager.effectElements[10].p.v === 2) {\r\n    if (this.filterManager.effectElements[10].p.v === 2) {\r\n      elemChildren = this.elem.layerElement.children || this.elem.layerElement.childNodes;\r\n      while (elemChildren.length) {\r\n        this.elem.layerElement.removeChild(elemChildren[0]);\r\n      }\r\n    }\r\n    this.elem.layerElement.appendChild(groupPath);\r\n    this.elem.layerElement.removeAttribute('mask');\r\n    groupPath.setAttribute('stroke', '#fff');\r\n  }\r\n  this.initialized = true;\r\n  this.pathMasker = groupPath;\r\n};\r\n\r\nSVGStrokeEffect.prototype.renderFrame = function (forceRender) {\r\n  if (!this.initialized) {\r\n    this.initialize();\r\n  }\r\n  var i;\r\n  var len = this.paths.length;\r\n  var mask;\r\n  var path;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.paths[i].m !== -1) {\r\n      mask = this.elem.maskManager.viewData[this.paths[i].m];\r\n      path = this.paths[i].p;\r\n      if (forceRender || this.filterManager._mdf || mask.prop._mdf) {\r\n        path.setAttribute('d', mask.lastPath);\r\n      }\r\n      if (forceRender || this.filterManager.effectElements[9].p._mdf || this.filterManager.effectElements[4].p._mdf || this.filterManager.effectElements[7].p._mdf || this.filterManager.effectElements[8].p._mdf || mask.prop._mdf) {\r\n        var dasharrayValue;\r\n        if (this.filterManager.effectElements[7].p.v !== 0 || this.filterManager.effectElements[8].p.v !== 100) {\r\n          var s = Math.min(this.filterManager.effectElements[7].p.v, this.filterManager.effectElements[8].p.v) * 0.01;\r\n          var e = Math.max(this.filterManager.effectElements[7].p.v, this.filterManager.effectElements[8].p.v) * 0.01;\r\n          var l = path.getTotalLength();\r\n          dasharrayValue = '0 0 0 ' + l * s + ' ';\r\n          var lineLength = l * (e - s);\r\n          var segment = 1 + this.filterManager.effectElements[4].p.v * 2 * this.filterManager.effectElements[9].p.v * 0.01;\r\n          var units = Math.floor(lineLength / segment);\r\n          var j;\r\n          for (j = 0; j < units; j += 1) {\r\n            dasharrayValue += '1 ' + this.filterManager.effectElements[4].p.v * 2 * this.filterManager.effectElements[9].p.v * 0.01 + ' ';\r\n          }\r\n          dasharrayValue += '0 ' + l * 10 + ' 0 0';\r\n        } else {\r\n          dasharrayValue = '1 ' + this.filterManager.effectElements[4].p.v * 2 * this.filterManager.effectElements[9].p.v * 0.01;\r\n        }\r\n        path.setAttribute('stroke-dasharray', dasharrayValue);\r\n      }\r\n    }\r\n  }\r\n  if (forceRender || this.filterManager.effectElements[4].p._mdf) {\r\n    this.pathMasker.setAttribute('stroke-width', this.filterManager.effectElements[4].p.v * 2);\r\n  }\r\n\r\n  if (forceRender || this.filterManager.effectElements[6].p._mdf) {\r\n    this.pathMasker.setAttribute('opacity', this.filterManager.effectElements[6].p.v);\r\n  }\r\n  if (this.filterManager.effectElements[10].p.v === 1 || this.filterManager.effectElements[10].p.v === 2) {\r\n    if (forceRender || this.filterManager.effectElements[3].p._mdf) {\r\n      var color = this.filterManager.effectElements[3].p.v;\r\n      this.pathMasker.setAttribute('stroke', 'rgb(' + bmFloor(color[0] * 255) + ',' + bmFloor(color[1] * 255) + ',' + bmFloor(color[2] * 255) + ')');\r\n    }\r\n  }\r\n};\r\n\r\n/* global createNS */\r\n\r\nfunction SVGTritoneFilter(filter, filterManager) {\r\n  this.filterManager = filterManager;\r\n  var feColorMatrix = createNS('feColorMatrix');\r\n  feColorMatrix.setAttribute('type', 'matrix');\r\n  feColorMatrix.setAttribute('color-interpolation-filters', 'linearRGB');\r\n  feColorMatrix.setAttribute('values', '0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0');\r\n  feColorMatrix.setAttribute('result', 'f1');\r\n  filter.appendChild(feColorMatrix);\r\n  var feComponentTransfer = createNS('feComponentTransfer');\r\n  feComponentTransfer.setAttribute('color-interpolation-filters', 'sRGB');\r\n  filter.appendChild(feComponentTransfer);\r\n  this.matrixFilter = feComponentTransfer;\r\n  var feFuncR = createNS('feFuncR');\r\n  feFuncR.setAttribute('type', 'table');\r\n  feComponentTransfer.appendChild(feFuncR);\r\n  this.feFuncR = feFuncR;\r\n  var feFuncG = createNS('feFuncG');\r\n  feFuncG.setAttribute('type', 'table');\r\n  feComponentTransfer.appendChild(feFuncG);\r\n  this.feFuncG = feFuncG;\r\n  var feFuncB = createNS('feFuncB');\r\n  feFuncB.setAttribute('type', 'table');\r\n  feComponentTransfer.appendChild(feFuncB);\r\n  this.feFuncB = feFuncB;\r\n}\r\n\r\nSVGTritoneFilter.prototype.renderFrame = function (forceRender) {\r\n  if (forceRender || this.filterManager._mdf) {\r\n    var color1 = this.filterManager.effectElements[0].p.v;\r\n    var color2 = this.filterManager.effectElements[1].p.v;\r\n    var color3 = this.filterManager.effectElements[2].p.v;\r\n    var tableR = color3[0] + ' ' + color2[0] + ' ' + color1[0];\r\n    var tableG = color3[1] + ' ' + color2[1] + ' ' + color1[1];\r\n    var tableB = color3[2] + ' ' + color2[2] + ' ' + color1[2];\r\n    this.feFuncR.setAttribute('tableValues', tableR);\r\n    this.feFuncG.setAttribute('tableValues', tableG);\r\n    this.feFuncB.setAttribute('tableValues', tableB);\r\n    // var opacity = this.filterManager.effectElements[2].p.v/100;\r\n    // this.matrixFilter.setAttribute('values',(colorWhite[0]- colorBlack[0])+' 0 0 0 '+ colorBlack[0] +' '+ (colorWhite[1]- colorBlack[1]) +' 0 0 0 '+ colorBlack[1] +' '+ (colorWhite[2]- colorBlack[2]) +' 0 0 0 '+ colorBlack[2] +' 0 0 0 ' + opacity + ' 0');\r\n  }\r\n};\r\n\r\n/* global createNS */\r\n\r\nfunction SVGProLevelsFilter(filter, filterManager) {\r\n  this.filterManager = filterManager;\r\n  var effectElements = this.filterManager.effectElements;\r\n  var feComponentTransfer = createNS('feComponentTransfer');\r\n\r\n  if (effectElements[10].p.k || effectElements[10].p.v !== 0 || effectElements[11].p.k || effectElements[11].p.v !== 1 || effectElements[12].p.k || effectElements[12].p.v !== 1 || effectElements[13].p.k || effectElements[13].p.v !== 0 || effectElements[14].p.k || effectElements[14].p.v !== 1) {\r\n    this.feFuncR = this.createFeFunc('feFuncR', feComponentTransfer);\r\n  }\r\n  if (effectElements[17].p.k || effectElements[17].p.v !== 0 || effectElements[18].p.k || effectElements[18].p.v !== 1 || effectElements[19].p.k || effectElements[19].p.v !== 1 || effectElements[20].p.k || effectElements[20].p.v !== 0 || effectElements[21].p.k || effectElements[21].p.v !== 1) {\r\n    this.feFuncG = this.createFeFunc('feFuncG', feComponentTransfer);\r\n  }\r\n  if (effectElements[24].p.k || effectElements[24].p.v !== 0 || effectElements[25].p.k || effectElements[25].p.v !== 1 || effectElements[26].p.k || effectElements[26].p.v !== 1 || effectElements[27].p.k || effectElements[27].p.v !== 0 || effectElements[28].p.k || effectElements[28].p.v !== 1) {\r\n    this.feFuncB = this.createFeFunc('feFuncB', feComponentTransfer);\r\n  }\r\n  if (effectElements[31].p.k || effectElements[31].p.v !== 0 || effectElements[32].p.k || effectElements[32].p.v !== 1 || effectElements[33].p.k || effectElements[33].p.v !== 1 || effectElements[34].p.k || effectElements[34].p.v !== 0 || effectElements[35].p.k || effectElements[35].p.v !== 1) {\r\n    this.feFuncA = this.createFeFunc('feFuncA', feComponentTransfer);\r\n  }\r\n\r\n  if (this.feFuncR || this.feFuncG || this.feFuncB || this.feFuncA) {\r\n    feComponentTransfer.setAttribute('color-interpolation-filters', 'sRGB');\r\n    filter.appendChild(feComponentTransfer);\r\n    feComponentTransfer = createNS('feComponentTransfer');\r\n  }\r\n\r\n  if (effectElements[3].p.k || effectElements[3].p.v !== 0 || effectElements[4].p.k || effectElements[4].p.v !== 1 || effectElements[5].p.k || effectElements[5].p.v !== 1 || effectElements[6].p.k || effectElements[6].p.v !== 0 || effectElements[7].p.k || effectElements[7].p.v !== 1) {\r\n    feComponentTransfer.setAttribute('color-interpolation-filters', 'sRGB');\r\n    filter.appendChild(feComponentTransfer);\r\n    this.feFuncRComposed = this.createFeFunc('feFuncR', feComponentTransfer);\r\n    this.feFuncGComposed = this.createFeFunc('feFuncG', feComponentTransfer);\r\n    this.feFuncBComposed = this.createFeFunc('feFuncB', feComponentTransfer);\r\n  }\r\n}\r\n\r\nSVGProLevelsFilter.prototype.createFeFunc = function (type, feComponentTransfer) {\r\n  var feFunc = createNS(type);\r\n  feFunc.setAttribute('type', 'table');\r\n  feComponentTransfer.appendChild(feFunc);\r\n  return feFunc;\r\n};\r\n\r\nSVGProLevelsFilter.prototype.getTableValue = function (inputBlack, inputWhite, gamma, outputBlack, outputWhite) {\r\n  var cnt = 0;\r\n  var segments = 256;\r\n  var perc;\r\n  var min = Math.min(inputBlack, inputWhite);\r\n  var max = Math.max(inputBlack, inputWhite);\r\n  var table = Array.call(null, { length: segments });\r\n  var colorValue;\r\n  var pos = 0;\r\n  var outputDelta = outputWhite - outputBlack;\r\n  var inputDelta = inputWhite - inputBlack;\r\n  while (cnt <= 256) {\r\n    perc = cnt / 256;\r\n    if (perc <= min) {\r\n      colorValue = inputDelta < 0 ? outputWhite : outputBlack;\r\n    } else if (perc >= max) {\r\n      colorValue = inputDelta < 0 ? outputBlack : outputWhite;\r\n    } else {\r\n      colorValue = (outputBlack + outputDelta * Math.pow((perc - inputBlack) / inputDelta, 1 / gamma));\r\n    }\r\n    table[pos] = colorValue;\r\n    pos += 1;\r\n    cnt += 256 / (segments - 1);\r\n  }\r\n  return table.join(' ');\r\n};\r\n\r\nSVGProLevelsFilter.prototype.renderFrame = function (forceRender) {\r\n  if (forceRender || this.filterManager._mdf) {\r\n    var val;\r\n    var effectElements = this.filterManager.effectElements;\r\n    if (this.feFuncRComposed && (forceRender || effectElements[3].p._mdf || effectElements[4].p._mdf || effectElements[5].p._mdf || effectElements[6].p._mdf || effectElements[7].p._mdf)) {\r\n      val = this.getTableValue(effectElements[3].p.v, effectElements[4].p.v, effectElements[5].p.v, effectElements[6].p.v, effectElements[7].p.v);\r\n      this.feFuncRComposed.setAttribute('tableValues', val);\r\n      this.feFuncGComposed.setAttribute('tableValues', val);\r\n      this.feFuncBComposed.setAttribute('tableValues', val);\r\n    }\r\n\r\n    if (this.feFuncR && (forceRender || effectElements[10].p._mdf || effectElements[11].p._mdf || effectElements[12].p._mdf || effectElements[13].p._mdf || effectElements[14].p._mdf)) {\r\n      val = this.getTableValue(effectElements[10].p.v, effectElements[11].p.v, effectElements[12].p.v, effectElements[13].p.v, effectElements[14].p.v);\r\n      this.feFuncR.setAttribute('tableValues', val);\r\n    }\r\n\r\n    if (this.feFuncG && (forceRender || effectElements[17].p._mdf || effectElements[18].p._mdf || effectElements[19].p._mdf || effectElements[20].p._mdf || effectElements[21].p._mdf)) {\r\n      val = this.getTableValue(effectElements[17].p.v, effectElements[18].p.v, effectElements[19].p.v, effectElements[20].p.v, effectElements[21].p.v);\r\n      this.feFuncG.setAttribute('tableValues', val);\r\n    }\r\n\r\n    if (this.feFuncB && (forceRender || effectElements[24].p._mdf || effectElements[25].p._mdf || effectElements[26].p._mdf || effectElements[27].p._mdf || effectElements[28].p._mdf)) {\r\n      val = this.getTableValue(effectElements[24].p.v, effectElements[25].p.v, effectElements[26].p.v, effectElements[27].p.v, effectElements[28].p.v);\r\n      this.feFuncB.setAttribute('tableValues', val);\r\n    }\r\n\r\n    if (this.feFuncA && (forceRender || effectElements[31].p._mdf || effectElements[32].p._mdf || effectElements[33].p._mdf || effectElements[34].p._mdf || effectElements[35].p._mdf)) {\r\n      val = this.getTableValue(effectElements[31].p.v, effectElements[32].p.v, effectElements[33].p.v, effectElements[34].p.v, effectElements[35].p.v);\r\n      this.feFuncA.setAttribute('tableValues', val);\r\n    }\r\n  }\r\n};\r\n\r\n/* global createNS, rgbToHex, degToRads */\r\n\r\nfunction SVGDropShadowEffect(filter, filterManager) {\r\n  var filterSize = filterManager.container.globalData.renderConfig.filterSize;\r\n  filter.setAttribute('x', filterSize.x);\r\n  filter.setAttribute('y', filterSize.y);\r\n  filter.setAttribute('width', filterSize.width);\r\n  filter.setAttribute('height', filterSize.height);\r\n  this.filterManager = filterManager;\r\n\r\n  var feGaussianBlur = createNS('feGaussianBlur');\r\n  feGaussianBlur.setAttribute('in', 'SourceAlpha');\r\n  feGaussianBlur.setAttribute('result', 'drop_shadow_1');\r\n  feGaussianBlur.setAttribute('stdDeviation', '0');\r\n  this.feGaussianBlur = feGaussianBlur;\r\n  filter.appendChild(feGaussianBlur);\r\n\r\n  var feOffset = createNS('feOffset');\r\n  feOffset.setAttribute('dx', '25');\r\n  feOffset.setAttribute('dy', '0');\r\n  feOffset.setAttribute('in', 'drop_shadow_1');\r\n  feOffset.setAttribute('result', 'drop_shadow_2');\r\n  this.feOffset = feOffset;\r\n  filter.appendChild(feOffset);\r\n  var feFlood = createNS('feFlood');\r\n  feFlood.setAttribute('flood-color', '#00ff00');\r\n  feFlood.setAttribute('flood-opacity', '1');\r\n  feFlood.setAttribute('result', 'drop_shadow_3');\r\n  this.feFlood = feFlood;\r\n  filter.appendChild(feFlood);\r\n\r\n  var feComposite = createNS('feComposite');\r\n  feComposite.setAttribute('in', 'drop_shadow_3');\r\n  feComposite.setAttribute('in2', 'drop_shadow_2');\r\n  feComposite.setAttribute('operator', 'in');\r\n  feComposite.setAttribute('result', 'drop_shadow_4');\r\n  filter.appendChild(feComposite);\r\n\r\n  var feMerge = createNS('feMerge');\r\n  filter.appendChild(feMerge);\r\n  var feMergeNode;\r\n  feMergeNode = createNS('feMergeNode');\r\n  feMerge.appendChild(feMergeNode);\r\n  feMergeNode = createNS('feMergeNode');\r\n  feMergeNode.setAttribute('in', 'SourceGraphic');\r\n  this.feMergeNode = feMergeNode;\r\n  this.feMerge = feMerge;\r\n  this.originalNodeAdded = false;\r\n  feMerge.appendChild(feMergeNode);\r\n}\r\n\r\nSVGDropShadowEffect.prototype.renderFrame = function (forceRender) {\r\n  if (forceRender || this.filterManager._mdf) {\r\n    if (forceRender || this.filterManager.effectElements[4].p._mdf) {\r\n      this.feGaussianBlur.setAttribute('stdDeviation', this.filterManager.effectElements[4].p.v / 4);\r\n    }\r\n    if (forceRender || this.filterManager.effectElements[0].p._mdf) {\r\n      var col = this.filterManager.effectElements[0].p.v;\r\n      this.feFlood.setAttribute('flood-color', rgbToHex(Math.round(col[0] * 255), Math.round(col[1] * 255), Math.round(col[2] * 255)));\r\n    }\r\n    if (forceRender || this.filterManager.effectElements[1].p._mdf) {\r\n      this.feFlood.setAttribute('flood-opacity', this.filterManager.effectElements[1].p.v / 255);\r\n    }\r\n    if (forceRender || this.filterManager.effectElements[2].p._mdf || this.filterManager.effectElements[3].p._mdf) {\r\n      var distance = this.filterManager.effectElements[3].p.v;\r\n      var angle = (this.filterManager.effectElements[2].p.v - 90) * degToRads;\r\n      var x = distance * Math.cos(angle);\r\n      var y = distance * Math.sin(angle);\r\n      this.feOffset.setAttribute('dx', x);\r\n      this.feOffset.setAttribute('dy', y);\r\n    }\r\n    /* if(forceRender || this.filterManager.effectElements[5].p._mdf){\r\n            if(this.filterManager.effectElements[5].p.v === 1 && this.originalNodeAdded) {\r\n                this.feMerge.removeChild(this.feMergeNode);\r\n                this.originalNodeAdded = false;\r\n            } else if(this.filterManager.effectElements[5].p.v === 0 && !this.originalNodeAdded) {\r\n                this.feMerge.appendChild(this.feMergeNode);\r\n                this.originalNodeAdded = true;\r\n            }\r\n        } */\r\n  }\r\n};\r\n\r\n/* global createElementID, createNS */\r\n\r\nvar _svgMatteSymbols = [];\r\n\r\nfunction SVGMatte3Effect(filterElem, filterManager, elem) {\r\n  this.initialized = false;\r\n  this.filterManager = filterManager;\r\n  this.filterElem = filterElem;\r\n  this.elem = elem;\r\n  elem.matteElement = createNS('g');\r\n  elem.matteElement.appendChild(elem.layerElement);\r\n  elem.matteElement.appendChild(elem.transformedElement);\r\n  elem.baseElement = elem.matteElement;\r\n}\r\n\r\nSVGMatte3Effect.prototype.findSymbol = function (mask) {\r\n  var i = 0;\r\n  var len = _svgMatteSymbols.length;\r\n  while (i < len) {\r\n    if (_svgMatteSymbols[i] === mask) {\r\n      return _svgMatteSymbols[i];\r\n    }\r\n    i += 1;\r\n  }\r\n  return null;\r\n};\r\n\r\nSVGMatte3Effect.prototype.replaceInParent = function (mask, symbolId) {\r\n  var parentNode = mask.layerElement.parentNode;\r\n  if (!parentNode) {\r\n    return;\r\n  }\r\n  var children = parentNode.children;\r\n  var i = 0;\r\n  var len = children.length;\r\n  while (i < len) {\r\n    if (children[i] === mask.layerElement) {\r\n      break;\r\n    }\r\n    i += 1;\r\n  }\r\n  var nextChild;\r\n  if (i <= len - 2) {\r\n    nextChild = children[i + 1];\r\n  }\r\n  var useElem = createNS('use');\r\n  useElem.setAttribute('href', '#' + symbolId);\r\n  if (nextChild) {\r\n    parentNode.insertBefore(useElem, nextChild);\r\n  } else {\r\n    parentNode.appendChild(useElem);\r\n  }\r\n};\r\n\r\nSVGMatte3Effect.prototype.setElementAsMask = function (elem, mask) {\r\n  if (!this.findSymbol(mask)) {\r\n    var symbolId = createElementID();\r\n    var masker = createNS('mask');\r\n    masker.setAttribute('id', mask.layerId);\r\n    masker.setAttribute('mask-type', 'alpha');\r\n    _svgMatteSymbols.push(mask);\r\n    var defs = elem.globalData.defs;\r\n    defs.appendChild(masker);\r\n    var symbol = createNS('symbol');\r\n    symbol.setAttribute('id', symbolId);\r\n    this.replaceInParent(mask, symbolId);\r\n    symbol.appendChild(mask.layerElement);\r\n    defs.appendChild(symbol);\r\n    var useElem = createNS('use');\r\n    useElem.setAttribute('href', '#' + symbolId);\r\n    masker.appendChild(useElem);\r\n    mask.data.hd = false;\r\n    mask.show();\r\n  }\r\n  elem.setMatte(mask.layerId);\r\n};\r\n\r\nSVGMatte3Effect.prototype.initialize = function () {\r\n  var ind = this.filterManager.effectElements[0].p.v;\r\n  var elements = this.elem.comp.elements;\r\n  var i = 0;\r\n  var len = elements.length;\r\n  while (i < len) {\r\n    if (elements[i] && elements[i].data.ind === ind) {\r\n      this.setElementAsMask(this.elem, elements[i]);\r\n    }\r\n    i += 1;\r\n  }\r\n  this.initialized = true;\r\n};\r\n\r\nSVGMatte3Effect.prototype.renderFrame = function () {\r\n  if (!this.initialized) {\r\n    this.initialize();\r\n  }\r\n};\r\n\r\n/* global createElementID, filtersFactory, SVGTintFilter, SVGFillFilter, SVGStrokeEffect, SVGTritoneFilter,\r\nSVGProLevelsFilter, SVGDropShadowEffect, SVGMatte3Effect, SVGGaussianBlurEffect, locationHref */\r\n\r\nfunction SVGEffects(elem) {\r\n  var i;\r\n  var len = elem.data.ef ? elem.data.ef.length : 0;\r\n  var filId = createElementID();\r\n  var fil = filtersFactory.createFilter(filId, true);\r\n  var count = 0;\r\n  this.filters = [];\r\n  var filterManager;\r\n  for (i = 0; i < len; i += 1) {\r\n    filterManager = null;\r\n    if (elem.data.ef[i].ty === 20) {\r\n      count += 1;\r\n      filterManager = new SVGTintFilter(fil, elem.effectsManager.effectElements[i]);\r\n    } else if (elem.data.ef[i].ty === 21) {\r\n      count += 1;\r\n      filterManager = new SVGFillFilter(fil, elem.effectsManager.effectElements[i]);\r\n    } else if (elem.data.ef[i].ty === 22) {\r\n      filterManager = new SVGStrokeEffect(elem, elem.effectsManager.effectElements[i]);\r\n    } else if (elem.data.ef[i].ty === 23) {\r\n      count += 1;\r\n      filterManager = new SVGTritoneFilter(fil, elem.effectsManager.effectElements[i]);\r\n    } else if (elem.data.ef[i].ty === 24) {\r\n      count += 1;\r\n      filterManager = new SVGProLevelsFilter(fil, elem.effectsManager.effectElements[i]);\r\n    } else if (elem.data.ef[i].ty === 25) {\r\n      count += 1;\r\n      filterManager = new SVGDropShadowEffect(fil, elem.effectsManager.effectElements[i]);\r\n    } else if (elem.data.ef[i].ty === 28) {\r\n      // count += 1;\r\n      filterManager = new SVGMatte3Effect(fil, elem.effectsManager.effectElements[i], elem);\r\n    } else if (elem.data.ef[i].ty === 29) {\r\n      count += 1;\r\n      filterManager = new SVGGaussianBlurEffect(fil, elem.effectsManager.effectElements[i]);\r\n    }\r\n    if (filterManager) {\r\n      this.filters.push(filterManager);\r\n    }\r\n  }\r\n  if (count) {\r\n    elem.globalData.defs.appendChild(fil);\r\n    elem.layerElement.setAttribute('filter', 'url(' + locationHref + '#' + filId + ')');\r\n  }\r\n  if (this.filters.length) {\r\n    elem.addRenderableComponent(this);\r\n  }\r\n}\r\n\r\nSVGEffects.prototype.renderFrame = function (_isFirstFrame) {\r\n  var i;\r\n  var len = this.filters.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    this.filters[i].renderFrame(_isFirstFrame);\r\n  }\r\n};\r\n\r\n/* global Matrix, createTypedArray */\r\n\r\nfunction CVContextData() {\r\n  this.saved = [];\r\n  this.cArrPos = 0;\r\n  this.cTr = new Matrix();\r\n  this.cO = 1;\r\n  var i;\r\n  var len = 15;\r\n  this.savedOp = createTypedArray('float32', len);\r\n  for (i = 0; i < len; i += 1) {\r\n    this.saved[i] = createTypedArray('float32', 16);\r\n  }\r\n  this._length = len;\r\n}\r\n\r\nCVContextData.prototype.duplicate = function () {\r\n  var newLength = this._length * 2;\r\n  var currentSavedOp = this.savedOp;\r\n  this.savedOp = createTypedArray('float32', newLength);\r\n  this.savedOp.set(currentSavedOp);\r\n  var i = 0;\r\n  for (i = this._length; i < newLength; i += 1) {\r\n    this.saved[i] = createTypedArray('float32', 16);\r\n  }\r\n  this._length = newLength;\r\n};\r\n\r\nCVContextData.prototype.reset = function () {\r\n  this.cArrPos = 0;\r\n  this.cTr.reset();\r\n  this.cO = 1;\r\n};\r\n\r\n/* global CVEffects, getBlendMode, CVMaskElement, Matrix */\r\n\r\nfunction CVBaseElement() {\r\n}\r\n\r\nCVBaseElement.prototype = {\r\n  createElements: function () {},\r\n  initRendererElement: function () {},\r\n  createContainerElements: function () {\r\n    this.canvasContext = this.globalData.canvasContext;\r\n    this.renderableEffectsManager = new CVEffects(this);\r\n  },\r\n  createContent: function () {},\r\n  setBlendMode: function () {\r\n    var globalData = this.globalData;\r\n    if (globalData.blendMode !== this.data.bm) {\r\n      globalData.blendMode = this.data.bm;\r\n      var blendModeValue = getBlendMode(this.data.bm);\r\n      globalData.canvasContext.globalCompositeOperation = blendModeValue;\r\n    }\r\n  },\r\n  createRenderableComponents: function () {\r\n    this.maskManager = new CVMaskElement(this.data, this);\r\n  },\r\n  hideElement: function () {\r\n    if (!this.hidden && (!this.isInRange || this.isTransparent)) {\r\n      this.hidden = true;\r\n    }\r\n  },\r\n  showElement: function () {\r\n    if (this.isInRange && !this.isTransparent) {\r\n      this.hidden = false;\r\n      this._isFirstFrame = true;\r\n      this.maskManager._isFirstFrame = true;\r\n    }\r\n  },\r\n  renderFrame: function () {\r\n    if (this.hidden || this.data.hd) {\r\n      return;\r\n    }\r\n    this.renderTransform();\r\n    this.renderRenderable();\r\n    this.setBlendMode();\r\n    var forceRealStack = this.data.ty === 0;\r\n    this.globalData.renderer.save(forceRealStack);\r\n    this.globalData.renderer.ctxTransform(this.finalTransform.mat.props);\r\n    this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v);\r\n    this.renderInnerContent();\r\n    this.globalData.renderer.restore(forceRealStack);\r\n    if (this.maskManager.hasMasks) {\r\n      this.globalData.renderer.restore(true);\r\n    }\r\n    if (this._isFirstFrame) {\r\n      this._isFirstFrame = false;\r\n    }\r\n  },\r\n  destroy: function () {\r\n    this.canvasContext = null;\r\n    this.data = null;\r\n    this.globalData = null;\r\n    this.maskManager.destroy();\r\n  },\r\n  mHelper: new Matrix(),\r\n};\r\nCVBaseElement.prototype.hide = CVBaseElement.prototype.hideElement;\r\nCVBaseElement.prototype.show = CVBaseElement.prototype.showElement;\r\n\r\n/* global extendPrototype, BaseElement, TransformElement, CVBaseElement,HierarchyElement, FrameElement,\r\nRenderableElement, SVGShapeElement, IImageElement, createTag */\r\n\r\nfunction CVImageElement(data, globalData, comp) {\r\n  this.assetData = globalData.getAssetData(data.refId);\r\n  this.img = globalData.imageLoader.getAsset(this.assetData);\r\n  this.initElement(data, globalData, comp);\r\n}\r\nextendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement], CVImageElement);\r\n\r\nCVImageElement.prototype.initElement = SVGShapeElement.prototype.initElement;\r\nCVImageElement.prototype.prepareFrame = IImageElement.prototype.prepareFrame;\r\n\r\nCVImageElement.prototype.createContent = function () {\r\n  if (this.img.width && (this.assetData.w !== this.img.width || this.assetData.h !== this.img.height)) {\r\n    var canvas = createTag('canvas');\r\n    canvas.width = this.assetData.w;\r\n    canvas.height = this.assetData.h;\r\n    var ctx = canvas.getContext('2d');\r\n\r\n    var imgW = this.img.width;\r\n    var imgH = this.img.height;\r\n    var imgRel = imgW / imgH;\r\n    var canvasRel = this.assetData.w / this.assetData.h;\r\n    var widthCrop;\r\n    var heightCrop;\r\n    var par = this.assetData.pr || this.globalData.renderConfig.imagePreserveAspectRatio;\r\n    if ((imgRel > canvasRel && par === 'xMidYMid slice') || (imgRel < canvasRel && par !== 'xMidYMid slice')) {\r\n      heightCrop = imgH;\r\n      widthCrop = heightCrop * canvasRel;\r\n    } else {\r\n      widthCrop = imgW;\r\n      heightCrop = widthCrop / canvasRel;\r\n    }\r\n    ctx.drawImage(this.img, (imgW - widthCrop) / 2, (imgH - heightCrop) / 2, widthCrop, heightCrop, 0, 0, this.assetData.w, this.assetData.h);\r\n    this.img = canvas;\r\n  }\r\n};\r\n\r\nCVImageElement.prototype.renderInnerContent = function () {\r\n  this.canvasContext.drawImage(this.img, 0, 0);\r\n};\r\n\r\nCVImageElement.prototype.destroy = function () {\r\n  this.img = null;\r\n};\r\n\r\n/* global createSizedArray, PropertyFactory, extendPrototype, CanvasRenderer, ICompElement, CVBaseElement */\r\n\r\nfunction CVCompElement(data, globalData, comp) {\r\n  this.completeLayers = false;\r\n  this.layers = data.layers;\r\n  this.pendingElements = [];\r\n  this.elements = createSizedArray(this.layers.length);\r\n  this.initElement(data, globalData, comp);\r\n  this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : { _placeholder: true };\r\n}\r\n\r\nextendPrototype([CanvasRenderer, ICompElement, CVBaseElement], CVCompElement);\r\n\r\nCVCompElement.prototype.renderInnerContent = function () {\r\n  var ctx = this.canvasContext;\r\n  ctx.beginPath();\r\n  ctx.moveTo(0, 0);\r\n  ctx.lineTo(this.data.w, 0);\r\n  ctx.lineTo(this.data.w, this.data.h);\r\n  ctx.lineTo(0, this.data.h);\r\n  ctx.lineTo(0, 0);\r\n  ctx.clip();\r\n  var i;\r\n  var len = this.layers.length;\r\n  for (i = len - 1; i >= 0; i -= 1) {\r\n    if (this.completeLayers || this.elements[i]) {\r\n      this.elements[i].renderFrame();\r\n    }\r\n  }\r\n};\r\n\r\nCVCompElement.prototype.destroy = function () {\r\n  var i;\r\n  var len = this.layers.length;\r\n  for (i = len - 1; i >= 0; i -= 1) {\r\n    if (this.elements[i]) {\r\n      this.elements[i].destroy();\r\n    }\r\n  }\r\n  this.layers = null;\r\n  this.elements = null;\r\n};\r\n\r\n/* global createSizedArray, ShapePropertyFactory, MaskElement */\r\n\r\nfunction CVMaskElement(data, element) {\r\n  this.data = data;\r\n  this.element = element;\r\n  this.masksProperties = this.data.masksProperties || [];\r\n  this.viewData = createSizedArray(this.masksProperties.length);\r\n  var i;\r\n  var len = this.masksProperties.length;\r\n  var hasMasks = false;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.masksProperties[i].mode !== 'n') {\r\n      hasMasks = true;\r\n    }\r\n    this.viewData[i] = ShapePropertyFactory.getShapeProp(this.element, this.masksProperties[i], 3);\r\n  }\r\n  this.hasMasks = hasMasks;\r\n  if (hasMasks) {\r\n    this.element.addRenderableComponent(this);\r\n  }\r\n}\r\n\r\nCVMaskElement.prototype.renderFrame = function () {\r\n  if (!this.hasMasks) {\r\n    return;\r\n  }\r\n  var transform = this.element.finalTransform.mat;\r\n  var ctx = this.element.canvasContext;\r\n  var i;\r\n  var len = this.masksProperties.length;\r\n  var pt;\r\n  var pts;\r\n  var data;\r\n  ctx.beginPath();\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.masksProperties[i].mode !== 'n') {\r\n      if (this.masksProperties[i].inv) {\r\n        ctx.moveTo(0, 0);\r\n        ctx.lineTo(this.element.globalData.compSize.w, 0);\r\n        ctx.lineTo(this.element.globalData.compSize.w, this.element.globalData.compSize.h);\r\n        ctx.lineTo(0, this.element.globalData.compSize.h);\r\n        ctx.lineTo(0, 0);\r\n      }\r\n      data = this.viewData[i].v;\r\n      pt = transform.applyToPointArray(data.v[0][0], data.v[0][1], 0);\r\n      ctx.moveTo(pt[0], pt[1]);\r\n      var j;\r\n      var jLen = data._length;\r\n      for (j = 1; j < jLen; j += 1) {\r\n        pts = transform.applyToTriplePoints(data.o[j - 1], data.i[j], data.v[j]);\r\n        ctx.bezierCurveTo(pts[0], pts[1], pts[2], pts[3], pts[4], pts[5]);\r\n      }\r\n      pts = transform.applyToTriplePoints(data.o[j - 1], data.i[0], data.v[0]);\r\n      ctx.bezierCurveTo(pts[0], pts[1], pts[2], pts[3], pts[4], pts[5]);\r\n    }\r\n  }\r\n  this.element.globalData.renderer.save(true);\r\n  ctx.clip();\r\n};\r\n\r\nCVMaskElement.prototype.getMaskProperty = MaskElement.prototype.getMaskProperty;\r\n\r\nCVMaskElement.prototype.destroy = function () {\r\n  this.element = null;\r\n};\r\n\r\n/* global ShapeTransformManager, extendPrototype, BaseElement, TransformElement, CVBaseElement, IShapeElement,\r\nHierarchyElement, FrameElement, RenderableElement, RenderableDOMElement, PropertyFactory, degToRads, GradientProperty,\r\nDashProperty, TransformPropertyFactory, CVShapeData, ShapeModifiers, bmFloor, lineCapEnum, lineJoinEnum */\r\n\r\nfunction CVShapeElement(data, globalData, comp) {\r\n  this.shapes = [];\r\n  this.shapesData = data.shapes;\r\n  this.stylesList = [];\r\n  this.itemsData = [];\r\n  this.prevViewData = [];\r\n  this.shapeModifiers = [];\r\n  this.processedElements = [];\r\n  this.transformsManager = new ShapeTransformManager();\r\n  this.initElement(data, globalData, comp);\r\n}\r\n\r\nextendPrototype([BaseElement, TransformElement, CVBaseElement, IShapeElement, HierarchyElement, FrameElement, RenderableElement], CVShapeElement);\r\n\r\nCVShapeElement.prototype.initElement = RenderableDOMElement.prototype.initElement;\r\n\r\nCVShapeElement.prototype.transformHelper = { opacity: 1, _opMdf: false };\r\n\r\nCVShapeElement.prototype.dashResetter = [];\r\n\r\nCVShapeElement.prototype.createContent = function () {\r\n  this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, true, []);\r\n};\r\n\r\nCVShapeElement.prototype.createStyleElement = function (data, transforms) {\r\n  var styleElem = {\r\n    data: data,\r\n    type: data.ty,\r\n    preTransforms: this.transformsManager.addTransformSequence(transforms),\r\n    transforms: [],\r\n    elements: [],\r\n    closed: data.hd === true,\r\n  };\r\n  var elementData = {};\r\n  if (data.ty === 'fl' || data.ty === 'st') {\r\n    elementData.c = PropertyFactory.getProp(this, data.c, 1, 255, this);\r\n    if (!elementData.c.k) {\r\n      styleElem.co = 'rgb(' + bmFloor(elementData.c.v[0]) + ',' + bmFloor(elementData.c.v[1]) + ',' + bmFloor(elementData.c.v[2]) + ')';\r\n    }\r\n  } else if (data.ty === 'gf' || data.ty === 'gs') {\r\n    elementData.s = PropertyFactory.getProp(this, data.s, 1, null, this);\r\n    elementData.e = PropertyFactory.getProp(this, data.e, 1, null, this);\r\n    elementData.h = PropertyFactory.getProp(this, data.h || { k: 0 }, 0, 0.01, this);\r\n    elementData.a = PropertyFactory.getProp(this, data.a || { k: 0 }, 0, degToRads, this);\r\n    elementData.g = new GradientProperty(this, data.g, this);\r\n  }\r\n  elementData.o = PropertyFactory.getProp(this, data.o, 0, 0.01, this);\r\n  if (data.ty === 'st' || data.ty === 'gs') {\r\n    styleElem.lc = lineCapEnum[data.lc || 2];\r\n    styleElem.lj = lineJoinEnum[data.lj || 2];\r\n    if (data.lj == 1) { // eslint-disable-line eqeqeq\r\n      styleElem.ml = data.ml;\r\n    }\r\n    elementData.w = PropertyFactory.getProp(this, data.w, 0, null, this);\r\n    if (!elementData.w.k) {\r\n      styleElem.wi = elementData.w.v;\r\n    }\r\n    if (data.d) {\r\n      var d = new DashProperty(this, data.d, 'canvas', this);\r\n      elementData.d = d;\r\n      if (!elementData.d.k) {\r\n        styleElem.da = elementData.d.dashArray;\r\n        styleElem.do = elementData.d.dashoffset[0];\r\n      }\r\n    }\r\n  } else {\r\n    styleElem.r = data.r === 2 ? 'evenodd' : 'nonzero';\r\n  }\r\n  this.stylesList.push(styleElem);\r\n  elementData.style = styleElem;\r\n  return elementData;\r\n};\r\n\r\nCVShapeElement.prototype.createGroupElement = function () {\r\n  var elementData = {\r\n    it: [],\r\n    prevViewData: [],\r\n  };\r\n  return elementData;\r\n};\r\n\r\nCVShapeElement.prototype.createTransformElement = function (data) {\r\n  var elementData = {\r\n    transform: {\r\n      opacity: 1,\r\n      _opMdf: false,\r\n      key: this.transformsManager.getNewKey(),\r\n      op: PropertyFactory.getProp(this, data.o, 0, 0.01, this),\r\n      mProps: TransformPropertyFactory.getTransformProperty(this, data, this),\r\n    },\r\n  };\r\n  return elementData;\r\n};\r\n\r\nCVShapeElement.prototype.createShapeElement = function (data) {\r\n  var elementData = new CVShapeData(this, data, this.stylesList, this.transformsManager);\r\n\r\n  this.shapes.push(elementData);\r\n  this.addShapeToModifiers(elementData);\r\n  return elementData;\r\n};\r\n\r\nCVShapeElement.prototype.reloadShapes = function () {\r\n  this._isFirstFrame = true;\r\n  var i;\r\n  var len = this.itemsData.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    this.prevViewData[i] = this.itemsData[i];\r\n  }\r\n  this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, true, []);\r\n  len = this.dynamicProperties.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    this.dynamicProperties[i].getValue();\r\n  }\r\n  this.renderModifiers();\r\n  this.transformsManager.processSequences(this._isFirstFrame);\r\n};\r\n\r\nCVShapeElement.prototype.addTransformToStyleList = function (transform) {\r\n  var i;\r\n  var len = this.stylesList.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (!this.stylesList[i].closed) {\r\n      this.stylesList[i].transforms.push(transform);\r\n    }\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.removeTransformFromStyleList = function () {\r\n  var i;\r\n  var len = this.stylesList.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (!this.stylesList[i].closed) {\r\n      this.stylesList[i].transforms.pop();\r\n    }\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.closeStyles = function (styles) {\r\n  var i;\r\n  var len = styles.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    styles[i].closed = true;\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.searchShapes = function (arr, itemsData, prevViewData, shouldRender, transforms) {\r\n  var i;\r\n  var len = arr.length - 1;\r\n  var j;\r\n  var jLen;\r\n  var ownStyles = [];\r\n  var ownModifiers = [];\r\n  var processedPos;\r\n  var modifier;\r\n  var currentTransform;\r\n  var ownTransforms = [].concat(transforms);\r\n  for (i = len; i >= 0; i -= 1) {\r\n    processedPos = this.searchProcessedElement(arr[i]);\r\n    if (!processedPos) {\r\n      arr[i]._shouldRender = shouldRender;\r\n    } else {\r\n      itemsData[i] = prevViewData[processedPos - 1];\r\n    }\r\n    if (arr[i].ty === 'fl' || arr[i].ty === 'st' || arr[i].ty === 'gf' || arr[i].ty === 'gs') {\r\n      if (!processedPos) {\r\n        itemsData[i] = this.createStyleElement(arr[i], ownTransforms);\r\n      } else {\r\n        itemsData[i].style.closed = false;\r\n      }\r\n\r\n      ownStyles.push(itemsData[i].style);\r\n    } else if (arr[i].ty === 'gr') {\r\n      if (!processedPos) {\r\n        itemsData[i] = this.createGroupElement(arr[i]);\r\n      } else {\r\n        jLen = itemsData[i].it.length;\r\n        for (j = 0; j < jLen; j += 1) {\r\n          itemsData[i].prevViewData[j] = itemsData[i].it[j];\r\n        }\r\n      }\r\n      this.searchShapes(arr[i].it, itemsData[i].it, itemsData[i].prevViewData, shouldRender, ownTransforms);\r\n    } else if (arr[i].ty === 'tr') {\r\n      if (!processedPos) {\r\n        currentTransform = this.createTransformElement(arr[i]);\r\n        itemsData[i] = currentTransform;\r\n      }\r\n      ownTransforms.push(itemsData[i]);\r\n      this.addTransformToStyleList(itemsData[i]);\r\n    } else if (arr[i].ty === 'sh' || arr[i].ty === 'rc' || arr[i].ty === 'el' || arr[i].ty === 'sr') {\r\n      if (!processedPos) {\r\n        itemsData[i] = this.createShapeElement(arr[i]);\r\n      }\r\n    } else if (arr[i].ty === 'tm' || arr[i].ty === 'rd' || arr[i].ty === 'pb') {\r\n      if (!processedPos) {\r\n        modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n        modifier.init(this, arr[i]);\r\n        itemsData[i] = modifier;\r\n        this.shapeModifiers.push(modifier);\r\n      } else {\r\n        modifier = itemsData[i];\r\n        modifier.closed = false;\r\n      }\r\n      ownModifiers.push(modifier);\r\n    } else if (arr[i].ty === 'rp') {\r\n      if (!processedPos) {\r\n        modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n        itemsData[i] = modifier;\r\n        modifier.init(this, arr, i, itemsData);\r\n        this.shapeModifiers.push(modifier);\r\n        shouldRender = false;\r\n      } else {\r\n        modifier = itemsData[i];\r\n        modifier.closed = true;\r\n      }\r\n      ownModifiers.push(modifier);\r\n    }\r\n    this.addProcessedElement(arr[i], i + 1);\r\n  }\r\n  this.removeTransformFromStyleList();\r\n  this.closeStyles(ownStyles);\r\n  len = ownModifiers.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    ownModifiers[i].closed = true;\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.renderInnerContent = function () {\r\n  this.transformHelper.opacity = 1;\r\n  this.transformHelper._opMdf = false;\r\n  this.renderModifiers();\r\n  this.transformsManager.processSequences(this._isFirstFrame);\r\n  this.renderShape(this.transformHelper, this.shapesData, this.itemsData, true);\r\n};\r\n\r\nCVShapeElement.prototype.renderShapeTransform = function (parentTransform, groupTransform) {\r\n  if (parentTransform._opMdf || groupTransform.op._mdf || this._isFirstFrame) {\r\n    groupTransform.opacity = parentTransform.opacity;\r\n    groupTransform.opacity *= groupTransform.op.v;\r\n    groupTransform._opMdf = true;\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.drawLayer = function () {\r\n  var i;\r\n  var len = this.stylesList.length;\r\n  var j;\r\n  var jLen;\r\n  var k;\r\n  var kLen;\r\n  var elems;\r\n  var nodes;\r\n  var renderer = this.globalData.renderer;\r\n  var ctx = this.globalData.canvasContext;\r\n  var type;\r\n  var currentStyle;\r\n  for (i = 0; i < len; i += 1) {\r\n    currentStyle = this.stylesList[i];\r\n    type = currentStyle.type;\r\n\r\n    // Skipping style when\r\n    // Stroke width equals 0\r\n    // style should not be rendered (extra unused repeaters)\r\n    // current opacity equals 0\r\n    // global opacity equals 0\r\n    if (!(((type === 'st' || type === 'gs') && currentStyle.wi === 0) || !currentStyle.data._shouldRender || currentStyle.coOp === 0 || this.globalData.currentGlobalAlpha === 0)) {\r\n      renderer.save();\r\n      elems = currentStyle.elements;\r\n      if (type === 'st' || type === 'gs') {\r\n        ctx.strokeStyle = type === 'st' ? currentStyle.co : currentStyle.grd;\r\n        ctx.lineWidth = currentStyle.wi;\r\n        ctx.lineCap = currentStyle.lc;\r\n        ctx.lineJoin = currentStyle.lj;\r\n        ctx.miterLimit = currentStyle.ml || 0;\r\n      } else {\r\n        ctx.fillStyle = type === 'fl' ? currentStyle.co : currentStyle.grd;\r\n      }\r\n      renderer.ctxOpacity(currentStyle.coOp);\r\n      if (type !== 'st' && type !== 'gs') {\r\n        ctx.beginPath();\r\n      }\r\n      renderer.ctxTransform(currentStyle.preTransforms.finalTransform.props);\r\n      jLen = elems.length;\r\n      for (j = 0; j < jLen; j += 1) {\r\n        if (type === 'st' || type === 'gs') {\r\n          ctx.beginPath();\r\n          if (currentStyle.da) {\r\n            ctx.setLineDash(currentStyle.da);\r\n            ctx.lineDashOffset = currentStyle.do;\r\n          }\r\n        }\r\n        nodes = elems[j].trNodes;\r\n        kLen = nodes.length;\r\n\r\n        for (k = 0; k < kLen; k += 1) {\r\n          if (nodes[k].t === 'm') {\r\n            ctx.moveTo(nodes[k].p[0], nodes[k].p[1]);\r\n          } else if (nodes[k].t === 'c') {\r\n            ctx.bezierCurveTo(nodes[k].pts[0], nodes[k].pts[1], nodes[k].pts[2], nodes[k].pts[3], nodes[k].pts[4], nodes[k].pts[5]);\r\n          } else {\r\n            ctx.closePath();\r\n          }\r\n        }\r\n        if (type === 'st' || type === 'gs') {\r\n          ctx.stroke();\r\n          if (currentStyle.da) {\r\n            ctx.setLineDash(this.dashResetter);\r\n          }\r\n        }\r\n      }\r\n      if (type !== 'st' && type !== 'gs') {\r\n        ctx.fill(currentStyle.r);\r\n      }\r\n      renderer.restore();\r\n    }\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.renderShape = function (parentTransform, items, data, isMain) {\r\n  var i;\r\n  var len = items.length - 1;\r\n  var groupTransform;\r\n  groupTransform = parentTransform;\r\n  for (i = len; i >= 0; i -= 1) {\r\n    if (items[i].ty === 'tr') {\r\n      groupTransform = data[i].transform;\r\n      this.renderShapeTransform(parentTransform, groupTransform);\r\n    } else if (items[i].ty === 'sh' || items[i].ty === 'el' || items[i].ty === 'rc' || items[i].ty === 'sr') {\r\n      this.renderPath(items[i], data[i]);\r\n    } else if (items[i].ty === 'fl') {\r\n      this.renderFill(items[i], data[i], groupTransform);\r\n    } else if (items[i].ty === 'st') {\r\n      this.renderStroke(items[i], data[i], groupTransform);\r\n    } else if (items[i].ty === 'gf' || items[i].ty === 'gs') {\r\n      this.renderGradientFill(items[i], data[i], groupTransform);\r\n    } else if (items[i].ty === 'gr') {\r\n      this.renderShape(groupTransform, items[i].it, data[i].it);\r\n    } else if (items[i].ty === 'tm') {\r\n      //\r\n    }\r\n  }\r\n  if (isMain) {\r\n    this.drawLayer();\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.renderStyledShape = function (styledShape, shape) {\r\n  if (this._isFirstFrame || shape._mdf || styledShape.transforms._mdf) {\r\n    var shapeNodes = styledShape.trNodes;\r\n    var paths = shape.paths;\r\n    var i;\r\n    var len;\r\n    var j;\r\n    var jLen = paths._length;\r\n    shapeNodes.length = 0;\r\n    var groupTransformMat = styledShape.transforms.finalTransform;\r\n    for (j = 0; j < jLen; j += 1) {\r\n      var pathNodes = paths.shapes[j];\r\n      if (pathNodes && pathNodes.v) {\r\n        len = pathNodes._length;\r\n        for (i = 1; i < len; i += 1) {\r\n          if (i === 1) {\r\n            shapeNodes.push({\r\n              t: 'm',\r\n              p: groupTransformMat.applyToPointArray(pathNodes.v[0][0], pathNodes.v[0][1], 0),\r\n            });\r\n          }\r\n          shapeNodes.push({\r\n            t: 'c',\r\n            pts: groupTransformMat.applyToTriplePoints(pathNodes.o[i - 1], pathNodes.i[i], pathNodes.v[i]),\r\n          });\r\n        }\r\n        if (len === 1) {\r\n          shapeNodes.push({\r\n            t: 'm',\r\n            p: groupTransformMat.applyToPointArray(pathNodes.v[0][0], pathNodes.v[0][1], 0),\r\n          });\r\n        }\r\n        if (pathNodes.c && len) {\r\n          shapeNodes.push({\r\n            t: 'c',\r\n            pts: groupTransformMat.applyToTriplePoints(pathNodes.o[i - 1], pathNodes.i[0], pathNodes.v[0]),\r\n          });\r\n          shapeNodes.push({\r\n            t: 'z',\r\n          });\r\n        }\r\n      }\r\n    }\r\n    styledShape.trNodes = shapeNodes;\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.renderPath = function (pathData, itemData) {\r\n  if (pathData.hd !== true && pathData._shouldRender) {\r\n    var i;\r\n    var len = itemData.styledShapes.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      this.renderStyledShape(itemData.styledShapes[i], itemData.sh);\r\n    }\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.renderFill = function (styleData, itemData, groupTransform) {\r\n  var styleElem = itemData.style;\r\n\r\n  if (itemData.c._mdf || this._isFirstFrame) {\r\n    styleElem.co = 'rgb('\r\n        + bmFloor(itemData.c.v[0]) + ','\r\n        + bmFloor(itemData.c.v[1]) + ','\r\n        + bmFloor(itemData.c.v[2]) + ')';\r\n  }\r\n  if (itemData.o._mdf || groupTransform._opMdf || this._isFirstFrame) {\r\n    styleElem.coOp = itemData.o.v * groupTransform.opacity;\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.renderGradientFill = function (styleData, itemData, groupTransform) {\r\n  var styleElem = itemData.style;\r\n  var grd;\r\n  if (!styleElem.grd || itemData.g._mdf || itemData.s._mdf || itemData.e._mdf || (styleData.t !== 1 && (itemData.h._mdf || itemData.a._mdf))) {\r\n    var ctx = this.globalData.canvasContext;\r\n    var pt1 = itemData.s.v;\r\n    var pt2 = itemData.e.v;\r\n    if (styleData.t === 1) {\r\n      grd = ctx.createLinearGradient(pt1[0], pt1[1], pt2[0], pt2[1]);\r\n    } else {\r\n      var rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\r\n      var ang = Math.atan2(pt2[1] - pt1[1], pt2[0] - pt1[0]);\r\n\r\n      var percent = itemData.h.v;\r\n      if (percent >= 1) {\r\n        percent = 0.99;\r\n      } else if (percent <= -1) {\r\n        percent = -0.99;\r\n      }\r\n      var dist = rad * percent;\r\n      var x = Math.cos(ang + itemData.a.v) * dist + pt1[0];\r\n      var y = Math.sin(ang + itemData.a.v) * dist + pt1[1];\r\n      grd = ctx.createRadialGradient(x, y, 0, pt1[0], pt1[1], rad);\r\n    }\r\n\r\n    var i;\r\n    var len = styleData.g.p;\r\n    var cValues = itemData.g.c;\r\n    var opacity = 1;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (itemData.g._hasOpacity && itemData.g._collapsable) {\r\n        opacity = itemData.g.o[i * 2 + 1];\r\n      }\r\n      grd.addColorStop(cValues[i * 4] / 100, 'rgba(' + cValues[i * 4 + 1] + ',' + cValues[i * 4 + 2] + ',' + cValues[i * 4 + 3] + ',' + opacity + ')');\r\n    }\r\n    styleElem.grd = grd;\r\n  }\r\n  styleElem.coOp = itemData.o.v * groupTransform.opacity;\r\n};\r\n\r\nCVShapeElement.prototype.renderStroke = function (styleData, itemData, groupTransform) {\r\n  var styleElem = itemData.style;\r\n  var d = itemData.d;\r\n  if (d && (d._mdf || this._isFirstFrame)) {\r\n    styleElem.da = d.dashArray;\r\n    styleElem.do = d.dashoffset[0];\r\n  }\r\n  if (itemData.c._mdf || this._isFirstFrame) {\r\n    styleElem.co = 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')';\r\n  }\r\n  if (itemData.o._mdf || groupTransform._opMdf || this._isFirstFrame) {\r\n    styleElem.coOp = itemData.o.v * groupTransform.opacity;\r\n  }\r\n  if (itemData.w._mdf || this._isFirstFrame) {\r\n    styleElem.wi = itemData.w.v;\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.destroy = function () {\r\n  this.shapesData = null;\r\n  this.globalData = null;\r\n  this.canvasContext = null;\r\n  this.stylesList.length = 0;\r\n  this.itemsData.length = 0;\r\n};\r\n\r\n/* global extendPrototype, BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement,\r\nSVGShapeElement, IImageElement */\r\n\r\nfunction CVSolidElement(data, globalData, comp) {\r\n  this.initElement(data, globalData, comp);\r\n}\r\nextendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement], CVSolidElement);\r\n\r\nCVSolidElement.prototype.initElement = SVGShapeElement.prototype.initElement;\r\nCVSolidElement.prototype.prepareFrame = IImageElement.prototype.prepareFrame;\r\n\r\nCVSolidElement.prototype.renderInnerContent = function () {\r\n  var ctx = this.canvasContext;\r\n  ctx.fillStyle = this.data.sc;\r\n  ctx.fillRect(0, 0, this.data.sw, this.data.sh);\r\n  //\r\n};\r\n\r\n/* global extendPrototype, BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement,\r\nRenderableElement, ITextElement, createTag, createSizedArray */\r\n\r\nfunction CVTextElement(data, globalData, comp) {\r\n  this.textSpans = [];\r\n  this.yOffset = 0;\r\n  this.fillColorAnim = false;\r\n  this.strokeColorAnim = false;\r\n  this.strokeWidthAnim = false;\r\n  this.stroke = false;\r\n  this.fill = false;\r\n  this.justifyOffset = 0;\r\n  this.currentRender = null;\r\n  this.renderType = 'canvas';\r\n  this.values = {\r\n    fill: 'rgba(0,0,0,0)',\r\n    stroke: 'rgba(0,0,0,0)',\r\n    sWidth: 0,\r\n    fValue: '',\r\n  };\r\n  this.initElement(data, globalData, comp);\r\n}\r\nextendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement, ITextElement], CVTextElement);\r\n\r\nCVTextElement.prototype.tHelper = createTag('canvas').getContext('2d');\r\n\r\nCVTextElement.prototype.buildNewText = function () {\r\n  var documentData = this.textProperty.currentData;\r\n  this.renderedLetters = createSizedArray(documentData.l ? documentData.l.length : 0);\r\n\r\n  var hasFill = false;\r\n  if (documentData.fc) {\r\n    hasFill = true;\r\n    this.values.fill = this.buildColor(documentData.fc);\r\n  } else {\r\n    this.values.fill = 'rgba(0,0,0,0)';\r\n  }\r\n  this.fill = hasFill;\r\n  var hasStroke = false;\r\n  if (documentData.sc) {\r\n    hasStroke = true;\r\n    this.values.stroke = this.buildColor(documentData.sc);\r\n    this.values.sWidth = documentData.sw;\r\n  }\r\n  var fontData = this.globalData.fontManager.getFontByName(documentData.f);\r\n  var i;\r\n  var len;\r\n  var letters = documentData.l;\r\n  var matrixHelper = this.mHelper;\r\n  this.stroke = hasStroke;\r\n  this.values.fValue = documentData.finalSize + 'px ' + this.globalData.fontManager.getFontByName(documentData.f).fFamily;\r\n  len = documentData.finalText.length;\r\n  // this.tHelper.font = this.values.fValue;\r\n  var charData;\r\n  var shapeData;\r\n  var k;\r\n  var kLen;\r\n  var shapes;\r\n  var j;\r\n  var jLen;\r\n  var pathNodes;\r\n  var commands;\r\n  var pathArr;\r\n  var singleShape = this.data.singleShape;\r\n  var trackingOffset = documentData.tr * 0.001 * documentData.finalSize;\r\n  var xPos = 0;\r\n  var yPos = 0;\r\n  var firstLine = true;\r\n  var cnt = 0;\r\n  for (i = 0; i < len; i += 1) {\r\n    charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\r\n    shapeData = (charData && charData.data) || {};\r\n    matrixHelper.reset();\r\n    if (singleShape && letters[i].n) {\r\n      xPos = -trackingOffset;\r\n      yPos += documentData.yOffset;\r\n      yPos += firstLine ? 1 : 0;\r\n      firstLine = false;\r\n    }\r\n\r\n    shapes = shapeData.shapes ? shapeData.shapes[0].it : [];\r\n    jLen = shapes.length;\r\n    matrixHelper.scale(documentData.finalSize / 100, documentData.finalSize / 100);\r\n    if (singleShape) {\r\n      this.applyTextPropertiesToMatrix(documentData, matrixHelper, letters[i].line, xPos, yPos);\r\n    }\r\n    commands = createSizedArray(jLen);\r\n    for (j = 0; j < jLen; j += 1) {\r\n      kLen = shapes[j].ks.k.i.length;\r\n      pathNodes = shapes[j].ks.k;\r\n      pathArr = [];\r\n      for (k = 1; k < kLen; k += 1) {\r\n        if (k === 1) {\r\n          pathArr.push(matrixHelper.applyToX(pathNodes.v[0][0], pathNodes.v[0][1], 0), matrixHelper.applyToY(pathNodes.v[0][0], pathNodes.v[0][1], 0));\r\n        }\r\n        pathArr.push(matrixHelper.applyToX(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToY(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToX(pathNodes.i[k][0], pathNodes.i[k][1], 0), matrixHelper.applyToY(pathNodes.i[k][0], pathNodes.i[k][1], 0), matrixHelper.applyToX(pathNodes.v[k][0], pathNodes.v[k][1], 0), matrixHelper.applyToY(pathNodes.v[k][0], pathNodes.v[k][1], 0));\r\n      }\r\n      pathArr.push(matrixHelper.applyToX(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToY(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToX(pathNodes.i[0][0], pathNodes.i[0][1], 0), matrixHelper.applyToY(pathNodes.i[0][0], pathNodes.i[0][1], 0), matrixHelper.applyToX(pathNodes.v[0][0], pathNodes.v[0][1], 0), matrixHelper.applyToY(pathNodes.v[0][0], pathNodes.v[0][1], 0));\r\n      commands[j] = pathArr;\r\n    }\r\n    if (singleShape) {\r\n      xPos += letters[i].l;\r\n      xPos += trackingOffset;\r\n    }\r\n    if (this.textSpans[cnt]) {\r\n      this.textSpans[cnt].elem = commands;\r\n    } else {\r\n      this.textSpans[cnt] = { elem: commands };\r\n    }\r\n    cnt += 1;\r\n  }\r\n};\r\n\r\nCVTextElement.prototype.renderInnerContent = function () {\r\n  var ctx = this.canvasContext;\r\n  ctx.font = this.values.fValue;\r\n  ctx.lineCap = 'butt';\r\n  ctx.lineJoin = 'miter';\r\n  ctx.miterLimit = 4;\r\n\r\n  if (!this.data.singleShape) {\r\n    this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\r\n  }\r\n\r\n  var i;\r\n  var len;\r\n  var j;\r\n  var jLen;\r\n  var k;\r\n  var kLen;\r\n  var renderedLetters = this.textAnimator.renderedLetters;\r\n\r\n  var letters = this.textProperty.currentData.l;\r\n\r\n  len = letters.length;\r\n  var renderedLetter;\r\n  var lastFill = null;\r\n  var lastStroke = null;\r\n  var lastStrokeW = null;\r\n  var commands;\r\n  var pathArr;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (!letters[i].n) {\r\n      renderedLetter = renderedLetters[i];\r\n      if (renderedLetter) {\r\n        this.globalData.renderer.save();\r\n        this.globalData.renderer.ctxTransform(renderedLetter.p);\r\n        this.globalData.renderer.ctxOpacity(renderedLetter.o);\r\n      }\r\n      if (this.fill) {\r\n        if (renderedLetter && renderedLetter.fc) {\r\n          if (lastFill !== renderedLetter.fc) {\r\n            lastFill = renderedLetter.fc;\r\n            ctx.fillStyle = renderedLetter.fc;\r\n          }\r\n        } else if (lastFill !== this.values.fill) {\r\n          lastFill = this.values.fill;\r\n          ctx.fillStyle = this.values.fill;\r\n        }\r\n        commands = this.textSpans[i].elem;\r\n        jLen = commands.length;\r\n        this.globalData.canvasContext.beginPath();\r\n        for (j = 0; j < jLen; j += 1) {\r\n          pathArr = commands[j];\r\n          kLen = pathArr.length;\r\n          this.globalData.canvasContext.moveTo(pathArr[0], pathArr[1]);\r\n          for (k = 2; k < kLen; k += 6) {\r\n            this.globalData.canvasContext.bezierCurveTo(pathArr[k], pathArr[k + 1], pathArr[k + 2], pathArr[k + 3], pathArr[k + 4], pathArr[k + 5]);\r\n          }\r\n        }\r\n        this.globalData.canvasContext.closePath();\r\n        this.globalData.canvasContext.fill();\r\n        /// ctx.fillText(this.textSpans[i].val,0,0);\r\n      }\r\n      if (this.stroke) {\r\n        if (renderedLetter && renderedLetter.sw) {\r\n          if (lastStrokeW !== renderedLetter.sw) {\r\n            lastStrokeW = renderedLetter.sw;\r\n            ctx.lineWidth = renderedLetter.sw;\r\n          }\r\n        } else if (lastStrokeW !== this.values.sWidth) {\r\n          lastStrokeW = this.values.sWidth;\r\n          ctx.lineWidth = this.values.sWidth;\r\n        }\r\n        if (renderedLetter && renderedLetter.sc) {\r\n          if (lastStroke !== renderedLetter.sc) {\r\n            lastStroke = renderedLetter.sc;\r\n            ctx.strokeStyle = renderedLetter.sc;\r\n          }\r\n        } else if (lastStroke !== this.values.stroke) {\r\n          lastStroke = this.values.stroke;\r\n          ctx.strokeStyle = this.values.stroke;\r\n        }\r\n        commands = this.textSpans[i].elem;\r\n        jLen = commands.length;\r\n        this.globalData.canvasContext.beginPath();\r\n        for (j = 0; j < jLen; j += 1) {\r\n          pathArr = commands[j];\r\n          kLen = pathArr.length;\r\n          this.globalData.canvasContext.moveTo(pathArr[0], pathArr[1]);\r\n          for (k = 2; k < kLen; k += 6) {\r\n            this.globalData.canvasContext.bezierCurveTo(pathArr[k], pathArr[k + 1], pathArr[k + 2], pathArr[k + 3], pathArr[k + 4], pathArr[k + 5]);\r\n          }\r\n        }\r\n        this.globalData.canvasContext.closePath();\r\n        this.globalData.canvasContext.stroke();\r\n        /// ctx.strokeText(letters[i].val,0,0);\r\n      }\r\n      if (renderedLetter) {\r\n        this.globalData.renderer.restore();\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nfunction CVEffects() {\r\n\r\n}\r\nCVEffects.prototype.renderFrame = function () {};\r\n\r\n/* global createTag, createNS, styleDiv, CVEffects, MaskElement, SVGBaseElement, HybridRenderer */\r\n\r\nfunction HBaseElement() {}\r\nHBaseElement.prototype = {\r\n  checkBlendMode: function () {},\r\n  initRendererElement: function () {\r\n    this.baseElement = createTag(this.data.tg || 'div');\r\n    if (this.data.hasMask) {\r\n      this.svgElement = createNS('svg');\r\n      this.layerElement = createNS('g');\r\n      this.maskedElement = this.layerElement;\r\n      this.svgElement.appendChild(this.layerElement);\r\n      this.baseElement.appendChild(this.svgElement);\r\n    } else {\r\n      this.layerElement = this.baseElement;\r\n    }\r\n    styleDiv(this.baseElement);\r\n  },\r\n  createContainerElements: function () {\r\n    this.renderableEffectsManager = new CVEffects(this);\r\n    this.transformedElement = this.baseElement;\r\n    this.maskedElement = this.layerElement;\r\n    if (this.data.ln) {\r\n      this.layerElement.setAttribute('id', this.data.ln);\r\n    }\r\n    if (this.data.cl) {\r\n      this.layerElement.setAttribute('class', this.data.cl);\r\n    }\r\n    if (this.data.bm !== 0) {\r\n      this.setBlendMode();\r\n    }\r\n  },\r\n  renderElement: function () {\r\n    var transformedElementStyle = this.transformedElement ? this.transformedElement.style : {};\r\n    if (this.finalTransform._matMdf) {\r\n      var matrixValue = this.finalTransform.mat.toCSS();\r\n      transformedElementStyle.transform = matrixValue;\r\n      transformedElementStyle.webkitTransform = matrixValue;\r\n    }\r\n    if (this.finalTransform._opMdf) {\r\n      transformedElementStyle.opacity = this.finalTransform.mProp.o.v;\r\n    }\r\n  },\r\n  renderFrame: function () {\r\n    // If it is exported as hidden (data.hd === true) no need to render\r\n    // If it is not visible no need to render\r\n    if (this.data.hd || this.hidden) {\r\n      return;\r\n    }\r\n    this.renderTransform();\r\n    this.renderRenderable();\r\n    this.renderElement();\r\n    this.renderInnerContent();\r\n    if (this._isFirstFrame) {\r\n      this._isFirstFrame = false;\r\n    }\r\n  },\r\n  destroy: function () {\r\n    this.layerElement = null;\r\n    this.transformedElement = null;\r\n    if (this.matteElement) {\r\n      this.matteElement = null;\r\n    }\r\n    if (this.maskManager) {\r\n      this.maskManager.destroy();\r\n      this.maskManager = null;\r\n    }\r\n  },\r\n  createRenderableComponents: function () {\r\n    this.maskManager = new MaskElement(this.data, this, this.globalData);\r\n  },\r\n  addEffects: function () {\r\n  },\r\n  setMatte: function () {},\r\n};\r\nHBaseElement.prototype.getBaseElement = SVGBaseElement.prototype.getBaseElement;\r\nHBaseElement.prototype.destroyBaseElement = HBaseElement.prototype.destroy;\r\nHBaseElement.prototype.buildElementParenting = HybridRenderer.prototype.buildElementParenting;\r\n\r\n/* global extendPrototype, BaseElement, TransformElement, HBaseElement, HierarchyElement, FrameElement,\r\nRenderableDOMElement, createNS, createTag */\r\n\r\nfunction HSolidElement(data, globalData, comp) {\r\n  this.initElement(data, globalData, comp);\r\n}\r\nextendPrototype([BaseElement, TransformElement, HBaseElement, HierarchyElement, FrameElement, RenderableDOMElement], HSolidElement);\r\n\r\nHSolidElement.prototype.createContent = function () {\r\n  var rect;\r\n  if (this.data.hasMask) {\r\n    rect = createNS('rect');\r\n    rect.setAttribute('width', this.data.sw);\r\n    rect.setAttribute('height', this.data.sh);\r\n    rect.setAttribute('fill', this.data.sc);\r\n    this.svgElement.setAttribute('width', this.data.sw);\r\n    this.svgElement.setAttribute('height', this.data.sh);\r\n  } else {\r\n    rect = createTag('div');\r\n    rect.style.width = this.data.sw + 'px';\r\n    rect.style.height = this.data.sh + 'px';\r\n    rect.style.backgroundColor = this.data.sc;\r\n  }\r\n  this.layerElement.appendChild(rect);\r\n};\r\n\r\n/* global createSizedArray, PropertyFactory, extendPrototype, HybridRenderer, ICompElement, HBaseElement */\r\n\r\nfunction HCompElement(data, globalData, comp) {\r\n  this.layers = data.layers;\r\n  this.supports3d = !data.hasMask;\r\n  this.completeLayers = false;\r\n  this.pendingElements = [];\r\n  this.elements = this.layers ? createSizedArray(this.layers.length) : [];\r\n  this.initElement(data, globalData, comp);\r\n  this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : { _placeholder: true };\r\n}\r\n\r\nextendPrototype([HybridRenderer, ICompElement, HBaseElement], HCompElement);\r\nHCompElement.prototype._createBaseContainerElements = HCompElement.prototype.createContainerElements;\r\n\r\nHCompElement.prototype.createContainerElements = function () {\r\n  this._createBaseContainerElements();\r\n  // divElement.style.clip = 'rect(0px, '+this.data.w+'px, '+this.data.h+'px, 0px)';\r\n  if (this.data.hasMask) {\r\n    this.svgElement.setAttribute('width', this.data.w);\r\n    this.svgElement.setAttribute('height', this.data.h);\r\n    this.transformedElement = this.baseElement;\r\n  } else {\r\n    this.transformedElement = this.layerElement;\r\n  }\r\n};\r\n\r\nHCompElement.prototype.addTo3dContainer = function (elem, pos) {\r\n  var j = 0;\r\n  var nextElement;\r\n  while (j < pos) {\r\n    if (this.elements[j] && this.elements[j].getBaseElement) {\r\n      nextElement = this.elements[j].getBaseElement();\r\n    }\r\n    j += 1;\r\n  }\r\n  if (nextElement) {\r\n    this.layerElement.insertBefore(elem, nextElement);\r\n  } else {\r\n    this.layerElement.appendChild(elem);\r\n  }\r\n};\r\n\r\n/* global createNS, extendPrototype, BaseElement, TransformElement, HSolidElement, SVGShapeElement, HBaseElement,\r\nHierarchyElement, FrameElement, RenderableElement, createNS, bmMin, bmSqrt, bmMin, bmMax, bmPow */\r\n\r\nfunction HShapeElement(data, globalData, comp) {\r\n  // List of drawable elements\r\n  this.shapes = [];\r\n  // Full shape data\r\n  this.shapesData = data.shapes;\r\n  // List of styles that will be applied to shapes\r\n  this.stylesList = [];\r\n  // List of modifiers that will be applied to shapes\r\n  this.shapeModifiers = [];\r\n  // List of items in shape tree\r\n  this.itemsData = [];\r\n  // List of items in previous shape tree\r\n  this.processedElements = [];\r\n  // List of animated components\r\n  this.animatedContents = [];\r\n  this.shapesContainer = createNS('g');\r\n  this.initElement(data, globalData, comp);\r\n  // Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\r\n  // List of elements that have been created\r\n  this.prevViewData = [];\r\n  this.currentBBox = {\r\n    x: 999999,\r\n    y: -999999,\r\n    h: 0,\r\n    w: 0,\r\n  };\r\n}\r\nextendPrototype([BaseElement, TransformElement, HSolidElement, SVGShapeElement, HBaseElement, HierarchyElement, FrameElement, RenderableElement], HShapeElement);\r\nHShapeElement.prototype._renderShapeFrame = HShapeElement.prototype.renderInnerContent;\r\n\r\nHShapeElement.prototype.createContent = function () {\r\n  var cont;\r\n  this.baseElement.style.fontSize = 0;\r\n  if (this.data.hasMask) {\r\n    this.layerElement.appendChild(this.shapesContainer);\r\n    cont = this.svgElement;\r\n  } else {\r\n    cont = createNS('svg');\r\n    var size = this.comp.data ? this.comp.data : this.globalData.compSize;\r\n    cont.setAttribute('width', size.w);\r\n    cont.setAttribute('height', size.h);\r\n    cont.appendChild(this.shapesContainer);\r\n    this.layerElement.appendChild(cont);\r\n  }\r\n\r\n  this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.shapesContainer, 0, [], true);\r\n  this.filterUniqueShapes();\r\n  this.shapeCont = cont;\r\n};\r\n\r\nHShapeElement.prototype.getTransformedPoint = function (transformers, point) {\r\n  var i;\r\n  var len = transformers.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    point = transformers[i].mProps.v.applyToPointArray(point[0], point[1], 0);\r\n  }\r\n  return point;\r\n};\r\n\r\nHShapeElement.prototype.calculateShapeBoundingBox = function (item, boundingBox) {\r\n  var shape = item.sh.v;\r\n  var transformers = item.transformers;\r\n  var i;\r\n  var len = shape._length;\r\n  var vPoint;\r\n  var oPoint;\r\n  var nextIPoint;\r\n  var nextVPoint;\r\n  if (len <= 1) {\r\n    return;\r\n  }\r\n  for (i = 0; i < len - 1; i += 1) {\r\n    vPoint = this.getTransformedPoint(transformers, shape.v[i]);\r\n    oPoint = this.getTransformedPoint(transformers, shape.o[i]);\r\n    nextIPoint = this.getTransformedPoint(transformers, shape.i[i + 1]);\r\n    nextVPoint = this.getTransformedPoint(transformers, shape.v[i + 1]);\r\n    this.checkBounds(vPoint, oPoint, nextIPoint, nextVPoint, boundingBox);\r\n  }\r\n  if (shape.c) {\r\n    vPoint = this.getTransformedPoint(transformers, shape.v[i]);\r\n    oPoint = this.getTransformedPoint(transformers, shape.o[i]);\r\n    nextIPoint = this.getTransformedPoint(transformers, shape.i[0]);\r\n    nextVPoint = this.getTransformedPoint(transformers, shape.v[0]);\r\n    this.checkBounds(vPoint, oPoint, nextIPoint, nextVPoint, boundingBox);\r\n  }\r\n};\r\n\r\nHShapeElement.prototype.checkBounds = function (vPoint, oPoint, nextIPoint, nextVPoint, boundingBox) {\r\n  this.getBoundsOfCurve(vPoint, oPoint, nextIPoint, nextVPoint);\r\n  var bounds = this.shapeBoundingBox;\r\n  boundingBox.x = bmMin(bounds.left, boundingBox.x);\r\n  boundingBox.xMax = bmMax(bounds.right, boundingBox.xMax);\r\n  boundingBox.y = bmMin(bounds.top, boundingBox.y);\r\n  boundingBox.yMax = bmMax(bounds.bottom, boundingBox.yMax);\r\n};\r\n\r\nHShapeElement.prototype.shapeBoundingBox = {\r\n  left: 0,\r\n  right: 0,\r\n  top: 0,\r\n  bottom: 0,\r\n};\r\n\r\nHShapeElement.prototype.tempBoundingBox = {\r\n  x: 0,\r\n  xMax: 0,\r\n  y: 0,\r\n  yMax: 0,\r\n  width: 0,\r\n  height: 0,\r\n};\r\n\r\nHShapeElement.prototype.getBoundsOfCurve = function (p0, p1, p2, p3) {\r\n  var bounds = [[p0[0], p3[0]], [p0[1], p3[1]]];\r\n\r\n  for (var a, b, c, t, b2ac, t1, t2, i = 0; i < 2; ++i) { // eslint-disable-line no-plusplus\r\n    b = 6 * p0[i] - 12 * p1[i] + 6 * p2[i];\r\n    a = -3 * p0[i] + 9 * p1[i] - 9 * p2[i] + 3 * p3[i];\r\n    c = 3 * p1[i] - 3 * p0[i];\r\n\r\n    b |= 0; // eslint-disable-line no-bitwise\r\n    a |= 0; // eslint-disable-line no-bitwise\r\n    c |= 0; // eslint-disable-line no-bitwise\r\n\r\n    if (a === 0 && b === 0) {\r\n      //\r\n    } else if (a === 0) {\r\n      t = -c / b;\r\n\r\n      if (t > 0 && t < 1) {\r\n        bounds[i].push(this.calculateF(t, p0, p1, p2, p3, i));\r\n      }\r\n    } else {\r\n      b2ac = b * b - 4 * c * a;\r\n\r\n      if (b2ac >= 0) {\r\n        t1 = (-b + bmSqrt(b2ac)) / (2 * a);\r\n        if (t1 > 0 && t1 < 1) bounds[i].push(this.calculateF(t1, p0, p1, p2, p3, i));\r\n        t2 = (-b - bmSqrt(b2ac)) / (2 * a);\r\n        if (t2 > 0 && t2 < 1) bounds[i].push(this.calculateF(t2, p0, p1, p2, p3, i));\r\n      }\r\n    }\r\n  }\r\n\r\n  this.shapeBoundingBox.left = bmMin.apply(null, bounds[0]);\r\n  this.shapeBoundingBox.top = bmMin.apply(null, bounds[1]);\r\n  this.shapeBoundingBox.right = bmMax.apply(null, bounds[0]);\r\n  this.shapeBoundingBox.bottom = bmMax.apply(null, bounds[1]);\r\n};\r\n\r\nHShapeElement.prototype.calculateF = function (t, p0, p1, p2, p3, i) {\r\n  return bmPow(1 - t, 3) * p0[i]\r\n        + 3 * bmPow(1 - t, 2) * t * p1[i]\r\n        + 3 * (1 - t) * bmPow(t, 2) * p2[i]\r\n        + bmPow(t, 3) * p3[i];\r\n};\r\n\r\nHShapeElement.prototype.calculateBoundingBox = function (itemsData, boundingBox) {\r\n  var i;\r\n  var len = itemsData.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (itemsData[i] && itemsData[i].sh) {\r\n      this.calculateShapeBoundingBox(itemsData[i], boundingBox);\r\n    } else if (itemsData[i] && itemsData[i].it) {\r\n      this.calculateBoundingBox(itemsData[i].it, boundingBox);\r\n    }\r\n  }\r\n};\r\n\r\nHShapeElement.prototype.currentBoxContains = function (box) {\r\n  return this.currentBBox.x <= box.x\r\n    && this.currentBBox.y <= box.y\r\n    && this.currentBBox.width + this.currentBBox.x >= box.x + box.width\r\n    && this.currentBBox.height + this.currentBBox.y >= box.y + box.height;\r\n};\r\n\r\nHShapeElement.prototype.renderInnerContent = function () {\r\n  this._renderShapeFrame();\r\n\r\n  if (!this.hidden && (this._isFirstFrame || this._mdf)) {\r\n    var tempBoundingBox = this.tempBoundingBox;\r\n    var max = 999999;\r\n    tempBoundingBox.x = max;\r\n    tempBoundingBox.xMax = -max;\r\n    tempBoundingBox.y = max;\r\n    tempBoundingBox.yMax = -max;\r\n    this.calculateBoundingBox(this.itemsData, tempBoundingBox);\r\n    tempBoundingBox.width = tempBoundingBox.xMax < tempBoundingBox.x ? 0 : tempBoundingBox.xMax - tempBoundingBox.x;\r\n    tempBoundingBox.height = tempBoundingBox.yMax < tempBoundingBox.y ? 0 : tempBoundingBox.yMax - tempBoundingBox.y;\r\n    // var tempBoundingBox = this.shapeCont.getBBox();\r\n    if (this.currentBoxContains(tempBoundingBox)) {\r\n      return;\r\n    }\r\n    var changed = false;\r\n    if (this.currentBBox.w !== tempBoundingBox.width) {\r\n      this.currentBBox.w = tempBoundingBox.width;\r\n      this.shapeCont.setAttribute('width', tempBoundingBox.width);\r\n      changed = true;\r\n    }\r\n    if (this.currentBBox.h !== tempBoundingBox.height) {\r\n      this.currentBBox.h = tempBoundingBox.height;\r\n      this.shapeCont.setAttribute('height', tempBoundingBox.height);\r\n      changed = true;\r\n    }\r\n    if (changed || this.currentBBox.x !== tempBoundingBox.x || this.currentBBox.y !== tempBoundingBox.y) {\r\n      this.currentBBox.w = tempBoundingBox.width;\r\n      this.currentBBox.h = tempBoundingBox.height;\r\n      this.currentBBox.x = tempBoundingBox.x;\r\n      this.currentBBox.y = tempBoundingBox.y;\r\n\r\n      this.shapeCont.setAttribute('viewBox', this.currentBBox.x + ' ' + this.currentBBox.y + ' ' + this.currentBBox.w + ' ' + this.currentBBox.h);\r\n      var shapeStyle = this.shapeCont.style;\r\n      var shapeTransform = 'translate(' + this.currentBBox.x + 'px,' + this.currentBBox.y + 'px)';\r\n      shapeStyle.transform = shapeTransform;\r\n      shapeStyle.webkitTransform = shapeTransform;\r\n    }\r\n  }\r\n};\r\n\r\n/* global extendPrototype, BaseElement, TransformElement, HBaseElement, HierarchyElement, FrameElement,\r\nRenderableDOMElement, ITextElement, createSizedArray, createTag, styleDiv, createNS, lineJoinEnum, lineCapEnum */\r\n\r\nfunction HTextElement(data, globalData, comp) {\r\n  this.textSpans = [];\r\n  this.textPaths = [];\r\n  this.currentBBox = {\r\n    x: 999999,\r\n    y: -999999,\r\n    h: 0,\r\n    w: 0,\r\n  };\r\n  this.renderType = 'svg';\r\n  this.isMasked = false;\r\n  this.initElement(data, globalData, comp);\r\n}\r\nextendPrototype([BaseElement, TransformElement, HBaseElement, HierarchyElement, FrameElement, RenderableDOMElement, ITextElement], HTextElement);\r\n\r\nHTextElement.prototype.createContent = function () {\r\n  this.isMasked = this.checkMasks();\r\n  if (this.isMasked) {\r\n    this.renderType = 'svg';\r\n    this.compW = this.comp.data.w;\r\n    this.compH = this.comp.data.h;\r\n    this.svgElement.setAttribute('width', this.compW);\r\n    this.svgElement.setAttribute('height', this.compH);\r\n    var g = createNS('g');\r\n    this.maskedElement.appendChild(g);\r\n    this.innerElem = g;\r\n  } else {\r\n    this.renderType = 'html';\r\n    this.innerElem = this.layerElement;\r\n  }\r\n\r\n  this.checkParenting();\r\n};\r\n\r\nHTextElement.prototype.buildNewText = function () {\r\n  var documentData = this.textProperty.currentData;\r\n  this.renderedLetters = createSizedArray(documentData.l ? documentData.l.length : 0);\r\n  var innerElemStyle = this.innerElem.style;\r\n  var textColor = documentData.fc ? this.buildColor(documentData.fc) : 'rgba(0,0,0,0)';\r\n  innerElemStyle.fill = textColor;\r\n  innerElemStyle.color = textColor;\r\n  if (documentData.sc) {\r\n    innerElemStyle.stroke = this.buildColor(documentData.sc);\r\n    innerElemStyle.strokeWidth = documentData.sw + 'px';\r\n  }\r\n  var fontData = this.globalData.fontManager.getFontByName(documentData.f);\r\n  if (!this.globalData.fontManager.chars) {\r\n    innerElemStyle.fontSize = documentData.finalSize + 'px';\r\n    innerElemStyle.lineHeight = documentData.finalSize + 'px';\r\n    if (fontData.fClass) {\r\n      this.innerElem.className = fontData.fClass;\r\n    } else {\r\n      innerElemStyle.fontFamily = fontData.fFamily;\r\n      var fWeight = documentData.fWeight;\r\n      var fStyle = documentData.fStyle;\r\n      innerElemStyle.fontStyle = fStyle;\r\n      innerElemStyle.fontWeight = fWeight;\r\n    }\r\n  }\r\n  var i;\r\n  var len;\r\n\r\n  var letters = documentData.l;\r\n  len = letters.length;\r\n  var tSpan;\r\n  var tParent;\r\n  var tCont;\r\n  var matrixHelper = this.mHelper;\r\n  var shapes;\r\n  var shapeStr = '';\r\n  var cnt = 0;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.globalData.fontManager.chars) {\r\n      if (!this.textPaths[cnt]) {\r\n        tSpan = createNS('path');\r\n        tSpan.setAttribute('stroke-linecap', lineCapEnum[1]);\r\n        tSpan.setAttribute('stroke-linejoin', lineJoinEnum[2]);\r\n        tSpan.setAttribute('stroke-miterlimit', '4');\r\n      } else {\r\n        tSpan = this.textPaths[cnt];\r\n      }\r\n      if (!this.isMasked) {\r\n        if (this.textSpans[cnt]) {\r\n          tParent = this.textSpans[cnt];\r\n          tCont = tParent.children[0];\r\n        } else {\r\n          tParent = createTag('div');\r\n          tParent.style.lineHeight = 0;\r\n          tCont = createNS('svg');\r\n          tCont.appendChild(tSpan);\r\n          styleDiv(tParent);\r\n        }\r\n      }\r\n    } else if (!this.isMasked) {\r\n      if (this.textSpans[cnt]) {\r\n        tParent = this.textSpans[cnt];\r\n        tSpan = this.textPaths[cnt];\r\n      } else {\r\n        tParent = createTag('span');\r\n        styleDiv(tParent);\r\n        tSpan = createTag('span');\r\n        styleDiv(tSpan);\r\n        tParent.appendChild(tSpan);\r\n      }\r\n    } else {\r\n      tSpan = this.textPaths[cnt] ? this.textPaths[cnt] : createNS('text');\r\n    }\r\n    // tSpan.setAttribute('visibility', 'hidden');\r\n    if (this.globalData.fontManager.chars) {\r\n      var charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\r\n      var shapeData;\r\n      if (charData) {\r\n        shapeData = charData.data;\r\n      } else {\r\n        shapeData = null;\r\n      }\r\n      matrixHelper.reset();\r\n      if (shapeData && shapeData.shapes) {\r\n        shapes = shapeData.shapes[0].it;\r\n        matrixHelper.scale(documentData.finalSize / 100, documentData.finalSize / 100);\r\n        shapeStr = this.createPathShape(matrixHelper, shapes);\r\n        tSpan.setAttribute('d', shapeStr);\r\n      }\r\n      if (!this.isMasked) {\r\n        this.innerElem.appendChild(tParent);\r\n        if (shapeData && shapeData.shapes) {\r\n          // document.body.appendChild is needed to get exact measure of shape\r\n          document.body.appendChild(tCont);\r\n          var boundingBox = tCont.getBBox();\r\n          tCont.setAttribute('width', boundingBox.width + 2);\r\n          tCont.setAttribute('height', boundingBox.height + 2);\r\n          tCont.setAttribute('viewBox', (boundingBox.x - 1) + ' ' + (boundingBox.y - 1) + ' ' + (boundingBox.width + 2) + ' ' + (boundingBox.height + 2));\r\n          var tContStyle = tCont.style;\r\n          var tContTranslation = 'translate(' + (boundingBox.x - 1) + 'px,' + (boundingBox.y - 1) + 'px)';\r\n          tContStyle.transform = tContTranslation;\r\n          tContStyle.webkitTransform = tContTranslation;\r\n\r\n          letters[i].yOffset = boundingBox.y - 1;\r\n        } else {\r\n          tCont.setAttribute('width', 1);\r\n          tCont.setAttribute('height', 1);\r\n        }\r\n        tParent.appendChild(tCont);\r\n      } else {\r\n        this.innerElem.appendChild(tSpan);\r\n      }\r\n    } else {\r\n      tSpan.textContent = letters[i].val;\r\n      tSpan.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');\r\n      if (!this.isMasked) {\r\n        this.innerElem.appendChild(tParent);\r\n        //\r\n        var tStyle = tSpan.style;\r\n        var tSpanTranslation = 'translate3d(0,' + -documentData.finalSize / 1.2 + 'px,0)';\r\n        tStyle.transform = tSpanTranslation;\r\n        tStyle.webkitTransform = tSpanTranslation;\r\n      } else {\r\n        this.innerElem.appendChild(tSpan);\r\n      }\r\n    }\r\n    //\r\n    if (!this.isMasked) {\r\n      this.textSpans[cnt] = tParent;\r\n    } else {\r\n      this.textSpans[cnt] = tSpan;\r\n    }\r\n    this.textSpans[cnt].style.display = 'block';\r\n    this.textPaths[cnt] = tSpan;\r\n    cnt += 1;\r\n  }\r\n  while (cnt < this.textSpans.length) {\r\n    this.textSpans[cnt].style.display = 'none';\r\n    cnt += 1;\r\n  }\r\n};\r\n\r\nHTextElement.prototype.renderInnerContent = function () {\r\n  var svgStyle;\r\n  if (this.data.singleShape) {\r\n    if (!this._isFirstFrame && !this.lettersChangedFlag) {\r\n      return;\r\n    } if (this.isMasked && this.finalTransform._matMdf) {\r\n      // Todo Benchmark if using this is better than getBBox\r\n      this.svgElement.setAttribute('viewBox', -this.finalTransform.mProp.p.v[0] + ' ' + -this.finalTransform.mProp.p.v[1] + ' ' + this.compW + ' ' + this.compH);\r\n      svgStyle = this.svgElement.style;\r\n      var translation = 'translate(' + -this.finalTransform.mProp.p.v[0] + 'px,' + -this.finalTransform.mProp.p.v[1] + 'px)';\r\n      svgStyle.transform = translation;\r\n      svgStyle.webkitTransform = translation;\r\n    }\r\n  }\r\n\r\n  this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\r\n  if (!this.lettersChangedFlag && !this.textAnimator.lettersChangedFlag) {\r\n    return;\r\n  }\r\n  var i;\r\n  var len;\r\n  var count = 0;\r\n  var renderedLetters = this.textAnimator.renderedLetters;\r\n\r\n  var letters = this.textProperty.currentData.l;\r\n\r\n  len = letters.length;\r\n  var renderedLetter;\r\n  var textSpan;\r\n  var textPath;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (letters[i].n) {\r\n      count += 1;\r\n    } else {\r\n      textSpan = this.textSpans[i];\r\n      textPath = this.textPaths[i];\r\n      renderedLetter = renderedLetters[count];\r\n      count += 1;\r\n      if (renderedLetter._mdf.m) {\r\n        if (!this.isMasked) {\r\n          textSpan.style.webkitTransform = renderedLetter.m;\r\n          textSpan.style.transform = renderedLetter.m;\r\n        } else {\r\n          textSpan.setAttribute('transform', renderedLetter.m);\r\n        }\r\n      }\r\n      /// /textSpan.setAttribute('opacity',renderedLetter.o);\r\n      textSpan.style.opacity = renderedLetter.o;\r\n      if (renderedLetter.sw && renderedLetter._mdf.sw) {\r\n        textPath.setAttribute('stroke-width', renderedLetter.sw);\r\n      }\r\n      if (renderedLetter.sc && renderedLetter._mdf.sc) {\r\n        textPath.setAttribute('stroke', renderedLetter.sc);\r\n      }\r\n      if (renderedLetter.fc && renderedLetter._mdf.fc) {\r\n        textPath.setAttribute('fill', renderedLetter.fc);\r\n        textPath.style.color = renderedLetter.fc;\r\n      }\r\n    }\r\n  }\r\n\r\n  if (this.innerElem.getBBox && !this.hidden && (this._isFirstFrame || this._mdf)) {\r\n    var boundingBox = this.innerElem.getBBox();\r\n\r\n    if (this.currentBBox.w !== boundingBox.width) {\r\n      this.currentBBox.w = boundingBox.width;\r\n      this.svgElement.setAttribute('width', boundingBox.width);\r\n    }\r\n    if (this.currentBBox.h !== boundingBox.height) {\r\n      this.currentBBox.h = boundingBox.height;\r\n      this.svgElement.setAttribute('height', boundingBox.height);\r\n    }\r\n\r\n    var margin = 1;\r\n    if (this.currentBBox.w !== (boundingBox.width + margin * 2) || this.currentBBox.h !== (boundingBox.height + margin * 2) || this.currentBBox.x !== (boundingBox.x - margin) || this.currentBBox.y !== (boundingBox.y - margin)) {\r\n      this.currentBBox.w = boundingBox.width + margin * 2;\r\n      this.currentBBox.h = boundingBox.height + margin * 2;\r\n      this.currentBBox.x = boundingBox.x - margin;\r\n      this.currentBBox.y = boundingBox.y - margin;\r\n\r\n      this.svgElement.setAttribute('viewBox', this.currentBBox.x + ' ' + this.currentBBox.y + ' ' + this.currentBBox.w + ' ' + this.currentBBox.h);\r\n      svgStyle = this.svgElement.style;\r\n      var svgTransform = 'translate(' + this.currentBBox.x + 'px,' + this.currentBBox.y + 'px)';\r\n      svgStyle.transform = svgTransform;\r\n      svgStyle.webkitTransform = svgTransform;\r\n    }\r\n  }\r\n};\r\n\r\n/* global extendPrototype, BaseElement, TransformElement, HBaseElement, HSolidElement, HierarchyElement,\r\nFrameElement, RenderableElement, createNS */\r\n\r\nfunction HImageElement(data, globalData, comp) {\r\n  this.assetData = globalData.getAssetData(data.refId);\r\n  this.initElement(data, globalData, comp);\r\n}\r\n\r\nextendPrototype([BaseElement, TransformElement, HBaseElement, HSolidElement, HierarchyElement, FrameElement, RenderableElement], HImageElement);\r\n\r\nHImageElement.prototype.createContent = function () {\r\n  var assetPath = this.globalData.getAssetsPath(this.assetData);\r\n  var img = new Image();\r\n\r\n  if (this.data.hasMask) {\r\n    this.imageElem = createNS('image');\r\n    this.imageElem.setAttribute('width', this.assetData.w + 'px');\r\n    this.imageElem.setAttribute('height', this.assetData.h + 'px');\r\n    this.imageElem.setAttributeNS('http://www.w3.org/1999/xlink', 'href', assetPath);\r\n    this.layerElement.appendChild(this.imageElem);\r\n    this.baseElement.setAttribute('width', this.assetData.w);\r\n    this.baseElement.setAttribute('height', this.assetData.h);\r\n  } else {\r\n    this.layerElement.appendChild(img);\r\n  }\r\n  img.crossOrigin = 'anonymous';\r\n  img.src = assetPath;\r\n  if (this.data.ln) {\r\n    this.baseElement.setAttribute('id', this.data.ln);\r\n  }\r\n};\r\n\r\n/* global PropertyFactory, degToRads, Matrix, extendPrototype, BaseElement, FrameElement, HierarchyElement */\r\n\r\nfunction HCameraElement(data, globalData, comp) {\r\n  this.initFrame();\r\n  this.initBaseData(data, globalData, comp);\r\n  this.initHierarchy();\r\n  var getProp = PropertyFactory.getProp;\r\n  this.pe = getProp(this, data.pe, 0, 0, this);\r\n  if (data.ks.p.s) {\r\n    this.px = getProp(this, data.ks.p.x, 1, 0, this);\r\n    this.py = getProp(this, data.ks.p.y, 1, 0, this);\r\n    this.pz = getProp(this, data.ks.p.z, 1, 0, this);\r\n  } else {\r\n    this.p = getProp(this, data.ks.p, 1, 0, this);\r\n  }\r\n  if (data.ks.a) {\r\n    this.a = getProp(this, data.ks.a, 1, 0, this);\r\n  }\r\n  if (data.ks.or.k.length && data.ks.or.k[0].to) {\r\n    var i;\r\n    var len = data.ks.or.k.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      data.ks.or.k[i].to = null;\r\n      data.ks.or.k[i].ti = null;\r\n    }\r\n  }\r\n  this.or = getProp(this, data.ks.or, 1, degToRads, this);\r\n  this.or.sh = true;\r\n  this.rx = getProp(this, data.ks.rx, 0, degToRads, this);\r\n  this.ry = getProp(this, data.ks.ry, 0, degToRads, this);\r\n  this.rz = getProp(this, data.ks.rz, 0, degToRads, this);\r\n  this.mat = new Matrix();\r\n  this._prevMat = new Matrix();\r\n  this._isFirstFrame = true;\r\n\r\n  // TODO: find a better way to make the HCamera element to be compatible with the LayerInterface and TransformInterface.\r\n  this.finalTransform = {\r\n    mProp: this,\r\n  };\r\n}\r\nextendPrototype([BaseElement, FrameElement, HierarchyElement], HCameraElement);\r\n\r\nHCameraElement.prototype.setup = function () {\r\n  var i;\r\n  var len = this.comp.threeDElements.length;\r\n  var comp;\r\n  var perspectiveStyle;\r\n  var containerStyle;\r\n  for (i = 0; i < len; i += 1) {\r\n    // [perspectiveElem,container]\r\n    comp = this.comp.threeDElements[i];\r\n    if (comp.type === '3d') {\r\n      perspectiveStyle = comp.perspectiveElem.style;\r\n      containerStyle = comp.container.style;\r\n      var perspective = this.pe.v + 'px';\r\n      var origin = '0px 0px 0px';\r\n      var matrix = 'matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)';\r\n      perspectiveStyle.perspective = perspective;\r\n      perspectiveStyle.webkitPerspective = perspective;\r\n      containerStyle.transformOrigin = origin;\r\n      containerStyle.mozTransformOrigin = origin;\r\n      containerStyle.webkitTransformOrigin = origin;\r\n      perspectiveStyle.transform = matrix;\r\n      perspectiveStyle.webkitTransform = matrix;\r\n    }\r\n  }\r\n};\r\n\r\nHCameraElement.prototype.createElements = function () {\r\n};\r\n\r\nHCameraElement.prototype.hide = function () {\r\n};\r\n\r\nHCameraElement.prototype.renderFrame = function () {\r\n  var _mdf = this._isFirstFrame;\r\n  var i;\r\n  var len;\r\n  if (this.hierarchy) {\r\n    len = this.hierarchy.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      _mdf = this.hierarchy[i].finalTransform.mProp._mdf || _mdf;\r\n    }\r\n  }\r\n  if (_mdf || this.pe._mdf || (this.p && this.p._mdf) || (this.px && (this.px._mdf || this.py._mdf || this.pz._mdf)) || this.rx._mdf || this.ry._mdf || this.rz._mdf || this.or._mdf || (this.a && this.a._mdf)) {\r\n    this.mat.reset();\r\n\r\n    if (this.hierarchy) {\r\n      len = this.hierarchy.length - 1;\r\n      for (i = len; i >= 0; i -= 1) {\r\n        var mTransf = this.hierarchy[i].finalTransform.mProp;\r\n        this.mat.translate(-mTransf.p.v[0], -mTransf.p.v[1], mTransf.p.v[2]);\r\n        this.mat.rotateX(-mTransf.or.v[0]).rotateY(-mTransf.or.v[1]).rotateZ(mTransf.or.v[2]);\r\n        this.mat.rotateX(-mTransf.rx.v).rotateY(-mTransf.ry.v).rotateZ(mTransf.rz.v);\r\n        this.mat.scale(1 / mTransf.s.v[0], 1 / mTransf.s.v[1], 1 / mTransf.s.v[2]);\r\n        this.mat.translate(mTransf.a.v[0], mTransf.a.v[1], mTransf.a.v[2]);\r\n      }\r\n    }\r\n    if (this.p) {\r\n      this.mat.translate(-this.p.v[0], -this.p.v[1], this.p.v[2]);\r\n    } else {\r\n      this.mat.translate(-this.px.v, -this.py.v, this.pz.v);\r\n    }\r\n    if (this.a) {\r\n      var diffVector;\r\n      if (this.p) {\r\n        diffVector = [this.p.v[0] - this.a.v[0], this.p.v[1] - this.a.v[1], this.p.v[2] - this.a.v[2]];\r\n      } else {\r\n        diffVector = [this.px.v - this.a.v[0], this.py.v - this.a.v[1], this.pz.v - this.a.v[2]];\r\n      }\r\n      var mag = Math.sqrt(Math.pow(diffVector[0], 2) + Math.pow(diffVector[1], 2) + Math.pow(diffVector[2], 2));\r\n      // var lookDir = getNormalizedPoint(getDiffVector(this.a.v,this.p.v));\r\n      var lookDir = [diffVector[0] / mag, diffVector[1] / mag, diffVector[2] / mag];\r\n      var lookLengthOnXZ = Math.sqrt(lookDir[2] * lookDir[2] + lookDir[0] * lookDir[0]);\r\n      var mRotationX = (Math.atan2(lookDir[1], lookLengthOnXZ));\r\n      var mRotationY = (Math.atan2(lookDir[0], -lookDir[2]));\r\n      this.mat.rotateY(mRotationY).rotateX(-mRotationX);\r\n    }\r\n    this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v);\r\n    this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]);\r\n    this.mat.translate(this.globalData.compSize.w / 2, this.globalData.compSize.h / 2, 0);\r\n    this.mat.translate(0, 0, this.pe.v);\r\n\r\n    var hasMatrixChanged = !this._prevMat.equals(this.mat);\r\n    if ((hasMatrixChanged || this.pe._mdf) && this.comp.threeDElements) {\r\n      len = this.comp.threeDElements.length;\r\n      var comp;\r\n      var perspectiveStyle;\r\n      var containerStyle;\r\n      for (i = 0; i < len; i += 1) {\r\n        comp = this.comp.threeDElements[i];\r\n        if (comp.type === '3d') {\r\n          if (hasMatrixChanged) {\r\n            var matValue = this.mat.toCSS();\r\n            containerStyle = comp.container.style;\r\n            containerStyle.transform = matValue;\r\n            containerStyle.webkitTransform = matValue;\r\n          }\r\n          if (this.pe._mdf) {\r\n            perspectiveStyle = comp.perspectiveElem.style;\r\n            perspectiveStyle.perspective = this.pe.v + 'px';\r\n            perspectiveStyle.webkitPerspective = this.pe.v + 'px';\r\n          }\r\n        }\r\n      }\r\n      this.mat.clone(this._prevMat);\r\n    }\r\n  }\r\n  this._isFirstFrame = false;\r\n};\r\n\r\nHCameraElement.prototype.prepareFrame = function (num) {\r\n  this.prepareProperties(num, true);\r\n};\r\n\r\nHCameraElement.prototype.destroy = function () {\r\n};\r\nHCameraElement.prototype.getBaseElement = function () { return null; };\r\n\r\nfunction HEffects() {\r\n}\r\nHEffects.prototype.renderFrame = function () {};\r\n\r\n/* global createTag, AnimationItem */\r\n/* exported animationManager */\r\n\r\nvar animationManager = (function () {\r\n  var moduleOb = {};\r\n  var registeredAnimations = [];\r\n  var initTime = 0;\r\n  var len = 0;\r\n  var playingAnimationsNum = 0;\r\n  var _stopped = true;\r\n  var _isFrozen = false;\r\n\r\n  function removeElement(ev) {\r\n    var i = 0;\r\n    var animItem = ev.target;\r\n    while (i < len) {\r\n      if (registeredAnimations[i].animation === animItem) {\r\n        registeredAnimations.splice(i, 1);\r\n        i -= 1;\r\n        len -= 1;\r\n        if (!animItem.isPaused) {\r\n          subtractPlayingCount();\r\n        }\r\n      }\r\n      i += 1;\r\n    }\r\n  }\r\n\r\n  function registerAnimation(element, animationData) {\r\n    if (!element) {\r\n      return null;\r\n    }\r\n    var i = 0;\r\n    while (i < len) {\r\n      if (registeredAnimations[i].elem === element && registeredAnimations[i].elem !== null) {\r\n        return registeredAnimations[i].animation;\r\n      }\r\n      i += 1;\r\n    }\r\n    var animItem = new AnimationItem();\r\n    setupAnimation(animItem, element);\r\n    animItem.setData(element, animationData);\r\n    return animItem;\r\n  }\r\n\r\n  function getRegisteredAnimations() {\r\n    var i;\r\n    var lenAnims = registeredAnimations.length;\r\n    var animations = [];\r\n    for (i = 0; i < lenAnims; i += 1) {\r\n      animations.push(registeredAnimations[i].animation);\r\n    }\r\n    return animations;\r\n  }\r\n\r\n  function addPlayingCount() {\r\n    playingAnimationsNum += 1;\r\n    activate();\r\n  }\r\n\r\n  function subtractPlayingCount() {\r\n    playingAnimationsNum -= 1;\r\n  }\r\n\r\n  function setupAnimation(animItem, element) {\r\n    animItem.addEventListener('destroy', removeElement);\r\n    animItem.addEventListener('_active', addPlayingCount);\r\n    animItem.addEventListener('_idle', subtractPlayingCount);\r\n    registeredAnimations.push({ elem: element, animation: animItem });\r\n    len += 1;\r\n  }\r\n\r\n  function loadAnimation(params) {\r\n    var animItem = new AnimationItem();\r\n    setupAnimation(animItem, null);\r\n    animItem.setParams(params);\r\n    return animItem;\r\n  }\r\n\r\n  function setSpeed(val, animation) {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.setSpeed(val, animation);\r\n    }\r\n  }\r\n\r\n  function setDirection(val, animation) {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.setDirection(val, animation);\r\n    }\r\n  }\r\n\r\n  function play(animation) {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.play(animation);\r\n    }\r\n  }\r\n  function resume(nowTime) {\r\n    var elapsedTime = nowTime - initTime;\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.advanceTime(elapsedTime);\r\n    }\r\n    initTime = nowTime;\r\n    if (playingAnimationsNum && !_isFrozen) {\r\n      window.requestAnimationFrame(resume);\r\n    } else {\r\n      _stopped = true;\r\n    }\r\n  }\r\n\r\n  function first(nowTime) {\r\n    initTime = nowTime;\r\n    window.requestAnimationFrame(resume);\r\n  }\r\n\r\n  function pause(animation) {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.pause(animation);\r\n    }\r\n  }\r\n\r\n  function goToAndStop(value, isFrame, animation) {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.goToAndStop(value, isFrame, animation);\r\n    }\r\n  }\r\n\r\n  function stop(animation) {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.stop(animation);\r\n    }\r\n  }\r\n\r\n  function togglePause(animation) {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.togglePause(animation);\r\n    }\r\n  }\r\n\r\n  function destroy(animation) {\r\n    var i;\r\n    for (i = (len - 1); i >= 0; i -= 1) {\r\n      registeredAnimations[i].animation.destroy(animation);\r\n    }\r\n  }\r\n\r\n  function searchAnimations(animationData, standalone, renderer) {\r\n    var animElements = [].concat([].slice.call(document.getElementsByClassName('lottie')),\r\n      [].slice.call(document.getElementsByClassName('bodymovin')));\r\n    var i;\r\n    var lenAnims = animElements.length;\r\n    for (i = 0; i < lenAnims; i += 1) {\r\n      if (renderer) {\r\n        animElements[i].setAttribute('data-bm-type', renderer);\r\n      }\r\n      registerAnimation(animElements[i], animationData);\r\n    }\r\n    if (standalone && lenAnims === 0) {\r\n      if (!renderer) {\r\n        renderer = 'svg';\r\n      }\r\n      var body = document.getElementsByTagName('body')[0];\r\n      body.innerText = '';\r\n      var div = createTag('div');\r\n      div.style.width = '100%';\r\n      div.style.height = '100%';\r\n      div.setAttribute('data-bm-type', renderer);\r\n      body.appendChild(div);\r\n      registerAnimation(div, animationData);\r\n    }\r\n  }\r\n\r\n  function resize() {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.resize();\r\n    }\r\n  }\r\n\r\n  function activate() {\r\n    if (!_isFrozen && playingAnimationsNum) {\r\n      if (_stopped) {\r\n        window.requestAnimationFrame(first);\r\n        _stopped = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  function freeze() {\r\n    _isFrozen = true;\r\n  }\r\n\r\n  function unfreeze() {\r\n    _isFrozen = false;\r\n    activate();\r\n  }\r\n\r\n  function setVolume(val, animation) {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.setVolume(val, animation);\r\n    }\r\n  }\r\n\r\n  function mute(animation) {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.mute(animation);\r\n    }\r\n  }\r\n\r\n  function unmute(animation) {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.unmute(animation);\r\n    }\r\n  }\r\n\r\n  moduleOb.registerAnimation = registerAnimation;\r\n  moduleOb.loadAnimation = loadAnimation;\r\n  moduleOb.setSpeed = setSpeed;\r\n  moduleOb.setDirection = setDirection;\r\n  moduleOb.play = play;\r\n  moduleOb.pause = pause;\r\n  moduleOb.stop = stop;\r\n  moduleOb.togglePause = togglePause;\r\n  moduleOb.searchAnimations = searchAnimations;\r\n  moduleOb.resize = resize;\r\n  // moduleOb.start = start;\r\n  moduleOb.goToAndStop = goToAndStop;\r\n  moduleOb.destroy = destroy;\r\n  moduleOb.freeze = freeze;\r\n  moduleOb.unfreeze = unfreeze;\r\n  moduleOb.setVolume = setVolume;\r\n  moduleOb.mute = mute;\r\n  moduleOb.unmute = unmute;\r\n  moduleOb.getRegisteredAnimations = getRegisteredAnimations;\r\n  return moduleOb;\r\n}());\r\n\r\n/* global createElementID, subframeEnabled, ProjectInterface, ImagePreloader, audioControllerFactory, extendPrototype, BaseEvent,\r\nCanvasRenderer, SVGRenderer, HybridRenderer, dataManager, expressionsPlugin, BMEnterFrameEvent, BMCompleteLoopEvent,\r\nBMCompleteEvent, BMSegmentStartEvent, BMDestroyEvent, BMEnterFrameEvent, BMCompleteLoopEvent, BMCompleteEvent, BMSegmentStartEvent,\r\nBMDestroyEvent, BMRenderFrameErrorEvent, BMConfigErrorEvent, markerParser */\r\n\r\nvar AnimationItem = function () {\r\n  this._cbs = [];\r\n  this.name = '';\r\n  this.path = '';\r\n  this.isLoaded = false;\r\n  this.currentFrame = 0;\r\n  this.currentRawFrame = 0;\r\n  this.firstFrame = 0;\r\n  this.totalFrames = 0;\r\n  this.frameRate = 0;\r\n  this.frameMult = 0;\r\n  this.playSpeed = 1;\r\n  this.playDirection = 1;\r\n  this.playCount = 0;\r\n  this.animationData = {};\r\n  this.assets = [];\r\n  this.isPaused = true;\r\n  this.autoplay = false;\r\n  this.loop = true;\r\n  this.renderer = null;\r\n  this.animationID = createElementID();\r\n  this.assetsPath = '';\r\n  this.timeCompleted = 0;\r\n  this.segmentPos = 0;\r\n  this.isSubframeEnabled = subframeEnabled;\r\n  this.segments = [];\r\n  this._idle = true;\r\n  this._completedLoop = false;\r\n  this.projectInterface = ProjectInterface();\r\n  this.imagePreloader = new ImagePreloader();\r\n  this.audioController = audioControllerFactory();\r\n  this.markers = [];\r\n  this.configAnimation = this.configAnimation.bind(this);\r\n  this.onSetupError = this.onSetupError.bind(this);\r\n  this.onSegmentComplete = this.onSegmentComplete.bind(this);\r\n};\r\n\r\nextendPrototype([BaseEvent], AnimationItem);\r\n\r\nAnimationItem.prototype.setParams = function (params) {\r\n  if (params.wrapper || params.container) {\r\n    this.wrapper = params.wrapper || params.container;\r\n  }\r\n  var animType = 'svg';\r\n  if (params.animType) {\r\n    animType = params.animType;\r\n  } else if (params.renderer) {\r\n    animType = params.renderer;\r\n  }\r\n  switch (animType) {\r\n    case 'canvas':\r\n      this.renderer = new CanvasRenderer(this, params.rendererSettings);\r\n      break;\r\n    case 'svg':\r\n      this.renderer = new SVGRenderer(this, params.rendererSettings);\r\n      break;\r\n    default:\r\n      this.renderer = new HybridRenderer(this, params.rendererSettings);\r\n      break;\r\n  }\r\n  this.imagePreloader.setCacheType(animType, this.renderer.globalData.defs);\r\n  this.renderer.setProjectInterface(this.projectInterface);\r\n  this.animType = animType;\r\n  if (params.loop === ''\r\n        || params.loop === null\r\n        || params.loop === undefined\r\n        || params.loop === true) {\r\n    this.loop = true;\r\n  } else if (params.loop === false) {\r\n    this.loop = false;\r\n  } else {\r\n    this.loop = parseInt(params.loop, 10);\r\n  }\r\n  this.autoplay = 'autoplay' in params ? params.autoplay : true;\r\n  this.name = params.name ? params.name : '';\r\n  this.autoloadSegments = Object.prototype.hasOwnProperty.call(params, 'autoloadSegments') ? params.autoloadSegments : true;\r\n  this.assetsPath = params.assetsPath;\r\n  this.initialSegment = params.initialSegment;\r\n  if (params.audioFactory) {\r\n    this.audioController.setAudioFactory(params.audioFactory);\r\n  }\r\n  if (params.animationData) {\r\n    this.setupAnimation(params.animationData);\r\n  } else if (params.path) {\r\n    if (params.path.lastIndexOf('\\\\') !== -1) {\r\n      this.path = params.path.substr(0, params.path.lastIndexOf('\\\\') + 1);\r\n    } else {\r\n      this.path = params.path.substr(0, params.path.lastIndexOf('/') + 1);\r\n    }\r\n    this.fileName = params.path.substr(params.path.lastIndexOf('/') + 1);\r\n    this.fileName = this.fileName.substr(0, this.fileName.lastIndexOf('.json'));\r\n    dataManager.loadAnimation(\r\n      params.path,\r\n      this.configAnimation,\r\n      this.onSetupError\r\n    );\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.onSetupError = function () {\r\n  this.trigger('data_failed');\r\n};\r\n\r\nAnimationItem.prototype.setupAnimation = function (data) {\r\n  dataManager.completeAnimation(\r\n    data,\r\n    this.configAnimation\r\n  );\r\n};\r\n\r\nAnimationItem.prototype.setData = function (wrapper, animationData) {\r\n  if (animationData) {\r\n    if (typeof animationData !== 'object') {\r\n      animationData = JSON.parse(animationData);\r\n    }\r\n  }\r\n  var params = {\r\n    wrapper: wrapper,\r\n    animationData: animationData,\r\n  };\r\n  var wrapperAttributes = wrapper.attributes;\r\n\r\n  params.path = wrapperAttributes.getNamedItem('data-animation-path') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-animation-path').value\r\n    : wrapperAttributes.getNamedItem('data-bm-path') // eslint-disable-line no-nested-ternary\r\n      ? wrapperAttributes.getNamedItem('data-bm-path').value\r\n      : wrapperAttributes.getNamedItem('bm-path')\r\n        ? wrapperAttributes.getNamedItem('bm-path').value\r\n        : '';\r\n  params.animType = wrapperAttributes.getNamedItem('data-anim-type') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-anim-type').value\r\n    : wrapperAttributes.getNamedItem('data-bm-type') // eslint-disable-line no-nested-ternary\r\n      ? wrapperAttributes.getNamedItem('data-bm-type').value\r\n      : wrapperAttributes.getNamedItem('bm-type') // eslint-disable-line no-nested-ternary\r\n        ? wrapperAttributes.getNamedItem('bm-type').value\r\n        : wrapperAttributes.getNamedItem('data-bm-renderer') // eslint-disable-line no-nested-ternary\r\n          ? wrapperAttributes.getNamedItem('data-bm-renderer').value\r\n          : wrapperAttributes.getNamedItem('bm-renderer')\r\n            ? wrapperAttributes.getNamedItem('bm-renderer').value\r\n            : 'canvas';\r\n\r\n  var loop = wrapperAttributes.getNamedItem('data-anim-loop') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-anim-loop').value\r\n    : wrapperAttributes.getNamedItem('data-bm-loop') // eslint-disable-line no-nested-ternary\r\n      ? wrapperAttributes.getNamedItem('data-bm-loop').value\r\n      : wrapperAttributes.getNamedItem('bm-loop')\r\n        ? wrapperAttributes.getNamedItem('bm-loop').value\r\n        : '';\r\n  if (loop === 'false') {\r\n    params.loop = false;\r\n  } else if (loop === 'true') {\r\n    params.loop = true;\r\n  } else if (loop !== '') {\r\n    params.loop = parseInt(loop, 10);\r\n  }\r\n  var autoplay = wrapperAttributes.getNamedItem('data-anim-autoplay') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-anim-autoplay').value\r\n    : wrapperAttributes.getNamedItem('data-bm-autoplay') // eslint-disable-line no-nested-ternary\r\n      ? wrapperAttributes.getNamedItem('data-bm-autoplay').value\r\n      : wrapperAttributes.getNamedItem('bm-autoplay')\r\n        ? wrapperAttributes.getNamedItem('bm-autoplay').value\r\n        : true;\r\n  params.autoplay = autoplay !== 'false';\r\n\r\n  params.name = wrapperAttributes.getNamedItem('data-name') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-name').value\r\n    : wrapperAttributes.getNamedItem('data-bm-name') // eslint-disable-line no-nested-ternary\r\n      ? wrapperAttributes.getNamedItem('data-bm-name').value\r\n      : wrapperAttributes.getNamedItem('bm-name')\r\n        ? wrapperAttributes.getNamedItem('bm-name').value\r\n        : '';\r\n  var prerender = wrapperAttributes.getNamedItem('data-anim-prerender') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-anim-prerender').value\r\n    : wrapperAttributes.getNamedItem('data-bm-prerender') // eslint-disable-line no-nested-ternary\r\n      ? wrapperAttributes.getNamedItem('data-bm-prerender').value\r\n      : wrapperAttributes.getNamedItem('bm-prerender')\r\n        ? wrapperAttributes.getNamedItem('bm-prerender').value\r\n        : '';\r\n\r\n  if (prerender === 'false') {\r\n    params.prerender = false;\r\n  }\r\n  this.setParams(params);\r\n};\r\n\r\nAnimationItem.prototype.includeLayers = function (data) {\r\n  if (data.op > this.animationData.op) {\r\n    this.animationData.op = data.op;\r\n    this.totalFrames = Math.floor(data.op - this.animationData.ip);\r\n  }\r\n  var layers = this.animationData.layers;\r\n  var i;\r\n  var len = layers.length;\r\n  var newLayers = data.layers;\r\n  var j;\r\n  var jLen = newLayers.length;\r\n  for (j = 0; j < jLen; j += 1) {\r\n    i = 0;\r\n    while (i < len) {\r\n      if (layers[i].id === newLayers[j].id) {\r\n        layers[i] = newLayers[j];\r\n        break;\r\n      }\r\n      i += 1;\r\n    }\r\n  }\r\n  if (data.chars || data.fonts) {\r\n    this.renderer.globalData.fontManager.addChars(data.chars);\r\n    this.renderer.globalData.fontManager.addFonts(data.fonts, this.renderer.globalData.defs);\r\n  }\r\n  if (data.assets) {\r\n    len = data.assets.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      this.animationData.assets.push(data.assets[i]);\r\n    }\r\n  }\r\n  this.animationData.__complete = false;\r\n  dataManager.completeAnimation(\r\n    this.animationData,\r\n    this.onSegmentComplete\r\n  );\r\n};\r\n\r\nAnimationItem.prototype.onSegmentComplete = function (data) {\r\n  this.animationData = data;\r\n  if (expressionsPlugin) {\r\n    expressionsPlugin.initExpressions(this);\r\n  }\r\n  this.loadNextSegment();\r\n};\r\n\r\nAnimationItem.prototype.loadNextSegment = function () {\r\n  var segments = this.animationData.segments;\r\n  if (!segments || segments.length === 0 || !this.autoloadSegments) {\r\n    this.trigger('data_ready');\r\n    this.timeCompleted = this.totalFrames;\r\n    return;\r\n  }\r\n  var segment = segments.shift();\r\n  this.timeCompleted = segment.time * this.frameRate;\r\n  var segmentPath = this.path + this.fileName + '_' + this.segmentPos + '.json';\r\n  this.segmentPos += 1;\r\n  dataManager.loadData(segmentPath, this.includeLayers.bind(this), function () {\r\n    this.trigger('data_failed');\r\n  }.bind(this));\r\n};\r\n\r\nAnimationItem.prototype.loadSegments = function () {\r\n  var segments = this.animationData.segments;\r\n  if (!segments) {\r\n    this.timeCompleted = this.totalFrames;\r\n  }\r\n  this.loadNextSegment();\r\n};\r\n\r\nAnimationItem.prototype.imagesLoaded = function () {\r\n  this.trigger('loaded_images');\r\n  this.checkLoaded();\r\n};\r\n\r\nAnimationItem.prototype.preloadImages = function () {\r\n  this.imagePreloader.setAssetsPath(this.assetsPath);\r\n  this.imagePreloader.setPath(this.path);\r\n  this.imagePreloader.loadAssets(this.animationData.assets, this.imagesLoaded.bind(this));\r\n};\r\n\r\nAnimationItem.prototype.configAnimation = function (animData) {\r\n  if (!this.renderer) {\r\n    return;\r\n  }\r\n  try {\r\n    this.animationData = animData;\r\n    if (this.initialSegment) {\r\n      this.totalFrames = Math.floor(this.initialSegment[1] - this.initialSegment[0]);\r\n      this.firstFrame = Math.round(this.initialSegment[0]);\r\n    } else {\r\n      this.totalFrames = Math.floor(this.animationData.op - this.animationData.ip);\r\n      this.firstFrame = Math.round(this.animationData.ip);\r\n    }\r\n    this.renderer.configAnimation(animData);\r\n    if (!animData.assets) {\r\n      animData.assets = [];\r\n    }\r\n\r\n    this.assets = this.animationData.assets;\r\n    this.frameRate = this.animationData.fr;\r\n    this.frameMult = this.animationData.fr / 1000;\r\n    this.renderer.searchExtraCompositions(animData.assets);\r\n    this.markers = markerParser(animData.markers || []);\r\n    this.trigger('config_ready');\r\n    this.preloadImages();\r\n    this.loadSegments();\r\n    this.updaFrameModifier();\r\n    this.waitForFontsLoaded();\r\n    if (this.isPaused) {\r\n      this.audioController.pause();\r\n    }\r\n  } catch (error) {\r\n    this.triggerConfigError(error);\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.waitForFontsLoaded = function () {\r\n  if (!this.renderer) {\r\n    return;\r\n  }\r\n  if (this.renderer.globalData.fontManager.isLoaded) {\r\n    this.checkLoaded();\r\n  } else {\r\n    setTimeout(this.waitForFontsLoaded.bind(this), 20);\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.checkLoaded = function () {\r\n  if (!this.isLoaded\r\n        && this.renderer.globalData.fontManager.isLoaded\r\n        && (this.imagePreloader.loadedImages() || this.renderer.rendererType !== 'canvas')\r\n        && (this.imagePreloader.loadedFootages())\r\n  ) {\r\n    this.isLoaded = true;\r\n    if (expressionsPlugin) {\r\n      expressionsPlugin.initExpressions(this);\r\n    }\r\n    this.renderer.initItems();\r\n    setTimeout(function () {\r\n      this.trigger('DOMLoaded');\r\n    }.bind(this), 0);\r\n    this.gotoFrame();\r\n    if (this.autoplay) {\r\n      this.play();\r\n    }\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.resize = function () {\r\n  this.renderer.updateContainerSize();\r\n};\r\n\r\nAnimationItem.prototype.setSubframe = function (flag) {\r\n  this.isSubframeEnabled = !!flag;\r\n};\r\n\r\nAnimationItem.prototype.gotoFrame = function () {\r\n  this.currentFrame = this.isSubframeEnabled ? this.currentRawFrame : ~~this.currentRawFrame; // eslint-disable-line no-bitwise\r\n\r\n  if (this.timeCompleted !== this.totalFrames && this.currentFrame > this.timeCompleted) {\r\n    this.currentFrame = this.timeCompleted;\r\n  }\r\n  this.trigger('enterFrame');\r\n  this.renderFrame();\r\n  this.trigger('drawnFrame');\r\n};\r\n\r\nAnimationItem.prototype.renderFrame = function () {\r\n  if (this.isLoaded === false || !this.renderer) {\r\n    return;\r\n  }\r\n  try {\r\n    this.renderer.renderFrame(this.currentFrame + this.firstFrame);\r\n  } catch (error) {\r\n    this.triggerRenderFrameError(error);\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.play = function (name) {\r\n  if (name && this.name !== name) {\r\n    return;\r\n  }\r\n  if (this.isPaused === true) {\r\n    this.isPaused = false;\r\n    this.audioController.resume();\r\n    if (this._idle) {\r\n      this._idle = false;\r\n      this.trigger('_active');\r\n    }\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.pause = function (name) {\r\n  if (name && this.name !== name) {\r\n    return;\r\n  }\r\n  if (this.isPaused === false) {\r\n    this.isPaused = true;\r\n    this._idle = true;\r\n    this.trigger('_idle');\r\n    this.audioController.pause();\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.togglePause = function (name) {\r\n  if (name && this.name !== name) {\r\n    return;\r\n  }\r\n  if (this.isPaused === true) {\r\n    this.play();\r\n  } else {\r\n    this.pause();\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.stop = function (name) {\r\n  if (name && this.name !== name) {\r\n    return;\r\n  }\r\n  this.pause();\r\n  this.playCount = 0;\r\n  this._completedLoop = false;\r\n  this.setCurrentRawFrameValue(0);\r\n};\r\n\r\nAnimationItem.prototype.getMarkerData = function (markerName) {\r\n  var marker;\r\n  for (var i = 0; i < this.markers.length; i += 1) {\r\n    marker = this.markers[i];\r\n    if (marker.payload && marker.payload.name === markerName) {\r\n      return marker;\r\n    }\r\n  }\r\n  return null;\r\n};\r\n\r\nAnimationItem.prototype.goToAndStop = function (value, isFrame, name) {\r\n  if (name && this.name !== name) {\r\n    return;\r\n  }\r\n  var numValue = Number(value);\r\n  if (isNaN(numValue)) {\r\n    var marker = this.getMarkerData(value);\r\n    if (marker) {\r\n      this.goToAndStop(marker.time, true);\r\n    }\r\n  } else if (isFrame) {\r\n    this.setCurrentRawFrameValue(value);\r\n  } else {\r\n    this.setCurrentRawFrameValue(value * this.frameModifier);\r\n  }\r\n  this.pause();\r\n};\r\n\r\nAnimationItem.prototype.goToAndPlay = function (value, isFrame, name) {\r\n  if (name && this.name !== name) {\r\n    return;\r\n  }\r\n  var numValue = Number(value);\r\n  if (isNaN(numValue)) {\r\n    var marker = this.getMarkerData(value);\r\n    if (marker) {\r\n      if (!marker.duration) {\r\n        this.goToAndStop(marker.time, true);\r\n      } else {\r\n        this.playSegments([marker.time, marker.time + marker.duration], true);\r\n      }\r\n    }\r\n  } else {\r\n    this.goToAndStop(numValue, isFrame, name);\r\n  }\r\n  this.play();\r\n};\r\n\r\nAnimationItem.prototype.advanceTime = function (value) {\r\n  if (this.isPaused === true || this.isLoaded === false) {\r\n    return;\r\n  }\r\n  var nextValue = this.currentRawFrame + value * this.frameModifier;\r\n  var _isComplete = false;\r\n  // Checking if nextValue > totalFrames - 1 for addressing non looping and looping animations.\r\n  // If animation won't loop, it should stop at totalFrames - 1. If it will loop it should complete the last frame and then loop.\r\n  if (nextValue >= this.totalFrames - 1 && this.frameModifier > 0) {\r\n    if (!this.loop || this.playCount === this.loop) {\r\n      if (!this.checkSegments(nextValue > this.totalFrames ? nextValue % this.totalFrames : 0)) {\r\n        _isComplete = true;\r\n        nextValue = this.totalFrames - 1;\r\n      }\r\n    } else if (nextValue >= this.totalFrames) {\r\n      this.playCount += 1;\r\n      if (!this.checkSegments(nextValue % this.totalFrames)) {\r\n        this.setCurrentRawFrameValue(nextValue % this.totalFrames);\r\n        this._completedLoop = true;\r\n        this.trigger('loopComplete');\r\n      }\r\n    } else {\r\n      this.setCurrentRawFrameValue(nextValue);\r\n    }\r\n  } else if (nextValue < 0) {\r\n    if (!this.checkSegments(nextValue % this.totalFrames)) {\r\n      if (this.loop && !(this.playCount-- <= 0 && this.loop !== true)) { // eslint-disable-line no-plusplus\r\n        this.setCurrentRawFrameValue(this.totalFrames + (nextValue % this.totalFrames));\r\n        if (!this._completedLoop) {\r\n          this._completedLoop = true;\r\n        } else {\r\n          this.trigger('loopComplete');\r\n        }\r\n      } else {\r\n        _isComplete = true;\r\n        nextValue = 0;\r\n      }\r\n    }\r\n  } else {\r\n    this.setCurrentRawFrameValue(nextValue);\r\n  }\r\n  if (_isComplete) {\r\n    this.setCurrentRawFrameValue(nextValue);\r\n    this.pause();\r\n    this.trigger('complete');\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.adjustSegment = function (arr, offset) {\r\n  this.playCount = 0;\r\n  if (arr[1] < arr[0]) {\r\n    if (this.frameModifier > 0) {\r\n      if (this.playSpeed < 0) {\r\n        this.setSpeed(-this.playSpeed);\r\n      } else {\r\n        this.setDirection(-1);\r\n      }\r\n    }\r\n    this.totalFrames = arr[0] - arr[1];\r\n    this.timeCompleted = this.totalFrames;\r\n    this.firstFrame = arr[1];\r\n    this.setCurrentRawFrameValue(this.totalFrames - 0.001 - offset);\r\n  } else if (arr[1] > arr[0]) {\r\n    if (this.frameModifier < 0) {\r\n      if (this.playSpeed < 0) {\r\n        this.setSpeed(-this.playSpeed);\r\n      } else {\r\n        this.setDirection(1);\r\n      }\r\n    }\r\n    this.totalFrames = arr[1] - arr[0];\r\n    this.timeCompleted = this.totalFrames;\r\n    this.firstFrame = arr[0];\r\n    this.setCurrentRawFrameValue(0.001 + offset);\r\n  }\r\n  this.trigger('segmentStart');\r\n};\r\nAnimationItem.prototype.setSegment = function (init, end) {\r\n  var pendingFrame = -1;\r\n  if (this.isPaused) {\r\n    if (this.currentRawFrame + this.firstFrame < init) {\r\n      pendingFrame = init;\r\n    } else if (this.currentRawFrame + this.firstFrame > end) {\r\n      pendingFrame = end - init;\r\n    }\r\n  }\r\n\r\n  this.firstFrame = init;\r\n  this.totalFrames = end - init;\r\n  this.timeCompleted = this.totalFrames;\r\n  if (pendingFrame !== -1) {\r\n    this.goToAndStop(pendingFrame, true);\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.playSegments = function (arr, forceFlag) {\r\n  if (forceFlag) {\r\n    this.segments.length = 0;\r\n  }\r\n  if (typeof arr[0] === 'object') {\r\n    var i;\r\n    var len = arr.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      this.segments.push(arr[i]);\r\n    }\r\n  } else {\r\n    this.segments.push(arr);\r\n  }\r\n  if (this.segments.length && forceFlag) {\r\n    this.adjustSegment(this.segments.shift(), 0);\r\n  }\r\n  if (this.isPaused) {\r\n    this.play();\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.resetSegments = function (forceFlag) {\r\n  this.segments.length = 0;\r\n  this.segments.push([this.animationData.ip, this.animationData.op]);\r\n  if (forceFlag) {\r\n    this.checkSegments(0);\r\n  }\r\n};\r\nAnimationItem.prototype.checkSegments = function (offset) {\r\n  if (this.segments.length) {\r\n    this.adjustSegment(this.segments.shift(), offset);\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\nAnimationItem.prototype.destroy = function (name) {\r\n  if ((name && this.name !== name) || !this.renderer) {\r\n    return;\r\n  }\r\n  this.renderer.destroy();\r\n  this.imagePreloader.destroy();\r\n  this.trigger('destroy');\r\n  this._cbs = null;\r\n  this.onEnterFrame = null;\r\n  this.onLoopComplete = null;\r\n  this.onComplete = null;\r\n  this.onSegmentStart = null;\r\n  this.onDestroy = null;\r\n  this.renderer = null;\r\n  this.renderer = null;\r\n  this.imagePreloader = null;\r\n  this.projectInterface = null;\r\n};\r\n\r\nAnimationItem.prototype.setCurrentRawFrameValue = function (value) {\r\n  this.currentRawFrame = value;\r\n  this.gotoFrame();\r\n};\r\n\r\nAnimationItem.prototype.setSpeed = function (val) {\r\n  this.playSpeed = val;\r\n  this.updaFrameModifier();\r\n};\r\n\r\nAnimationItem.prototype.setDirection = function (val) {\r\n  this.playDirection = val < 0 ? -1 : 1;\r\n  this.updaFrameModifier();\r\n};\r\n\r\nAnimationItem.prototype.setVolume = function (val, name) {\r\n  if (name && this.name !== name) {\r\n    return;\r\n  }\r\n  this.audioController.setVolume(val);\r\n};\r\n\r\nAnimationItem.prototype.getVolume = function () {\r\n  return this.audioController.getVolume();\r\n};\r\n\r\nAnimationItem.prototype.mute = function (name) {\r\n  if (name && this.name !== name) {\r\n    return;\r\n  }\r\n  this.audioController.mute();\r\n};\r\n\r\nAnimationItem.prototype.unmute = function (name) {\r\n  if (name && this.name !== name) {\r\n    return;\r\n  }\r\n  this.audioController.unmute();\r\n};\r\n\r\nAnimationItem.prototype.updaFrameModifier = function () {\r\n  this.frameModifier = this.frameMult * this.playSpeed * this.playDirection;\r\n  this.audioController.setRate(this.playSpeed * this.playDirection);\r\n};\r\n\r\nAnimationItem.prototype.getPath = function () {\r\n  return this.path;\r\n};\r\n\r\nAnimationItem.prototype.getAssetsPath = function (assetData) {\r\n  var path = '';\r\n  if (assetData.e) {\r\n    path = assetData.p;\r\n  } else if (this.assetsPath) {\r\n    var imagePath = assetData.p;\r\n    if (imagePath.indexOf('images/') !== -1) {\r\n      imagePath = imagePath.split('/')[1];\r\n    }\r\n    path = this.assetsPath + imagePath;\r\n  } else {\r\n    path = this.path;\r\n    path += assetData.u ? assetData.u : '';\r\n    path += assetData.p;\r\n  }\r\n  return path;\r\n};\r\n\r\nAnimationItem.prototype.getAssetData = function (id) {\r\n  var i = 0;\r\n  var len = this.assets.length;\r\n  while (i < len) {\r\n    if (id === this.assets[i].id) {\r\n      return this.assets[i];\r\n    }\r\n    i += 1;\r\n  }\r\n  return null;\r\n};\r\n\r\nAnimationItem.prototype.hide = function () {\r\n  this.renderer.hide();\r\n};\r\n\r\nAnimationItem.prototype.show = function () {\r\n  this.renderer.show();\r\n};\r\n\r\nAnimationItem.prototype.getDuration = function (isFrame) {\r\n  return isFrame ? this.totalFrames : this.totalFrames / this.frameRate;\r\n};\r\n\r\nAnimationItem.prototype.trigger = function (name) {\r\n  if (this._cbs && this._cbs[name]) {\r\n    switch (name) {\r\n      case 'enterFrame':\r\n      case 'drawnFrame':\r\n        this.triggerEvent(name, new BMEnterFrameEvent(name, this.currentFrame, this.totalFrames, this.frameModifier));\r\n        break;\r\n      case 'loopComplete':\r\n        this.triggerEvent(name, new BMCompleteLoopEvent(name, this.loop, this.playCount, this.frameMult));\r\n        break;\r\n      case 'complete':\r\n        this.triggerEvent(name, new BMCompleteEvent(name, this.frameMult));\r\n        break;\r\n      case 'segmentStart':\r\n        this.triggerEvent(name, new BMSegmentStartEvent(name, this.firstFrame, this.totalFrames));\r\n        break;\r\n      case 'destroy':\r\n        this.triggerEvent(name, new BMDestroyEvent(name, this));\r\n        break;\r\n      default:\r\n        this.triggerEvent(name);\r\n    }\r\n  }\r\n  if (name === 'enterFrame' && this.onEnterFrame) {\r\n    this.onEnterFrame.call(this, new BMEnterFrameEvent(name, this.currentFrame, this.totalFrames, this.frameMult));\r\n  }\r\n  if (name === 'loopComplete' && this.onLoopComplete) {\r\n    this.onLoopComplete.call(this, new BMCompleteLoopEvent(name, this.loop, this.playCount, this.frameMult));\r\n  }\r\n  if (name === 'complete' && this.onComplete) {\r\n    this.onComplete.call(this, new BMCompleteEvent(name, this.frameMult));\r\n  }\r\n  if (name === 'segmentStart' && this.onSegmentStart) {\r\n    this.onSegmentStart.call(this, new BMSegmentStartEvent(name, this.firstFrame, this.totalFrames));\r\n  }\r\n  if (name === 'destroy' && this.onDestroy) {\r\n    this.onDestroy.call(this, new BMDestroyEvent(name, this));\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.triggerRenderFrameError = function (nativeError) {\r\n  var error = new BMRenderFrameErrorEvent(nativeError, this.currentFrame);\r\n  this.triggerEvent('error', error);\r\n\r\n  if (this.onError) {\r\n    this.onError.call(this, error);\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.triggerConfigError = function (nativeError) {\r\n  var error = new BMConfigErrorEvent(nativeError, this.currentFrame);\r\n  this.triggerEvent('error', error);\r\n\r\n  if (this.onError) {\r\n    this.onError.call(this, error);\r\n  }\r\n};\r\n\r\n/* global CompExpressionInterface, expressionsPlugin: writable */\r\n/* exported expressionsPlugin */\r\n\r\nvar Expressions = (function () {\r\n  var ob = {};\r\n  ob.initExpressions = initExpressions;\r\n\r\n  function initExpressions(animation) {\r\n    var stackCount = 0;\r\n    var registers = [];\r\n\r\n    function pushExpression() {\r\n      stackCount += 1;\r\n    }\r\n\r\n    function popExpression() {\r\n      stackCount -= 1;\r\n      if (stackCount === 0) {\r\n        releaseInstances();\r\n      }\r\n    }\r\n\r\n    function registerExpressionProperty(expression) {\r\n      if (registers.indexOf(expression) === -1) {\r\n        registers.push(expression);\r\n      }\r\n    }\r\n\r\n    function releaseInstances() {\r\n      var i;\r\n      var len = registers.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        registers[i].release();\r\n      }\r\n      registers.length = 0;\r\n    }\r\n\r\n    animation.renderer.compInterface = CompExpressionInterface(animation.renderer);\r\n    animation.renderer.globalData.projectInterface.registerComposition(animation.renderer);\r\n    animation.renderer.globalData.pushExpression = pushExpression;\r\n    animation.renderer.globalData.popExpression = popExpression;\r\n    animation.renderer.globalData.registerExpressionProperty = registerExpressionProperty;\r\n  }\r\n  return ob;\r\n}());\r\n\r\nexpressionsPlugin = Expressions;\r\n\r\n/* eslint-disable camelcase, no-unused-vars */\r\n/* global BMMath, BezierFactory, createTypedArray, degToRads, shapePool */\r\n\r\nvar ExpressionManager = (function () {\r\n  'use strict';\r\n\r\n  var ob = {};\r\n  var Math = BMMath;\r\n  var window = null;\r\n  var document = null;\r\n  var XMLHttpRequest = null;\r\n  var fetch = null;\r\n  var frames = null;\r\n\r\n  function $bm_isInstanceOfArray(arr) {\r\n    return arr.constructor === Array || arr.constructor === Float32Array;\r\n  }\r\n\r\n  function isNumerable(tOfV, v) {\r\n    return tOfV === 'number' || tOfV === 'boolean' || tOfV === 'string' || v instanceof Number;\r\n  }\r\n\r\n  function $bm_neg(a) {\r\n    var tOfA = typeof a;\r\n    if (tOfA === 'number' || tOfA === 'boolean' || a instanceof Number) {\r\n      return -a;\r\n    }\r\n    if ($bm_isInstanceOfArray(a)) {\r\n      var i;\r\n      var lenA = a.length;\r\n      var retArr = [];\r\n      for (i = 0; i < lenA; i += 1) {\r\n        retArr[i] = -a[i];\r\n      }\r\n      return retArr;\r\n    }\r\n    if (a.propType) {\r\n      return a.v;\r\n    }\r\n    return -a;\r\n  }\r\n\r\n  var easeInBez = BezierFactory.getBezierEasing(0.333, 0, 0.833, 0.833, 'easeIn').get;\r\n  var easeOutBez = BezierFactory.getBezierEasing(0.167, 0.167, 0.667, 1, 'easeOut').get;\r\n  var easeInOutBez = BezierFactory.getBezierEasing(0.33, 0, 0.667, 1, 'easeInOut').get;\r\n\r\n  function sum(a, b) {\r\n    var tOfA = typeof a;\r\n    var tOfB = typeof b;\r\n    if (tOfA === 'string' || tOfB === 'string') {\r\n      return a + b;\r\n    }\r\n    if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\r\n      return a + b;\r\n    }\r\n    if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\r\n      a = a.slice(0);\r\n      a[0] += b;\r\n      return a;\r\n    }\r\n    if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\r\n      b = b.slice(0);\r\n      b[0] = a + b[0];\r\n      return b;\r\n    }\r\n    if ($bm_isInstanceOfArray(a) && $bm_isInstanceOfArray(b)) {\r\n      var i = 0;\r\n      var lenA = a.length;\r\n      var lenB = b.length;\r\n      var retArr = [];\r\n      while (i < lenA || i < lenB) {\r\n        if ((typeof a[i] === 'number' || a[i] instanceof Number) && (typeof b[i] === 'number' || b[i] instanceof Number)) {\r\n          retArr[i] = a[i] + b[i];\r\n        } else {\r\n          retArr[i] = b[i] === undefined ? a[i] : a[i] || b[i];\r\n        }\r\n        i += 1;\r\n      }\r\n      return retArr;\r\n    }\r\n    return 0;\r\n  }\r\n  var add = sum;\r\n\r\n  function sub(a, b) {\r\n    var tOfA = typeof a;\r\n    var tOfB = typeof b;\r\n    if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\r\n      if (tOfA === 'string') {\r\n        a = parseInt(a, 10);\r\n      }\r\n      if (tOfB === 'string') {\r\n        b = parseInt(b, 10);\r\n      }\r\n      return a - b;\r\n    }\r\n    if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\r\n      a = a.slice(0);\r\n      a[0] -= b;\r\n      return a;\r\n    }\r\n    if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\r\n      b = b.slice(0);\r\n      b[0] = a - b[0];\r\n      return b;\r\n    }\r\n    if ($bm_isInstanceOfArray(a) && $bm_isInstanceOfArray(b)) {\r\n      var i = 0;\r\n      var lenA = a.length;\r\n      var lenB = b.length;\r\n      var retArr = [];\r\n      while (i < lenA || i < lenB) {\r\n        if ((typeof a[i] === 'number' || a[i] instanceof Number) && (typeof b[i] === 'number' || b[i] instanceof Number)) {\r\n          retArr[i] = a[i] - b[i];\r\n        } else {\r\n          retArr[i] = b[i] === undefined ? a[i] : a[i] || b[i];\r\n        }\r\n        i += 1;\r\n      }\r\n      return retArr;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  function mul(a, b) {\r\n    var tOfA = typeof a;\r\n    var tOfB = typeof b;\r\n    var arr;\r\n    if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\r\n      return a * b;\r\n    }\r\n\r\n    var i;\r\n    var len;\r\n    if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\r\n      len = a.length;\r\n      arr = createTypedArray('float32', len);\r\n      for (i = 0; i < len; i += 1) {\r\n        arr[i] = a[i] * b;\r\n      }\r\n      return arr;\r\n    }\r\n    if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\r\n      len = b.length;\r\n      arr = createTypedArray('float32', len);\r\n      for (i = 0; i < len; i += 1) {\r\n        arr[i] = a * b[i];\r\n      }\r\n      return arr;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  function div(a, b) {\r\n    var tOfA = typeof a;\r\n    var tOfB = typeof b;\r\n    var arr;\r\n    if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\r\n      return a / b;\r\n    }\r\n    var i;\r\n    var len;\r\n    if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\r\n      len = a.length;\r\n      arr = createTypedArray('float32', len);\r\n      for (i = 0; i < len; i += 1) {\r\n        arr[i] = a[i] / b;\r\n      }\r\n      return arr;\r\n    }\r\n    if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\r\n      len = b.length;\r\n      arr = createTypedArray('float32', len);\r\n      for (i = 0; i < len; i += 1) {\r\n        arr[i] = a / b[i];\r\n      }\r\n      return arr;\r\n    }\r\n    return 0;\r\n  }\r\n  function mod(a, b) {\r\n    if (typeof a === 'string') {\r\n      a = parseInt(a, 10);\r\n    }\r\n    if (typeof b === 'string') {\r\n      b = parseInt(b, 10);\r\n    }\r\n    return a % b;\r\n  }\r\n  var $bm_sum = sum;\r\n  var $bm_sub = sub;\r\n  var $bm_mul = mul;\r\n  var $bm_div = div;\r\n  var $bm_mod = mod;\r\n\r\n  function clamp(num, min, max) {\r\n    if (min > max) {\r\n      var mm = max;\r\n      max = min;\r\n      min = mm;\r\n    }\r\n    return Math.min(Math.max(num, min), max);\r\n  }\r\n\r\n  function radiansToDegrees(val) {\r\n    return val / degToRads;\r\n  }\r\n  var radians_to_degrees = radiansToDegrees;\r\n\r\n  function degreesToRadians(val) {\r\n    return val * degToRads;\r\n  }\r\n  var degrees_to_radians = radiansToDegrees;\r\n\r\n  var helperLengthArray = [0, 0, 0, 0, 0, 0];\r\n\r\n  function length(arr1, arr2) {\r\n    if (typeof arr1 === 'number' || arr1 instanceof Number) {\r\n      arr2 = arr2 || 0;\r\n      return Math.abs(arr1 - arr2);\r\n    }\r\n    if (!arr2) {\r\n      arr2 = helperLengthArray;\r\n    }\r\n    var i;\r\n    var len = Math.min(arr1.length, arr2.length);\r\n    var addedLength = 0;\r\n    for (i = 0; i < len; i += 1) {\r\n      addedLength += Math.pow(arr2[i] - arr1[i], 2);\r\n    }\r\n    return Math.sqrt(addedLength);\r\n  }\r\n\r\n  function normalize(vec) {\r\n    return div(vec, length(vec));\r\n  }\r\n\r\n  function rgbToHsl(val) {\r\n    var r = val[0]; var g = val[1]; var b = val[2];\r\n    var max = Math.max(r, g, b);\r\n    var min = Math.min(r, g, b);\r\n    var h;\r\n    var s;\r\n    var l = (max + min) / 2;\r\n\r\n    if (max === min) {\r\n      h = 0; // achromatic\r\n      s = 0; // achromatic\r\n    } else {\r\n      var d = max - min;\r\n      s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n      switch (max) {\r\n        case r: h = (g - b) / d + (g < b ? 6 : 0); break;\r\n        case g: h = (b - r) / d + 2; break;\r\n        case b: h = (r - g) / d + 4; break;\r\n        default: break;\r\n      }\r\n      h /= 6;\r\n    }\r\n\r\n    return [h, s, l, val[3]];\r\n  }\r\n\r\n  function hue2rgb(p, q, t) {\r\n    if (t < 0) t += 1;\r\n    if (t > 1) t -= 1;\r\n    if (t < 1 / 6) return p + (q - p) * 6 * t;\r\n    if (t < 1 / 2) return q;\r\n    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\r\n    return p;\r\n  }\r\n\r\n  function hslToRgb(val) {\r\n    var h = val[0];\r\n    var s = val[1];\r\n    var l = val[2];\r\n\r\n    var r;\r\n    var g;\r\n    var b;\r\n\r\n    if (s === 0) {\r\n      r = l; // achromatic\r\n      b = l; // achromatic\r\n      g = l; // achromatic\r\n    } else {\r\n      var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n      var p = 2 * l - q;\r\n      r = hue2rgb(p, q, h + 1 / 3);\r\n      g = hue2rgb(p, q, h);\r\n      b = hue2rgb(p, q, h - 1 / 3);\r\n    }\r\n\r\n    return [r, g, b, val[3]];\r\n  }\r\n\r\n  function linear(t, tMin, tMax, value1, value2) {\r\n    if (value1 === undefined || value2 === undefined) {\r\n      value1 = tMin;\r\n      value2 = tMax;\r\n      tMin = 0;\r\n      tMax = 1;\r\n    }\r\n    if (tMax < tMin) {\r\n      var _tMin = tMax;\r\n      tMax = tMin;\r\n      tMin = _tMin;\r\n    }\r\n    if (t <= tMin) {\r\n      return value1;\r\n    } if (t >= tMax) {\r\n      return value2;\r\n    }\r\n    var perc = tMax === tMin ? 0 : (t - tMin) / (tMax - tMin);\r\n    if (!value1.length) {\r\n      return value1 + (value2 - value1) * perc;\r\n    }\r\n    var i;\r\n    var len = value1.length;\r\n    var arr = createTypedArray('float32', len);\r\n    for (i = 0; i < len; i += 1) {\r\n      arr[i] = value1[i] + (value2[i] - value1[i]) * perc;\r\n    }\r\n    return arr;\r\n  }\r\n  function random(min, max) {\r\n    if (max === undefined) {\r\n      if (min === undefined) {\r\n        min = 0;\r\n        max = 1;\r\n      } else {\r\n        max = min;\r\n        min = undefined;\r\n      }\r\n    }\r\n    if (max.length) {\r\n      var i;\r\n      var len = max.length;\r\n      if (!min) {\r\n        min = createTypedArray('float32', len);\r\n      }\r\n      var arr = createTypedArray('float32', len);\r\n      var rnd = BMMath.random();\r\n      for (i = 0; i < len; i += 1) {\r\n        arr[i] = min[i] + rnd * (max[i] - min[i]);\r\n      }\r\n      return arr;\r\n    }\r\n    if (min === undefined) {\r\n      min = 0;\r\n    }\r\n    var rndm = BMMath.random();\r\n    return min + rndm * (max - min);\r\n  }\r\n\r\n  function createPath(points, inTangents, outTangents, closed) {\r\n    var i;\r\n    var len = points.length;\r\n    var path = shapePool.newElement();\r\n    path.setPathData(!!closed, len);\r\n    var arrPlaceholder = [0, 0];\r\n    var inVertexPoint;\r\n    var outVertexPoint;\r\n    for (i = 0; i < len; i += 1) {\r\n      inVertexPoint = (inTangents && inTangents[i]) ? inTangents[i] : arrPlaceholder;\r\n      outVertexPoint = (outTangents && outTangents[i]) ? outTangents[i] : arrPlaceholder;\r\n      path.setTripleAt(points[i][0], points[i][1], outVertexPoint[0] + points[i][0], outVertexPoint[1] + points[i][1], inVertexPoint[0] + points[i][0], inVertexPoint[1] + points[i][1], i, true);\r\n    }\r\n    return path;\r\n  }\r\n\r\n  function initiateExpression(elem, data, property) {\r\n    var val = data.x;\r\n    var needsVelocity = /velocity(?![\\w\\d])/.test(val);\r\n    var _needsRandom = val.indexOf('random') !== -1;\r\n    var elemType = elem.data.ty;\r\n    var transform;\r\n    var $bm_transform;\r\n    var content;\r\n    var effect;\r\n    var thisProperty = property;\r\n    thisProperty.valueAtTime = thisProperty.getValueAtTime;\r\n    Object.defineProperty(thisProperty, 'value', {\r\n      get: function () {\r\n        return thisProperty.v;\r\n      },\r\n    });\r\n    elem.comp.frameDuration = 1 / elem.comp.globalData.frameRate;\r\n    elem.comp.displayStartTime = 0;\r\n    var inPoint = elem.data.ip / elem.comp.globalData.frameRate;\r\n    var outPoint = elem.data.op / elem.comp.globalData.frameRate;\r\n    var width = elem.data.sw ? elem.data.sw : 0;\r\n    var height = elem.data.sh ? elem.data.sh : 0;\r\n    var name = elem.data.nm;\r\n    var loopIn;\r\n    var loop_in;\r\n    var loopOut;\r\n    var loop_out;\r\n    var smooth;\r\n    var toWorld;\r\n    var fromWorld;\r\n    var fromComp;\r\n    var toComp;\r\n    var fromCompToSurface;\r\n    var position;\r\n    var rotation;\r\n    var anchorPoint;\r\n    var scale;\r\n    var thisLayer;\r\n    var thisComp;\r\n    var mask;\r\n    var valueAtTime;\r\n    var velocityAtTime;\r\n\r\n    var scoped_bm_rt;\r\n    // val = val.replace(/(\\\\?\"|')((http)(s)?(:\\/))?\\/.*?(\\\\?\"|')/g, \"\\\"\\\"\"); // deter potential network calls\r\n    var expression_function = eval('[function _expression_function(){' + val + ';scoped_bm_rt=$bm_rt}]')[0]; // eslint-disable-line no-eval\r\n    var numKeys = property.kf ? data.k.length : 0;\r\n\r\n    var active = !this.data || this.data.hd !== true;\r\n\r\n    var wiggle = function wiggle(freq, amp) {\r\n      var iWiggle;\r\n      var j;\r\n      var lenWiggle = this.pv.length ? this.pv.length : 1;\r\n      var addedAmps = createTypedArray('float32', lenWiggle);\r\n      freq = 5;\r\n      var iterations = Math.floor(time * freq);\r\n      iWiggle = 0;\r\n      j = 0;\r\n      while (iWiggle < iterations) {\r\n        // var rnd = BMMath.random();\r\n        for (j = 0; j < lenWiggle; j += 1) {\r\n          addedAmps[j] += -amp + amp * 2 * BMMath.random();\r\n          // addedAmps[j] += -amp + amp*2*rnd;\r\n        }\r\n        iWiggle += 1;\r\n      }\r\n      // var rnd2 = BMMath.random();\r\n      var periods = time * freq;\r\n      var perc = periods - Math.floor(periods);\r\n      var arr = createTypedArray('float32', lenWiggle);\r\n      if (lenWiggle > 1) {\r\n        for (j = 0; j < lenWiggle; j += 1) {\r\n          arr[j] = this.pv[j] + addedAmps[j] + (-amp + amp * 2 * BMMath.random()) * perc;\r\n          // arr[j] = this.pv[j] + addedAmps[j] + (-amp + amp*2*rnd)*perc;\r\n          // arr[i] = this.pv[i] + addedAmp + amp1*perc + amp2*(1-perc);\r\n        }\r\n        return arr;\r\n      }\r\n      return this.pv + addedAmps[0] + (-amp + amp * 2 * BMMath.random()) * perc;\r\n    }.bind(this);\r\n\r\n    if (thisProperty.loopIn) {\r\n      loopIn = thisProperty.loopIn.bind(thisProperty);\r\n      loop_in = loopIn;\r\n    }\r\n\r\n    if (thisProperty.loopOut) {\r\n      loopOut = thisProperty.loopOut.bind(thisProperty);\r\n      loop_out = loopOut;\r\n    }\r\n\r\n    if (thisProperty.smooth) {\r\n      smooth = thisProperty.smooth.bind(thisProperty);\r\n    }\r\n\r\n    function loopInDuration(type, duration) {\r\n      return loopIn(type, duration, true);\r\n    }\r\n\r\n    function loopOutDuration(type, duration) {\r\n      return loopOut(type, duration, true);\r\n    }\r\n\r\n    if (this.getValueAtTime) {\r\n      valueAtTime = this.getValueAtTime.bind(this);\r\n    }\r\n\r\n    if (this.getVelocityAtTime) {\r\n      velocityAtTime = this.getVelocityAtTime.bind(this);\r\n    }\r\n\r\n    var comp = elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);\r\n\r\n    function lookAt(elem1, elem2) {\r\n      var fVec = [elem2[0] - elem1[0], elem2[1] - elem1[1], elem2[2] - elem1[2]];\r\n      var pitch = Math.atan2(fVec[0], Math.sqrt(fVec[1] * fVec[1] + fVec[2] * fVec[2])) / degToRads;\r\n      var yaw = -Math.atan2(fVec[1], fVec[2]) / degToRads;\r\n      return [yaw, pitch, 0];\r\n    }\r\n\r\n    function easeOut(t, tMin, tMax, val1, val2) {\r\n      return applyEase(easeOutBez, t, tMin, tMax, val1, val2);\r\n    }\r\n\r\n    function easeIn(t, tMin, tMax, val1, val2) {\r\n      return applyEase(easeInBez, t, tMin, tMax, val1, val2);\r\n    }\r\n\r\n    function ease(t, tMin, tMax, val1, val2) {\r\n      return applyEase(easeInOutBez, t, tMin, tMax, val1, val2);\r\n    }\r\n\r\n    function applyEase(fn, t, tMin, tMax, val1, val2) {\r\n      if (val1 === undefined) {\r\n        val1 = tMin;\r\n        val2 = tMax;\r\n      } else {\r\n        t = (t - tMin) / (tMax - tMin);\r\n      }\r\n      if (t > 1) {\r\n        t = 1;\r\n      } else if (t < 0) {\r\n        t = 0;\r\n      }\r\n      var mult = fn(t);\r\n      if ($bm_isInstanceOfArray(val1)) {\r\n        var iKey;\r\n        var lenKey = val1.length;\r\n        var arr = createTypedArray('float32', lenKey);\r\n        for (iKey = 0; iKey < lenKey; iKey += 1) {\r\n          arr[iKey] = (val2[iKey] - val1[iKey]) * mult + val1[iKey];\r\n        }\r\n        return arr;\r\n      }\r\n      return (val2 - val1) * mult + val1;\r\n    }\r\n\r\n    function nearestKey(time) {\r\n      var iKey;\r\n      var lenKey = data.k.length;\r\n      var index;\r\n      var keyTime;\r\n      if (!data.k.length || typeof (data.k[0]) === 'number') {\r\n        index = 0;\r\n        keyTime = 0;\r\n      } else {\r\n        index = -1;\r\n        time *= elem.comp.globalData.frameRate;\r\n        if (time < data.k[0].t) {\r\n          index = 1;\r\n          keyTime = data.k[0].t;\r\n        } else {\r\n          for (iKey = 0; iKey < lenKey - 1; iKey += 1) {\r\n            if (time === data.k[iKey].t) {\r\n              index = iKey + 1;\r\n              keyTime = data.k[iKey].t;\r\n              break;\r\n            } else if (time > data.k[iKey].t && time < data.k[iKey + 1].t) {\r\n              if (time - data.k[iKey].t > data.k[iKey + 1].t - time) {\r\n                index = iKey + 2;\r\n                keyTime = data.k[iKey + 1].t;\r\n              } else {\r\n                index = iKey + 1;\r\n                keyTime = data.k[iKey].t;\r\n              }\r\n              break;\r\n            }\r\n          }\r\n          if (index === -1) {\r\n            index = iKey + 1;\r\n            keyTime = data.k[iKey].t;\r\n          }\r\n        }\r\n      }\r\n      var obKey = {};\r\n      obKey.index = index;\r\n      obKey.time = keyTime / elem.comp.globalData.frameRate;\r\n      return obKey;\r\n    }\r\n\r\n    function key(ind) {\r\n      var obKey;\r\n      var iKey;\r\n      var lenKey;\r\n      if (!data.k.length || typeof (data.k[0]) === 'number') {\r\n        throw new Error('The property has no keyframe at index ' + ind);\r\n      }\r\n      ind -= 1;\r\n      obKey = {\r\n        time: data.k[ind].t / elem.comp.globalData.frameRate,\r\n        value: [],\r\n      };\r\n      var arr = Object.prototype.hasOwnProperty.call(data.k[ind], 's') ? data.k[ind].s : data.k[ind - 1].e;\r\n\r\n      lenKey = arr.length;\r\n      for (iKey = 0; iKey < lenKey; iKey += 1) {\r\n        obKey[iKey] = arr[iKey];\r\n        obKey.value[iKey] = arr[iKey];\r\n      }\r\n      return obKey;\r\n    }\r\n\r\n    function framesToTime(fr, fps) {\r\n      if (!fps) {\r\n        fps = elem.comp.globalData.frameRate;\r\n      }\r\n      return fr / fps;\r\n    }\r\n\r\n    function timeToFrames(t, fps) {\r\n      if (!t && t !== 0) {\r\n        t = time;\r\n      }\r\n      if (!fps) {\r\n        fps = elem.comp.globalData.frameRate;\r\n      }\r\n      return t * fps;\r\n    }\r\n\r\n    function seedRandom(seed) {\r\n      BMMath.seedrandom(randSeed + seed);\r\n    }\r\n\r\n    function sourceRectAtTime() {\r\n      return elem.sourceRectAtTime();\r\n    }\r\n\r\n    function substring(init, end) {\r\n      if (typeof value === 'string') {\r\n        if (end === undefined) {\r\n          return value.substring(init);\r\n        }\r\n        return value.substring(init, end);\r\n      }\r\n      return '';\r\n    }\r\n\r\n    function substr(init, end) {\r\n      if (typeof value === 'string') {\r\n        if (end === undefined) {\r\n          return value.substr(init);\r\n        }\r\n        return value.substr(init, end);\r\n      }\r\n      return '';\r\n    }\r\n\r\n    function posterizeTime(framesPerSecond) {\r\n      time = framesPerSecond === 0 ? 0 : Math.floor(time * framesPerSecond) / framesPerSecond;\r\n      value = valueAtTime(time);\r\n    }\r\n\r\n    var time;\r\n    var velocity;\r\n    var value;\r\n    var text;\r\n    var textIndex;\r\n    var textTotal;\r\n    var selectorValue;\r\n    var index = elem.data.ind;\r\n    var hasParent = !!(elem.hierarchy && elem.hierarchy.length);\r\n    var parent;\r\n    var randSeed = Math.floor(Math.random() * 1000000);\r\n    var globalData = elem.globalData;\r\n    function executeExpression(_value) {\r\n      // globalData.pushExpression();\r\n      value = _value;\r\n      if (this.frameExpressionId === elem.globalData.frameId && this.propType !== 'textSelector') {\r\n        return value;\r\n      }\r\n      if (this.propType === 'textSelector') {\r\n        textIndex = this.textIndex;\r\n        textTotal = this.textTotal;\r\n        selectorValue = this.selectorValue;\r\n      }\r\n      if (!thisLayer) {\r\n        text = elem.layerInterface.text;\r\n        thisLayer = elem.layerInterface;\r\n        thisComp = elem.comp.compInterface;\r\n        toWorld = thisLayer.toWorld.bind(thisLayer);\r\n        fromWorld = thisLayer.fromWorld.bind(thisLayer);\r\n        fromComp = thisLayer.fromComp.bind(thisLayer);\r\n        toComp = thisLayer.toComp.bind(thisLayer);\r\n        mask = thisLayer.mask ? thisLayer.mask.bind(thisLayer) : null;\r\n        fromCompToSurface = fromComp;\r\n      }\r\n      if (!transform) {\r\n        transform = elem.layerInterface('ADBE Transform Group');\r\n        $bm_transform = transform;\r\n        if (transform) {\r\n          anchorPoint = transform.anchorPoint;\r\n          /* position = transform.position;\r\n                    rotation = transform.rotation;\r\n                    scale = transform.scale; */\r\n        }\r\n      }\r\n\r\n      if (elemType === 4 && !content) {\r\n        content = thisLayer('ADBE Root Vectors Group');\r\n      }\r\n      if (!effect) {\r\n        effect = thisLayer(4);\r\n      }\r\n      hasParent = !!(elem.hierarchy && elem.hierarchy.length);\r\n      if (hasParent && !parent) {\r\n        parent = elem.hierarchy[0].layerInterface;\r\n      }\r\n      time = this.comp.renderedFrame / this.comp.globalData.frameRate;\r\n      if (_needsRandom) {\r\n        seedRandom(randSeed + time);\r\n      }\r\n      if (needsVelocity) {\r\n        velocity = velocityAtTime(time);\r\n      }\r\n      expression_function();\r\n      this.frameExpressionId = elem.globalData.frameId;\r\n\r\n      // TODO: Check if it's possible to return on ShapeInterface the .v value\r\n      if (scoped_bm_rt.propType === 'shape') {\r\n        scoped_bm_rt = scoped_bm_rt.v;\r\n      }\r\n      // globalData.popExpression();\r\n      return scoped_bm_rt;\r\n    }\r\n    return executeExpression;\r\n  }\r\n\r\n  ob.initiateExpression = initiateExpression;\r\n  return ob;\r\n}());\r\n\r\n/* global ExpressionManager, createTypedArray */\r\n/* exported expressionHelpers */\r\n\r\nvar expressionHelpers = (function () {\r\n  function searchExpressions(elem, data, prop) {\r\n    if (data.x) {\r\n      prop.k = true;\r\n      prop.x = true;\r\n      prop.initiateExpression = ExpressionManager.initiateExpression;\r\n      prop.effectsSequence.push(prop.initiateExpression(elem, data, prop).bind(prop));\r\n    }\r\n  }\r\n\r\n  function getValueAtTime(frameNum) {\r\n    frameNum *= this.elem.globalData.frameRate;\r\n    frameNum -= this.offsetTime;\r\n    if (frameNum !== this._cachingAtTime.lastFrame) {\r\n      this._cachingAtTime.lastIndex = this._cachingAtTime.lastFrame < frameNum ? this._cachingAtTime.lastIndex : 0;\r\n      this._cachingAtTime.value = this.interpolateValue(frameNum, this._cachingAtTime);\r\n      this._cachingAtTime.lastFrame = frameNum;\r\n    }\r\n    return this._cachingAtTime.value;\r\n  }\r\n\r\n  function getSpeedAtTime(frameNum) {\r\n    var delta = -0.01;\r\n    var v1 = this.getValueAtTime(frameNum);\r\n    var v2 = this.getValueAtTime(frameNum + delta);\r\n    var speed = 0;\r\n    if (v1.length) {\r\n      var i;\r\n      for (i = 0; i < v1.length; i += 1) {\r\n        speed += Math.pow(v2[i] - v1[i], 2);\r\n      }\r\n      speed = Math.sqrt(speed) * 100;\r\n    } else {\r\n      speed = 0;\r\n    }\r\n    return speed;\r\n  }\r\n\r\n  function getVelocityAtTime(frameNum) {\r\n    if (this.vel !== undefined) {\r\n      return this.vel;\r\n    }\r\n    var delta = -0.001;\r\n    // frameNum += this.elem.data.st;\r\n    var v1 = this.getValueAtTime(frameNum);\r\n    var v2 = this.getValueAtTime(frameNum + delta);\r\n    var velocity;\r\n    if (v1.length) {\r\n      velocity = createTypedArray('float32', v1.length);\r\n      var i;\r\n      for (i = 0; i < v1.length; i += 1) {\r\n        // removing frameRate\r\n        // if needed, don't add it here\r\n        // velocity[i] = this.elem.globalData.frameRate*((v2[i] - v1[i])/delta);\r\n        velocity[i] = (v2[i] - v1[i]) / delta;\r\n      }\r\n    } else {\r\n      velocity = (v2 - v1) / delta;\r\n    }\r\n    return velocity;\r\n  }\r\n\r\n  function getStaticValueAtTime() {\r\n    return this.pv;\r\n  }\r\n\r\n  function setGroupProperty(propertyGroup) {\r\n    this.propertyGroup = propertyGroup;\r\n  }\r\n\r\n  return {\r\n    searchExpressions: searchExpressions,\r\n    getSpeedAtTime: getSpeedAtTime,\r\n    getVelocityAtTime: getVelocityAtTime,\r\n    getValueAtTime: getValueAtTime,\r\n    getStaticValueAtTime: getStaticValueAtTime,\r\n    setGroupProperty: setGroupProperty,\r\n  };\r\n}());\r\n\r\n/* global createTypedArray, Matrix, TransformPropertyFactory, expressionHelpers, PropertyFactory, expressionHelpers,\r\ninitialDefaultFrame, shapePool, ShapePropertyFactory, bez, extendPrototype, ExpressionManager, createSizedArray */\r\n\r\n(function addPropertyDecorator() {\r\n  function loopOut(type, duration, durationFlag) {\r\n    if (!this.k || !this.keyframes) {\r\n      return this.pv;\r\n    }\r\n    type = type ? type.toLowerCase() : '';\r\n    var currentFrame = this.comp.renderedFrame;\r\n    var keyframes = this.keyframes;\r\n    var lastKeyFrame = keyframes[keyframes.length - 1].t;\r\n    if (currentFrame <= lastKeyFrame) {\r\n      return this.pv;\r\n    }\r\n    var cycleDuration;\r\n    var firstKeyFrame;\r\n    if (!durationFlag) {\r\n      if (!duration || duration > keyframes.length - 1) {\r\n        duration = keyframes.length - 1;\r\n      }\r\n      firstKeyFrame = keyframes[keyframes.length - 1 - duration].t;\r\n      cycleDuration = lastKeyFrame - firstKeyFrame;\r\n    } else {\r\n      if (!duration) {\r\n        cycleDuration = Math.max(0, lastKeyFrame - this.elem.data.ip);\r\n      } else {\r\n        cycleDuration = Math.abs(lastKeyFrame - this.elem.comp.globalData.frameRate * duration);\r\n      }\r\n      firstKeyFrame = lastKeyFrame - cycleDuration;\r\n    }\r\n    var i;\r\n    var len;\r\n    var ret;\r\n    if (type === 'pingpong') {\r\n      var iterations = Math.floor((currentFrame - firstKeyFrame) / cycleDuration);\r\n      if (iterations % 2 !== 0) {\r\n          return this.getValueAtTime(((cycleDuration - (currentFrame - firstKeyFrame) % cycleDuration + firstKeyFrame)) / this.comp.globalData.frameRate, 0); // eslint-disable-line\r\n      }\r\n    } else if (type === 'offset') {\r\n      var initV = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\r\n      var endV = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\r\n        var current = this.getValueAtTime(((currentFrame - firstKeyFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0); // eslint-disable-line\r\n      var repeats = Math.floor((currentFrame - firstKeyFrame) / cycleDuration);\r\n      if (this.pv.length) {\r\n        ret = new Array(initV.length);\r\n        len = ret.length;\r\n        for (i = 0; i < len; i += 1) {\r\n          ret[i] = (endV[i] - initV[i]) * repeats + current[i];\r\n        }\r\n        return ret;\r\n      }\r\n      return (endV - initV) * repeats + current;\r\n    } else if (type === 'continue') {\r\n      var lastValue = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\r\n      var nextLastValue = this.getValueAtTime((lastKeyFrame - 0.001) / this.comp.globalData.frameRate, 0);\r\n      if (this.pv.length) {\r\n        ret = new Array(lastValue.length);\r\n        len = ret.length;\r\n        for (i = 0; i < len; i += 1) {\r\n            ret[i] = lastValue[i] + (lastValue[i] - nextLastValue[i]) * ((currentFrame - lastKeyFrame) / this.comp.globalData.frameRate) / 0.0005; // eslint-disable-line\r\n        }\r\n        return ret;\r\n      }\r\n      return lastValue + (lastValue - nextLastValue) * (((currentFrame - lastKeyFrame)) / 0.001);\r\n    }\r\n      return this.getValueAtTime((((currentFrame - firstKeyFrame) % cycleDuration + firstKeyFrame)) / this.comp.globalData.frameRate, 0); // eslint-disable-line\r\n\r\n  }\r\n\r\n  function loopIn(type, duration, durationFlag) {\r\n    if (!this.k) {\r\n      return this.pv;\r\n    }\r\n    type = type ? type.toLowerCase() : '';\r\n    var currentFrame = this.comp.renderedFrame;\r\n    var keyframes = this.keyframes;\r\n    var firstKeyFrame = keyframes[0].t;\r\n    if (currentFrame >= firstKeyFrame) {\r\n      return this.pv;\r\n    }\r\n    var cycleDuration;\r\n    var lastKeyFrame;\r\n    if (!durationFlag) {\r\n      if (!duration || duration > keyframes.length - 1) {\r\n        duration = keyframes.length - 1;\r\n      }\r\n      lastKeyFrame = keyframes[duration].t;\r\n      cycleDuration = lastKeyFrame - firstKeyFrame;\r\n    } else {\r\n      if (!duration) {\r\n        cycleDuration = Math.max(0, this.elem.data.op - firstKeyFrame);\r\n      } else {\r\n        cycleDuration = Math.abs(this.elem.comp.globalData.frameRate * duration);\r\n      }\r\n      lastKeyFrame = firstKeyFrame + cycleDuration;\r\n    }\r\n    var i;\r\n    var len;\r\n    var ret;\r\n    if (type === 'pingpong') {\r\n      var iterations = Math.floor((firstKeyFrame - currentFrame) / cycleDuration);\r\n      if (iterations % 2 === 0) {\r\n          return this.getValueAtTime((((firstKeyFrame - currentFrame) % cycleDuration + firstKeyFrame)) / this.comp.globalData.frameRate, 0); // eslint-disable-line\r\n      }\r\n    } else if (type === 'offset') {\r\n      var initV = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\r\n      var endV = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\r\n      var current = this.getValueAtTime((cycleDuration - ((firstKeyFrame - currentFrame) % cycleDuration) + firstKeyFrame) / this.comp.globalData.frameRate, 0);\r\n      var repeats = Math.floor((firstKeyFrame - currentFrame) / cycleDuration) + 1;\r\n      if (this.pv.length) {\r\n        ret = new Array(initV.length);\r\n        len = ret.length;\r\n        for (i = 0; i < len; i += 1) {\r\n          ret[i] = current[i] - (endV[i] - initV[i]) * repeats;\r\n        }\r\n        return ret;\r\n      }\r\n      return current - (endV - initV) * repeats;\r\n    } else if (type === 'continue') {\r\n      var firstValue = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\r\n      var nextFirstValue = this.getValueAtTime((firstKeyFrame + 0.001) / this.comp.globalData.frameRate, 0);\r\n      if (this.pv.length) {\r\n        ret = new Array(firstValue.length);\r\n        len = ret.length;\r\n        for (i = 0; i < len; i += 1) {\r\n          ret[i] = firstValue[i] + ((firstValue[i] - nextFirstValue[i]) * (firstKeyFrame - currentFrame)) / 0.001;\r\n        }\r\n        return ret;\r\n      }\r\n      return firstValue + ((firstValue - nextFirstValue) * (firstKeyFrame - currentFrame)) / 0.001;\r\n    }\r\n      return this.getValueAtTime(((cycleDuration - ((firstKeyFrame - currentFrame) % cycleDuration + firstKeyFrame))) / this.comp.globalData.frameRate, 0); // eslint-disable-line\r\n\r\n  }\r\n\r\n  function smooth(width, samples) {\r\n    if (!this.k) {\r\n      return this.pv;\r\n    }\r\n    width = (width || 0.4) * 0.5;\r\n    samples = Math.floor(samples || 5);\r\n    if (samples <= 1) {\r\n      return this.pv;\r\n    }\r\n    var currentTime = this.comp.renderedFrame / this.comp.globalData.frameRate;\r\n    var initFrame = currentTime - width;\r\n    var endFrame = currentTime + width;\r\n    var sampleFrequency = samples > 1 ? (endFrame - initFrame) / (samples - 1) : 1;\r\n    var i = 0;\r\n    var j = 0;\r\n    var value;\r\n    if (this.pv.length) {\r\n      value = createTypedArray('float32', this.pv.length);\r\n    } else {\r\n      value = 0;\r\n    }\r\n    var sampleValue;\r\n    while (i < samples) {\r\n      sampleValue = this.getValueAtTime(initFrame + i * sampleFrequency);\r\n      if (this.pv.length) {\r\n        for (j = 0; j < this.pv.length; j += 1) {\r\n          value[j] += sampleValue[j];\r\n        }\r\n      } else {\r\n        value += sampleValue;\r\n      }\r\n      i += 1;\r\n    }\r\n    if (this.pv.length) {\r\n      for (j = 0; j < this.pv.length; j += 1) {\r\n        value[j] /= samples;\r\n      }\r\n    } else {\r\n      value /= samples;\r\n    }\r\n    return value;\r\n  }\r\n\r\n  function getTransformValueAtTime(time) {\r\n    if (!this._transformCachingAtTime) {\r\n      this._transformCachingAtTime = {\r\n        v: new Matrix(),\r\n      };\r\n    }\r\n    /// /\r\n    var matrix = this._transformCachingAtTime.v;\r\n    matrix.cloneFromProps(this.pre.props);\r\n    if (this.appliedTransformations < 1) {\r\n      var anchor = this.a.getValueAtTime(time);\r\n      matrix.translate(\r\n        -anchor[0] * this.a.mult,\r\n        -anchor[1] * this.a.mult,\r\n        anchor[2] * this.a.mult\r\n      );\r\n    }\r\n    if (this.appliedTransformations < 2) {\r\n      var scale = this.s.getValueAtTime(time);\r\n      matrix.scale(\r\n        scale[0] * this.s.mult,\r\n        scale[1] * this.s.mult,\r\n        scale[2] * this.s.mult\r\n      );\r\n    }\r\n    if (this.sk && this.appliedTransformations < 3) {\r\n      var skew = this.sk.getValueAtTime(time);\r\n      var skewAxis = this.sa.getValueAtTime(time);\r\n      matrix.skewFromAxis(-skew * this.sk.mult, skewAxis * this.sa.mult);\r\n    }\r\n    if (this.r && this.appliedTransformations < 4) {\r\n      var rotation = this.r.getValueAtTime(time);\r\n      matrix.rotate(-rotation * this.r.mult);\r\n    } else if (!this.r && this.appliedTransformations < 4) {\r\n      var rotationZ = this.rz.getValueAtTime(time);\r\n      var rotationY = this.ry.getValueAtTime(time);\r\n      var rotationX = this.rx.getValueAtTime(time);\r\n      var orientation = this.or.getValueAtTime(time);\r\n      matrix.rotateZ(-rotationZ * this.rz.mult)\r\n        .rotateY(rotationY * this.ry.mult)\r\n        .rotateX(rotationX * this.rx.mult)\r\n        .rotateZ(-orientation[2] * this.or.mult)\r\n        .rotateY(orientation[1] * this.or.mult)\r\n        .rotateX(orientation[0] * this.or.mult);\r\n    }\r\n    if (this.data.p && this.data.p.s) {\r\n      var positionX = this.px.getValueAtTime(time);\r\n      var positionY = this.py.getValueAtTime(time);\r\n      if (this.data.p.z) {\r\n        var positionZ = this.pz.getValueAtTime(time);\r\n        matrix.translate(\r\n          positionX * this.px.mult,\r\n          positionY * this.py.mult,\r\n          -positionZ * this.pz.mult\r\n        );\r\n      } else {\r\n        matrix.translate(positionX * this.px.mult, positionY * this.py.mult, 0);\r\n      }\r\n    } else {\r\n      var position = this.p.getValueAtTime(time);\r\n      matrix.translate(\r\n        position[0] * this.p.mult,\r\n        position[1] * this.p.mult,\r\n        -position[2] * this.p.mult\r\n      );\r\n    }\r\n    return matrix;\r\n    /// /\r\n  }\r\n\r\n  function getTransformStaticValueAtTime() {\r\n    return this.v.clone(new Matrix());\r\n  }\r\n\r\n  var getTransformProperty = TransformPropertyFactory.getTransformProperty;\r\n  TransformPropertyFactory.getTransformProperty = function (elem, data, container) {\r\n    var prop = getTransformProperty(elem, data, container);\r\n    if (prop.dynamicProperties.length) {\r\n      prop.getValueAtTime = getTransformValueAtTime.bind(prop);\r\n    } else {\r\n      prop.getValueAtTime = getTransformStaticValueAtTime.bind(prop);\r\n    }\r\n    prop.setGroupProperty = expressionHelpers.setGroupProperty;\r\n    return prop;\r\n  };\r\n\r\n  var propertyGetProp = PropertyFactory.getProp;\r\n  PropertyFactory.getProp = function (elem, data, type, mult, container) {\r\n    var prop = propertyGetProp(elem, data, type, mult, container);\r\n    // prop.getVelocityAtTime = getVelocityAtTime;\r\n    // prop.loopOut = loopOut;\r\n    // prop.loopIn = loopIn;\r\n    if (prop.kf) {\r\n      prop.getValueAtTime = expressionHelpers.getValueAtTime.bind(prop);\r\n    } else {\r\n      prop.getValueAtTime = expressionHelpers.getStaticValueAtTime.bind(prop);\r\n    }\r\n    prop.setGroupProperty = expressionHelpers.setGroupProperty;\r\n    prop.loopOut = loopOut;\r\n    prop.loopIn = loopIn;\r\n    prop.smooth = smooth;\r\n    prop.getVelocityAtTime = expressionHelpers.getVelocityAtTime.bind(prop);\r\n    prop.getSpeedAtTime = expressionHelpers.getSpeedAtTime.bind(prop);\r\n    prop.numKeys = data.a === 1 ? data.k.length : 0;\r\n    prop.propertyIndex = data.ix;\r\n    var value = 0;\r\n    if (type !== 0) {\r\n      value = createTypedArray('float32', data.a === 1 ? data.k[0].s.length : data.k.length);\r\n    }\r\n    prop._cachingAtTime = {\r\n      lastFrame: initialDefaultFrame,\r\n      lastIndex: 0,\r\n      value: value,\r\n    };\r\n    expressionHelpers.searchExpressions(elem, data, prop);\r\n    if (prop.k) {\r\n      container.addDynamicProperty(prop);\r\n    }\r\n\r\n    return prop;\r\n  };\r\n\r\n  function getShapeValueAtTime(frameNum) {\r\n    // For now this caching object is created only when needed instead of creating it when the shape is initialized.\r\n    if (!this._cachingAtTime) {\r\n      this._cachingAtTime = {\r\n        shapeValue: shapePool.clone(this.pv),\r\n        lastIndex: 0,\r\n        lastTime: initialDefaultFrame,\r\n      };\r\n    }\r\n\r\n    frameNum *= this.elem.globalData.frameRate;\r\n    frameNum -= this.offsetTime;\r\n    if (frameNum !== this._cachingAtTime.lastTime) {\r\n      this._cachingAtTime.lastIndex = this._cachingAtTime.lastTime < frameNum ? this._caching.lastIndex : 0;\r\n      this._cachingAtTime.lastTime = frameNum;\r\n      this.interpolateShape(frameNum, this._cachingAtTime.shapeValue, this._cachingAtTime);\r\n    }\r\n    return this._cachingAtTime.shapeValue;\r\n  }\r\n\r\n  var ShapePropertyConstructorFunction = ShapePropertyFactory.getConstructorFunction();\r\n  var KeyframedShapePropertyConstructorFunction = ShapePropertyFactory.getKeyframedConstructorFunction();\r\n\r\n  function ShapeExpressions() {}\r\n  ShapeExpressions.prototype = {\r\n    vertices: function (prop, time) {\r\n      if (this.k) {\r\n        this.getValue();\r\n      }\r\n      var shapePath = this.v;\r\n      if (time !== undefined) {\r\n        shapePath = this.getValueAtTime(time, 0);\r\n      }\r\n      var i;\r\n      var len = shapePath._length;\r\n      var vertices = shapePath[prop];\r\n      var points = shapePath.v;\r\n      var arr = createSizedArray(len);\r\n      for (i = 0; i < len; i += 1) {\r\n        if (prop === 'i' || prop === 'o') {\r\n          arr[i] = [vertices[i][0] - points[i][0], vertices[i][1] - points[i][1]];\r\n        } else {\r\n          arr[i] = [vertices[i][0], vertices[i][1]];\r\n        }\r\n      }\r\n      return arr;\r\n    },\r\n    points: function (time) {\r\n      return this.vertices('v', time);\r\n    },\r\n    inTangents: function (time) {\r\n      return this.vertices('i', time);\r\n    },\r\n    outTangents: function (time) {\r\n      return this.vertices('o', time);\r\n    },\r\n    isClosed: function () {\r\n      return this.v.c;\r\n    },\r\n    pointOnPath: function (perc, time) {\r\n      var shapePath = this.v;\r\n      if (time !== undefined) {\r\n        shapePath = this.getValueAtTime(time, 0);\r\n      }\r\n      if (!this._segmentsLength) {\r\n        this._segmentsLength = bez.getSegmentsLength(shapePath);\r\n      }\r\n\r\n      var segmentsLength = this._segmentsLength;\r\n      var lengths = segmentsLength.lengths;\r\n      var lengthPos = segmentsLength.totalLength * perc;\r\n      var i = 0;\r\n      var len = lengths.length;\r\n      var accumulatedLength = 0;\r\n      var pt;\r\n      while (i < len) {\r\n        if (accumulatedLength + lengths[i].addedLength > lengthPos) {\r\n          var initIndex = i;\r\n          var endIndex = (shapePath.c && i === len - 1) ? 0 : i + 1;\r\n          var segmentPerc = (lengthPos - accumulatedLength) / lengths[i].addedLength;\r\n          pt = bez.getPointInSegment(shapePath.v[initIndex], shapePath.v[endIndex], shapePath.o[initIndex], shapePath.i[endIndex], segmentPerc, lengths[i]);\r\n          break;\r\n        } else {\r\n          accumulatedLength += lengths[i].addedLength;\r\n        }\r\n        i += 1;\r\n      }\r\n      if (!pt) {\r\n        pt = shapePath.c ? [shapePath.v[0][0], shapePath.v[0][1]] : [shapePath.v[shapePath._length - 1][0], shapePath.v[shapePath._length - 1][1]];\r\n      }\r\n      return pt;\r\n    },\r\n    vectorOnPath: function (perc, time, vectorType) {\r\n      // perc doesn't use triple equality because it can be a Number object as well as a primitive.\r\n      if (perc == 1) { // eslint-disable-line eqeqeq\r\n        perc = this.v.c;\r\n      } else if (perc == 0) { // eslint-disable-line eqeqeq\r\n        perc = 0.999;\r\n      }\r\n      var pt1 = this.pointOnPath(perc, time);\r\n      var pt2 = this.pointOnPath(perc + 0.001, time);\r\n      var xLength = pt2[0] - pt1[0];\r\n      var yLength = pt2[1] - pt1[1];\r\n      var magnitude = Math.sqrt(Math.pow(xLength, 2) + Math.pow(yLength, 2));\r\n      if (magnitude === 0) {\r\n        return [0, 0];\r\n      }\r\n      var unitVector = vectorType === 'tangent' ? [xLength / magnitude, yLength / magnitude] : [-yLength / magnitude, xLength / magnitude];\r\n      return unitVector;\r\n    },\r\n    tangentOnPath: function (perc, time) {\r\n      return this.vectorOnPath(perc, time, 'tangent');\r\n    },\r\n    normalOnPath: function (perc, time) {\r\n      return this.vectorOnPath(perc, time, 'normal');\r\n    },\r\n    setGroupProperty: expressionHelpers.setGroupProperty,\r\n    getValueAtTime: expressionHelpers.getStaticValueAtTime,\r\n  };\r\n  extendPrototype([ShapeExpressions], ShapePropertyConstructorFunction);\r\n  extendPrototype([ShapeExpressions], KeyframedShapePropertyConstructorFunction);\r\n  KeyframedShapePropertyConstructorFunction.prototype.getValueAtTime = getShapeValueAtTime;\r\n  KeyframedShapePropertyConstructorFunction.prototype.initiateExpression = ExpressionManager.initiateExpression;\r\n\r\n  var propertyGetShapeProp = ShapePropertyFactory.getShapeProp;\r\n  ShapePropertyFactory.getShapeProp = function (elem, data, type, arr, trims) {\r\n    var prop = propertyGetShapeProp(elem, data, type, arr, trims);\r\n    prop.propertyIndex = data.ix;\r\n    prop.lock = false;\r\n    if (type === 3) {\r\n      expressionHelpers.searchExpressions(elem, data.pt, prop);\r\n    } else if (type === 4) {\r\n      expressionHelpers.searchExpressions(elem, data.ks, prop);\r\n    }\r\n    if (prop.k) {\r\n      elem.addDynamicProperty(prop);\r\n    }\r\n    return prop;\r\n  };\r\n}());\r\n\r\n/* global ExpressionManager, TextProperty */\r\n\r\n(function addDecorator() {\r\n  function searchExpressions() {\r\n    if (this.data.d.x) {\r\n      this.calculateExpression = ExpressionManager.initiateExpression.bind(this)(this.elem, this.data.d, this);\r\n      this.addEffect(this.getExpressionValue.bind(this));\r\n      return true;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  TextProperty.prototype.getExpressionValue = function (currentValue, text) {\r\n    var newValue = this.calculateExpression(text);\r\n    if (currentValue.t !== newValue) {\r\n      var newData = {};\r\n      this.copyData(newData, currentValue);\r\n      newData.t = newValue.toString();\r\n      newData.__complete = false;\r\n      return newData;\r\n    }\r\n    return currentValue;\r\n  };\r\n\r\n  TextProperty.prototype.searchProperty = function () {\r\n    var isKeyframed = this.searchKeyframes();\r\n    var hasExpressions = this.searchExpressions();\r\n    this.kf = isKeyframed || hasExpressions;\r\n    return this.kf;\r\n  };\r\n\r\n  TextProperty.prototype.searchExpressions = searchExpressions;\r\n}());\r\n\r\n/* global propertyGroupFactory, PropertyInterface */\r\n/* exported ShapePathInterface */\r\n\r\nvar ShapePathInterface = (\r\n\r\n  function () {\r\n    return function pathInterfaceFactory(shape, view, propertyGroup) {\r\n      var prop = view.sh;\r\n\r\n      function interfaceFunction(val) {\r\n        if (val === 'Shape' || val === 'shape' || val === 'Path' || val === 'path' || val === 'ADBE Vector Shape' || val === 2) {\r\n          return interfaceFunction.path;\r\n        }\r\n        return null;\r\n      }\r\n\r\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n      prop.setGroupProperty(PropertyInterface('Path', _propertyGroup));\r\n      Object.defineProperties(interfaceFunction, {\r\n        path: {\r\n          get: function () {\r\n            if (prop.k) {\r\n              prop.getValue();\r\n            }\r\n            return prop;\r\n          },\r\n        },\r\n        shape: {\r\n          get: function () {\r\n            if (prop.k) {\r\n              prop.getValue();\r\n            }\r\n            return prop;\r\n          },\r\n        },\r\n        _name: { value: shape.nm },\r\n        ix: { value: shape.ix },\r\n        propertyIndex: { value: shape.ix },\r\n        mn: { value: shape.mn },\r\n        propertyGroup: { value: propertyGroup },\r\n      });\r\n      return interfaceFunction;\r\n    };\r\n  }()\r\n);\r\n\r\n/* exported propertyGroupFactory */\r\n\r\nvar propertyGroupFactory = (function () {\r\n  return function (interfaceFunction, parentPropertyGroup) {\r\n    return function (val) {\r\n      val = val === undefined ? 1 : val;\r\n      if (val <= 0) {\r\n        return interfaceFunction;\r\n      }\r\n      return parentPropertyGroup(val - 1);\r\n    };\r\n  };\r\n}());\r\n\r\n/* exported PropertyInterface */\r\n\r\nvar PropertyInterface = (function () {\r\n  return function (propertyName, propertyGroup) {\r\n    var interfaceFunction = {\r\n      _name: propertyName,\r\n    };\r\n\r\n    function _propertyGroup(val) {\r\n      val = val === undefined ? 1 : val;\r\n      if (val <= 0) {\r\n        return interfaceFunction;\r\n      }\r\n      return propertyGroup(val - 1);\r\n    }\r\n\r\n    return _propertyGroup;\r\n  };\r\n}());\r\n\r\n/* global ExpressionPropertyInterface, PropertyInterface, propertyGroupFactory, ShapePathInterface */\r\n/* exported ShapeExpressionInterface */\r\n\r\nvar ShapeExpressionInterface = (function () {\r\n  function iterateElements(shapes, view, propertyGroup) {\r\n    var arr = [];\r\n    var i;\r\n    var len = shapes ? shapes.length : 0;\r\n    for (i = 0; i < len; i += 1) {\r\n      if (shapes[i].ty === 'gr') {\r\n        arr.push(groupInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n      } else if (shapes[i].ty === 'fl') {\r\n        arr.push(fillInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n      } else if (shapes[i].ty === 'st') {\r\n        arr.push(strokeInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n      } else if (shapes[i].ty === 'tm') {\r\n        arr.push(trimInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n      } else if (shapes[i].ty === 'tr') {\r\n        // arr.push(transformInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n      } else if (shapes[i].ty === 'el') {\r\n        arr.push(ellipseInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n      } else if (shapes[i].ty === 'sr') {\r\n        arr.push(starInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n      } else if (shapes[i].ty === 'sh') {\r\n        arr.push(ShapePathInterface(shapes[i], view[i], propertyGroup));\r\n      } else if (shapes[i].ty === 'rc') {\r\n        arr.push(rectInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n      } else if (shapes[i].ty === 'rd') {\r\n        arr.push(roundedInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n      } else if (shapes[i].ty === 'rp') {\r\n        arr.push(repeaterInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n      } else if (shapes[i].ty === 'gf') {\r\n        arr.push(gradientFillInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n      } else {\r\n        arr.push(defaultInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n      }\r\n    }\r\n    return arr;\r\n  }\r\n\r\n  function contentsInterfaceFactory(shape, view, propertyGroup) {\r\n    var interfaces;\r\n    var interfaceFunction = function _interfaceFunction(value) {\r\n      var i = 0;\r\n      var len = interfaces.length;\r\n      while (i < len) {\r\n        if (interfaces[i]._name === value || interfaces[i].mn === value || interfaces[i].propertyIndex === value || interfaces[i].ix === value || interfaces[i].ind === value) {\r\n          return interfaces[i];\r\n        }\r\n        i += 1;\r\n      }\r\n      if (typeof value === 'number') {\r\n        return interfaces[value - 1];\r\n      }\r\n      return null;\r\n    };\r\n\r\n    interfaceFunction.propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n    interfaces = iterateElements(shape.it, view.it, interfaceFunction.propertyGroup);\r\n    interfaceFunction.numProperties = interfaces.length;\r\n    var transformInterface = transformInterfaceFactory(shape.it[shape.it.length - 1], view.it[view.it.length - 1], interfaceFunction.propertyGroup);\r\n    interfaceFunction.transform = transformInterface;\r\n    interfaceFunction.propertyIndex = shape.cix;\r\n    interfaceFunction._name = shape.nm;\r\n\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function groupInterfaceFactory(shape, view, propertyGroup) {\r\n    var interfaceFunction = function _interfaceFunction(value) {\r\n      switch (value) {\r\n        case 'ADBE Vectors Group':\r\n        case 'Contents':\r\n        case 2:\r\n          return interfaceFunction.content;\r\n          // Not necessary for now. Keeping them here in case a new case appears\r\n          // case 'ADBE Vector Transform Group':\r\n          // case 3:\r\n        default:\r\n          return interfaceFunction.transform;\r\n      }\r\n    };\r\n    interfaceFunction.propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n    var content = contentsInterfaceFactory(shape, view, interfaceFunction.propertyGroup);\r\n    var transformInterface = transformInterfaceFactory(shape.it[shape.it.length - 1], view.it[view.it.length - 1], interfaceFunction.propertyGroup);\r\n    interfaceFunction.content = content;\r\n    interfaceFunction.transform = transformInterface;\r\n    Object.defineProperty(interfaceFunction, '_name', {\r\n      get: function () {\r\n        return shape.nm;\r\n      },\r\n    });\r\n    // interfaceFunction.content = interfaceFunction;\r\n    interfaceFunction.numProperties = shape.np;\r\n    interfaceFunction.propertyIndex = shape.ix;\r\n    interfaceFunction.nm = shape.nm;\r\n    interfaceFunction.mn = shape.mn;\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function fillInterfaceFactory(shape, view, propertyGroup) {\r\n    function interfaceFunction(val) {\r\n      if (val === 'Color' || val === 'color') {\r\n        return interfaceFunction.color;\r\n      } if (val === 'Opacity' || val === 'opacity') {\r\n        return interfaceFunction.opacity;\r\n      }\r\n      return null;\r\n    }\r\n    Object.defineProperties(interfaceFunction, {\r\n      color: {\r\n        get: ExpressionPropertyInterface(view.c),\r\n      },\r\n      opacity: {\r\n        get: ExpressionPropertyInterface(view.o),\r\n      },\r\n      _name: { value: shape.nm },\r\n      mn: { value: shape.mn },\r\n    });\r\n\r\n    view.c.setGroupProperty(PropertyInterface('Color', propertyGroup));\r\n    view.o.setGroupProperty(PropertyInterface('Opacity', propertyGroup));\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function gradientFillInterfaceFactory(shape, view, propertyGroup) {\r\n    function interfaceFunction(val) {\r\n      if (val === 'Start Point' || val === 'start point') {\r\n        return interfaceFunction.startPoint;\r\n      }\r\n      if (val === 'End Point' || val === 'end point') {\r\n        return interfaceFunction.endPoint;\r\n      }\r\n      if (val === 'Opacity' || val === 'opacity') {\r\n        return interfaceFunction.opacity;\r\n      }\r\n      return null;\r\n    }\r\n    Object.defineProperties(interfaceFunction, {\r\n      startPoint: {\r\n        get: ExpressionPropertyInterface(view.s),\r\n      },\r\n      endPoint: {\r\n        get: ExpressionPropertyInterface(view.e),\r\n      },\r\n      opacity: {\r\n        get: ExpressionPropertyInterface(view.o),\r\n      },\r\n      type: {\r\n        get: function () {\r\n          return 'a';\r\n        },\r\n      },\r\n      _name: { value: shape.nm },\r\n      mn: { value: shape.mn },\r\n    });\r\n\r\n    view.s.setGroupProperty(PropertyInterface('Start Point', propertyGroup));\r\n    view.e.setGroupProperty(PropertyInterface('End Point', propertyGroup));\r\n    view.o.setGroupProperty(PropertyInterface('Opacity', propertyGroup));\r\n    return interfaceFunction;\r\n  }\r\n  function defaultInterfaceFactory() {\r\n    function interfaceFunction() {\r\n      return null;\r\n    }\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function strokeInterfaceFactory(shape, view, propertyGroup) {\r\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n    var _dashPropertyGroup = propertyGroupFactory(dashOb, _propertyGroup);\r\n    function addPropertyToDashOb(i) {\r\n      Object.defineProperty(dashOb, shape.d[i].nm, {\r\n        get: ExpressionPropertyInterface(view.d.dataProps[i].p),\r\n      });\r\n    }\r\n    var i;\r\n    var len = shape.d ? shape.d.length : 0;\r\n    var dashOb = {};\r\n    for (i = 0; i < len; i += 1) {\r\n      addPropertyToDashOb(i);\r\n      view.d.dataProps[i].p.setGroupProperty(_dashPropertyGroup);\r\n    }\r\n\r\n    function interfaceFunction(val) {\r\n      if (val === 'Color' || val === 'color') {\r\n        return interfaceFunction.color;\r\n      } if (val === 'Opacity' || val === 'opacity') {\r\n        return interfaceFunction.opacity;\r\n      } if (val === 'Stroke Width' || val === 'stroke width') {\r\n        return interfaceFunction.strokeWidth;\r\n      }\r\n      return null;\r\n    }\r\n    Object.defineProperties(interfaceFunction, {\r\n      color: {\r\n        get: ExpressionPropertyInterface(view.c),\r\n      },\r\n      opacity: {\r\n        get: ExpressionPropertyInterface(view.o),\r\n      },\r\n      strokeWidth: {\r\n        get: ExpressionPropertyInterface(view.w),\r\n      },\r\n      dash: {\r\n        get: function () {\r\n          return dashOb;\r\n        },\r\n      },\r\n      _name: { value: shape.nm },\r\n      mn: { value: shape.mn },\r\n    });\r\n\r\n    view.c.setGroupProperty(PropertyInterface('Color', _propertyGroup));\r\n    view.o.setGroupProperty(PropertyInterface('Opacity', _propertyGroup));\r\n    view.w.setGroupProperty(PropertyInterface('Stroke Width', _propertyGroup));\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function trimInterfaceFactory(shape, view, propertyGroup) {\r\n    function interfaceFunction(val) {\r\n      if (val === shape.e.ix || val === 'End' || val === 'end') {\r\n        return interfaceFunction.end;\r\n      }\r\n      if (val === shape.s.ix) {\r\n        return interfaceFunction.start;\r\n      }\r\n      if (val === shape.o.ix) {\r\n        return interfaceFunction.offset;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n    interfaceFunction.propertyIndex = shape.ix;\r\n\r\n    view.s.setGroupProperty(PropertyInterface('Start', _propertyGroup));\r\n    view.e.setGroupProperty(PropertyInterface('End', _propertyGroup));\r\n    view.o.setGroupProperty(PropertyInterface('Offset', _propertyGroup));\r\n    interfaceFunction.propertyIndex = shape.ix;\r\n    interfaceFunction.propertyGroup = propertyGroup;\r\n\r\n    Object.defineProperties(interfaceFunction, {\r\n      start: {\r\n        get: ExpressionPropertyInterface(view.s),\r\n      },\r\n      end: {\r\n        get: ExpressionPropertyInterface(view.e),\r\n      },\r\n      offset: {\r\n        get: ExpressionPropertyInterface(view.o),\r\n      },\r\n      _name: { value: shape.nm },\r\n    });\r\n    interfaceFunction.mn = shape.mn;\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function transformInterfaceFactory(shape, view, propertyGroup) {\r\n    function interfaceFunction(value) {\r\n      if (shape.a.ix === value || value === 'Anchor Point') {\r\n        return interfaceFunction.anchorPoint;\r\n      }\r\n      if (shape.o.ix === value || value === 'Opacity') {\r\n        return interfaceFunction.opacity;\r\n      }\r\n      if (shape.p.ix === value || value === 'Position') {\r\n        return interfaceFunction.position;\r\n      }\r\n      if (shape.r.ix === value || value === 'Rotation' || value === 'ADBE Vector Rotation') {\r\n        return interfaceFunction.rotation;\r\n      }\r\n      if (shape.s.ix === value || value === 'Scale') {\r\n        return interfaceFunction.scale;\r\n      }\r\n      if ((shape.sk && shape.sk.ix === value) || value === 'Skew') {\r\n        return interfaceFunction.skew;\r\n      }\r\n      if ((shape.sa && shape.sa.ix === value) || value === 'Skew Axis') {\r\n        return interfaceFunction.skewAxis;\r\n      }\r\n      return null;\r\n    }\r\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n    view.transform.mProps.o.setGroupProperty(PropertyInterface('Opacity', _propertyGroup));\r\n    view.transform.mProps.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\r\n    view.transform.mProps.a.setGroupProperty(PropertyInterface('Anchor Point', _propertyGroup));\r\n    view.transform.mProps.s.setGroupProperty(PropertyInterface('Scale', _propertyGroup));\r\n    view.transform.mProps.r.setGroupProperty(PropertyInterface('Rotation', _propertyGroup));\r\n    if (view.transform.mProps.sk) {\r\n      view.transform.mProps.sk.setGroupProperty(PropertyInterface('Skew', _propertyGroup));\r\n      view.transform.mProps.sa.setGroupProperty(PropertyInterface('Skew Angle', _propertyGroup));\r\n    }\r\n    view.transform.op.setGroupProperty(PropertyInterface('Opacity', _propertyGroup));\r\n    Object.defineProperties(interfaceFunction, {\r\n      opacity: {\r\n        get: ExpressionPropertyInterface(view.transform.mProps.o),\r\n      },\r\n      position: {\r\n        get: ExpressionPropertyInterface(view.transform.mProps.p),\r\n      },\r\n      anchorPoint: {\r\n        get: ExpressionPropertyInterface(view.transform.mProps.a),\r\n      },\r\n      scale: {\r\n        get: ExpressionPropertyInterface(view.transform.mProps.s),\r\n      },\r\n      rotation: {\r\n        get: ExpressionPropertyInterface(view.transform.mProps.r),\r\n      },\r\n      skew: {\r\n        get: ExpressionPropertyInterface(view.transform.mProps.sk),\r\n      },\r\n      skewAxis: {\r\n        get: ExpressionPropertyInterface(view.transform.mProps.sa),\r\n      },\r\n      _name: { value: shape.nm },\r\n    });\r\n    interfaceFunction.ty = 'tr';\r\n    interfaceFunction.mn = shape.mn;\r\n    interfaceFunction.propertyGroup = propertyGroup;\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function ellipseInterfaceFactory(shape, view, propertyGroup) {\r\n    function interfaceFunction(value) {\r\n      if (shape.p.ix === value) {\r\n        return interfaceFunction.position;\r\n      }\r\n      if (shape.s.ix === value) {\r\n        return interfaceFunction.size;\r\n      }\r\n      return null;\r\n    }\r\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n    interfaceFunction.propertyIndex = shape.ix;\r\n    var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\r\n    prop.s.setGroupProperty(PropertyInterface('Size', _propertyGroup));\r\n    prop.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\r\n\r\n    Object.defineProperties(interfaceFunction, {\r\n      size: {\r\n        get: ExpressionPropertyInterface(prop.s),\r\n      },\r\n      position: {\r\n        get: ExpressionPropertyInterface(prop.p),\r\n      },\r\n      _name: { value: shape.nm },\r\n    });\r\n    interfaceFunction.mn = shape.mn;\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function starInterfaceFactory(shape, view, propertyGroup) {\r\n    function interfaceFunction(value) {\r\n      if (shape.p.ix === value) {\r\n        return interfaceFunction.position;\r\n      }\r\n      if (shape.r.ix === value) {\r\n        return interfaceFunction.rotation;\r\n      }\r\n      if (shape.pt.ix === value) {\r\n        return interfaceFunction.points;\r\n      }\r\n      if (shape.or.ix === value || value === 'ADBE Vector Star Outer Radius') {\r\n        return interfaceFunction.outerRadius;\r\n      }\r\n      if (shape.os.ix === value) {\r\n        return interfaceFunction.outerRoundness;\r\n      }\r\n      if (shape.ir && (shape.ir.ix === value || value === 'ADBE Vector Star Inner Radius')) {\r\n        return interfaceFunction.innerRadius;\r\n      }\r\n      if (shape.is && shape.is.ix === value) {\r\n        return interfaceFunction.innerRoundness;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n    var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\r\n    interfaceFunction.propertyIndex = shape.ix;\r\n    prop.or.setGroupProperty(PropertyInterface('Outer Radius', _propertyGroup));\r\n    prop.os.setGroupProperty(PropertyInterface('Outer Roundness', _propertyGroup));\r\n    prop.pt.setGroupProperty(PropertyInterface('Points', _propertyGroup));\r\n    prop.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\r\n    prop.r.setGroupProperty(PropertyInterface('Rotation', _propertyGroup));\r\n    if (shape.ir) {\r\n      prop.ir.setGroupProperty(PropertyInterface('Inner Radius', _propertyGroup));\r\n      prop.is.setGroupProperty(PropertyInterface('Inner Roundness', _propertyGroup));\r\n    }\r\n\r\n    Object.defineProperties(interfaceFunction, {\r\n      position: {\r\n        get: ExpressionPropertyInterface(prop.p),\r\n      },\r\n      rotation: {\r\n        get: ExpressionPropertyInterface(prop.r),\r\n      },\r\n      points: {\r\n        get: ExpressionPropertyInterface(prop.pt),\r\n      },\r\n      outerRadius: {\r\n        get: ExpressionPropertyInterface(prop.or),\r\n      },\r\n      outerRoundness: {\r\n        get: ExpressionPropertyInterface(prop.os),\r\n      },\r\n      innerRadius: {\r\n        get: ExpressionPropertyInterface(prop.ir),\r\n      },\r\n      innerRoundness: {\r\n        get: ExpressionPropertyInterface(prop.is),\r\n      },\r\n      _name: { value: shape.nm },\r\n    });\r\n    interfaceFunction.mn = shape.mn;\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function rectInterfaceFactory(shape, view, propertyGroup) {\r\n    function interfaceFunction(value) {\r\n      if (shape.p.ix === value) {\r\n        return interfaceFunction.position;\r\n      }\r\n      if (shape.r.ix === value) {\r\n        return interfaceFunction.roundness;\r\n      }\r\n      if (shape.s.ix === value || value === 'Size' || value === 'ADBE Vector Rect Size') {\r\n        return interfaceFunction.size;\r\n      }\r\n      return null;\r\n    }\r\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n\r\n    var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\r\n    interfaceFunction.propertyIndex = shape.ix;\r\n    prop.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\r\n    prop.s.setGroupProperty(PropertyInterface('Size', _propertyGroup));\r\n    prop.r.setGroupProperty(PropertyInterface('Rotation', _propertyGroup));\r\n\r\n    Object.defineProperties(interfaceFunction, {\r\n      position: {\r\n        get: ExpressionPropertyInterface(prop.p),\r\n      },\r\n      roundness: {\r\n        get: ExpressionPropertyInterface(prop.r),\r\n      },\r\n      size: {\r\n        get: ExpressionPropertyInterface(prop.s),\r\n      },\r\n      _name: { value: shape.nm },\r\n    });\r\n    interfaceFunction.mn = shape.mn;\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function roundedInterfaceFactory(shape, view, propertyGroup) {\r\n    function interfaceFunction(value) {\r\n      if (shape.r.ix === value || value === 'Round Corners 1') {\r\n        return interfaceFunction.radius;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n    var prop = view;\r\n    interfaceFunction.propertyIndex = shape.ix;\r\n    prop.rd.setGroupProperty(PropertyInterface('Radius', _propertyGroup));\r\n\r\n    Object.defineProperties(interfaceFunction, {\r\n      radius: {\r\n        get: ExpressionPropertyInterface(prop.rd),\r\n      },\r\n      _name: { value: shape.nm },\r\n    });\r\n    interfaceFunction.mn = shape.mn;\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function repeaterInterfaceFactory(shape, view, propertyGroup) {\r\n    function interfaceFunction(value) {\r\n      if (shape.c.ix === value || value === 'Copies') {\r\n        return interfaceFunction.copies;\r\n      } if (shape.o.ix === value || value === 'Offset') {\r\n        return interfaceFunction.offset;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n    var prop = view;\r\n    interfaceFunction.propertyIndex = shape.ix;\r\n    prop.c.setGroupProperty(PropertyInterface('Copies', _propertyGroup));\r\n    prop.o.setGroupProperty(PropertyInterface('Offset', _propertyGroup));\r\n    Object.defineProperties(interfaceFunction, {\r\n      copies: {\r\n        get: ExpressionPropertyInterface(prop.c),\r\n      },\r\n      offset: {\r\n        get: ExpressionPropertyInterface(prop.o),\r\n      },\r\n      _name: { value: shape.nm },\r\n    });\r\n    interfaceFunction.mn = shape.mn;\r\n    return interfaceFunction;\r\n  }\r\n\r\n  return function (shapes, view, propertyGroup) {\r\n    var interfaces;\r\n    function _interfaceFunction(value) {\r\n      if (typeof value === 'number') {\r\n        value = value === undefined ? 1 : value;\r\n        if (value === 0) {\r\n          return propertyGroup;\r\n        }\r\n        return interfaces[value - 1];\r\n      }\r\n      var i = 0;\r\n      var len = interfaces.length;\r\n      while (i < len) {\r\n        if (interfaces[i]._name === value) {\r\n          return interfaces[i];\r\n        }\r\n        i += 1;\r\n      }\r\n      return null;\r\n    }\r\n    function parentGroupWrapper() {\r\n      return propertyGroup;\r\n    }\r\n    _interfaceFunction.propertyGroup = propertyGroupFactory(_interfaceFunction, parentGroupWrapper);\r\n    interfaces = iterateElements(shapes, view, _interfaceFunction.propertyGroup);\r\n    _interfaceFunction.numProperties = interfaces.length;\r\n    _interfaceFunction._name = 'Contents';\r\n    return _interfaceFunction;\r\n  };\r\n}());\r\n\r\n/* exported TextExpressionInterface */\r\n\r\nvar TextExpressionInterface = (function () {\r\n  return function (elem) {\r\n    var _prevValue;\r\n    var _sourceText;\r\n    function _thisLayerFunction(name) {\r\n      switch (name) {\r\n        case 'ADBE Text Document':\r\n          return _thisLayerFunction.sourceText;\r\n        default:\r\n          return null;\r\n      }\r\n    }\r\n    Object.defineProperty(_thisLayerFunction, 'sourceText', {\r\n      get: function () {\r\n        elem.textProperty.getValue();\r\n        var stringValue = elem.textProperty.currentData.t;\r\n        if (stringValue !== _prevValue) {\r\n          elem.textProperty.currentData.t = _prevValue;\r\n          _sourceText = new String(stringValue); // eslint-disable-line no-new-wrappers\r\n          // If stringValue is an empty string, eval returns undefined, so it has to be returned as a String primitive\r\n          _sourceText.value = stringValue || new String(stringValue); // eslint-disable-line no-new-wrappers\r\n        }\r\n        return _sourceText;\r\n      },\r\n    });\r\n    return _thisLayerFunction;\r\n  };\r\n}());\r\n\r\n/* global Matrix, MaskManagerInterface, TransformExpressionInterface, getDescriptor */\r\n/* exported LayerExpressionInterface */\r\n\r\nvar LayerExpressionInterface = (function () {\r\n  function getMatrix(time) {\r\n    var toWorldMat = new Matrix();\r\n    if (time !== undefined) {\r\n      var propMatrix = this._elem.finalTransform.mProp.getValueAtTime(time);\r\n      propMatrix.clone(toWorldMat);\r\n    } else {\r\n      var transformMat = this._elem.finalTransform.mProp;\r\n      transformMat.applyToMatrix(toWorldMat);\r\n    }\r\n    return toWorldMat;\r\n  }\r\n\r\n  function toWorldVec(arr, time) {\r\n    var toWorldMat = this.getMatrix(time);\r\n    toWorldMat.props[12] = 0;\r\n    toWorldMat.props[13] = 0;\r\n    toWorldMat.props[14] = 0;\r\n    return this.applyPoint(toWorldMat, arr);\r\n  }\r\n\r\n  function toWorld(arr, time) {\r\n    var toWorldMat = this.getMatrix(time);\r\n    return this.applyPoint(toWorldMat, arr);\r\n  }\r\n\r\n  function fromWorldVec(arr, time) {\r\n    var toWorldMat = this.getMatrix(time);\r\n    toWorldMat.props[12] = 0;\r\n    toWorldMat.props[13] = 0;\r\n    toWorldMat.props[14] = 0;\r\n    return this.invertPoint(toWorldMat, arr);\r\n  }\r\n\r\n  function fromWorld(arr, time) {\r\n    var toWorldMat = this.getMatrix(time);\r\n    return this.invertPoint(toWorldMat, arr);\r\n  }\r\n\r\n  function applyPoint(matrix, arr) {\r\n    if (this._elem.hierarchy && this._elem.hierarchy.length) {\r\n      var i;\r\n      var len = this._elem.hierarchy.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(matrix);\r\n      }\r\n    }\r\n    return matrix.applyToPointArray(arr[0], arr[1], arr[2] || 0);\r\n  }\r\n\r\n  function invertPoint(matrix, arr) {\r\n    if (this._elem.hierarchy && this._elem.hierarchy.length) {\r\n      var i;\r\n      var len = this._elem.hierarchy.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(matrix);\r\n      }\r\n    }\r\n    return matrix.inversePoint(arr);\r\n  }\r\n\r\n  function fromComp(arr) {\r\n    var toWorldMat = new Matrix();\r\n    toWorldMat.reset();\r\n    this._elem.finalTransform.mProp.applyToMatrix(toWorldMat);\r\n    if (this._elem.hierarchy && this._elem.hierarchy.length) {\r\n      var i;\r\n      var len = this._elem.hierarchy.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat);\r\n      }\r\n      return toWorldMat.inversePoint(arr);\r\n    }\r\n    return toWorldMat.inversePoint(arr);\r\n  }\r\n\r\n  function sampleImage() {\r\n    return [1, 1, 1, 1];\r\n  }\r\n\r\n  return function (elem) {\r\n    var transformInterface;\r\n\r\n    function _registerMaskInterface(maskManager) {\r\n      _thisLayerFunction.mask = new MaskManagerInterface(maskManager, elem);\r\n    }\r\n    function _registerEffectsInterface(effects) {\r\n      _thisLayerFunction.effect = effects;\r\n    }\r\n\r\n    function _thisLayerFunction(name) {\r\n      switch (name) {\r\n        case 'ADBE Root Vectors Group':\r\n        case 'Contents':\r\n        case 2:\r\n          return _thisLayerFunction.shapeInterface;\r\n        case 1:\r\n        case 6:\r\n        case 'Transform':\r\n        case 'transform':\r\n        case 'ADBE Transform Group':\r\n          return transformInterface;\r\n        case 4:\r\n        case 'ADBE Effect Parade':\r\n        case 'effects':\r\n        case 'Effects':\r\n          return _thisLayerFunction.effect;\r\n        case 'ADBE Text Properties':\r\n          return _thisLayerFunction.textInterface;\r\n        default:\r\n          return null;\r\n      }\r\n    }\r\n    _thisLayerFunction.getMatrix = getMatrix;\r\n    _thisLayerFunction.invertPoint = invertPoint;\r\n    _thisLayerFunction.applyPoint = applyPoint;\r\n    _thisLayerFunction.toWorld = toWorld;\r\n    _thisLayerFunction.toWorldVec = toWorldVec;\r\n    _thisLayerFunction.fromWorld = fromWorld;\r\n    _thisLayerFunction.fromWorldVec = fromWorldVec;\r\n    _thisLayerFunction.toComp = toWorld;\r\n    _thisLayerFunction.fromComp = fromComp;\r\n    _thisLayerFunction.sampleImage = sampleImage;\r\n    _thisLayerFunction.sourceRectAtTime = elem.sourceRectAtTime.bind(elem);\r\n    _thisLayerFunction._elem = elem;\r\n    transformInterface = TransformExpressionInterface(elem.finalTransform.mProp);\r\n    var anchorPointDescriptor = getDescriptor(transformInterface, 'anchorPoint');\r\n    Object.defineProperties(_thisLayerFunction, {\r\n      hasParent: {\r\n        get: function () {\r\n          return elem.hierarchy.length;\r\n        },\r\n      },\r\n      parent: {\r\n        get: function () {\r\n          return elem.hierarchy[0].layerInterface;\r\n        },\r\n      },\r\n      rotation: getDescriptor(transformInterface, 'rotation'),\r\n      scale: getDescriptor(transformInterface, 'scale'),\r\n      position: getDescriptor(transformInterface, 'position'),\r\n      opacity: getDescriptor(transformInterface, 'opacity'),\r\n      anchorPoint: anchorPointDescriptor,\r\n      anchor_point: anchorPointDescriptor,\r\n      transform: {\r\n        get: function () {\r\n          return transformInterface;\r\n        },\r\n      },\r\n      active: {\r\n        get: function () {\r\n          return elem.isInRange;\r\n        },\r\n      },\r\n    });\r\n\r\n    _thisLayerFunction.startTime = elem.data.st;\r\n    _thisLayerFunction.index = elem.data.ind;\r\n    _thisLayerFunction.source = elem.data.refId;\r\n    _thisLayerFunction.height = elem.data.ty === 0 ? elem.data.h : 100;\r\n    _thisLayerFunction.width = elem.data.ty === 0 ? elem.data.w : 100;\r\n    _thisLayerFunction.inPoint = elem.data.ip / elem.comp.globalData.frameRate;\r\n    _thisLayerFunction.outPoint = elem.data.op / elem.comp.globalData.frameRate;\r\n    _thisLayerFunction._name = elem.data.nm;\r\n\r\n    _thisLayerFunction.registerMaskInterface = _registerMaskInterface;\r\n    _thisLayerFunction.registerEffectsInterface = _registerEffectsInterface;\r\n    return _thisLayerFunction;\r\n  };\r\n}());\r\n\r\n/* global */\r\n/* exported FootageInterface */\r\n\r\nvar FootageInterface = (function () {\r\n  var outlineInterfaceFactory = (function (elem) {\r\n    var currentPropertyName = '';\r\n    var currentProperty = elem.getFootageData();\r\n    function init() {\r\n      currentPropertyName = '';\r\n      currentProperty = elem.getFootageData();\r\n      return searchProperty;\r\n    }\r\n    function searchProperty(value) {\r\n      if (currentProperty[value]) {\r\n        currentPropertyName = value;\r\n        currentProperty = currentProperty[value];\r\n        if (typeof currentProperty === 'object') {\r\n          return searchProperty;\r\n        }\r\n        return currentProperty;\r\n      }\r\n      var propertyNameIndex = value.indexOf(currentPropertyName);\r\n      if (propertyNameIndex !== -1) {\r\n        var index = parseInt(value.substr(propertyNameIndex + currentPropertyName.length), 10);\r\n        currentProperty = currentProperty[index];\r\n        if (typeof currentProperty === 'object') {\r\n          return searchProperty;\r\n        }\r\n        return currentProperty;\r\n      }\r\n      return '';\r\n    }\r\n    return init;\r\n  });\r\n\r\n  var dataInterfaceFactory = function (elem) {\r\n    function interfaceFunction(value) {\r\n      if (value === 'Outline') {\r\n        return interfaceFunction.outlineInterface();\r\n      }\r\n      return null;\r\n    }\r\n\r\n    interfaceFunction._name = 'Outline';\r\n    interfaceFunction.outlineInterface = outlineInterfaceFactory(elem);\r\n    return interfaceFunction;\r\n  };\r\n\r\n  return function (elem) {\r\n    function _interfaceFunction(value) {\r\n      if (value === 'Data') {\r\n        return _interfaceFunction.dataInterface;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    _interfaceFunction._name = 'Data';\r\n    _interfaceFunction.dataInterface = dataInterfaceFactory(elem);\r\n    return _interfaceFunction;\r\n  };\r\n}());\r\n\r\n/* exported CompExpressionInterface */\r\n\r\nvar CompExpressionInterface = (function () {\r\n  return function (comp) {\r\n    function _thisLayerFunction(name) {\r\n      var i = 0;\r\n      var len = comp.layers.length;\r\n      while (i < len) {\r\n        if (comp.layers[i].nm === name || comp.layers[i].ind === name) {\r\n          return comp.elements[i].layerInterface;\r\n        }\r\n        i += 1;\r\n      }\r\n      return null;\r\n      // return {active:false};\r\n    }\r\n    Object.defineProperty(_thisLayerFunction, '_name', { value: comp.data.nm });\r\n    _thisLayerFunction.layer = _thisLayerFunction;\r\n    _thisLayerFunction.pixelAspect = 1;\r\n    _thisLayerFunction.height = comp.data.h || comp.globalData.compSize.h;\r\n    _thisLayerFunction.width = comp.data.w || comp.globalData.compSize.w;\r\n    _thisLayerFunction.pixelAspect = 1;\r\n    _thisLayerFunction.frameDuration = 1 / comp.globalData.frameRate;\r\n    _thisLayerFunction.displayStartTime = 0;\r\n    _thisLayerFunction.numLayers = comp.layers.length;\r\n    return _thisLayerFunction;\r\n  };\r\n}());\r\n\r\n/* global ExpressionPropertyInterface */\r\n/* exported TransformExpressionInterface */\r\n\r\nvar TransformExpressionInterface = (function () {\r\n  return function (transform) {\r\n    function _thisFunction(name) {\r\n      switch (name) {\r\n        case 'scale':\r\n        case 'Scale':\r\n        case 'ADBE Scale':\r\n        case 6:\r\n          return _thisFunction.scale;\r\n        case 'rotation':\r\n        case 'Rotation':\r\n        case 'ADBE Rotation':\r\n        case 'ADBE Rotate Z':\r\n        case 10:\r\n          return _thisFunction.rotation;\r\n        case 'ADBE Rotate X':\r\n          return _thisFunction.xRotation;\r\n        case 'ADBE Rotate Y':\r\n          return _thisFunction.yRotation;\r\n        case 'position':\r\n        case 'Position':\r\n        case 'ADBE Position':\r\n        case 2:\r\n          return _thisFunction.position;\r\n        case 'ADBE Position_0':\r\n          return _thisFunction.xPosition;\r\n        case 'ADBE Position_1':\r\n          return _thisFunction.yPosition;\r\n        case 'ADBE Position_2':\r\n          return _thisFunction.zPosition;\r\n        case 'anchorPoint':\r\n        case 'AnchorPoint':\r\n        case 'Anchor Point':\r\n        case 'ADBE AnchorPoint':\r\n        case 1:\r\n          return _thisFunction.anchorPoint;\r\n        case 'opacity':\r\n        case 'Opacity':\r\n        case 11:\r\n          return _thisFunction.opacity;\r\n        default:\r\n          return null;\r\n      }\r\n    }\r\n    Object.defineProperty(_thisFunction, 'rotation', {\r\n      get: ExpressionPropertyInterface(transform.r || transform.rz),\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'zRotation', {\r\n      get: ExpressionPropertyInterface(transform.rz || transform.r),\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'xRotation', {\r\n      get: ExpressionPropertyInterface(transform.rx),\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'yRotation', {\r\n      get: ExpressionPropertyInterface(transform.ry),\r\n    });\r\n    Object.defineProperty(_thisFunction, 'scale', {\r\n      get: ExpressionPropertyInterface(transform.s),\r\n    });\r\n    var _px;\r\n    var _py;\r\n    var _pz;\r\n    var _transformFactory;\r\n    if (transform.p) {\r\n      _transformFactory = ExpressionPropertyInterface(transform.p);\r\n    } else {\r\n      _px = ExpressionPropertyInterface(transform.px);\r\n      _py = ExpressionPropertyInterface(transform.py);\r\n      if (transform.pz) {\r\n        _pz = ExpressionPropertyInterface(transform.pz);\r\n      }\r\n    }\r\n    Object.defineProperty(_thisFunction, 'position', {\r\n      get: function () {\r\n        if (transform.p) {\r\n          return _transformFactory();\r\n        }\r\n        return [\r\n          _px(),\r\n          _py(),\r\n          _pz ? _pz() : 0];\r\n      },\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'xPosition', {\r\n      get: ExpressionPropertyInterface(transform.px),\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'yPosition', {\r\n      get: ExpressionPropertyInterface(transform.py),\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'zPosition', {\r\n      get: ExpressionPropertyInterface(transform.pz),\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'anchorPoint', {\r\n      get: ExpressionPropertyInterface(transform.a),\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'opacity', {\r\n      get: ExpressionPropertyInterface(transform.o),\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'skew', {\r\n      get: ExpressionPropertyInterface(transform.sk),\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'skewAxis', {\r\n      get: ExpressionPropertyInterface(transform.sa),\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'orientation', {\r\n      get: ExpressionPropertyInterface(transform.or),\r\n    });\r\n\r\n    return _thisFunction;\r\n  };\r\n}());\r\n\r\n/* exported ProjectInterface */\r\n\r\nvar ProjectInterface = (function () {\r\n  function registerComposition(comp) {\r\n    this.compositions.push(comp);\r\n  }\r\n\r\n  return function () {\r\n    function _thisProjectFunction(name) {\r\n      var i = 0;\r\n      var len = this.compositions.length;\r\n      while (i < len) {\r\n        if (this.compositions[i].data && this.compositions[i].data.nm === name) {\r\n          if (this.compositions[i].prepareFrame && this.compositions[i].data.xt) {\r\n            this.compositions[i].prepareFrame(this.currentFrame);\r\n          }\r\n          return this.compositions[i].compInterface;\r\n        }\r\n        i += 1;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    _thisProjectFunction.compositions = [];\r\n    _thisProjectFunction.currentFrame = 0;\r\n\r\n    _thisProjectFunction.registerComposition = registerComposition;\r\n\r\n    return _thisProjectFunction;\r\n  };\r\n}());\r\n\r\n/* global propertyGroupFactory, ExpressionPropertyInterface, PropertyInterface */\r\n/* exported EffectsExpressionInterface */\r\n\r\nvar EffectsExpressionInterface = (function () {\r\n  var ob = {\r\n    createEffectsInterface: createEffectsInterface,\r\n  };\r\n\r\n  function createEffectsInterface(elem, propertyGroup) {\r\n    if (elem.effectsManager) {\r\n      var effectElements = [];\r\n      var effectsData = elem.data.ef;\r\n      var i;\r\n      var len = elem.effectsManager.effectElements.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        effectElements.push(createGroupInterface(effectsData[i], elem.effectsManager.effectElements[i], propertyGroup, elem));\r\n      }\r\n\r\n      var effects = elem.data.ef || [];\r\n      var groupInterface = function (name) {\r\n        i = 0;\r\n        len = effects.length;\r\n        while (i < len) {\r\n          if (name === effects[i].nm || name === effects[i].mn || name === effects[i].ix) {\r\n            return effectElements[i];\r\n          }\r\n          i += 1;\r\n        }\r\n        return null;\r\n      };\r\n      Object.defineProperty(groupInterface, 'numProperties', {\r\n        get: function () {\r\n          return effects.length;\r\n        },\r\n      });\r\n      return groupInterface;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  function createGroupInterface(data, elements, propertyGroup, elem) {\r\n    function groupInterface(name) {\r\n      var effects = data.ef;\r\n      var i = 0;\r\n      var len = effects.length;\r\n      while (i < len) {\r\n        if (name === effects[i].nm || name === effects[i].mn || name === effects[i].ix) {\r\n          if (effects[i].ty === 5) {\r\n            return effectElements[i];\r\n          }\r\n          return effectElements[i]();\r\n        }\r\n        i += 1;\r\n      }\r\n      throw new Error();\r\n    }\r\n    var _propertyGroup = propertyGroupFactory(groupInterface, propertyGroup);\r\n\r\n    var effectElements = [];\r\n    var i;\r\n    var len = data.ef.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      if (data.ef[i].ty === 5) {\r\n        effectElements.push(createGroupInterface(data.ef[i], elements.effectElements[i], elements.effectElements[i].propertyGroup, elem));\r\n      } else {\r\n        effectElements.push(createValueInterface(elements.effectElements[i], data.ef[i].ty, elem, _propertyGroup));\r\n      }\r\n    }\r\n\r\n    if (data.mn === 'ADBE Color Control') {\r\n      Object.defineProperty(groupInterface, 'color', {\r\n        get: function () {\r\n          return effectElements[0]();\r\n        },\r\n      });\r\n    }\r\n    Object.defineProperties(groupInterface, {\r\n      numProperties: {\r\n        get: function () {\r\n          return data.np;\r\n        },\r\n      },\r\n      _name: { value: data.nm },\r\n      propertyGroup: { value: _propertyGroup },\r\n    });\r\n    groupInterface.enabled = data.en !== 0;\r\n    groupInterface.active = groupInterface.enabled;\r\n    return groupInterface;\r\n  }\r\n\r\n  function createValueInterface(element, type, elem, propertyGroup) {\r\n    var expressionProperty = ExpressionPropertyInterface(element.p);\r\n    function interfaceFunction() {\r\n      if (type === 10) {\r\n        return elem.comp.compInterface(element.p.v);\r\n      }\r\n      return expressionProperty();\r\n    }\r\n\r\n    if (element.p.setGroupProperty) {\r\n      element.p.setGroupProperty(PropertyInterface('', propertyGroup));\r\n    }\r\n\r\n    return interfaceFunction;\r\n  }\r\n\r\n  return ob;\r\n}());\r\n\r\n/* global createSizedArray */\r\n/* exported MaskManagerInterface */\r\n\r\nvar MaskManagerInterface = (function () {\r\n  function MaskInterface(mask, data) {\r\n    this._mask = mask;\r\n    this._data = data;\r\n  }\r\n  Object.defineProperty(MaskInterface.prototype, 'maskPath', {\r\n    get: function () {\r\n      if (this._mask.prop.k) {\r\n        this._mask.prop.getValue();\r\n      }\r\n      return this._mask.prop;\r\n    },\r\n  });\r\n  Object.defineProperty(MaskInterface.prototype, 'maskOpacity', {\r\n    get: function () {\r\n      if (this._mask.op.k) {\r\n        this._mask.op.getValue();\r\n      }\r\n      return this._mask.op.v * 100;\r\n    },\r\n  });\r\n\r\n  var MaskManager = function (maskManager) {\r\n    var _masksInterfaces = createSizedArray(maskManager.viewData.length);\r\n    var i;\r\n    var len = maskManager.viewData.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      _masksInterfaces[i] = new MaskInterface(maskManager.viewData[i], maskManager.masksProperties[i]);\r\n    }\r\n\r\n    var maskFunction = function (name) {\r\n      i = 0;\r\n      while (i < len) {\r\n        if (maskManager.masksProperties[i].nm === name) {\r\n          return _masksInterfaces[i];\r\n        }\r\n        i += 1;\r\n      }\r\n      return null;\r\n    };\r\n    return maskFunction;\r\n  };\r\n  return MaskManager;\r\n}());\r\n\r\n/* global createTypedArray */\r\n/* exported ExpressionPropertyInterface */\r\n\r\nvar ExpressionPropertyInterface = (function () {\r\n  var defaultUnidimensionalValue = { pv: 0, v: 0, mult: 1 };\r\n  var defaultMultidimensionalValue = { pv: [0, 0, 0], v: [0, 0, 0], mult: 1 };\r\n\r\n  function completeProperty(expressionValue, property, type) {\r\n    Object.defineProperty(expressionValue, 'velocity', {\r\n      get: function () {\r\n        return property.getVelocityAtTime(property.comp.currentFrame);\r\n      },\r\n    });\r\n    expressionValue.numKeys = property.keyframes ? property.keyframes.length : 0;\r\n    expressionValue.key = function (pos) {\r\n      if (!expressionValue.numKeys) {\r\n        return 0;\r\n      }\r\n      var value = '';\r\n      if ('s' in property.keyframes[pos - 1]) {\r\n        value = property.keyframes[pos - 1].s;\r\n      } else if ('e' in property.keyframes[pos - 2]) {\r\n        value = property.keyframes[pos - 2].e;\r\n      } else {\r\n        value = property.keyframes[pos - 2].s;\r\n      }\r\n      var valueProp = type === 'unidimensional' ? new Number(value) : Object.assign({}, value); // eslint-disable-line no-new-wrappers\r\n      valueProp.time = property.keyframes[pos - 1].t / property.elem.comp.globalData.frameRate;\r\n      valueProp.value = type === 'unidimensional' ? value[0] : value;\r\n      return valueProp;\r\n    };\r\n    expressionValue.valueAtTime = property.getValueAtTime;\r\n    expressionValue.speedAtTime = property.getSpeedAtTime;\r\n    expressionValue.velocityAtTime = property.getVelocityAtTime;\r\n    expressionValue.propertyGroup = property.propertyGroup;\r\n  }\r\n\r\n  function UnidimensionalPropertyInterface(property) {\r\n    if (!property || !('pv' in property)) {\r\n      property = defaultUnidimensionalValue;\r\n    }\r\n    var mult = 1 / property.mult;\r\n    var val = property.pv * mult;\r\n    var expressionValue = new Number(val); // eslint-disable-line no-new-wrappers\r\n    expressionValue.value = val;\r\n    completeProperty(expressionValue, property, 'unidimensional');\r\n\r\n    return function () {\r\n      if (property.k) {\r\n        property.getValue();\r\n      }\r\n      val = property.v * mult;\r\n      if (expressionValue.value !== val) {\r\n        expressionValue = new Number(val); // eslint-disable-line no-new-wrappers\r\n        expressionValue.value = val;\r\n        completeProperty(expressionValue, property, 'unidimensional');\r\n      }\r\n      return expressionValue;\r\n    };\r\n  }\r\n\r\n  function MultidimensionalPropertyInterface(property) {\r\n    if (!property || !('pv' in property)) {\r\n      property = defaultMultidimensionalValue;\r\n    }\r\n    var mult = 1 / property.mult;\r\n    var len = (property.data && property.data.l) || property.pv.length;\r\n    var expressionValue = createTypedArray('float32', len);\r\n    var arrValue = createTypedArray('float32', len);\r\n    expressionValue.value = arrValue;\r\n    completeProperty(expressionValue, property, 'multidimensional');\r\n\r\n    return function () {\r\n      if (property.k) {\r\n        property.getValue();\r\n      }\r\n      for (var i = 0; i < len; i += 1) {\r\n        arrValue[i] = property.v[i] * mult;\r\n        expressionValue[i] = arrValue[i];\r\n      }\r\n      return expressionValue;\r\n    };\r\n  }\r\n\r\n  // TODO: try to avoid using this getter\r\n  function defaultGetter() {\r\n    return defaultUnidimensionalValue;\r\n  }\r\n\r\n  return function (property) {\r\n    if (!property) {\r\n      return defaultGetter;\r\n    } if (property.propType === 'unidimensional') {\r\n      return UnidimensionalPropertyInterface(property);\r\n    }\r\n    return MultidimensionalPropertyInterface(property);\r\n  };\r\n}());\r\n\r\n/* global expressionHelpers, TextSelectorProp, ExpressionManager */\r\n/* exported TextExpressionSelectorPropFactory */\r\n\r\nvar TextExpressionSelectorPropFactory = (function () { // eslint-disable-line no-unused-vars\r\n  function getValueProxy(index, total) {\r\n    this.textIndex = index + 1;\r\n    this.textTotal = total;\r\n    this.v = this.getValue() * this.mult;\r\n    return this.v;\r\n  }\r\n\r\n  return function (elem, data) {\r\n    this.pv = 1;\r\n    this.comp = elem.comp;\r\n    this.elem = elem;\r\n    this.mult = 0.01;\r\n    this.propType = 'textSelector';\r\n    this.textTotal = data.totalChars;\r\n    this.selectorValue = 100;\r\n    this.lastValue = [1, 1, 1];\r\n    this.k = true;\r\n    this.x = true;\r\n    this.getValue = ExpressionManager.initiateExpression.bind(this)(elem, data, this);\r\n    this.getMult = getValueProxy;\r\n    this.getVelocityAtTime = expressionHelpers.getVelocityAtTime;\r\n    if (this.kf) {\r\n      this.getValueAtTime = expressionHelpers.getValueAtTime.bind(this);\r\n    } else {\r\n      this.getValueAtTime = expressionHelpers.getStaticValueAtTime.bind(this);\r\n    }\r\n    this.setGroupProperty = expressionHelpers.setGroupProperty;\r\n  };\r\n}());\r\n\r\nvar propertyGetTextProp = TextSelectorProp.getTextSelectorProp;\r\nTextSelectorProp.getTextSelectorProp = function (elem, data, arr) {\r\n  if (data.t === 1) {\r\n    return new TextExpressionSelectorPropFactory(elem, data, arr); // eslint-disable-line no-undef\r\n  }\r\n  return propertyGetTextProp(elem, data, arr);\r\n};\r\n\r\n/* global PropertyFactory */\r\n/* exported SliderEffect, AngleEffect, ColorEffect, PointEffect, LayerIndexEffect, MaskIndexEffect, CheckboxEffect, NoValueEffect */\r\n\r\nfunction SliderEffect(data, elem, container) {\r\n  this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\r\n}\r\nfunction AngleEffect(data, elem, container) {\r\n  this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\r\n}\r\nfunction ColorEffect(data, elem, container) {\r\n  this.p = PropertyFactory.getProp(elem, data.v, 1, 0, container);\r\n}\r\nfunction PointEffect(data, elem, container) {\r\n  this.p = PropertyFactory.getProp(elem, data.v, 1, 0, container);\r\n}\r\nfunction LayerIndexEffect(data, elem, container) {\r\n  this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\r\n}\r\nfunction MaskIndexEffect(data, elem, container) {\r\n  this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\r\n}\r\nfunction CheckboxEffect(data, elem, container) {\r\n  this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\r\n}\r\nfunction NoValueEffect() {\r\n  this.p = {};\r\n}\r\n\r\n/* global extendPrototype, SliderEffect, AngleEffect, ColorEffect, PointEffect, CheckboxEffect, LayerIndexEffect,\r\nMaskIndexEffect, NoValueEffect, DynamicPropertyContainer */\r\n\r\nfunction EffectsManager(data, element) {\r\n  var effects = data.ef || [];\r\n  this.effectElements = [];\r\n  var i;\r\n  var len = effects.length;\r\n  var effectItem;\r\n  for (i = 0; i < len; i += 1) {\r\n    effectItem = new GroupEffect(effects[i], element);\r\n    this.effectElements.push(effectItem);\r\n  }\r\n}\r\n\r\nfunction GroupEffect(data, element) {\r\n  this.init(data, element);\r\n}\r\n\r\nextendPrototype([DynamicPropertyContainer], GroupEffect);\r\n\r\nGroupEffect.prototype.getValue = GroupEffect.prototype.iterateDynamicProperties;\r\n\r\nGroupEffect.prototype.init = function (data, element) {\r\n  this.data = data;\r\n  this.effectElements = [];\r\n  this.initDynamicPropertyContainer(element);\r\n  var i;\r\n  var len = this.data.ef.length;\r\n  var eff;\r\n  var effects = this.data.ef;\r\n  for (i = 0; i < len; i += 1) {\r\n    eff = null;\r\n    switch (effects[i].ty) {\r\n      case 0:\r\n        eff = new SliderEffect(effects[i], element, this);\r\n        break;\r\n      case 1:\r\n        eff = new AngleEffect(effects[i], element, this);\r\n        break;\r\n      case 2:\r\n        eff = new ColorEffect(effects[i], element, this);\r\n        break;\r\n      case 3:\r\n        eff = new PointEffect(effects[i], element, this);\r\n        break;\r\n      case 4:\r\n      case 7:\r\n        eff = new CheckboxEffect(effects[i], element, this);\r\n        break;\r\n      case 10:\r\n        eff = new LayerIndexEffect(effects[i], element, this);\r\n        break;\r\n      case 11:\r\n        eff = new MaskIndexEffect(effects[i], element, this);\r\n        break;\r\n      case 5:\r\n        eff = new EffectsManager(effects[i], element, this);\r\n        break;\r\n        // case 6:\r\n      default:\r\n        eff = new NoValueEffect(effects[i], element, this);\r\n        break;\r\n    }\r\n    if (eff) {\r\n      this.effectElements.push(eff);\r\n    }\r\n  }\r\n};\r\n\r\n\r\nvar lottie = {};\r\n\r\nfunction setLocationHref(href) {\r\n  locationHref = href;\r\n}\r\n\r\nfunction searchAnimations() {\r\n  if (standalone === true) {\r\n    animationManager.searchAnimations(animationData, standalone, renderer);\r\n  } else {\r\n    animationManager.searchAnimations();\r\n  }\r\n}\r\n\r\nfunction setSubframeRendering(flag) {\r\n  subframeEnabled = flag;\r\n}\r\n\r\nfunction setIDPrefix(prefix) {\r\n  idPrefix = prefix;\r\n}\r\n\r\nfunction loadAnimation(params) {\r\n  if (standalone === true) {\r\n    params.animationData = JSON.parse(animationData);\r\n  }\r\n  return animationManager.loadAnimation(params);\r\n}\r\n\r\nfunction setQuality(value) {\r\n  if (typeof value === 'string') {\r\n    switch (value) {\r\n      case 'high':\r\n        defaultCurveSegments = 200;\r\n        break;\r\n      default:\r\n      case 'medium':\r\n        defaultCurveSegments = 50;\r\n        break;\r\n      case 'low':\r\n        defaultCurveSegments = 10;\r\n        break;\r\n    }\r\n  } else if (!isNaN(value) && value > 1) {\r\n    defaultCurveSegments = value;\r\n  }\r\n  if (defaultCurveSegments >= 50) {\r\n    roundValues(false);\r\n  } else {\r\n    roundValues(true);\r\n  }\r\n}\r\n\r\nfunction inBrowser() {\r\n  return typeof navigator !== 'undefined';\r\n}\r\n\r\nfunction installPlugin(type, plugin) {\r\n  if (type === 'expressions') {\r\n    expressionsPlugin = plugin;\r\n  }\r\n}\r\n\r\nfunction getFactory(name) {\r\n  switch (name) {\r\n    case 'propertyFactory':\r\n      return PropertyFactory;\r\n    case 'shapePropertyFactory':\r\n      return ShapePropertyFactory;\r\n    case 'matrix':\r\n      return Matrix;\r\n    default:\r\n      return null;\r\n  }\r\n}\r\n\r\nlottie.play = animationManager.play;\r\nlottie.pause = animationManager.pause;\r\nlottie.setLocationHref = setLocationHref;\r\nlottie.togglePause = animationManager.togglePause;\r\nlottie.setSpeed = animationManager.setSpeed;\r\nlottie.setDirection = animationManager.setDirection;\r\nlottie.stop = animationManager.stop;\r\nlottie.searchAnimations = searchAnimations;\r\nlottie.registerAnimation = animationManager.registerAnimation;\r\nlottie.loadAnimation = loadAnimation;\r\nlottie.setSubframeRendering = setSubframeRendering;\r\nlottie.resize = animationManager.resize;\r\n// lottie.start = start;\r\nlottie.goToAndStop = animationManager.goToAndStop;\r\nlottie.destroy = animationManager.destroy;\r\nlottie.setQuality = setQuality;\r\nlottie.inBrowser = inBrowser;\r\nlottie.installPlugin = installPlugin;\r\nlottie.freeze = animationManager.freeze;\r\nlottie.unfreeze = animationManager.unfreeze;\r\nlottie.setVolume = animationManager.setVolume;\r\nlottie.mute = animationManager.mute;\r\nlottie.unmute = animationManager.unmute;\r\nlottie.getRegisteredAnimations = animationManager.getRegisteredAnimations;\r\nlottie.useWebWorker = function (flag) {\r\n  _useWebWorker = flag;\r\n};\r\nlottie.setIDPrefix = setIDPrefix;\r\nlottie.__getFactory = getFactory;\r\nlottie.version = '5.8.1';\r\n\r\nfunction checkReady() {\r\n  if (document.readyState === 'complete') {\r\n    clearInterval(readyStateCheckInterval);\r\n    searchAnimations();\r\n  }\r\n}\r\n\r\nfunction getQueryVariable(variable) {\r\n  var vars = queryString.split('&');\r\n  for (var i = 0; i < vars.length; i += 1) {\r\n    var pair = vars[i].split('=');\r\n    if (decodeURIComponent(pair[0]) == variable) { // eslint-disable-line eqeqeq\r\n      return decodeURIComponent(pair[1]);\r\n    }\r\n  }\r\n  return null;\r\n}\r\nvar standalone = '__[STANDALONE]__';\r\nvar animationData = '__[ANIMATIONDATA]__';\r\nvar renderer = '';\r\nvar queryString;\r\nif (standalone) {\r\n  var scripts = document.getElementsByTagName('script');\r\n  var index = scripts.length - 1;\r\n  var myScript = scripts[index] || {\r\n    src: '',\r\n  };\r\n  queryString = myScript.src.replace(/^[^\\?]+\\??/, ''); // eslint-disable-line no-useless-escape\r\n  renderer = getQueryVariable('renderer');\r\n}\r\nvar readyStateCheckInterval = setInterval(checkReady, 100);\r\n\nreturn lottie;\n}));","\"use strict\";\n\nimport lottie from \"lottie-web\";\n\nwindow.onbeforeunload = () => window.scrollTo(0, 0);\n\nconst headerAnim = lottie.loadAnimation({\n    container: document.querySelector(\"#intro-anim\"),\n    renderer: 'svg',\n    loop: false,\n    autoplay: true,\n    path: '/assets/json/blog-header.json'\n});"]}