{"version":3,"names":[],"mappings":"","sources":["index.js"],"sourcesContent":["!function(){function e(t){var i;return function(e){return i||t(i={exports:{},parent:e},i.exports),i.exports}}var r=e(function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.createScene=function(){i=new J.Scene,(n=new J.PerspectiveCamera(60,window.innerWidth/window.innerHeight,.1,1e3)).position.set(0,0,1.25),(r=new J.WebGLRenderer({alpha:!0,antialias:!0})).setSize(window.innerWidth,window.innerHeight),(a=document.querySelector(\"#keyboard\")).append(r.domElement)},t.loadModel=function(){var e=new J.Color(\"rgb(0, 12, 165)\"),e=new J.AmbientLight(e);i.add(e),new N.OBJLoader(s).load(\"/assets/models/keyboard.obj\",function(e){i.add(e),e.position.set(0,0,0),setInterval(function(){e.rotateY(.01),e.rotateX(.01)},1/60)}),o()},t.resize=function(){r.setSize(a.clientWidth,a.clientHeight),n.aspect=a.clientWidth/a.clientHeight,n.updateProjectionMatrix()};var i,n,r,a,s=new J.LoadingManager;function o(){requestAnimationFrame(o),r.render(i,n)}s.onLoad=function(){document.querySelector(\"#keyboard canvas\").classList.add(\"fade-animation\")}}),a=e(function(u,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.attachObserverToWcyd=function(){(p.matches?new IntersectionObserver(function(e){e.forEach(function(e){0<e.intersectionRatio?document.addEventListener(\"scroll\",h):document.removeEventListener(\"scroll\",h)})}):new IntersectionObserver(function(e){e.forEach(function(e){1<=e.intersectionRatio?document.addEventListener(\"scroll\",h):document.removeEventListener(\"scroll\",h)})},{threshold:1})).observe(document.querySelector(\"#wcyd-anim\"))},e.endlessScroll=function e(){n+=1,document.querySelector(\"#spacer\").style.height=\"\".concat(100+75*n,\"vh\"),l&&(document.removeEventListener(\"scroll\",e),document.querySelector(\"#wcyd-anim\").classList.add(\"hidden\"),document.querySelector(\"#spacer\").classList.add(\"hidden\"),document.querySelector(\"#project-section\").classList.remove(\"hidden\"),document.querySelector(\"#blog-section\").classList.remove(\"hidden\"),document.querySelector(\"footer\").classList.remove(\"hidden\"),document.querySelector(\"#spacer\").style.display=\"none\",f())},e.loadWcydAnim=function(){t=p.matches?i.default.loadAnimation({container:document.querySelector(\"#wcyd-anim\"),renderer:\"svg\",loop:!1,autoplay:!1,progressiveLoad:!0,path:\"/assets/json/wcyd-animation-mobile.json\"}):i.default.loadAnimation({container:document.querySelector(\"#wcyd-anim\"),renderer:\"svg\",loop:!1,autoplay:!1,progressiveLoad:!0,path:\"/assets/json/wcyd-animation-desktop.json\",rendererSettings:{preserveAspectRatio:\"xMidYMax slice\"}})};var t,a=v(_),c=v(y),d=v(x),i=v(b);function s(e){if(\"function\"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(s=function(e){return e?i:t})(e)}var n=0,r=0,o=0,l=!1,p=window.matchMedia(\"(max-width: 992px)\");function h(){var e=window.pageYOffset||document.documentElement.scrollTop;r<e?(t.playSegments([o,o+1],!0),432<=o?l=!0:o++):(t.playSegments([o,o-1],!0),0!=o?o--:(document.querySelector(\"#spacer\").style.height=\"0vh\",n=0)),r=e<=0?0:e}function f(){return m.apply(this,arguments)}function m(){return(m=(0,d.default)(a.default.mark(function e(){var t,i,n,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(function(){var e=g({}),t=void 0;if(!t&&e&&e.__esModule)return e;if(null===e||\"object\"!==(0,c.default)(e)&&\"function\"!=typeof e)return{default:e};if((t=s(t))&&t.has(e))return t.get(e);var i,n,r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(i in e)\"default\"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&((n=a?Object.getOwnPropertyDescriptor(e,i):null)&&(n.get||n.set)?Object.defineProperty(r,i,n):r[i]=e[i]);return r.default=e,t&&t.set(e,r),r});case 2:r=e.sent,t=r.createViewAllAnim,i=r.createLetsTalkAnim,n=r.assignViewAllEvents,r=r.assignLetsTalkEvents,t(),n(),i(),r();case 11:case\"end\":return e.stop()}},e)}))).apply(this,arguments)}}),g=e(function(e,t){\"use strict\";var i,n,r,a;Object.defineProperty(t,\"__esModule\",{value:!0}),t.assignLetsTalkEvents=function(){(a=document.querySelector(\"#lets-talk\")).addEventListener(\"mouseenter\",function(e){e.stopPropagation(),i.play(),i.loop=!0}),a.addEventListener(\"mouseleave\",function(e){i.loop=!1}),a.addEventListener(\"click\",function(e){open(\"mailto:craigcontreras@protonmail.com\")})},t.assignViewAllEvents=function(){(r=document.querySelector(\"#view-all-posts\")).addEventListener(\"mouseenter\",function(e){e.stopPropagation(),n.play(),n.loop=!0}),r.addEventListener(\"mouseleave\",function(e){n.loop=!1}),r.addEventListener(\"click\",function(e){document.querySelector(\".transition\").classList.add(\"is-active\"),setTimeout(function(){window.location.replace(\"/blog.html\")},500)})},t.createLetsTalkAnim=function(){i=(0,b.loadAnimation)({container:document.querySelector(\"#lets-talk\"),renderer:\"svg\",loop:!1,autoplay:!1,progressiveLoad:!0,path:\"/assets/json/letstalk.json\"})},t.createViewAllAnim=function(){n=(0,b.loadAnimation)({container:document.querySelector(\"#view-all-posts\"),renderer:\"svg\",loop:!1,autoplay:!1,useWebWorker:!1,progressiveLoad:!0,path:\"/assets/json/view-all.json\"})}}),v={};(v=function(e){return e&&e.__esModule?e:{default:e}}).__esModule=!0,v.default=v;var y={};function t(e){return(y=t=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e}).__esModule=!0,y.default=y,t(e)}(y=t).__esModule=!0,y.default=y;var i={exports:{}},k=v(y),n=function(s){var l,o=Object.prototype,h=o.hasOwnProperty,e=\"function\"==typeof Symbol?Symbol:{},n=e.iterator||\"@@iterator\",c=e.asyncIterator||\"@@asyncIterator\",d=e.toStringTag||\"@@toStringTag\";function i(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},\"\")}catch(s){i=function(e,t,i){return e[t]=i}}function p(e,t,i,n){var r,a,s,o,t=t&&t.prototype instanceof _?t:_,t=Object.create(t.prototype),n=new E(n||[]);return t._invoke=(r=e,a=i,s=n,o=m,function(e,t){if(o===g)throw new Error(\"Generator is already running\");if(o===y){if(\"throw\"===e)throw t;return A()}for(s.method=e,s.arg=t;;){var i=s.delegate;if(i){i=function e(t,i){var n=t.iterator[i.method];if(n===l){if(i.delegate=null,\"throw\"===i.method){if(t.iterator.return&&(i.method=\"return\",i.arg=l,e(t,i),\"throw\"===i.method))return u;i.method=\"throw\",i.arg=new TypeError(\"The iterator does not provide a 'throw' method\")}return u}n=f(n,t.iterator,i.arg);if(\"throw\"===n.type)return i.method=\"throw\",i.arg=n.arg,i.delegate=null,u;n=n.arg;return n?n.done?(i[t.resultName]=n.value,i.next=t.nextLoc,\"return\"!==i.method&&(i.method=\"next\",i.arg=l),i.delegate=null,u):n:(i.method=\"throw\",i.arg=new TypeError(\"iterator result is not an object\"),i.delegate=null,u)}(i,s);if(i){if(i===u)continue;return i}}if(\"next\"===s.method)s.sent=s._sent=s.arg;else if(\"throw\"===s.method){if(o===m)throw o=y,s.arg;s.dispatchException(s.arg)}else\"return\"===s.method&&s.abrupt(\"return\",s.arg);o=g;i=f(r,a,s);if(\"normal\"===i.type){if(o=s.done?y:v,i.arg===u)continue;return{value:i.arg,done:s.done}}\"throw\"===i.type&&(o=y,s.method=\"throw\",s.arg=i.arg)}}),t}function f(e,t,i){try{return{type:\"normal\",arg:e.call(t,i)}}catch(e){return{type:\"throw\",arg:e}}}s.wrap=p;var m=\"suspendedStart\",v=\"suspendedYield\",g=\"executing\",y=\"completed\",u={};function _(){}function x(){}function t(){}var e={},r=(i(e,n,function(){return this}),Object.getPrototypeOf),r=r&&r(r(T([]))),a=(r&&r!==o&&h.call(r,n)&&(e=r),t.prototype=_.prototype=Object.create(e));function b(e){[\"next\",\"throw\",\"return\"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function M(s,o){var t;this._invoke=function(i,n){function e(){return new o(function(e,t){!function t(e,i,n,r){var a,e=f(s[e],s,i);if(\"throw\"!==e.type)return(i=(a=e.arg).value)&&\"object\"===(0,k.default)(i)&&h.call(i,\"__await\")?o.resolve(i.__await).then(function(e){t(\"next\",e,n,r)},function(e){t(\"throw\",e,n,r)}):o.resolve(i).then(function(e){a.value=e,n(a)},function(e){return t(\"throw\",e,n,r)});r(e.arg)}(i,n,e,t)})}return t=t?t.then(e,e):e()}}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type=\"normal\",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:\"root\"}],e.forEach(w,this),this.reset(!0)}function T(t){if(t){var i,e=t[n];if(e)return e.call(t);if(\"function\"==typeof t.next)return t;if(!isNaN(t.length))return i=-1,(e=function e(){for(;++i<t.length;)if(h.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=l,e.done=!0,e}).next=e}return{next:A}}function A(){return{value:l,done:!0}}return i(a,\"constructor\",x.prototype=t),i(t,\"constructor\",x),x.displayName=i(t,d,\"GeneratorFunction\"),s.isGeneratorFunction=function(e){e=\"function\"==typeof e&&e.constructor;return!!e&&(e===x||\"GeneratorFunction\"===(e.displayName||e.name))},s.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,t):(e.__proto__=t,i(e,d,\"GeneratorFunction\")),e.prototype=Object.create(a),e},s.awrap=function(e){return{__await:e}},b(M.prototype),i(M.prototype,c,function(){return this}),s.AsyncIterator=M,s.async=function(e,t,i,n,r){void 0===r&&(r=Promise);var a=new M(p(e,t,i,n),r);return s.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},b(a),i(a,d,\"Generator\"),i(a,n,function(){return this}),i(a,\"toString\",function(){return\"[object Generator]\"}),s.keys=function(i){var e,n=[];for(e in i)n.push(e);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in i)return e.value=t,e.done=!1,e}return e.done=!0,e}},s.values=T,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method=\"next\",this.arg=l,this.tryEntries.forEach(S),!e)for(var t in this)\"t\"===t.charAt(0)&&h.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=l)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if(\"throw\"===e.type)throw e.arg;return this.rval},dispatchException:function(i){if(this.done)throw i;var n=this;function e(e,t){return a.type=\"throw\",a.arg=i,n.next=e,t&&(n.method=\"next\",n.arg=l),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t],a=r.completion;if(\"root\"===r.tryLoc)return e(\"end\");if(r.tryLoc<=this.prev){var s=h.call(r,\"catchLoc\"),o=h.call(r,\"finallyLoc\");if(s&&o){if(this.prev<r.catchLoc)return e(r.catchLoc,!0);if(this.prev<r.finallyLoc)return e(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return e(r.catchLoc,!0)}else{if(!o)throw new Error(\"try statement without catch or finally\");if(this.prev<r.finallyLoc)return e(r.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;0<=i;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&h.call(n,\"finallyLoc\")&&this.prev<n.finallyLoc){var r=n;break}}var a=(r=r&&(\"break\"===e||\"continue\"===e)&&r.tryLoc<=t&&t<=r.finallyLoc?null:r)?r.completion:{};return a.type=e,a.arg=t,r?(this.method=\"next\",this.next=r.finallyLoc,u):this.complete(a)},complete:function(e,t){if(\"throw\"===e.type)throw e.arg;return\"break\"===e.type||\"continue\"===e.type?this.next=e.arg:\"return\"===e.type?(this.rval=this.arg=e.arg,this.method=\"return\",this.next=\"end\"):\"normal\"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),S(i),u}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var i,n,r=this.tryEntries[t];if(r.tryLoc===e)return\"throw\"===(i=r.completion).type&&(n=i.arg,S(r)),n}throw new Error(\"illegal catch attempt\")},delegateYield:function(e,t,i){return this.delegate={iterator:T(e),resultName:t,nextLoc:i},\"next\"===this.method&&(this.arg=l),u}},s}(\"object\"===(0,k.default)(i)?i.exports:{});try{regeneratorRuntime=n}catch(e){\"object\"===(\"undefined\"==typeof globalThis?\"undefined\":(0,k.default)(globalThis))?globalThis.regeneratorRuntime=n:Function(\"r\",\"regeneratorRuntime = r\")(n)}var _=i=i.exports,x={};function l(e,t,i,n,r,a,s){try{var o=e[a](s),l=o.value}catch(e){return i(e),0}o.done?t(l):Promise.resolve(l).then(n,r)}(x=function(o){return function(){var e=this,s=arguments;return new Promise(function(t,i){var n=o.apply(e,s);function r(e){l(n,t,i,r,a,\"next\",e)}function a(e){l(n,t,i,r,a,\"throw\",e)}r(void 0)})}}).__esModule=!0,x.default=x;var s,o,b={exports:{}},Pn=v(y),h=(\"undefined\"!=typeof navigator&&(s=window||{},o=function(n){for(var s,i=\"http://www.w3.org/2000/svg\",S=\"\",o=-999999,l=!1,h=!0,u=\"\",c=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),v=Math.pow,g=Math.sqrt,d=Math.floor,y=(Math.max,Math.min),p={},f=[\"abs\",\"acos\",\"acosh\",\"asin\",\"asinh\",\"atan\",\"atanh\",\"atan2\",\"ceil\",\"cbrt\",\"expm1\",\"clz32\",\"cos\",\"cosh\",\"exp\",\"floor\",\"fround\",\"hypot\",\"imul\",\"log\",\"log1p\",\"log2\",\"log10\",\"max\",\"min\",\"pow\",\"random\",\"round\",\"sign\",\"sin\",\"sinh\",\"sqrt\",\"tan\",\"tanh\",\"trunc\",\"E\",\"LN10\",\"LN2\",\"LOG10E\",\"LOG2E\",\"PI\",\"SQRT1_2\",\"SQRT2\"],_=f.length,x=0;x<_;x+=1)p[f[x]]=Math[f[x]];p.random=Math.random,p.abs=function(e){if(\"object\"===(0,Pn.default)(e)&&e.length){for(var t=b(e.length),i=e.length,n=0;n<i;n+=1)t[n]=Math.abs(e[n]);return t}return Math.abs(e)};var E=150,W=Math.PI/180,T=.5519;function A(e){e&&Math.round}function k(e,t,i,n){this.type=e,this.currentTime=t,this.totalTime=i,this.direction=n<0?-1:1}function R(e,t){this.type=e,this.direction=t<0?-1:1}function L(e,t,i,n){this.type=e,this.currentLoop=i,this.totalLoops=t,this.direction=n<0?-1:1}function C(e,t,i){this.type=e,this.firstFrame=t,this.totalFrames=i}function P(e,t){this.type=e,this.target=t}function D(e,t){this.type=\"renderFrameError\",this.nativeError=e,this.currentTime=t}function I(e){this.type=\"configError\",this.nativeError=e}A(!1);function F(){return u+\"__lottie_element_\"+(N+=1)}var N;function O(e,t,i){var n,r,a,s,o=i*(1-t),l=i*(1-(s=6*e-(e=Math.floor(6*e)))*t),h=i*(1-(1-s)*t);switch(e%6){case 0:n=i,r=h,a=o;break;case 1:n=l,r=i,a=o;break;case 2:n=o,r=i,a=h;break;case 3:n=o,r=l,a=i;break;case 4:n=h,r=o,a=i;break;case 5:n=i,r=o,a=l}return[n,r,a]}function U(e,t,i){var n,r=Math.max(e,t,i),a=Math.min(e,t,i),s=r-a,o=0===r?0:s/r,l=r/255;switch(r){case a:n=0;break;case e:n=t-i+s*(t<i?6:0),n/=6*s;break;case t:n=i-e+2*s,n/=6*s;break;case i:n=e-t+4*s,n/=6*s}return[n,o,l]}function le(e,t){e=U(255*e[0],255*e[1],255*e[2]);return e[1]+=t,1<e[1]?e[1]=1:e[1]<=0&&(e[1]=0),O(e[0],e[1],e[2])}function he(e,t){e=U(255*e[0],255*e[1],255*e[2]);return e[2]+=t,1<e[2]?e[2]=1:e[2]<0&&(e[2]=0),O(e[0],e[1],e[2])}function ue(e,t){e=U(255*e[0],255*e[1],255*e[2]);return e[0]+=t/360,1<e[0]?--e[0]:e[0]<0&&(e[0]+=1),O(e[0],e[1],e[2])}function B(){}for(var z,H=[],G=N=0;G<256;G+=1)z=G.toString(16),H[G]=1===z.length?\"0\"+z:z;B.prototype={triggerEvent:function(e,t){if(this._cbs[e])for(var i=this._cbs[e],n=0;n<i.length;n+=1)i[n](t)},addEventListener:function(e,t){return this._cbs[e]||(this._cbs[e]=[]),this._cbs[e].push(t),function(){this.removeEventListener(e,t)}.bind(this)},removeEventListener:function(e,t){if(t){if(this._cbs[e]){for(var i=0,n=this._cbs[e].length;i<n;)this._cbs[e][i]===t&&(this._cbs[e].splice(i,1),--i,--n),i+=1;this._cbs[e].length||(this._cbs[e]=null)}}else this._cbs[e]=null}};var j=\"function\"==typeof Uint8ClampedArray&&\"function\"==typeof Float32Array?function(e,t){return\"float32\"===e?new Float32Array(t):\"int16\"===e?new Int16Array(t):\"uint8c\"===e?new Uint8ClampedArray(t):V(e,t)}:V;function V(e,t){var i,n=0,r=[];switch(e){case\"int16\":case\"uint8c\":i=1;break;default:i=1.1}for(n=0;n<t;n+=1)r.push(i);return r}function b(e){return Array.apply(null,{length:e})}function M(e){return document.createElementNS(i,e)}function X(e){return document.createElement(e)}function q(){}q.prototype={addDynamicProperty:function(e){-1===this.dynamicProperties.indexOf(e)&&(this.dynamicProperties.push(e),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;for(var e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(e){this.container=e,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};function Y(e){return J[e]||\"\"}J={0:\"source-over\",1:\"multiply\",2:\"screen\",3:\"overlay\",4:\"darken\",5:\"lighten\",6:\"color-dodge\",7:\"color-burn\",8:\"hard-light\",9:\"soft-light\",10:\"difference\",11:\"exclusion\",12:\"hue\",13:\"saturation\",14:\"color\",15:\"luminosity\"};var J,Z,K,Q,$,ee={1:\"butt\",2:\"round\",3:\"square\"},te={1:\"miter\",2:\"round\",3:\"bevel\"},ie=(Z=Math.cos,K=Math.sin,Q=Math.tan,$=Math.round,function(){this.reset=ne,this.rotate=re,this.rotateX=ae,this.rotateY=se,this.rotateZ=oe,this.skew=de,this.skewFromAxis=pe,this.shear=ce,this.scale=fe,this.setTransform=me,this.translate=ve,this.transform=ge,this.applyToPoint=Me,this.applyToX=we,this.applyToY=Se,this.applyToZ=Ee,this.applyToPointArray=Le,this.applyToTriplePoints=Re,this.applyToPointStringified=Ce,this.toCSS=Pe,this.to2dCSS=Ie,this.clone=xe,this.cloneFromProps=be,this.equals=_e,this.inversePoints=ke,this.inversePoint=Ae,this.getInverseMatrix=Te,this._t=this.transform,this.isIdentity=ye,this._identity=!0,this._identityCalculated=!1,this.props=j(\"float32\",16),this.reset()});function ne(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function re(e){if(0===e)return this;var t=Z(e),e=K(e);return this._t(t,-e,0,0,e,t,0,0,0,0,1,0,0,0,0,1)}function ae(e){if(0===e)return this;var t=Z(e),e=K(e);return this._t(1,0,0,0,0,t,-e,0,0,e,t,0,0,0,0,1)}function se(e){if(0===e)return this;var t=Z(e),e=K(e);return this._t(t,0,e,0,0,1,0,0,-e,0,t,0,0,0,0,1)}function oe(e){if(0===e)return this;var t=Z(e),e=K(e);return this._t(t,-e,0,0,e,t,0,0,0,0,1,0,0,0,0,1)}function ce(e,t){return this._t(1,t,e,1,0,0)}function de(e,t){return this.shear(Q(e),Q(t))}function pe(e,t){var i=Z(t),t=K(t);return this._t(i,t,0,0,-t,i,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,Q(e),1,0,0,0,0,1,0,0,0,0,1)._t(i,-t,0,0,t,i,0,0,0,0,1,0,0,0,0,1)}function fe(e,t,i){return i||0===i||(i=1),1===e&&1===t&&1===i?this:this._t(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1)}function me(e,t,i,n,r,a,s,o,l,h,u,c,d,p,f,m){return this.props[0]=e,this.props[1]=t,this.props[2]=i,this.props[3]=n,this.props[4]=r,this.props[5]=a,this.props[6]=s,this.props[7]=o,this.props[8]=l,this.props[9]=h,this.props[10]=u,this.props[11]=c,this.props[12]=d,this.props[13]=p,this.props[14]=f,this.props[15]=m,this}function ve(e,t,i){return i=i||0,0!==e||0!==t||0!==i?this._t(1,0,0,0,0,1,0,0,0,0,1,0,e,t,i,1):this}function ge(e,t,i,n,r,a,s,o,u,c,l,d,p,f,m,v){var h=this.props;if(1===e&&0===t&&0===i&&0===n&&0===r&&1===a&&0===s&&0===o&&0===u&&0===c&&1===l&&0===d)return h[12]=h[12]*e+h[15]*p,h[13]=h[13]*a+h[15]*f,h[14]=h[14]*l+h[15]*m,h[15]*=v,this._identityCalculated=!1,this;var g=h[0],y=h[1],_=h[2],x=h[3],b=h[4],M=h[5],w=h[6],S=h[7],E=h[8],T=h[9],A=h[10],k=h[11],R=h[12],L=h[13],C=h[14],P=h[15];return h[0]=g*e+y*r+_*u+x*p,h[1]=g*t+y*a+_*c+x*f,h[2]=g*i+y*s+_*l+x*m,h[3]=g*n+y*o+_*d+x*v,h[4]=b*e+M*r+w*u+S*p,h[5]=b*t+M*a+w*c+S*f,h[6]=b*i+M*s+w*l+S*m,h[7]=b*n+M*o+w*d+S*v,h[8]=E*e+T*r+A*u+k*p,h[9]=E*t+T*a+A*c+k*f,h[10]=E*i+T*s+A*l+k*m,h[11]=E*n+T*o+A*d+k*v,h[12]=R*e+L*r+C*u+P*p,h[13]=R*t+L*a+C*c+P*f,h[14]=R*i+L*s+C*l+P*m,h[15]=R*n+L*o+C*d+P*v,this._identityCalculated=!1,this}function ye(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function _e(e){for(var t=0;t<16;){if(e.props[t]!==this.props[t])return!1;t+=1}return!0}function xe(e){for(var t=0;t<16;t+=1)e.props[t]=this.props[t];return e}function be(e){for(var t=0;t<16;t+=1)this.props[t]=e[t]}function Me(e,t,i){return{x:e*this.props[0]+t*this.props[4]+i*this.props[8]+this.props[12],y:e*this.props[1]+t*this.props[5]+i*this.props[9]+this.props[13],z:e*this.props[2]+t*this.props[6]+i*this.props[10]+this.props[14]}}function we(e,t,i){return e*this.props[0]+t*this.props[4]+i*this.props[8]+this.props[12]}function Se(e,t,i){return e*this.props[1]+t*this.props[5]+i*this.props[9]+this.props[13]}function Ee(e,t,i){return e*this.props[2]+t*this.props[6]+i*this.props[10]+this.props[14]}function Te(){var e=this.props[0]*this.props[5]-this.props[1]*this.props[4],t=this.props[5]/e,i=-this.props[1]/e,n=-this.props[4]/e,r=this.props[0]/e,a=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/e,e=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/e,s=new ie;return s.props[0]=t,s.props[1]=i,s.props[4]=n,s.props[5]=r,s.props[12]=a,s.props[13]=e,s}function Ae(e){return this.getInverseMatrix().applyToPointArray(e[0],e[1],e[2]||0)}function ke(e){for(var t=e.length,i=[],n=0;n<t;n+=1)i[n]=Ae(e[n]);return i}function Re(e,t,i){var n,r,a,s,o,l,h=j(\"float32\",6);return this.isIdentity()?(h[0]=e[0],h[1]=e[1],h[2]=t[0],h[3]=t[1],h[4]=i[0],h[5]=i[1]):(n=this.props[0],r=this.props[1],a=this.props[4],s=this.props[5],o=this.props[12],l=this.props[13],h[0]=e[0]*n+e[1]*a+o,h[1]=e[0]*r+e[1]*s+l,h[2]=t[0]*n+t[1]*a+o,h[3]=t[0]*r+t[1]*s+l,h[4]=i[0]*n+i[1]*a+o,h[5]=i[0]*r+i[1]*s+l),h}function Le(e,t,i){return this.isIdentity()?[e,t,i]:[e*this.props[0]+t*this.props[4]+i*this.props[8]+this.props[12],e*this.props[1]+t*this.props[5]+i*this.props[9]+this.props[13],e*this.props[2]+t*this.props[6]+i*this.props[10]+this.props[14]]}function Ce(e,t){if(this.isIdentity())return e+\",\"+t;var i=this.props;return Math.round(100*(e*i[0]+t*i[4]+i[12]))/100+\",\"+Math.round(100*(e*i[1]+t*i[5]+i[13]))/100}function Pe(){for(var e=0,t=this.props,i=\"matrix3d(\";e<16;)i=i+$(1e4*t[e])/1e4+(15===e?\")\":\",\"),e+=1;return i}function De(e){return e<1e-6&&0<e||-1e-6<e&&e<0?$(1e4*e)/1e4:e}function Ie(){var e=this.props;return\"matrix(\"+De(e[0])+\",\"+De(e[1])+\",\"+De(e[4])+\",\"+De(e[5])+\",\"+De(e[12])+\",\"+De(e[13])+\")\"}!function(s,o){var l=this,h=256,u=o.pow(h,6),c=o.pow(2,52),v=2*c,d=h-1;function g(e){var t,i=e.length,s=this,n=0,r=s.i=s.j=0,a=s.S=[];for(i||(e=[i++]);n<h;)a[n]=n++;for(n=0;n<h;n++)a[n]=a[r=d&r+e[n%i]+(t=a[n])],a[r]=t;s.g=function(e){for(var t,i=0,n=s.i,r=s.j,a=s.S;e--;)t=a[n=d&n+1],i=i*h+a[d&(a[n]=a[r=d&r+t])+(a[r]=t)];return s.i=n,s.j=r,i}}function p(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function f(e,t){for(var i,n=e+\"\",r=0;r<n.length;)t[d&r]=d&(i^=19*t[d&r])+n.charCodeAt(r++);return m(t)}function m(e){return String.fromCharCode.apply(0,e)}o.seedrandom=function(e,t,i){function n(){for(var e=a.g(6),t=u,i=0;e<c;)e=(e+i)*h,t*=h,i=a.g(1);for(;v<=e;)e/=2,t/=2,i>>>=1;return(e+i)/t}var r=[],e=f(function e(t,i){var n,r=[],a=(0,Pn.default)(t);if(i&&\"object\"==a)for(n in t)try{r.push(e(t[n],i-1))}catch(e){}return r.length?r:\"string\"==a?t:t+\"\\0\"}((t=!0===t?{entropy:!0}:t||{}).entropy?[e,m(s)]:null===e?function(){try{var e=new Uint8Array(h);return(l.crypto||l.msCrypto).getRandomValues(e),m(e)}catch(e){var t=l.navigator,t=t&&t.plugins;return[+new Date,l,t,l.screen,m(s)]}}():e,3),r),a=new g(r);return n.int32=function(){return 0|a.g(4)},n.quick=function(){return a.g(4)/4294967296},n.double=n,f(m(a.S),s),(t.pass||i||function(e,t,i,n){return n&&(n.S&&p(n,a),e.state=function(){return p(a,{})}),i?(o.random=e,t):e})(n,e,\"global\"in t?t.global:this==o,t.state)},f(o.random(),s)}([],p);t={getBezierEasing:function(e,t,i,n,r){r=r||(\"bez_\"+e+\"_\"+t+\"_\"+i+\"_\"+n).replace(/\\./g,\"p\");if(Fe[r])return Fe[r];e=new Ve([e,t,i,n]);return Fe[r]=e}},Fe={},Oe=1/((Ne=11)-1),Ue=\"function\"==typeof Float32Array,Ve.prototype={get:function(e){var t=this._p[0],i=this._p[1],n=this._p[2],r=this._p[3];return this._precomputed||this._precompute(),t===i&&n===r?e:0===e?0:1===e?1:He(this._getTForX(e),i,r)},_precompute:function(){var e=this._p[0],t=this._p[1],i=this._p[2],n=this._p[3];this._precomputed=!0,e===t&&i===n||this._calcSampleValues()},_calcSampleValues:function(){for(var e=this._p[0],t=this._p[2],i=0;i<Ne;++i)this._mSampleValues[i]=He(i*Oe,e,t)},_getTForX:function(e){for(var t=this._p[0],i=this._p[2],n=this._mSampleValues,r=0,a=1,u=Ne-1;a!==u&&n[a]<=e;++a)r+=Oe;var s=r+(e-n[--a])/(n[a+1]-n[a])*Oe,c=Ge(s,t,i);if(.001<=c){for(var d=e,o=s,p=t,f=i,m=0;m<4;++m){var v=Ge(o,p,f);if(0===v)return o;o-=(He(o,p,f)-d)/v}return o}if(0===c)return s;for(var g,l,y=e,h=r,_=r+Oe,x=t,b=i,M=0;0<(g=He(l=h+(_-h)/2,x,b)-y)?_=l:h=l,1e-7<Math.abs(g)&&++M<10;);return l}};var Fe,Ne,Oe,Ue,Be=t;function ze(e,t){return 1-3*t+3*e}function He(e,t,i){return((ze(t,i)*e+(3*i-6*t))*e+3*t)*e}function Ge(e,t,i){return 3*ze(t,i)*e*e+2*(3*i-6*t)*e+3*t}function Ve(e){this._p=e,this._mSampleValues=new(Ue?Float32Array:Array)(Ne),this._precomputed=!1,this.get=this.get.bind(this)}function m(e,t){for(var i,n=e.length,r=0;r<n;r+=1)for(var a in i=e[r].prototype)Object.prototype.hasOwnProperty.call(i,a)&&(t.prototype[a]=i[a])}for(var We=0,je=[\"ms\",\"moz\",\"webkit\",\"o\"],Xe=0;Xe<je.length&&!n.requestAnimationFrame;++Xe)n.requestAnimationFrame=n[je[Xe]+\"RequestAnimationFrame\"],n.cancelAnimationFrame=n[je[Xe]+\"CancelAnimationFrame\"]||n[je[Xe]+\"CancelRequestAnimationFrame\"];n.requestAnimationFrame||(n.requestAnimationFrame=function(e){var t=(new Date).getTime(),i=Math.max(0,16-(t-We)),n=setTimeout(function(){e(t+i)},i);return We=t+i,n}),n.cancelAnimationFrame||(n.cancelAnimationFrame=function(e){clearTimeout(e)});$e=Math,et={},tt=j(\"float32\",8);var qe,Ye,Je,Ze,Ke,Qe,$e,et,tt,it={getSegmentsLength:function(e){for(var t=xi.newElement(),i=e.c,n=e.v,r=e.o,a=e.i,s=e._length,o=t.lengths,l=0,h=0;h<s-1;h+=1)o[h]=ot(n[h],n[h+1],r[h],a[h+1]),l+=o[h].addedLength;return i&&s&&(o[h]=ot(n[h],n[0],r[h],a[0]),l+=o[h].addedLength),t.totalLength=l,t},getNewSegment:function(e,t,i,n,r,a,s){r<0?r=0:1<r&&(r=1);for(var r=ut(r,s),a=ut(a=1<a?1:a,s),o=e.length,s=1-r,l=1-a,u=s*s*s,c=r*s*s*3,d=r*r*s*3,p=r*r*r,f=s*s*l,m=r*s*l+s*r*l+s*s*a,v=r*r*l+s*r*a+r*s*a,g=r*r*a,y=s*l*l,_=r*l*l+s*a*l+s*l*a,x=r*a*l+s*a*a+r*l*a,b=r*a*a,M=l*l*l,w=a*l*l+l*a*l+l*l*a,S=a*a*l+l*a*a+a*l*a,E=a*a*a,h=0;h<o;h+=1)tt[4*h]=$e.round(1e3*(u*e[h]+c*i[h]+d*n[h]+p*t[h]))/1e3,tt[4*h+1]=$e.round(1e3*(f*e[h]+m*i[h]+v*n[h]+g*t[h]))/1e3,tt[4*h+2]=$e.round(1e3*(y*e[h]+_*i[h]+x*n[h]+b*t[h]))/1e3,tt[4*h+3]=$e.round(1e3*(M*e[h]+w*i[h]+S*n[h]+E*t[h]))/1e3;return tt},getPointInSegment:function(e,t,i,n,r,a){r=ut(r,a),a=1-r;return[$e.round(1e3*(a*a*a*e[0]+(r*a*a+a*r*a+a*a*r)*i[0]+(r*r*a+a*r*r+r*a*r)*n[0]+r*r*r*t[0]))/1e3,$e.round(1e3*(a*a*a*e[1]+(r*a*a+a*r*a+a*a*r)*i[1]+(r*r*a+a*r*r+r*a*r)*n[1]+r*r*r*t[1]))/1e3]},buildBezierData:function(e,t,i,n){var u=(e[0]+\"_\"+e[1]+\"_\"+t[0]+\"_\"+t[1]+\"_\"+i[0]+\"_\"+i[1]+\"_\"+n[0]+\"_\"+n[1]).replace(/\\./g,\"p\");if(!et[u]){for(var r,c,a,s,o,l=E,d=0,p=null,f=new lt(l=2===e.length&&(e[0]!==t[0]||e[1]!==t[1])&&st(e[0],e[1],t[0],t[1],e[0]+i[0],e[1]+i[1])&&st(e[0],e[1],t[0],t[1],t[0]+n[0],t[1]+n[1])?2:l),m=i.length,h=0;h<l;h+=1){for(o=b(m),a=h/(l-1),r=s=0;r<m;r+=1)c=v(1-a,3)*e[r]+3*v(1-a,2)*a*(e[r]+i[r])+3*(1-a)*v(a,2)*(t[r]+n[r])+v(a,3)*t[r],o[r]=c,null!==p&&(s+=v(o[r]-p[r],2));d+=s=g(s),f.points[h]=new ht(s,o),p=o}f.segmentLength=d,et[u]=f}return et[u]},pointOnLine2D:st,pointOnLine3D:function(e,t,i,n,r,a,s,o,l){if(0===i&&0===a&&0===l)return st(e,t,n,r,s,o);var h=$e.sqrt($e.pow(n-e,2)+$e.pow(r-t,2)+$e.pow(a-i,2)),e=$e.sqrt($e.pow(s-e,2)+$e.pow(o-t,2)+$e.pow(l-i,2)),t=$e.sqrt($e.pow(s-n,2)+$e.pow(o-r,2)+$e.pow(l-a,2));return-1e-4<(i=e<h?t<h?h-e-t:t-e-h:e<t?t-e-h:e-h-t)&&i<1e-4}},nt=(Je=1,Ze=[],Ke={onmessage:function(){},postMessage:function(e){qe({data:e})}},Qe={postMessage:function(e){Ke.onmessage({data:e})}},{loadAnimation:function(e,t,i){rt();t=at(t,i);Ye.postMessage({type:\"loadAnimation\",path:e,fullPath:n.location.origin+n.location.pathname,id:t})},loadData:function(e,t,i){rt();t=at(t,i);Ye.postMessage({type:\"loadData\",path:e,fullPath:n.location.origin+n.location.pathname,id:t})},completeAnimation:function(e,t,i){rt();t=at(t,i);Ye.postMessage({type:\"complete\",animation:e,id:t})}});function rt(){var e,t;Ye||(e=function(t){var o,n,r,s,h,d,i,p,a,e;function f(e){var t=e.getResponseHeader(\"content-type\");return t&&\"json\"===e.responseType&&-1!==t.indexOf(\"json\")||e.response&&\"object\"==(0,Pn.default)(e.response)?e.response:e.response&&\"string\"==typeof e.response?JSON.parse(e.response):e.responseText?JSON.parse(e.responseText):null}function u(e,t){for(var i,n,r,a=e.length,s=0;s<a;s+=1)if(\"ks\"in(r=e[s])&&!r.completed){if(r.completed=!0,r.tt&&(e[s-1].td=r.tt),r.hasMask)for(var o=r.masksProperties,l=o.length,h=0;h<l;h+=1)if(o[h].pt.k.i)c(o[h].pt.k);else for(n=o[h].pt.k.length,i=0;i<n;i+=1)o[h].pt.k[i].s&&c(o[h].pt.k[i].s[0]),o[h].pt.k[i].e&&c(o[h].pt.k[i].e[0]);0===r.ty?(r.layers=function(e,t){for(var i=0,n=t.length;i<n;){if(t[i].id===e)return t[i].layers.__used?JSON.parse(JSON.stringify(t[i].layers)):(t[i].layers.__used=!0,t[i].layers);i+=1}return null}(r.refId,t),u(r.layers,t)):4===r.ty?function e(t){var i,n,r;for(i=t.length-1;0<=i;--i)if(\"sh\"===t[i].ty)if(t[i].ks.k.i)c(t[i].ks.k);else for(r=t[i].ks.k.length,n=0;n<r;n+=1)t[i].ks.k[n].s&&c(t[i].ks.k[n].s[0]),t[i].ks.k[n].e&&c(t[i].ks.k[n].e[0]);else\"gr\"===t[i].ty&&e(t[i].it)}(r.shapes):5===r.ty&&(0!==(r=r).t.a.length||\"m\"in r.t.p||(r.singleShape=!0))}}function c(e){for(var t=e.i.length,i=0;i<t;i+=1)e.i[i][0]+=e.v[i][0],e.i[i][1]+=e.v[i][1],e.o[i][0]+=e.v[i][0],e.o[i][1]+=e.v[i][1]}function l(e,t){t=t?t.split(\".\"):[100,100,100];return e[0]>t[0]||!(t[0]>e[0])&&(e[1]>t[1]||!(t[1]>e[1])&&(e[2]>t[2]||(t[2],e[2],0)))}function m(e){if(e.chars&&!l(o,e.v))for(var t,i,n,r,a=e.chars.length,s=0;s<a;s+=1)if(e.chars[s].data&&e.chars[s].data.shapes)for(i=(r=e.chars[s].data.shapes[0].it).length,t=0;t<i;t+=1)(n=r[t].ks.k).__converted||(c(r[t].ks.k),n.__converted=!0)}function v(e){for(var t,i,n,r=e.length,a=0;a<r;a+=1){if((t=e[a]).hasMask)for(var s=t.masksProperties,o=s.length,l=0;l<o;l+=1)if(s[l].pt.k.i)s[l].pt.k.c=s[l].cl;else for(n=s[l].pt.k.length,i=0;i<n;i+=1)s[l].pt.k[i].s&&(s[l].pt.k[i].s[0].c=s[l].cl),s[l].pt.k[i].e&&(s[l].pt.k[i].e[0].c=s[l].cl);4===t.ty&&function e(t){for(var i,n,r=t.length-1;0<=r;--r)if(\"sh\"===t[r].ty)if(t[r].ks.k.i)t[r].ks.k.c=t[r].closed;else for(n=t[r].ks.k.length,i=0;i<n;i+=1)t[r].ks.k[i].s&&(t[r].ks.k[i].s[0].c=t[r].closed),t[r].ks.k[i].e&&(t[r].ks.k[i].e[0].c=t[r].closed);else\"gr\"===t[r].ty&&e(t[r].it)}(t.shapes)}}function g(e){for(var t=e.length,i=0;i<t;i+=1)4===e[i].ty&&function e(t){for(var i,n,r=t.length,a=0;a<r;a+=1)if(\"gr\"===t[a].ty)e(t[a].it);else if(\"fl\"===t[a].ty||\"st\"===t[a].ty)if(t[a].c.k&&t[a].c.k[0].i)for(n=t[a].c.k.length,i=0;i<n;i+=1)t[a].c.k[i].s&&(t[a].c.k[i].s[0]/=255,t[a].c.k[i].s[1]/=255,t[a].c.k[i].s[2]/=255,t[a].c.k[i].s[3]/=255),t[a].c.k[i].e&&(t[a].c.k[i].e[0]/=255,t[a].c.k[i].e[1]/=255,t[a].c.k[i].e[2]/=255,t[a].c.k[i].e[3]/=255);else t[a].c.k[0]/=255,t[a].c.k[1]/=255,t[a].c.k[2]/=255,t[a].c.k[3]/=255}(e[i].shapes)}function y(e){for(var t,i=e.length,n=0;n<i;n+=1)5===e[n].ty&&(t=void 0,\"number\"==typeof(t=e[n].t.p).a&&(t.a={a:0,k:t.a}),\"number\"==typeof t.p&&(t.p={a:0,k:t.p}),\"number\"==typeof t.r&&(t.r={a:0,k:t.r}))}function _(e){for(var t,i,n=e.length,r=0;r<n;r+=1)5===e[r].ty&&(i=(t=e[r]).t.d,t.t.d={k:[{s:i,t:0}]})}Qe.dataManager||(Qe.dataManager=(h=[4,4,14],d=function(e){if(l(h,e.v)&&(_(e.layers),e.assets))for(var t=e.assets.length,i=0;i<t;i+=1)e.assets[i].layers&&_(e.assets[i].layers)},o=[4,7,99],s=[5,7,15],i=function(e){if(l(s,e.v)&&(y(e.layers),e.assets))for(var t=e.assets.length,i=0;i<t;i+=1)e.assets[i].layers&&y(e.assets[i].layers)},r=[4,1,9],n=[4,4,18],a=function(e){if(l(n,e.v)&&(v(e.layers),e.assets))for(var t=e.assets.length,i=0;i<t;i+=1)e.assets[i].layers&&v(e.assets[i].layers)},(e={completeData:function(e){e.__complete||(p(e),d(e),m(e),i(e),a(e),u(e.layers,e.assets),e.__complete=!0)}}).checkColors=p=function(e){if(l(r,e.v)&&(g(e.layers),e.assets))for(var t=e.assets.length,i=0;i<t;i+=1)e.assets[i].layers&&g(e.assets[i].layers)},e.checkChars=m,e.checkPathProperties=i,e.checkShapes=a,e.completeLayers=u,e)),Qe.assetLoader||(Qe.assetLoader={load:function(e,t,i,n){var r,a=new XMLHttpRequest;try{a.responseType=\"json\"}catch(i){}a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status)r=f(a),i(r);else try{r=f(a),i(r)}catch(e){n&&n(e)}};try{a.open(\"GET\",e,!0)}catch(i){a.open(\"GET\",t+\"/\"+e,!0)}a.send()}}),\"loadAnimation\"===t.data.type?Qe.assetLoader.load(t.data.path,t.data.fullPath,function(e){Qe.dataManager.completeData(e),Qe.postMessage({id:t.data.id,payload:e,status:\"success\"})},function(){Qe.postMessage({id:t.data.id,status:\"error\"})}):\"complete\"===t.data.type?(e=t.data.animation,Qe.dataManager.completeData(e),Qe.postMessage({id:t.data.id,payload:e,status:\"success\"})):\"loadData\"===t.data.type&&Qe.assetLoader.load(t.data.path,t.data.fullPath,function(e){Qe.postMessage({id:t.data.id,payload:e,status:\"success\"})},function(){Qe.postMessage({id:t.data.id,status:\"error\"})})},(Ye=n.Worker&&n.Blob&&l?(t=new Blob([\"var _workerSelf = self; self.onmessage = \",e.toString()],{type:\"text/javascript\"}),t=URL.createObjectURL(t),new Worker(t)):(qe=e,Ke)).onmessage=function(e){var e=e.data,t=e.id,i=Ze[t];Ze[t]=null,\"success\"===e.status?i.onComplete(e.payload):i.onError&&i.onError()})}function at(e,t){var i=\"processId_\"+(Je+=1);return Ze[i]={onComplete:e,onError:t},i}function st(e,t,i,n,r,a){r=e*n+t*r+i*a-r*n-a*e-i*t;return-.001<r&&r<.001}function ot(u,c,e,d){for(var t,i,n,r,p=E,a=0,s=[],o=[],l=bi.newElement(),f=e.length,h=0;h<p;h+=1){for(n=h/(p-1),t=r=0;t<f;t+=1)i=v(1-n,3)*u[t]+3*v(1-n,2)*n*e[t]+3*(1-n)*v(n,2)*d[t]+v(n,3)*c[t],s[t]=i,null!==o[t]&&(r+=v(s[t]-o[t],2)),o[t]=s[t];r&&(a+=r=g(r)),l.percents[h]=n,l.lengths[h]=a}return l.addedLength=a,l}function lt(e){this.segmentLength=0,this.points=new Array(e)}function ht(e,t){this.partialLength=e,this.point=t}function ut(e,t){var i=t.percents,n=t.lengths,r=i.length,a=d((r-1)*e),s=e*t.addedLength,o=0;if(a===r-1||0===a||s===n[a])return i[a];for(var l=n[a]>s?-1:1,h=!0;h;)if(n[a]<=s&&n[a+1]>s?(o=(s-n[a])/(n[a+1]-n[a]),h=!1):a+=l,a<0||r-1<=a){if(a===r-1)return i[a];h=!1}return i[a]+(i[a+1]-i[a])*o}function ct(e){for(var t=e.fStyle?e.fStyle.split(\" \"):[],i=\"normal\",n=\"normal\",r=t.length,a=0;a<r;a+=1)switch(t[a].toLowerCase()){case\"italic\":n=\"italic\";break;case\"bold\":i=\"700\";break;case\"black\":i=\"900\";break;case\"medium\":i=\"500\";break;case\"regular\":case\"normal\":i=\"400\";break;case\"light\":case\"thin\":i=\"200\"}return{style:n,weight:e.fWeight||i}}mt={w:0,size:0,shapes:[]},vt=(vt=[]).concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]),gt=[\"d83cdffb\",\"d83cdffc\",\"d83cdffd\",\"d83cdffe\",\"d83cdfff\"],yt=[65039,8205],Dt.isModifier=function(e,t){e=e.toString(16)+t.toString(16);return-1!==gt.indexOf(e)},Dt.isZeroWidthJoiner=function(e,t){return t?e===yt[0]&&t===yt[1]:e===yt[1]},Dt.isCombinedCharacter=function(e){return-1!==vt.indexOf(e)},Dt.prototype={addChars:function(e){if(e){this.chars||(this.chars=[]);for(var t,i,n=e.length,r=this.chars.length,a=0;a<n;a+=1){for(t=0,i=!1;t<r;)this.chars[t].style===e[a].style&&this.chars[t].fFamily===e[a].fFamily&&this.chars[t].ch===e[a].ch&&(i=!0),t+=1;i||(this.chars.push(e[a]),r+=1)}}},addFonts:function(u,c){if(u){if(this.chars)return this.isLoaded=!0,void(this.fonts=u.list);for(var e=u.list,d=e.length,p=d,t=0;t<d;t+=1){var i,n,r,a=!0;if(e[t].loaded=!1,e[t].monoCase=Pt(e[t].fFamily,\"monospace\"),e[t].sansCase=Pt(e[t].fFamily,\"sans-serif\"),e[t].fPath){if(\"p\"===e[t].fOrigin||3===e[t].origin)(a=!(0<(i=document.querySelectorAll('style[f-forigin=\"p\"][f-family=\"'+e[t].fFamily+'\"], style[f-origin=\"3\"][f-family=\"'+e[t].fFamily+'\"]')).length)&&a)&&((r=X(\"style\")).setAttribute(\"f-forigin\",e[t].fOrigin),r.setAttribute(\"f-origin\",e[t].origin),r.setAttribute(\"f-family\",e[t].fFamily),r.type=\"text/css\",r.innerText=\"@font-face {font-family: \"+e[t].fFamily+\"; font-style: normal; src: url('\"+e[t].fPath+\"');}\",c.appendChild(r));else if(\"g\"===e[t].fOrigin||1===e[t].origin){for(i=document.querySelectorAll('link[f-forigin=\"g\"], link[f-origin=\"1\"]'),n=0;n<i.length;n+=1)-1!==i[n].href.indexOf(e[t].fPath)&&(a=!1);a&&((r=X(\"link\")).setAttribute(\"f-forigin\",e[t].fOrigin),r.setAttribute(\"f-origin\",e[t].origin),r.type=\"text/css\",r.rel=\"stylesheet\",r.href=e[t].fPath,document.body.appendChild(r))}else if(\"t\"===e[t].fOrigin||2===e[t].origin){for(i=document.querySelectorAll('script[f-forigin=\"t\"], script[f-origin=\"2\"]'),n=0;n<i.length;n+=1)e[t].fPath===i[n].src&&(a=!1);a&&((s=X(\"link\")).setAttribute(\"f-forigin\",e[t].fOrigin),s.setAttribute(\"f-origin\",e[t].origin),s.setAttribute(\"rel\",\"stylesheet\"),s.setAttribute(\"href\",e[t].fPath),c.appendChild(s))}}else e[t].loaded=!0,--p;e[t].helper=(s=c,o=e[t],h=l=void 0,(l=M(\"text\")).style.fontSize=\"100px\",h=ct(o),l.setAttribute(\"font-family\",o.fFamily),l.setAttribute(\"font-style\",h.style),l.setAttribute(\"font-weight\",h.weight),l.textContent=\"1\",o.fClass?(l.style.fontFamily=\"inherit\",l.setAttribute(\"class\",o.fClass)):l.style.fontFamily=o.fFamily,s.appendChild(l),X(\"canvas\").getContext(\"2d\").font=o.fWeight+\" \"+o.fStyle+\" 100px \"+o.fFamily,l),e[t].cache={},this.fonts.push(e[t])}0===p?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0;var s,o,l,h},getCharData:function(e,t,i){for(var n=0,r=this.chars.length;n<r;){if(this.chars[n].ch===e&&this.chars[n].style===t&&this.chars[n].fFamily===i)return this.chars[n];n+=1}return(\"string\"==typeof e&&13!==e.charCodeAt(0)||!e)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn(\"Missing character from exported characters list: \",e,t,i)),mt},getFontByName:function(e){for(var t=0,i=this.fonts.length;t<i;){if(this.fonts[t].fName===e)return this.fonts[t];t+=1}return this.fonts[0]},measureText:function(e,t,i){var n,r,a,t=this.getFontByName(t),s=e.charCodeAt(0);return t.cache[s+1]||(n=t.helper,\" \"===e?(n.textContent=\"|\"+e+\"|\",r=n.getComputedTextLength(),n.textContent=\"||\",a=n.getComputedTextLength(),t.cache[s+1]=(r-a)/100):(n.textContent=e,t.cache[s+1]=n.getComputedTextLength()/100)),t.cache[s+1]*i},checkLoadedFonts:function(){for(var e,t,i=this.fonts.length,n=i,r=0;r<i;r+=1)this.fonts[r].loaded?--n:\"n\"===this.fonts[r].fOrigin||0===this.fonts[r].origin?this.fonts[r].loaded=!0:(e=this.fonts[r].monoCase.node,t=this.fonts[r].monoCase.w,e.offsetWidth!==t?(--n,this.fonts[r].loaded=!0):(e=this.fonts[r].sansCase.node,t=this.fonts[r].sansCase.w,e.offsetWidth!==t&&(--n,this.fonts[r].loaded=!0)),this.fonts[r].loaded&&(this.fonts[r].sansCase.parent.parentNode.removeChild(this.fonts[r].sansCase.parent),this.fonts[r].monoCase.parent.parentNode.removeChild(this.fonts[r].monoCase.parent)));0!==n&&Date.now()-this.initTime<5e3?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)},setIsLoaded:function(){this.isLoaded=!0}};var dt,pt,ft,mt,vt,gt,yt,_t=Dt,w=(pt=o,ft=Math.abs,{getProp:function(e,t,i,n,r){var a;if(t.k.length)if(\"number\"==typeof t.k[0])a=new Rt(e,t,n,r);else switch(i){case 0:a=new Lt(e,t,n,r);break;case 1:a=new Ct(e,t,n,r)}else a=new kt(e,t,n,r);return a.effectsSequence.length&&r.addDynamicProperty(a),a}}),xt=(dt=[0,0],bt.prototype={applyToMatrix:function(e){var t=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||t,this.a&&e.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&e.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&e.skewFromAxis(-this.sk.v,this.sa.v),this.r?e.rotate(-this.r.v):e.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?e.translate(this.px.v,this.py.v,-this.pz.v):e.translate(this.px.v,this.py.v,0):e.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(e){var t,i,n,r;this.elem.globalData.frameId!==this.frameId&&(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),(this._mdf||e)&&(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented&&(e=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime?i=this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(t=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/e,0),this.p.getValueAtTime(this.p.keyframes[0].t/e,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(t=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/e,0),this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/e,0)):(t=this.p.pv,this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/e,this.p.offsetTime)):this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime?(t=[],i=[],n=this.px,r=this.py,n._caching.lastFrame+n.offsetTime<=n.keyframes[0].t?(t[0]=n.getValueAtTime((n.keyframes[0].t+.01)/e,0),t[1]=r.getValueAtTime((r.keyframes[0].t+.01)/e,0),i[0]=n.getValueAtTime(n.keyframes[0].t/e,0),i[1]=r.getValueAtTime(r.keyframes[0].t/e,0)):n._caching.lastFrame+n.offsetTime>=n.keyframes[n.keyframes.length-1].t?(t[0]=n.getValueAtTime(n.keyframes[n.keyframes.length-1].t/e,0),t[1]=r.getValueAtTime(r.keyframes[r.keyframes.length-1].t/e,0),i[0]=n.getValueAtTime((n.keyframes[n.keyframes.length-1].t-.01)/e,0),i[1]=r.getValueAtTime((r.keyframes[r.keyframes.length-1].t-.01)/e,0)):(t=[n.pv,r.pv],i[0]=n.getValueAtTime((n._caching.lastFrame+n.offsetTime-.01)/e,n.offsetTime),i[1]=r.getValueAtTime((r._caching.lastFrame+r.offsetTime-.01)/e,r.offsetTime))):t=i=dt,this.v.rotate(-Math.atan2(t[1]-i[1],t[0]-i[0]))),this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])),this.frameId=this.elem.globalData.frameId)},precalculateMatrix:function(){if(!this.a.k&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function(){}},m([q],bt),bt.prototype.addDynamicProperty=function(e){this._addDynamicProperty(e),this.elem.addDynamicProperty(e),this._isDirty=!0},bt.prototype._addDynamicProperty=q.prototype.addDynamicProperty,{getTransformProperty:function(e,t,i){return new bt(e,t,i)}});function bt(e,t,i){if(this.elem=e,this.frameId=-1,this.propType=\"transform\",this.data=t,this.v=new ie,this.pre=new ie,this.appliedTransformations=0,this.initDynamicPropertyContainer(i||e),t.p&&t.p.s?(this.px=w.getProp(e,t.p.x,0,0,this),this.py=w.getProp(e,t.p.y,0,0,this),t.p.z&&(this.pz=w.getProp(e,t.p.z,0,0,this))):this.p=w.getProp(e,t.p||{k:[0,0,0]},1,0,this),t.rx){if(this.rx=w.getProp(e,t.rx,0,W,this),this.ry=w.getProp(e,t.ry,0,W,this),this.rz=w.getProp(e,t.rz,0,W,this),t.or.k[0].ti)for(var n=t.or.k.length,r=0;r<n;r+=1)t.or.k[r].to=null,t.or.k[r].ti=null;this.or=w.getProp(e,t.or,1,W,this),this.or.sh=!0}else this.r=w.getProp(e,t.r||{k:0},0,W,this);t.sk&&(this.sk=w.getProp(e,t.sk,0,W,this),this.sa=w.getProp(e,t.sa,0,W,this)),this.a=w.getProp(e,t.a||{k:[0,0,0]},1,0,this),this.s=w.getProp(e,t.s||{k:[100,100,100]},1,.01,this),t.o?this.o=w.getProp(e,t.o,0,.01,e):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}function Mt(e,t){var i,u=this.offsetTime;\"multidimensional\"===this.propType&&(i=j(\"float32\",this.pv.length));for(var n,c,d,p=t.lastIndex,r=p,f=this.keyframes.length-1,m=!0;m;){if(n=this.keyframes[r],c=this.keyframes[r+1],r===f-1&&e>=c.t-u){n.h&&(n=c),p=0;break}if(c.t-u>e){p=r;break}r<f-1?r+=1:(p=0,m=!1)}var v,g,y,_,x,b,a,M,w,S,E,T,A,k,s=this.keyframesMetadata[r]||{},R=c.t-u,L=n.t-u;if(n.to){s.bezierData||(s.bezierData=it.buildBezierData(n.s,c.s||n.e,n.to,n.ti));var o=s.bezierData;if(R<=e||e<L)for(var C=R<=e?o.points.length-1:0,P=o.points[C].point.length,l=0;l<P;l+=1)i[l]=o.points[C].point[l];else{s.__fnct?d=s.__fnct:(d=Be.getBezierEasing(n.o.x,n.o.y,n.i.x,n.i.y,n.n).get,s.__fnct=d);for(var D,I=d((e-L)/(R-L)),F=o.segmentLength*I,N=t.lastFrame<e&&t._lastKeyframeIndex===r?t._lastAddedLength:0,h=t.lastFrame<e&&t._lastKeyframeIndex===r?t._lastPoint:0,m=!0,O=o.points.length;m;){if(N+=o.points[h].partialLength,0==F||0===I||h===o.points.length-1){for(P=o.points[h].point.length,l=0;l<P;l+=1)i[l]=o.points[h].point[l];break}if(N<=F&&F<N+o.points[h+1].partialLength){for(D=(F-N)/o.points[h+1].partialLength,P=o.points[h].point.length,l=0;l<P;l+=1)i[l]=o.points[h].point[l]+(o.points[h+1].point[l]-o.points[h].point[l])*D;break}h<O-1?h+=1:m=!1}t._lastPoint=h,t._lastAddedLength=N-o.points[h].partialLength,t._lastKeyframeIndex=r}}else{var U,B,z,H,G,f=n.s.length,V=c.s||n.e;if(this.sh&&1!==n.h)R<=e?(i[0]=V[0],i[1]=V[1],i[2]=V[2]):e<=L?(i[0]=n.s[0],i[1]=n.s[1],i[2]=n.s[2]):(v=i,g=wt(n.s),y=wt(V),_=(e-L)/(R-L),M=[],w=g[0],S=g[1],E=g[2],g=g[3],T=y[0],A=y[1],k=y[2],y=y[3],(a=w*T+S*A+E*k+g*y)<0&&(a=-a,T=-T,A=-A,k=-k,y=-y),a=1e-6<1-a?(a=Math.acos(a),x=Math.sin(a),b=Math.sin((1-_)*a)/x,Math.sin(_*a)/x):(b=1-_,_),M[0]=b*w+a*T,M[1]=b*S+a*A,M[2]=b*E+a*k,M[3]=b*g+a*y,x=M[0],_=M[1],w=M[2],T=M[3],S=Math.atan2(2*_*T-2*x*w,1-2*_*_-2*w*w),A=Math.asin(2*x*_+2*w*T),E=Math.atan2(2*x*T-2*_*w,1-2*x*x-2*w*w),v[0]=S/W,v[1]=A/W,v[2]=E/W);else for(r=0;r<f;r+=1)1!==n.h&&(I=R<=e?1:e<L?0:(n.o.x.constructor===Array?(s.__fnct||(s.__fnct=[]),s.__fnct[r]?d=s.__fnct[r]:(U=void 0===n.o.x[r]?n.o.x[0]:n.o.x[r],B=void 0===n.o.y[r]?n.o.y[0]:n.o.y[r],z=void 0===n.i.x[r]?n.i.x[0]:n.i.x[r],H=void 0===n.i.y[r]?n.i.y[0]:n.i.y[r],d=Be.getBezierEasing(U,B,z,H).get,s.__fnct[r]=d)):s.__fnct?d=s.__fnct:(U=n.o.x,B=n.o.y,z=n.i.x,H=n.i.y,d=Be.getBezierEasing(U,B,z,H).get,n.keyframeMetadata=d),d((e-L)/(R-L)))),V=c.s||n.e,G=1===n.h?n.s[r]:n.s[r]+(V[r]-n.s[r])*I,\"multidimensional\"===this.propType?i[r]=G:i=G}return t.lastIndex=p,i}function wt(e){var t=e[0]*W,i=e[1]*W,e=e[2]*W,n=Math.cos(t/2),r=Math.cos(i/2),a=Math.cos(e/2),t=Math.sin(t/2),i=Math.sin(i/2),e=Math.sin(e/2);return[t*i*a+n*r*e,t*r*a+n*i*e,n*i*a-t*r*e,n*r*a-t*i*e]}function St(){var e=this.comp.renderedFrame-this.offsetTime,t=this.keyframes[0].t-this.offsetTime,i=this.keyframes[this.keyframes.length-1].t-this.offsetTime;return e===this._caching.lastFrame||this._caching.lastFrame!==pt&&(this._caching.lastFrame>=i&&i<=e||this._caching.lastFrame<t&&e<t)||(this._caching.lastFrame>=e&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0),i=this.interpolateValue(e,this._caching),this.pv=i),this._caching.lastFrame=e,this.pv}function Et(e){var t;if(\"unidimensional\"===this.propType)t=e*this.mult,1e-5<ft(this.v-t)&&(this.v=t,this._mdf=!0);else for(var i=0,n=this.v.length;i<n;)t=e[i]*this.mult,1e-5<ft(this.v[i]-t)&&(this.v[i]=t,this._mdf=!0),i+=1}function Tt(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{this.lock=!0,this._mdf=this._isFirstFrame;for(var e=this.effectsSequence.length,t=this.kf?this.pv:this.data.k,i=0;i<e;i+=1)t=this.effectsSequence[i](t);this.setVValue(t),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function At(e){this.effectsSequence.push(e),this.container.addDynamicProperty(this)}function kt(e,t,i,n){this.propType=\"unidimensional\",this.mult=i||1,this.data=t,this.v=i?t.k*i:t.k,this.pv=t.k,this._mdf=!1,this.elem=e,this.container=n,this.comp=e.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=Tt,this.setVValue=Et,this.addEffect=At}function Rt(e,t,i,n){this.propType=\"multidimensional\",this.mult=i||1,this.data=t,this._mdf=!1,this.elem=e,this.container=n,this.comp=e.comp,this.k=!1,this.kf=!1,this.frameId=-1;var r,a=t.k.length;for(this.v=j(\"float32\",a),this.pv=j(\"float32\",a),this.vel=j(\"float32\",a),r=0;r<a;r+=1)this.v[r]=t.k[r]*this.mult,this.pv[r]=t.k[r];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=Tt,this.setVValue=Et,this.addEffect=At}function Lt(e,t,i,n){this.propType=\"unidimensional\",this.keyframes=t.k,this.keyframesMetadata=[],this.offsetTime=e.data.st,this.frameId=-1,this._caching={lastFrame:pt,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=t,this.mult=i||1,this.elem=e,this.container=n,this.comp=e.comp,this.v=pt,this.pv=pt,this._isFirstFrame=!0,this.getValue=Tt,this.setVValue=Et,this.interpolateValue=Mt,this.effectsSequence=[St.bind(this)],this.addEffect=At}function Ct(e,t,i,n){this.propType=\"multidimensional\";for(var r,a,s,o,u=t.k.length,l=0;l<u-1;l+=1)t.k[l].to&&t.k[l].s&&t.k[l+1]&&t.k[l+1].s&&(r=t.k[l].s,a=t.k[l+1].s,s=t.k[l].to,o=t.k[l].ti,(2===r.length&&(r[0]!==a[0]||r[1]!==a[1])&&it.pointOnLine2D(r[0],r[1],a[0],a[1],r[0]+s[0],r[1]+s[1])&&it.pointOnLine2D(r[0],r[1],a[0],a[1],a[0]+o[0],a[1]+o[1])||3===r.length&&(r[0]!==a[0]||r[1]!==a[1]||r[2]!==a[2])&&it.pointOnLine3D(r[0],r[1],r[2],a[0],a[1],a[2],r[0]+s[0],r[1]+s[1],r[2]+s[2])&&it.pointOnLine3D(r[0],r[1],r[2],a[0],a[1],a[2],a[0]+o[0],a[1]+o[1],a[2]+o[2]))&&(t.k[l].to=null,t.k[l].ti=null),r[0]===a[0]&&r[1]===a[1]&&0===s[0]&&0===s[1]&&0===o[0]&&0===o[1]&&(2===r.length||r[2]===a[2]&&0===s[2]&&0===o[2])&&(t.k[l].to=null,t.k[l].ti=null));this.effectsSequence=[St.bind(this)],this.data=t,this.keyframes=t.k,this.keyframesMetadata=[],this.offsetTime=e.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=i||1,this.elem=e,this.container=n,this.comp=e.comp,this.getValue=Tt,this.setVValue=Et,this.interpolateValue=Mt,this.frameId=-1;var h=t.k[0].s.length;for(this.v=j(\"float32\",h),this.pv=j(\"float32\",h),l=0;l<h;l+=1)this.v[l]=pt,this.pv[l]=pt;this._caching={lastFrame:pt,lastIndex:0,value:j(\"float32\",h)},this.addEffect=At}function Pt(r,e){var t=X(\"span\"),i=(t.setAttribute(\"aria-hidden\",!0),t.style.fontFamily=e,X(\"span\")),n=(i.innerText=\"giItT1WQy@!-/#\",t.style.position=\"absolute\",t.style.left=\"-10000px\",t.style.top=\"-10000px\",t.style.fontSize=\"300px\",t.style.fontVariant=\"normal\",t.style.fontStyle=\"normal\",t.style.fontWeight=\"normal\",t.style.letterSpacing=\"0\",t.appendChild(i),document.body.appendChild(t),i.offsetWidth);return i.style.fontFamily=function(){for(var e=r.split(\",\"),t=e.length,i=[],n=0;n<t;n+=1)\"sans-serif\"!==e[n]&&\"monospace\"!==e[n]&&i.push(e[n]);return i.join(\",\")}()+\", \"+e,{node:i,w:n,parent:t}}function Dt(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)}function It(){this.c=!1,this._length=0,this._maxLength=8,this.v=b(this._maxLength),this.o=b(this._maxLength),this.i=b(this._maxLength)}It.prototype.setPathData=function(e,t){this.c=e,this.setLength(t);for(var i=0;i<t;)this.v[i]=gi.newElement(),this.o[i]=gi.newElement(),this.i[i]=gi.newElement(),i+=1},It.prototype.setLength=function(e){for(;this._maxLength<e;)this.doubleArrayLength();this._length=e},It.prototype.doubleArrayLength=function(){this.v=this.v.concat(b(this._maxLength)),this.i=this.i.concat(b(this._maxLength)),this.o=this.o.concat(b(this._maxLength)),this._maxLength*=2},It.prototype.setXYAt=function(e,t,i,n,r){var a;switch(this._length=Math.max(this._length,n+1),this._length>=this._maxLength&&this.doubleArrayLength(),i){case\"v\":a=this.v;break;case\"i\":a=this.i;break;case\"o\":a=this.o;break;default:a=[]}a[n]&&(!a[n]||r)||(a[n]=gi.newElement()),a[n][0]=e,a[n][1]=t},It.prototype.setTripleAt=function(e,t,i,n,r,a,s,o){this.setXYAt(e,t,\"v\",s,o),this.setXYAt(i,n,\"o\",s,o),this.setXYAt(r,a,\"i\",s,o)},It.prototype.reverse=function(){var e=new It,t=(e.setPathData(this.c,this._length),this.v),i=this.o,n=this.i,r=0;this.c&&(e.setTripleAt(t[0][0],t[0][1],n[0][0],n[0][1],i[0][0],i[0][1],0,!1),r=1);for(var a=this._length-1,s=this._length,o=r;o<s;o+=1)e.setTripleAt(t[a][0],t[a][1],n[a][0],n[a][1],i[a][0],i[a][1],o,!1),--a;return e};var Ft,Nt=function(){var r=-999999;function e(e,t,u){var i,n,r,a,c,d,s,p=u.lastIndex,o=this.keyframes;if(e<o[0].t-this.offsetTime)i=o[0].s[0],n=!0,p=0;else if(e>=o[o.length-1].t-this.offsetTime)i=(o[o.length-1].s?o[o.length-1].s:o[o.length-2].e)[0],n=!0;else{for(var l,f,h=p,m=o.length-1,v=!0;v&&(l=o[h],!((f=o[h+1]).t-this.offsetTime>e));)h<m-1?h+=1:v=!1;var g,y,_,x=this.keyframesMetadata[h]||{},p=h;(n=1===l.h)||(y=e>=f.t-this.offsetTime?1:e<l.t-this.offsetTime?0:(x.__fnct?g=x.__fnct:(g=Be.getBezierEasing(l.o.x,l.o.y,l.i.x,l.i.y).get,x.__fnct=g),g((e-(l.t-this.offsetTime))/(f.t-this.offsetTime-(l.t-this.offsetTime)))),_=(f.s||l.e)[0]),i=l.s[0]}for(c=t._length,d=i.i[0].length,u.lastIndex=p,r=0;r<c;r+=1)for(a=0;a<d;a+=1)s=n?i.i[r][a]:i.i[r][a]+(_.i[r][a]-i.i[r][a])*y,t.i[r][a]=s,s=n?i.o[r][a]:i.o[r][a]+(_.o[r][a]-i.o[r][a])*y,t.o[r][a]=s,s=n?i.v[r][a]:i.v[r][a]+(_.v[r][a]-i.v[r][a])*y,t.v[r][a]=s}function n(){this.paths=this.localShapeCollection}function t(e){!function(e,t){if(e._length===t._length&&e.c===t.c){for(var i=e._length,n=0;n<i;n+=1)if(e.v[n][0]!==t.v[n][0]||e.v[n][1]!==t.v[n][1]||e.o[n][0]!==t.o[n][0]||e.o[n][1]!==t.o[n][1]||e.i[n][0]!==t.i[n][0]||e.i[n][1]!==t.i[n][1])return;return 1}}(this.v,e)&&(this.v=yi.clone(e),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function u(){if(this.elem.globalData.frameId!==this.frameId)if(this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{this.lock=!0,this._mdf=!1,e=this.kf?this.pv:(this.data.ks||this.data.pt).k;for(var e,t=this.effectsSequence.length,i=0;i<t;i+=1)e=this.effectsSequence[i](e);this.setVValue(e),this.lock=!1,this.frameId=this.elem.globalData.frameId}else this._mdf=!1}function a(e,t,i){this.propType=\"shape\",this.comp=e.comp,this.container=e,this.elem=e,this.data=t,this.k=!1,this.kf=!1,this._mdf=!1;e=(3===i?t.pt:t.ks).k;this.v=yi.clone(e),this.pv=yi.clone(this.v),this.localShapeCollection=_i.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=n,this.effectsSequence=[]}function c(e){this.effectsSequence.push(e),this.container.addDynamicProperty(this)}function s(e,t,i){this.propType=\"shape\",this.comp=e.comp,this.elem=e,this.container=e,this.offsetTime=e.data.st,this.keyframes=(3===i?t.pt:t.ks).k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;e=this.keyframes[0].s[0].i.length;this.v=yi.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,e),this.pv=yi.clone(this.v),this.localShapeCollection=_i.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=r,this.reset=n,this._caching={lastFrame:r,lastIndex:0},this.effectsSequence=[function(){var e=this.comp.renderedFrame-this.offsetTime,t=this.keyframes[0].t-this.offsetTime,i=this.keyframes[this.keyframes.length-1].t-this.offsetTime,n=this._caching.lastFrame;return n!==r&&(n<t&&e<t||i<n&&i<e)||(this._caching.lastIndex=n<e?this._caching.lastIndex:0,this.interpolateShape(e,this.pv,this._caching)),this._caching.lastFrame=e,this.pv}.bind(this)]}a.prototype.interpolateShape=e,a.prototype.getValue=u,a.prototype.setVValue=t,a.prototype.addEffect=c,s.prototype.getValue=u,s.prototype.interpolateShape=e,s.prototype.setVValue=t,s.prototype.addEffect=c;o=T,h.prototype={reset:n,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var e=this.p.v[0],t=this.p.v[1],i=this.s.v[0]/2,n=this.s.v[1]/2,r=3!==this.d,a=this.v;a.v[0][0]=e,a.v[0][1]=t-n,a.v[1][0]=r?e+i:e-i,a.v[1][1]=t,a.v[2][0]=e,a.v[2][1]=t+n,a.v[3][0]=r?e-i:e+i,a.v[3][1]=t,a.i[0][0]=r?e-i*o:e+i*o,a.i[0][1]=t-n,a.i[1][0]=r?e+i:e-i,a.i[1][1]=t-n*o,a.i[2][0]=r?e+i*o:e-i*o,a.i[2][1]=t+n,a.i[3][0]=r?e-i:e+i,a.i[3][1]=t+n*o,a.o[0][0]=r?e+i*o:e-i*o,a.o[0][1]=t-n,a.o[1][0]=r?e+i:e-i,a.o[1][1]=t+n*o,a.o[2][0]=r?e-i*o:e+i*o,a.o[2][1]=t+n,a.o[3][0]=r?e-i:e+i,a.o[3][1]=t-n*o}},m([q],h);var o,d=h,p=(l.prototype={reset:n,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){for(var e=2*Math.floor(this.pt.v),u=2*Math.PI/e,t=!0,i=this.or.v,c=this.ir.v,d=this.os.v,p=this.is.v,f=2*Math.PI*i/(2*e),m=2*Math.PI*c/(2*e),n=-Math.PI/2,r=(n+=this.r.v,3===this.data.d?-1:1),a=this.v._length=0;a<e;a+=1){var s=t?d:p,o=t?f:m,l=(h=t?i:c)*Math.cos(n),h=h*Math.sin(n),v=0===l&&0===h?0:h/Math.sqrt(l*l+h*h),g=0===l&&0===h?0:-l/Math.sqrt(l*l+h*h);l+=+this.p.v[0],h+=+this.p.v[1],this.v.setTripleAt(l,h,l-v*o*s*r,h-g*o*s*r,l+v*o*s*r,h+g*o*s*r,a,!0),t=!t,n+=u*r}},convertPolygonToPath:function(){var e,t=Math.floor(this.pt.v),u=2*Math.PI/t,i=this.or.v,n=this.os.v,r=2*Math.PI*i/(4*t),a=.5*-Math.PI,s=3===this.data.d?-1:1;for(a+=this.r.v,e=this.v._length=0;e<t;e+=1){var o=i*Math.cos(a),l=i*Math.sin(a),h=0===o&&0===l?0:l/Math.sqrt(o*o+l*l),c=0===o&&0===l?0:-o/Math.sqrt(o*o+l*l);o+=+this.p.v[0],l+=+this.p.v[1],this.v.setTripleAt(o,l,o-h*r*n*s,l-c*r*n*s,o+h*r*n*s,l+c*r*n*s,e,!0),a+=u*s}this.paths.length=0,this.paths[0]=this.v}},m([q],l),l),f=(i.prototype={convertRectToPath:function(){var e=this.p.v[0],t=this.p.v[1],i=this.s.v[0]/2,n=this.s.v[1]/2,r=y(i,n,this.r.v),a=r*(1-T);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(e+i,t-n+r,e+i,t-n+r,e+i,t-n+a,0,!0),this.v.setTripleAt(e+i,t+n-r,e+i,t+n-a,e+i,t+n-r,1,!0),0!==r?(this.v.setTripleAt(e+i-r,t+n,e+i-r,t+n,e+i-a,t+n,2,!0),this.v.setTripleAt(e-i+r,t+n,e-i+a,t+n,e-i+r,t+n,3,!0),this.v.setTripleAt(e-i,t+n-r,e-i,t+n-r,e-i,t+n-a,4,!0),this.v.setTripleAt(e-i,t-n+r,e-i,t-n+a,e-i,t-n+r,5,!0),this.v.setTripleAt(e-i+r,t-n,e-i+r,t-n,e-i+a,t-n,6,!0),this.v.setTripleAt(e+i-r,t-n,e+i-a,t-n,e+i-r,t-n,7,!0)):(this.v.setTripleAt(e-i,t+n,e-i+a,t+n,e-i,t+n,2),this.v.setTripleAt(e-i,t-n,e-i,t-n+a,e-i,t-n,3))):(this.v.setTripleAt(e+i,t-n+r,e+i,t-n+a,e+i,t-n+r,0,!0),0!==r?(this.v.setTripleAt(e+i-r,t-n,e+i-r,t-n,e+i-a,t-n,1,!0),this.v.setTripleAt(e-i+r,t-n,e-i+a,t-n,e-i+r,t-n,2,!0),this.v.setTripleAt(e-i,t-n+r,e-i,t-n+r,e-i,t-n+a,3,!0),this.v.setTripleAt(e-i,t+n-r,e-i,t+n-a,e-i,t+n-r,4,!0),this.v.setTripleAt(e-i+r,t+n,e-i+r,t+n,e-i+a,t+n,5,!0),this.v.setTripleAt(e+i-r,t+n,e+i-a,t+n,e+i-r,t+n,6,!0),this.v.setTripleAt(e+i,t+n-r,e+i,t+n-r,e+i,t+n-a,7,!0)):(this.v.setTripleAt(e-i,t-n,e-i+a,t-n,e-i,t-n,1,!0),this.v.setTripleAt(e-i,t+n,e-i,t+n-a,e-i,t+n,2,!0),this.v.setTripleAt(e+i,t+n,e+i-a,t+n,e+i,t+n,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:n},m([q],i),i);function i(e,t){this.v=yi.newElement(),this.v.c=!0,this.localShapeCollection=_i.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=e,this.comp=e.comp,this.frameId=-1,this.d=t.d,this.initDynamicPropertyContainer(e),this.p=w.getProp(e,t.p,1,0,this),this.s=w.getProp(e,t.s,1,0,this),this.r=w.getProp(e,t.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}function l(e,t){this.v=yi.newElement(),this.v.setPathData(!0,0),this.elem=e,this.comp=e.comp,this.data=t,this.frameId=-1,this.d=t.d,this.initDynamicPropertyContainer(e),1===t.sy?(this.ir=w.getProp(e,t.ir,0,0,this),this.is=w.getProp(e,t.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=w.getProp(e,t.pt,0,0,this),this.p=w.getProp(e,t.p,1,0,this),this.r=w.getProp(e,t.r,0,W,this),this.or=w.getProp(e,t.or,0,0,this),this.os=w.getProp(e,t.os,0,.01,this),this.localShapeCollection=_i.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}function h(e,t){this.v=yi.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=_i.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=t.d,this.elem=e,this.comp=e.comp,this.frameId=-1,this.initDynamicPropertyContainer(e),this.p=w.getProp(e,t.p,1,0,this),this.s=w.getProp(e,t.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return{getShapeProp:function(e,t,i){var n;return 3===i||4===i?n=new((3===i?t.pt:t.ks).k.length?s:a)(e,t,i):5===i?n=new f(e,t):6===i?n=new d(e,t):7===i&&(n=new p(e,t)),n.k&&e.addDynamicProperty(n),n},getConstructorFunction:function(){return a},getKeyframedConstructorFunction:function(){return s}}}(),Ot=(Ft={},(t={}).registerModifier=function(e,t){Ft[e]||(Ft[e]=t)},t.getModifier=function(e,t,i){return new Ft[e](t,i)},t);function Ut(){}function Bt(){}function zt(){}function Ht(){}function Gt(){}function Vt(){this._length=0,this._maxLength=4,this.shapes=b(this._maxLength)}function Wt(e,t,i,n){this.elem=e,this.frameId=-1,this.dataProps=b(t.length),this.renderer=i,this.k=!1,this.dashStr=\"\",this.dashArray=j(\"float32\",t.length?t.length-1:0),this.dashoffset=j(\"float32\",1),this.initDynamicPropertyContainer(n);for(var r,a=t.length||0,s=0;s<a;s+=1)r=w.getProp(e,t[s].v,0,0,this),this.k=r.k||this.k,this.dataProps[s]={n:t[s].n,p:r};this.k||this.getValue(!0),this._isAnimated=this.k}function jt(e,t,i){this.data=t,this.c=j(\"uint8c\",4*t.p);var n=t.k.k[0].s?t.k.k[0].s.length-4*t.p:t.k.k.length-4*t.p;this.o=j(\"float32\",n),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=n,this.initDynamicPropertyContainer(i),this.prop=w.getProp(e,t.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}Ut.prototype.initModifierProperties=function(){},Ut.prototype.addShapeToModifier=function(){},Ut.prototype.addShape=function(e){var t;this.closed||(e.sh.container.addDynamicProperty(e.sh),t={shape:e.sh,data:e,localShapeCollection:_i.newShapeCollection()},this.shapes.push(t),this.addShapeToModifier(t),this._isAnimated&&e.setAsAnimated())},Ut.prototype.init=function(e,t){this.shapes=[],this.elem=e,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,t),this.frameId=o,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},Ut.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},m([q],Ut),m([Ut],Bt),Bt.prototype.initModifierProperties=function(e,t){this.s=w.getProp(e,t.s,0,.01,this),this.e=w.getProp(e,t.e,0,.01,this),this.o=w.getProp(e,t.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=t.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},Bt.prototype.addShapeToModifier=function(e){e.pathsData=[]},Bt.prototype.calculateShapeEdges=function(e,t,i,n,r){var a=[];t<=1?a.push({s:e,e:t}):1<=e?a.push({s:e-1,e:t-1}):(a.push({s:e,e:1}),a.push({s:0,e:t-1}));for(var s,o,l=[],u=a.length,h=0;h<u;h+=1)(o=a[h]).e*r<n||o.s*r>n+i||(s=o.s*r<=n?0:(o.s*r-n)/i,o=o.e*r>=n+i?1:(o.e*r-n)/i,l.push([s,o]));return l.length||l.push([0,0]),l},Bt.prototype.releasePathsData=function(e){for(var t=e.length,i=0;i<t;i+=1)xi.release(e[i]);return e.length=0,e},Bt.prototype.processShapes=function(u){var c,e,t,i;this._mdf||u?((e=this.o.v%360/360)<0&&(e+=1),t=1<this.s.v?1+e:this.s.v<0?0+e:this.s.v+e,(i=1<this.e.v?1+e:this.e.v<0?0+e:this.e.v+e)<t&&(e=t,t=i,i=e),t=1e-4*Math.round(1e4*t),i=1e-4*Math.round(1e4*i),this.sValue=t,this.eValue=i):(t=this.sValue,i=this.eValue);var n,d,p,f,r,m=this.shapes.length,v=0;if(i===t)for(o=0;o<m;o+=1)this.shapes[o].localShapeCollection.releaseShapes(),this.shapes[o].shape._mdf=!0,this.shapes[o].shape.paths=this.shapes[o].localShapeCollection,this._mdf&&(this.shapes[o].pathsData.length=0);else if(1===i&&0===t||0===i&&1===t){if(this._mdf)for(o=0;o<m;o+=1)this.shapes[o].pathsData.length=0,this.shapes[o].shape._mdf=!0}else{for(var a,g,s=[],o=0;o<m;o+=1)if((a=this.shapes[o]).shape._mdf||this._mdf||u||2===this.m){if(d=(c=a.shape.paths)._length,r=0,!a.shape._mdf&&a.pathsData.length)r=a.totalShapeLength;else{for(p=this.releasePathsData(a.pathsData),n=0;n<d;n+=1)f=it.getSegmentsLength(c.shapes[n]),p.push(f),r+=f.totalLength;a.totalShapeLength=r,a.pathsData=p}v+=r,a.shape._mdf=!0}else a.shape.paths=a.localShapeCollection;var y,l=t,h=i,_=0;for(o=m-1;0<=o;--o)if((a=this.shapes[o]).shape._mdf){for((g=a.localShapeCollection).releaseShapes(),2===this.m&&1<m?(y=this.calculateShapeEdges(t,i,a.totalShapeLength,_,v),_+=a.totalShapeLength):y=[[l,h]],d=y.length,n=0;n<d;n+=1){l=y[n][0],h=y[n][1],s.length=0,h<=1?s.push({s:a.totalShapeLength*l,e:a.totalShapeLength*h}):1<=l?s.push({s:a.totalShapeLength*(l-1),e:a.totalShapeLength*(h-1)}):(s.push({s:a.totalShapeLength*l,e:a.totalShapeLength}),s.push({s:0,e:a.totalShapeLength*(h-1)}));var x,b=this.addShapes(a,s[0]);s[0].s!==s[0].e&&(1<s.length&&(b=a.shape.paths.shapes[a.shape.paths._length-1].c?(x=b.pop(),this.addPaths(b,g),this.addShapes(a,s[1],x)):(this.addPaths(b,g),this.addShapes(a,s[1]))),this.addPaths(b,g))}a.shape.paths=g}}},Bt.prototype.addPaths=function(e,t){for(var i=e.length,n=0;n<i;n+=1)t.addShape(e[n])},Bt.prototype.addSegment=function(e,t,i,n,r,a,s){r.setXYAt(t[0],t[1],\"o\",a),r.setXYAt(i[0],i[1],\"i\",a+1),s&&r.setXYAt(e[0],e[1],\"v\",a),r.setXYAt(n[0],n[1],\"v\",a+1)},Bt.prototype.addSegmentFromArray=function(e,t,i,n){t.setXYAt(e[1],e[5],\"o\",i),t.setXYAt(e[2],e[6],\"i\",i+1),n&&t.setXYAt(e[0],e[4],\"v\",i),t.setXYAt(e[3],e[7],\"v\",i+1)},Bt.prototype.addShapes=function(u,e,t){var i,n,c,r,a,d,p,s,f=u.pathsData,o=u.shape.paths.shapes,m=u.shape.paths._length,l=0,v=[],h=!0,g=t?(r=t._length,t._length):(t=yi.newElement(),r=0);for(v.push(t),i=0;i<m;i+=1){for(a=f[i].lengths,t.c=o[i].c,c=o[i].c?a.length:a.length+1,n=1;n<c;n+=1)if(l+(s=a[n-1]).addedLength<e.s)l+=s.addedLength,t.c=!1;else{if(l>e.e){t.c=!1;break}e.s<=l&&e.e>=l+s.addedLength?(this.addSegment(o[i].v[n-1],o[i].o[n-1],o[i].i[n],o[i].v[n],t,r,h),h=!1):(d=it.getNewSegment(o[i].v[n-1],o[i].v[n],o[i].o[n-1],o[i].i[n],(e.s-l)/s.addedLength,(e.e-l)/s.addedLength,a[n-1]),this.addSegmentFromArray(d,t,r,h),t.c=h=!1),l+=s.addedLength,r+=1}if(o[i].c&&a.length&&(s=a[n-1],l<=e.e?(p=a[n-1].addedLength,e.s<=l&&e.e>=l+p?(this.addSegment(o[i].v[n-1],o[i].o[n-1],o[i].i[0],o[i].v[0],t,r,h),h=!1):(d=it.getNewSegment(o[i].v[n-1],o[i].v[0],o[i].o[n-1],o[i].i[0],(e.s-l)/p,(e.e-l)/p,a[n-1]),this.addSegmentFromArray(d,t,r,h),t.c=h=!1)):t.c=!1,l+=s.addedLength,r+=1),t._length&&(t.setXYAt(t.v[g][0],t.v[g][1],\"i\",g),t.setXYAt(t.v[t._length-1][0],t.v[t._length-1][1],\"o\",t._length-1)),l>e.e)break;i<m-1&&(t=yi.newElement(),h=!0,v.push(t),r=0)}return v},Ot.registerModifier(\"tm\",Bt),m([Ut],zt),zt.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.rd=w.getProp(e,t.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},zt.prototype.processPath=function(e,u){var t=yi.newElement();t.c=e.c;for(var i,c,d,n,r,p,a,s,o,l,f=e._length,m=0,h=0;h<f;h+=1)i=e.v[h],d=e.o[h],c=e.i[h],i[0]===d[0]&&i[1]===d[1]&&i[0]===c[0]&&i[1]===c[1]?0!==h&&h!==f-1||e.c?(n=0===h?e.v[f-1]:e.v[h-1],p=(r=Math.sqrt(Math.pow(i[0]-n[0],2)+Math.pow(i[1]-n[1],2)))?Math.min(r/2,u)/r:0,o=i[0]+(n[0]-i[0])*p,l=i[1]-(i[1]-n[1])*p,a=o-(o-i[0])*T,s=l-(l-i[1])*T,t.setTripleAt(o,l,a,s,o,l,m),m+=1,n=h===f-1?e.v[0]:e.v[h+1],p=(r=Math.sqrt(Math.pow(i[0]-n[0],2)+Math.pow(i[1]-n[1],2)))?Math.min(r/2,u)/r:0,a=i[0]+(n[0]-i[0])*p,s=i[1]+(n[1]-i[1])*p,o=a-(a-i[0])*T,l=s-(s-i[1])*T,t.setTripleAt(a,s,a,s,o,l,m)):t.setTripleAt(i[0],i[1],d[0],d[1],c[0],c[1],m):t.setTripleAt(e.v[h][0],e.v[h][1],e.o[h][0],e.o[h][1],e.i[h][0],e.i[h][1],m),m+=1;return t},zt.prototype.processShapes=function(e){var t,i,n,r,a,s,o=this.shapes.length,l=this.rd.v;if(0!==l)for(i=0;i<o;i+=1){if(s=(a=this.shapes[i]).localShapeCollection,a.shape._mdf||this._mdf||e)for(s.releaseShapes(),a.shape._mdf=!0,t=a.shape.paths.shapes,r=a.shape.paths._length,n=0;n<r;n+=1)s.addShape(this.processPath(t[n],l));a.shape.paths=a.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},Ot.registerModifier(\"rd\",zt),m([Ut],Ht),Ht.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.amount=w.getProp(e,t.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},Ht.prototype.processPath=function(e,u){for(var t=u/100,i=[0,0],n=e._length,r=0,r=0;r<n;r+=1)i[0]+=e.v[r][0],i[1]+=e.v[r][1];i[0]/=n,i[1]/=n;var a,s,o,l,c,d,h=yi.newElement();for(h.c=e.c,r=0;r<n;r+=1)a=e.v[r][0]+(i[0]-e.v[r][0])*t,s=e.v[r][1]+(i[1]-e.v[r][1])*t,o=e.o[r][0]+(i[0]-e.o[r][0])*-t,l=e.o[r][1]+(i[1]-e.o[r][1])*-t,c=e.i[r][0]+(i[0]-e.i[r][0])*-t,d=e.i[r][1]+(i[1]-e.i[r][1])*-t,h.setTripleAt(a,s,o,l,c,d,r);return h},Ht.prototype.processShapes=function(e){var t,i,n,r,a,s,o=this.shapes.length,l=this.amount.v;if(0!==l)for(i=0;i<o;i+=1){if(s=(a=this.shapes[i]).localShapeCollection,a.shape._mdf||this._mdf||e)for(s.releaseShapes(),a.shape._mdf=!0,t=a.shape.paths.shapes,r=a.shape.paths._length,n=0;n<r;n+=1)s.addShape(this.processPath(t[n],l));a.shape.paths=a.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},Ot.registerModifier(\"pb\",Ht),m([Ut],Gt),Gt.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.c=w.getProp(e,t.c,0,null,this),this.o=w.getProp(e,t.o,0,null,this),this.tr=xt.getTransformProperty(e,t.tr,this),this.so=w.getProp(e,t.tr.so,0,.01,this),this.eo=w.getProp(e,t.tr.eo,0,.01,this),this.data=t,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new ie,this.rMatrix=new ie,this.sMatrix=new ie,this.tMatrix=new ie,this.matrix=new ie},Gt.prototype.applyTransforms=function(e,t,i,n,r,a){var s=a?-1:1,o=n.s.v[0]+(1-n.s.v[0])*(1-r),l=n.s.v[1]+(1-n.s.v[1])*(1-r);e.translate(n.p.v[0]*s*r,n.p.v[1]*s*r,n.p.v[2]),t.translate(-n.a.v[0],-n.a.v[1],n.a.v[2]),t.rotate(-n.r.v*s*r),t.translate(n.a.v[0],n.a.v[1],n.a.v[2]),i.translate(-n.a.v[0],-n.a.v[1],n.a.v[2]),i.scale(a?1/o:o,a?1/l:l),i.translate(n.a.v[0],n.a.v[1],n.a.v[2])},Gt.prototype.init=function(e,t,i,n){for(this.elem=e,this.arr=t,this.pos=i,this.elemsData=n,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,t[i]);0<i;)this._elements.unshift(t[--i]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},Gt.prototype.resetElements=function(e){for(var t=e.length,i=0;i<t;i+=1)e[i]._processed=!1,\"gr\"===e[i].ty&&this.resetElements(e[i].it)},Gt.prototype.cloneElements=function(e){e=JSON.parse(JSON.stringify(e));return this.resetElements(e),e},Gt.prototype.changeGroupRender=function(e,t){for(var i=e.length,n=0;n<i;n+=1)e[n]._render=t,\"gr\"===e[n].ty&&this.changeGroupRender(e[n].it,t)},Gt.prototype.processShapes=function(e){var t,u,i,c,n,d=!1;if(this._mdf||e){var r,p=Math.ceil(this.c.v);if(this._groups.length<p){for(;this._groups.length<p;){var f={it:this.cloneElements(this._elements),ty:\"gr\"};f.it.push({a:{a:0,ix:1,k:[0,0]},nm:\"Transform\",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:\"tr\"}),this.arr.splice(0,0,f),this._groups.splice(0,0,f),this._currentCopies+=1}this.elem.reloadShapes(),d=!0}for(i=n=0;i<=this._groups.length-1;i+=1)this._groups[i]._render=r=n<p,this.changeGroupRender(this._groups[i].it,r),r||(0!==(r=(r=this.elemsData[i].it)[r.length-1]).transform.op.v?(r.transform.op._mdf=!0,r.transform.op.v=0):r.transform.op._mdf=!1),n+=1;this._currentCopies=p;var e=this.o.v,m=e%1,v=0<e?Math.floor(e):Math.ceil(e),a=this.pMatrix.props,s=this.rMatrix.props,o=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var l,g,h=0;if(0<e){for(;h<v;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),h+=1;m&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,m,!1),h+=m)}else if(e<0){for(;v<h;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),--h;m&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-m,!0),h-=m)}for(i=1===this.data.m?0:this._currentCopies-1,c=1===this.data.m?1:-1,n=this._currentCopies;n;){if(g=(u=(t=this.elemsData[i].it)[t.length-1].transform.mProps.v.props).length,t[t.length-1].transform.mProps._mdf=!0,t[t.length-1].transform.op._mdf=!0,t[t.length-1].transform.op.v=1===this._currentCopies?this.so.v:this.so.v+(this.eo.v-this.so.v)*(i/(this._currentCopies-1)),0!==h){for((0!==i&&1===c||i!==this._currentCopies-1&&-1===c)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8],s[9],s[10],s[11],s[12],s[13],s[14],s[15]),this.matrix.transform(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15]),this.matrix.transform(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]),l=0;l<g;l+=1)u[l]=this.matrix.props[l];this.matrix.reset()}else for(this.matrix.reset(),l=0;l<g;l+=1)u[l]=this.matrix.props[l];h+=1,--n,i+=c}}else for(n=this._currentCopies,i=0,c=1;n;)u=(t=this.elemsData[i].it)[t.length-1].transform.mProps.v.props,t[t.length-1].transform.mProps._mdf=!1,t[t.length-1].transform.op._mdf=!1,--n,i+=c;return d},Gt.prototype.addShape=function(){},Ot.registerModifier(\"rp\",Gt),Vt.prototype.addShape=function(e){this._length===this._maxLength&&(this.shapes=this.shapes.concat(b(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=e,this._length+=1},Vt.prototype.releaseShapes=function(){for(var e=0;e<this._length;e+=1)yi.release(this.shapes[e]);this._length=0},Wt.prototype.getValue=function(e){if((this.elem.globalData.frameId!==this.frameId||e)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||e,this._mdf)){var t=0,i=this.dataProps.length;for(\"svg\"===this.renderer&&(this.dashStr=\"\"),t=0;t<i;t+=1)\"o\"!==this.dataProps[t].n?\"svg\"===this.renderer?this.dashStr+=\" \"+this.dataProps[t].p.v:this.dashArray[t]=this.dataProps[t].p.v:this.dashoffset[0]=this.dataProps[t].p.v}},m([q],Wt),jt.prototype.comparePoints=function(e,t){for(var i=0,n=this.o.length/2;i<n;){if(.01<Math.abs(e[4*i]-e[4*t+2*i]))return!1;i+=1}return!0},jt.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var e=0,t=this.data.k.k.length;e<t;){if(!this.comparePoints(this.data.k.k[e].s,this.data.p))return!1;e+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},jt.prototype.getValue=function(e){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||e){for(var t,i,n=4*this.data.p,r=0;r<n;r+=1)t=r%4==0?100:255,i=Math.round(this.prop.v[r]*t),this.c[r]!==i&&(this.c[r]=i,this._cmdf=!e);if(this.o.length)for(n=this.prop.v.length,r=4*this.data.p;r<n;r+=1)t=r%2==0?100:1,i=r%2==0?Math.round(100*this.prop.v[r]):this.prop.v[r],this.o[r-4*this.data.p]!==i&&(this.o[r-4*this.data.p]=i,this._omdf=!e);this._mdf=!e}},m([q],jt);function Xt(e,t,i,n){if(0===t)return\"\";for(var r=e.o,a=e.i,s=e.v,o=\" M\"+n.applyToPointStringified(s[0][0],s[0][1]),l=1;l<t;l+=1)o+=\" C\"+n.applyToPointStringified(r[l-1][0],r[l-1][1])+\" \"+n.applyToPointStringified(a[l][0],a[l][1])+\" \"+n.applyToPointStringified(s[l][0],s[l][1]);return o=i&&t?o+(\" C\"+n.applyToPointStringified(r[l-1][0],r[l-1][1])+\" \"+n.applyToPointStringified(a[0][0],a[0][1])+\" \"+n.applyToPointStringified(s[0][0],s[0][1]))+\"z\":o}ii.prototype={addAudio:function(e){this.audios.push(e)},pause:function(){for(var e=this.audios.length,t=0;t<e;t+=1)this.audios[t].pause()},resume:function(){for(var e=this.audios.length,t=0;t<e;t+=1)this.audios[t].resume()},setRate:function(e){for(var t=this.audios.length,i=0;i<t;i+=1)this.audios[i].setRate(e)},createAudio:function(e){return this.audioFactory?this.audioFactory(e):Howl?new Howl({src:[e]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(e){this.audioFactory=e},setVolume:function(e){this._volume=e,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){for(var e=this.audios.length,t=0;t<e;t+=1)this.audios[t].volume(this._volume*(this._isMuted?0:1))}};var qt,Yt=function(){return new ii},Jt=((t=X(\"canvas\")).width=1,t.height=1,(e=t.getContext(\"2d\")).fillStyle=\"rgba(0,0,0,0)\",e.fillRect(0,0,1,1),qt=t,ti.prototype={loadAssets:function(e,t){this.imagesLoadedCb=t;for(var i=e.length,n=0;n<i;n+=1)e[n].layers||(e[n].t&&\"seq\"!==e[n].t?3===e[n].t&&(this.totalFootages+=1,this.images.push(this.createFootageData(e[n]))):(this.totalImages+=1,this.images.push(this._createImageData(e[n]))))},setAssetsPath:function(e){this.assetsPath=e||\"\"},setPath:function(e){this.path=e||\"\"},loadedImages:function(){return this.totalImages===this.loadedAssets},loadedFootages:function(){return this.totalFootages===this.loadedFootagesCount},destroy:function(){this.imagesLoadedCb=null,this.images.length=0},getAsset:function(e){for(var t=0,i=this.images.length;t<i;){if(this.images[t].assetData===e)return this.images[t].img;t+=1}return null},createImgData:function(e){var t=ei(e,this.assetsPath,this.path),i=X(\"img\"),n=(i.crossOrigin=\"anonymous\",i.addEventListener(\"load\",this._imageLoaded,!1),i.addEventListener(\"error\",function(){n.img=qt,this._imageLoaded()}.bind(this),!1),i.src=t,{img:i,assetData:e});return n},createImageData:function(e){var t=ei(e,this.assetsPath,this.path),i=M(\"image\"),n=(c?this.testImageLoaded(i):i.addEventListener(\"load\",this._imageLoaded,!1),i.addEventListener(\"error\",function(){n.img=qt,this._imageLoaded()}.bind(this),!1),i.setAttributeNS(\"http://www.w3.org/1999/xlink\",\"href\",t),this._elementHelper.append?this._elementHelper.append(i):this._elementHelper.appendChild(i),{img:i,assetData:e});return n},imageLoaded:Qt,footageLoaded:$t,setCacheType:function(e,t){this._createImageData=\"svg\"===e?(this._elementHelper=t,this.createImageData.bind(this)):this.createImgData.bind(this)}},ti),Zt=(e={maskType:!0},(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\\/\\d./i.test(navigator.userAgent))&&(e.maskType=!1),e),Kt=((t={}).createFilter=function(e,t){var i=M(\"filter\");return i.setAttribute(\"id\",e),!0!==t&&(i.setAttribute(\"filterUnits\",\"objectBoundingBox\"),i.setAttribute(\"x\",\"0%\"),i.setAttribute(\"y\",\"0%\"),i.setAttribute(\"width\",\"100%\"),i.setAttribute(\"height\",\"100%\")),i},t.createAlphaToLuminanceFilter=function(){var e=M(\"feColorMatrix\");return e.setAttribute(\"type\",\"matrix\"),e.setAttribute(\"color-interpolation-filters\",\"sRGB\"),e.setAttribute(\"values\",\"0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1\"),e},t);function Qt(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function $t(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function ei(e,t,i){var n=\"\";return n=e.e?e.p:t?t+(t=-1!==(t=e.p).indexOf(\"images/\")?t.split(\"/\")[1]:t):(n=i,(n+=e.u||\"\")+e.p)}function ti(){this._imageLoaded=Qt.bind(this),this._footageLoaded=$t.bind(this),this.testImageLoaded=function(e){var t=0,i=setInterval(function(){(e.getBBox().width||500<t)&&(this._imageLoaded(),clearInterval(i)),t+=1}.bind(this),50)}.bind(this),this.createFootageData=function(e){var t={assetData:e},e=ei(e,this.assetsPath,this.path);return nt.loadData(e,function(e){t.img=e,this._footageLoaded()}.bind(this),function(){t.img={},this._footageLoaded()}.bind(this)),t}.bind(this),this.assetsPath=\"\",this.path=\"\",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}function ii(e){this.audios=[],this.audioFactory=e,this._volume=1,this._isMuted=!1}function ni(e,t,i){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=e,this._renderType=t,this._elem=i,this._animatorsData=b(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(i)}function ri(e,t,i){var n={propType:!1},r=w.getProp,a=t.a;this.a={r:a.r?r(e,a.r,0,W,i):n,rx:a.rx?r(e,a.rx,0,W,i):n,ry:a.ry?r(e,a.ry,0,W,i):n,sk:a.sk?r(e,a.sk,0,W,i):n,sa:a.sa?r(e,a.sa,0,W,i):n,s:a.s?r(e,a.s,1,.01,i):n,a:a.a?r(e,a.a,1,0,i):n,o:a.o?r(e,a.o,0,.01,i):n,p:a.p?r(e,a.p,1,0,i):n,sw:a.sw?r(e,a.sw,0,0,i):n,sc:a.sc?r(e,a.sc,1,0,i):n,fc:a.fc?r(e,a.fc,1,0,i):n,fh:a.fh?r(e,a.fh,0,0,i):n,fs:a.fs?r(e,a.fs,0,.01,i):n,fb:a.fb?r(e,a.fb,0,.01,i):n,t:a.t?r(e,a.t,0,0,i):n},this.s=mi.getTextSelectorProp(e,t.s,i),this.s.t=t.s.t}function ai(e,t,i,n,r,a){this.o=e,this.sw=t,this.sc=i,this.fc=n,this.m=r,this.p=a,this._mdf={o:!0,sw:!!t,sc:!!i,fc:!!n,m:!0,p:!0}}function si(e,t){this._frameId=o,this.pv=\"\",this.v=\"\",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,this.data=t,this.elem=e,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:\"\",fStyle:\"\",fWeight:\"\",fc:\"\",j:\"\",justifyOffset:\"\",l:[],lh:0,lineWidths:[],ls:\"\",of:\"\",s:\"\",sc:\"\",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}ni.prototype.searchProperties=function(){for(var e,t=this._textData.a.length,i=w.getProp,n=0;n<t;n+=1)e=this._textData.a[n],this._animatorsData[n]=new ri(this._elem,e,this);this._textData.p&&\"m\"in this._textData.p?(this._pathData={a:i(this._elem,this._textData.p.a,0,0,this),f:i(this._elem,this._textData.p.f,0,0,this),l:i(this._elem,this._textData.p.l,0,0,this),r:i(this._elem,this._textData.p.r,0,0,this),p:i(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=i(this._elem,this._textData.m.a,1,0,this)},ni.prototype.getMeasures=function(e,u){if(this.lettersChangedFlag=u,this._mdf||this._isFirstFrame||u||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var c,t,d,p,f,m,v,g,y,_,x,b,M,w,S=this._moreOptions.alignment.v,E=this._animatorsData,T=this._textData,i=this.mHelper,A=this._renderType,k=this.renderedLetters.length,n=e.l;if(this._hasMaskedPath){if(w=this._pathData.m,!this._pathData.n||this._pathData._mdf){for(var R,r=w.v,L={tLength:0,segments:[]},C=(r=this._pathData.r.v?r.reverse():r)._length-1,a=b=0;a<C;a+=1)R=it.buildBezierData(r.v[a],r.v[a+1],[r.o[a][0]-r.v[a][0],r.o[a][1]-r.v[a][1]],[r.i[a+1][0]-r.v[a+1][0],r.i[a+1][1]-r.v[a+1][1]]),L.tLength+=R.segmentLength,L.segments.push(R),b+=R.segmentLength;a=C,w.v.c&&(R=it.buildBezierData(r.v[a],r.v[0],[r.o[a][0]-r.v[a][0],r.o[a][1]-r.v[a][1]],[r.i[0][0]-r.v[0][0],r.i[0][1]-r.v[0][1]]),L.tLength+=R.segmentLength,L.segments.push(R),b+=R.segmentLength),this._pathData.pi=L}if(L=this._pathData.pi,t=this._pathData.f.v,m=1,f=!(p=v=0),_=L.segments,t<0&&w.v.c)for(L.tLength<Math.abs(t)&&(t=-Math.abs(t)%L.tLength),m=(y=_[v=_.length-1].points).length-1;t<0;)t+=y[m].partialLength,--m<0&&(m=(y=_[--v].points).length-1);g=(y=_[v].points)[m-1],x=(d=y[m]).partialLength}C=n.length;var s,P,o,D,I,F,N,O,U,B,l,z,H,G,V,W,j=c=0,X=1.2*e.finalSize*.714,q=!0,Y=E.length,J=-1,Z=t,K=v,Q=m,$=-1,ee=\"\",te=this.defaultPropsArray;if(2===e.j||1===e.j){var ie=0,ne=0,re=2===e.j?-.5:-1,ae=0,se=!0;for(a=0;a<C;a+=1)if(n[a].n){for(ie&&(ie+=ne);ae<a;)n[ae].animatorJustifyOffset=ie,ae+=1;se=!(ie=0)}else{for(h=0;h<Y;h+=1)(s=E[h].a).t.propType&&(se&&2===e.j&&(ne+=s.t.v*re),(o=E[h].s.getMult(n[a].anIndexes[h],T.a[h].s.totalChars)).length?ie+=s.t.v*o[0]*re:ie+=s.t.v*o*re);se=!1}for(ie&&(ie+=ne);ae<a;)n[ae].animatorJustifyOffset=ie,ae+=1}for(a=0;a<C;a+=1){if(i.reset(),N=1,n[a].n)c=0,j=j+e.yOffset+(q?1:0),t=Z,q=!1,this._hasMaskedPath&&(g=(y=_[v=K].points)[(m=Q)-1],x=(d=y[m]).partialLength,p=0),V=z=G=ee=\"\",te=this.defaultPropsArray;else{if(this._hasMaskedPath){if($!==n[a].line){switch(e.j){case 1:t+=b-e.lineWidths[n[a].line];break;case 2:t+=(b-e.lineWidths[n[a].line])/2}$=n[a].line}J!==n[a].ind&&(n[J]&&(t+=n[J].extra),t+=n[a].an/2,J=n[a].ind),t+=S[0]*n[a].an*.005;for(var oe=0,h=0;h<Y;h+=1)(s=E[h].a).p.propType&&((o=E[h].s.getMult(n[a].anIndexes[h],T.a[h].s.totalChars)).length?oe+=s.p.v[0]*o[0]:oe+=s.p.v[0]*o),s.a.propType&&((o=E[h].s.getMult(n[a].anIndexes[h],T.a[h].s.totalChars)).length?oe+=s.a.v[0]*o[0]:oe+=s.a.v[0]*o);for(f=!0,this._pathData.a.v&&(t=.5*n[0].an+(b-this._pathData.f.v-.5*n[0].an-.5*n[n.length-1].an)*J/(C-1),t+=this._pathData.f.v);f;)t+oe<=p+x||!y?(M=(t+oe-p)/d.partialLength,I=g.point[0]+(d.point[0]-g.point[0])*M,F=g.point[1]+(d.point[1]-g.point[1])*M,i.translate(-S[0]*n[a].an*.005,-S[1]*X*.01),f=!1):y&&(p+=d.partialLength,(m+=1)>=y.length&&(m=0,y=_[v+=1]?_[v].points:w.v.c?_[v=m=0].points:(p-=d.partialLength,null)),y&&(g=d,x=(d=y[m]).partialLength));D=n[a].an/2-n[a].add,i.translate(-D,0,0)}else D=n[a].an/2-n[a].add,i.translate(-D,0,0),i.translate(-S[0]*n[a].an*.005,-S[1]*X*.01,0);for(h=0;h<Y;h+=1)(s=E[h].a).t.propType&&(o=E[h].s.getMult(n[a].anIndexes[h],T.a[h].s.totalChars),0===c&&0===e.j||(this._hasMaskedPath?o.length?t+=s.t.v*o[0]:t+=s.t.v*o:o.length?c+=s.t.v*o[0]:c+=s.t.v*o));for(e.strokeWidthAnim&&(U=e.sw||0),e.strokeColorAnim&&(O=e.sc?[e.sc[0],e.sc[1],e.sc[2]]:[0,0,0]),e.fillColorAnim&&e.fc&&(B=[e.fc[0],e.fc[1],e.fc[2]]),h=0;h<Y;h+=1)(s=E[h].a).a.propType&&((o=E[h].s.getMult(n[a].anIndexes[h],T.a[h].s.totalChars)).length?i.translate(-s.a.v[0]*o[0],-s.a.v[1]*o[1],s.a.v[2]*o[2]):i.translate(-s.a.v[0]*o,-s.a.v[1]*o,s.a.v[2]*o));for(h=0;h<Y;h+=1)(s=E[h].a).s.propType&&((o=E[h].s.getMult(n[a].anIndexes[h],T.a[h].s.totalChars)).length?i.scale(1+(s.s.v[0]-1)*o[0],1+(s.s.v[1]-1)*o[1],1):i.scale(1+(s.s.v[0]-1)*o,1+(s.s.v[1]-1)*o,1));for(h=0;h<Y;h+=1){if(s=E[h].a,o=E[h].s.getMult(n[a].anIndexes[h],T.a[h].s.totalChars),s.sk.propType&&(o.length?i.skewFromAxis(-s.sk.v*o[0],s.sa.v*o[1]):i.skewFromAxis(-s.sk.v*o,s.sa.v*o)),s.r.propType&&(o.length?i.rotateZ(-s.r.v*o[2]):i.rotateZ(-s.r.v*o)),s.ry.propType&&(o.length?i.rotateY(s.ry.v*o[1]):i.rotateY(s.ry.v*o)),s.rx.propType&&(o.length?i.rotateX(s.rx.v*o[0]):i.rotateX(s.rx.v*o)),s.o.propType&&(o.length?N+=(s.o.v*o[0]-N)*o[0]:N+=(s.o.v*o-N)*o),e.strokeWidthAnim&&s.sw.propType&&(o.length?U+=s.sw.v*o[0]:U+=s.sw.v*o),e.strokeColorAnim&&s.sc.propType)for(l=0;l<3;l+=1)o.length?O[l]+=(s.sc.v[l]-O[l])*o[0]:O[l]+=(s.sc.v[l]-O[l])*o;if(e.fillColorAnim&&e.fc){if(s.fc.propType)for(l=0;l<3;l+=1)o.length?B[l]+=(s.fc.v[l]-B[l])*o[0]:B[l]+=(s.fc.v[l]-B[l])*o;s.fh.propType&&(B=o.length?ue(B,s.fh.v*o[0]):ue(B,s.fh.v*o)),s.fs.propType&&(B=o.length?le(B,s.fs.v*o[0]):le(B,s.fs.v*o)),s.fb.propType&&(B=o.length?he(B,s.fb.v*o[0]):he(B,s.fb.v*o))}}for(h=0;h<Y;h+=1)(s=E[h].a).p.propType&&(o=E[h].s.getMult(n[a].anIndexes[h],T.a[h].s.totalChars),this._hasMaskedPath?o.length?i.translate(0,s.p.v[1]*o[0],-s.p.v[2]*o[1]):i.translate(0,s.p.v[1]*o,-s.p.v[2]*o):o.length?i.translate(s.p.v[0]*o[0],s.p.v[1]*o[1],-s.p.v[2]*o[2]):i.translate(s.p.v[0]*o,s.p.v[1]*o,-s.p.v[2]*o));if(e.strokeWidthAnim&&(z=U<0?0:U),e.strokeColorAnim&&(H=\"rgb(\"+Math.round(255*O[0])+\",\"+Math.round(255*O[1])+\",\"+Math.round(255*O[2])+\")\"),e.fillColorAnim&&e.fc&&(G=\"rgb(\"+Math.round(255*B[0])+\",\"+Math.round(255*B[1])+\",\"+Math.round(255*B[2])+\")\"),this._hasMaskedPath)i.translate(0,-e.ls),i.translate(0,S[1]*X*.01+j,0),this._pathData.p.v&&(W=(d.point[1]-g.point[1])/(d.point[0]-g.point[0]),W=180*Math.atan(W)/Math.PI,d.point[0]<g.point[0]&&(W+=180),i.rotate(-W*Math.PI/180)),i.translate(I,F,0),t-=S[0]*n[a].an*.005,n[a+1]&&J!==n[a+1].ind&&(t=(t+=n[a].an/2)+.001*e.tr*e.finalSize);else{switch(i.translate(c,j,0),e.ps&&i.translate(e.ps[0],e.ps[1]+e.ascent,0),e.j){case 1:i.translate(n[a].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[n[a].line]),0,0);break;case 2:i.translate(n[a].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[n[a].line])/2,0,0)}i.translate(0,-e.ls),i.translate(D,0,0),i.translate(S[0]*n[a].an*.005,S[1]*X*.01,0),c+=n[a].l+.001*e.tr*e.finalSize}\"html\"===A?ee=i.toCSS():\"svg\"===A?ee=i.to2dCSS():te=[i.props[0],i.props[1],i.props[2],i.props[3],i.props[4],i.props[5],i.props[6],i.props[7],i.props[8],i.props[9],i.props[10],i.props[11],i.props[12],i.props[13],i.props[14],i.props[15]],V=N}this.lettersChangedFlag=k<=a?(P=new ai(V,z,H,G,ee,te),this.renderedLetters.push(P),k+=1,!0):(P=this.renderedLetters[a]).update(V,z,H,G,ee,te)||this.lettersChangedFlag}}},ni.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},ni.prototype.mHelper=new ie,ni.prototype.defaultPropsArray=[],m([q],ni),ai.prototype.update=function(e,t,i,n,r,a){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1;var s=this._mdf.p=!1;return this.o!==e&&(this.o=e,s=this._mdf.o=!0),this.sw!==t&&(this.sw=t,s=this._mdf.sw=!0),this.sc!==i&&(this.sc=i,s=this._mdf.sc=!0),this.fc!==n&&(this.fc=n,s=this._mdf.fc=!0),this.m!==r&&(this.m=r,s=this._mdf.m=!0),!a.length||this.p[0]===a[0]&&this.p[1]===a[1]&&this.p[4]===a[4]&&this.p[5]===a[5]&&this.p[12]===a[12]&&this.p[13]===a[13]||(this.p=a,s=this._mdf.p=!0),s},si.prototype.defaultBoxWidth=[0,0],si.prototype.copyData=function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},si.prototype.setCurrentData=function(e){e.__complete||this.completeTextData(e),this.currentData=e,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},si.prototype.searchProperty=function(){return this.searchKeyframes()},si.prototype.searchKeyframes=function(){return this.kf=1<this.data.d.k.length,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},si.prototype.addEffect=function(e){this.effectsSequence.push(e),this.elem.addDynamicProperty(this)},si.prototype.getValue=function(e){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||e){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var t=this.currentData,i=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData);else{this.lock=!0,this._mdf=!1;for(var n=this.effectsSequence.length,r=e||this.data.d.k[this.keysIndex].s,a=0;a<n;a+=1)r=i!==this.keysIndex?this.effectsSequence[a](r,r.t):this.effectsSequence[a](this.currentData,r.t);t!==r&&this.setCurrentData(r),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},si.prototype.getKeyframeValue=function(){for(var e=this.data.d.k,t=this.elem.comp.renderedFrame,i=0,n=e.length;i<=n-1&&!(i===n-1||e[i+1].t>t);)i+=1;return this.keysIndex!==i&&(this.keysIndex=i),this.data.d.k[this.keysIndex].s},si.prototype.buildFinalText=function(e){for(var t,i,n=[],r=0,a=e.length,s=!1;r<a;)t=e.charCodeAt(r),_t.isCombinedCharacter(t)?n[n.length-1]+=e.charAt(r):55296<=t&&t<=56319?56320<=(i=e.charCodeAt(r+1))&&i<=57343?(s||_t.isModifier(t,i)?(n[n.length-1]+=e.substr(r,2),s=!1):n.push(e.substr(r,2)),r+=1):n.push(e.charAt(r)):56319<t?(i=e.charCodeAt(r+1),_t.isZeroWidthJoiner(t,i)?(s=!0,n[n.length-1]+=e.substr(r,2),r+=1):n.push(e.charAt(r))):_t.isZeroWidthJoiner(t)?(n[n.length-1]+=e.charAt(r),s=!0):n.push(e.charAt(r)),r+=1;return n},si.prototype.completeTextData=function(e){e.__complete=!0;var u,t,c,d=this.elem.globalData.fontManager,p=this.data,i=[],f=0,m=p.m.g,n=0,r=0,v=0,g=[],a=0,y=0,_=d.getFontByName(e.f),s=0,x=ct(_);e.fWeight=x.weight,e.fStyle=x.style,e.finalSize=e.s,e.finalText=this.buildFinalText(e.t),o=e.finalText.length,e.finalLineHeight=e.lh;var b,M=e.tr/1e3*e.finalSize;if(e.sz)for(var w,S,E=!0,T=e.sz[0],A=e.sz[1];E;){for(var a=w=0,o=(S=this.buildFinalText(e.t)).length,M=e.tr/1e3*e.finalSize,k=-1,l=0;l<o;l+=1)b=S[l].charCodeAt(0),u=!1,\" \"===S[l]?k=l:13!==b&&3!==b||(u=!(a=0),w+=e.finalLineHeight||1.2*e.finalSize),T<a+(s=d.chars?(c=d.getCharData(S[l],_.fStyle,_.fFamily),u?0:c.w*e.finalSize/100):d.measureText(S[l],e.f,e.finalSize))&&\" \"!==S[l]?(-1===k?o+=1:l=k,w+=e.finalLineHeight||1.2*e.finalSize,S.splice(l,k===l?1:0,\"\\r\"),k=-1,a=0):a=a+s+M;w+=_.ascent*e.finalSize/100,this.canResize&&e.finalSize>this.minimumFontSize&&A<w?(--e.finalSize,e.finalLineHeight=e.finalSize*e.lh/e.s):(e.finalText=S,o=e.finalText.length,E=!1)}a=-M;var R,L=s=0;for(l=0;l<o;l+=1)if(u=!1,13===(b=(R=e.finalText[l]).charCodeAt(0))||3===b?(L=0,g.push(a),y=y<a?a:y,a=-2*M,u=!(t=\"\"),v+=1):t=R,s=d.chars?(c=d.getCharData(R,_.fStyle,d.getFontByName(e.f).fFamily),u?0:c.w*e.finalSize/100):d.measureText(t,e.f,e.finalSize),\" \"===R?L+=s+M:(a+=s+M+L,L=0),i.push({l:s,an:s,add:n,n:u,anIndexes:[],val:t,line:v,animatorJustifyOffset:0}),2==m){if(n+=s,\"\"===t||\" \"===t||l===o-1){for(\"\"!==t&&\" \"!==t||(n-=s);r<=l;)i[r].an=n,i[r].ind=f,i[r].extra=s,r+=1;f+=1,n=0}}else if(3==m){if(n+=s,\"\"===t||l===o-1){for(\"\"===t&&(n-=s);r<=l;)i[r].an=n,i[r].ind=f,i[r].extra=s,r+=1;n=0,f+=1}}else i[f].ind=f,i[f].extra=0,f+=1;if(e.l=i,y=y<a?a:y,g.push(a),e.sz)e.boxWidth=e.sz[0],e.justifyOffset=0;else switch(e.boxWidth=y,e.j){case 1:e.justifyOffset=-e.boxWidth;break;case 2:e.justifyOffset=-e.boxWidth/2;break;default:e.justifyOffset=0}e.lineWidths=g;for(var C,h,P,D,I=p.a,F=I.length,N=[],O=0;O<F;O+=1){for((C=I[O]).a.sc&&(e.strokeColorAnim=!0),C.a.sw&&(e.strokeWidthAnim=!0),(C.a.fc||C.a.fh||C.a.fs||C.a.fb)&&(e.fillColorAnim=!0),P=C.s.b,l=D=0;l<o;l+=1)(h=i[l]).anIndexes[O]=D,(1==P&&\"\"!==h.val||2==P&&\"\"!==h.val&&\" \"!==h.val||3==P&&(h.n||\" \"==h.val||l==o-1)||4==P&&(h.n||l==o-1))&&(1===C.s.rn&&N.push(D),D+=1);p.a[O].s.totalChars=D;var U,B=-1;if(1===C.s.rn)for(l=0;l<o;l+=1)B!=(h=i[l]).anIndexes[O]&&(B=h.anIndexes[O],U=N.splice(Math.floor(Math.random()*N.length),1)[0]),h.anIndexes[O]=U}e.yOffset=e.finalLineHeight||1.2*e.finalSize,e.ls=e.ls||0,e.ascent=_.ascent*e.finalSize/100},si.prototype.updateDocumentData=function(e,t){t=void 0===t?this.keysIndex:t;var i=this.copyData({},this.data.d.k[t].s),i=this.copyData(i,e);this.data.d.k[t].s=i,this.recalculate(t),this.elem.addDynamicProperty(this)},si.prototype.recalculate=function(e){e=this.data.d.k[e].s;e.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(e)},si.prototype.canResizeFont=function(e){this.canResize=e,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},si.prototype.setMinimumFontSize=function(e){this.minimumFontSize=Math.floor(e)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};function oi(e,t,i){var n=0,r=e,a=b(r);return{newElement:function(){return n?a[--n]:t()},release:function(e){n===r&&(a=vi(a),r*=2),i&&i(e),a[n]=e,n+=1}}}di=Math.max,pi=Math.min,fi=Math.floor,wi.prototype={getMult:function(e){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var t,i,n=0,r=0,a=1,s=1,n=(0<this.ne.v?n=this.ne.v/100:r=-this.ne.v/100,0<this.xe.v?a=1-this.xe.v/100:s=1+this.xe.v/100,Be.getBezierEasing(n,r,a,s).get),r=0,a=this.finalS,s=this.finalE,o=this.data.sh;return r=2===o?n(r=s===a?s<=e?1:0:di(0,pi(.5/(s-a)+(e-a)/(s-a),1))):3===o?n(r=s===a?s<=e?0:1:1-di(0,pi(.5/(s-a)+(e-a)/(s-a),1))):4===o?(s===a?r=0:(r=di(0,pi(.5/(s-a)+(e-a)/(s-a),1)))<.5?r*=2:r=1-2*(r-.5),n(r)):5===o?n(r=s===a?0:(t=-(i=s-a)/2+(e=pi(di(0,e+.5-a),s-a)),i=i/2,Math.sqrt(1-t*t/(i*i)))):6===o?n(r=s===a?0:(e=pi(di(0,e+.5-a),s-a),(1+Math.cos(Math.PI+2*Math.PI*e/(s-a)))/2)):n(r=e>=fi(a)?di(0,pi(e-a<0?pi(s,1)-(a-e):s-e,1)):r),100!==this.sm.v&&(r<(i=.5-.5*(t=0===(t=.01*this.sm.v)?1e-8:t))?r=0:1<(r=(r-i)/t)&&(r=1)),r*this.a.v},getValue:function(e){this.iterateDynamicProperties(),this._mdf=e||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,e&&2===this.data.r&&(this.e.v=this._currentTextLength);var e=2===this.data.r?1:100/this.data.totalChars,t=this.o.v/e,i=this.s.v/e+t,e=this.e.v/e+t;e<i&&(t=i,i=e,e=t),this.finalS=i,this.finalE=e}},m([q],wi);var li,hi,ui,ci,di,pi,fi,mi={getTextSelectorProp:function(e,t,i){return new wi(e,t)}},vi=function(e){return e.concat(b(e.length))},gi=oi(8,function(){return j(\"float32\",2)}),yi=((li=oi(4,function(){return new It},function(e){for(var t=e._length,i=0;i<t;i+=1)gi.release(e.v[i]),gi.release(e.i[i]),gi.release(e.o[i]),e.v[i]=null,e.i[i]=null,e.o[i]=null;e._length=0,e.c=!1})).clone=function(e){var t,i=li.newElement(),n=void 0===e._length?e.v.length:e._length;for(i.setLength(n),i.c=e.c,t=0;t<n;t+=1)i.setTripleAt(e.v[t][0],e.v[t][1],e.o[t][0],e.o[t][1],e.i[t][0],e.i[t][1],t);return i},li),_i=(e={newShapeCollection:function(){return hi?ci[--hi]:new Vt},release:function(e){for(var t=e._length,i=0;i<t;i+=1)yi.release(e.shapes[i]);e._length=0,hi===ui&&(ci=vi(ci),ui*=2),ci[hi]=e,hi+=1}},hi=0,ci=b(ui=4),e),xi=oi(8,function(){return{lengths:[],totalLength:0}},function(e){for(var t=e.lengths.length,i=0;i<t;i+=1)bi.release(e.lengths[i]);e.lengths.length=0}),bi=oi(8,function(){return{addedLength:0,percents:j(\"float32\",E),lengths:j(\"float32\",E)}}),Mi=function(e){for(var t=[],i=0;i<e.length;i+=1){var n=e[i],n={time:n.tm,duration:n.dr};try{n.payload=JSON.parse(e[i].cm)}catch(t){try{n.payload=function(e){for(var t,i=e.split(\"\\r\\n\"),n={},r=0,a=0;a<i.length;a+=1)2===(t=i[a].split(\":\")).length&&(n[t[0]]=t[1].trim(),r+=1);if(0===r)throw new Error;return n}(e[i].cm)}catch(t){n.payload={name:e[i]}}}t.push(n)}return t};function wi(e,t){this._currentTextLength=-1,this.k=!1,this.data=t,this.elem=e,this.comp=e.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(e),this.s=w.getProp(e,t.s||{k:0},0,0,this),this.e=\"e\"in t?w.getProp(e,t.e,0,0,this):{v:100},this.o=w.getProp(e,t.o||{k:0},0,0,this),this.xe=w.getProp(e,t.xe||{k:0},0,0,this),this.ne=w.getProp(e,t.ne||{k:0},0,0,this),this.sm=w.getProp(e,t.sm||{k:100},0,0,this),this.a=w.getProp(e,t.a,0,.01,this),this.dynamicProperties.length||this.getValue()}function Si(){}function Ei(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.svgElement=M(\"svg\");var e=\"\",i=(t&&t.title&&(i=M(\"title\"),n=F(),i.setAttribute(\"id\",n),i.textContent=t.title,this.svgElement.appendChild(i),e+=n),t&&t.description&&(i=M(\"desc\"),n=F(),i.setAttribute(\"id\",n),i.textContent=t.description,this.svgElement.appendChild(i),e+=\" \"+n),e&&this.svgElement.setAttribute(\"aria-labelledby\",e),M(\"defs\")),n=(this.svgElement.appendChild(i),M(\"g\"));this.svgElement.appendChild(n),this.layerElement=n,this.renderConfig={preserveAspectRatio:t&&t.preserveAspectRatio||\"xMidYMid meet\",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||\"xMidYMid slice\",contentVisibility:t&&t.contentVisibility||\"visible\",progressiveLoad:t&&t.progressiveLoad||!1,hideOnTransparent:!(t&&!1===t.hideOnTransparent),viewBoxOnly:t&&t.viewBoxOnly||!1,viewBoxSize:t&&t.viewBoxSize||!1,className:t&&t.className||\"\",id:t&&t.id||\"\",focusable:t&&t.focusable,filterSize:{width:t&&t.filterSize&&t.filterSize.width||\"100%\",height:t&&t.filterSize&&t.filterSize.height||\"100%\",x:t&&t.filterSize&&t.filterSize.x||\"0%\",y:t&&t.filterSize&&t.filterSize.y||\"0%\"}},this.globalData={_mdf:!1,frameNum:-1,defs:i,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType=\"svg\"}function Ti(u,c,d){this.data=u,this.element=c,this.globalData=d,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var e,t=this.globalData.defs,i=this.masksProperties?this.masksProperties.length:0;this.viewData=b(i),this.solidPath=\"\";for(var n,r,p,f,a=this.masksProperties,s=0,o=[],m=F(),v=\"clipPath\",g=\"clip-path\",l=0;l<i;l+=1)if((\"a\"!==a[l].mode&&\"n\"!==a[l].mode||a[l].inv||100!==a[l].o.k||a[l].o.x)&&(g=v=\"mask\"),\"s\"!==a[l].mode&&\"i\"!==a[l].mode||0!==s?n=null:((n=M(\"rect\")).setAttribute(\"fill\",\"#ffffff\"),n.setAttribute(\"width\",this.element.comp.data.w||0),n.setAttribute(\"height\",this.element.comp.data.h||0),o.push(n)),e=M(\"path\"),\"n\"===a[l].mode)this.viewData[l]={op:w.getProp(this.element,a[l].o,0,.01,this.element),prop:Nt.getShapeProp(this.element,a[l],3),elem:e,lastPath:\"\"},t.appendChild(e);else{if(s+=1,e.setAttribute(\"fill\",\"s\"===a[l].mode?\"#000000\":\"#ffffff\"),e.setAttribute(\"clip-rule\",\"nonzero\"),0!==a[l].x.k?(g=v=\"mask\",p=w.getProp(this.element,a[l].x,0,null,this.element),f=F(),(h=M(\"filter\")).setAttribute(\"id\",f),(r=M(\"feMorphology\")).setAttribute(\"operator\",\"erode\"),r.setAttribute(\"in\",\"SourceGraphic\"),r.setAttribute(\"radius\",\"0\"),h.appendChild(r),t.appendChild(h),e.setAttribute(\"stroke\",\"s\"===a[l].mode?\"#000000\":\"#ffffff\")):p=r=null,this.storedData[l]={elem:e,x:p,expan:r,lastPath:\"\",lastOperator:\"\",filterId:f,lastRadius:0},\"i\"===a[l].mode){for(var y=o.length,_=M(\"g\"),x=0;x<y;x+=1)_.appendChild(o[x]);var h=M(\"mask\");h.setAttribute(\"mask-type\",\"alpha\"),h.setAttribute(\"id\",m+\"_\"+s),h.appendChild(e),t.appendChild(h),_.setAttribute(\"mask\",\"url(\"+S+\"#\"+m+\"_\"+s+\")\"),o.length=0,o.push(_)}else o.push(e);a[l].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[l]={elem:e,lastPath:\"\",op:w.getProp(this.element,a[l].o,0,.01,this.element),prop:Nt.getShapeProp(this.element,a[l],3),invRect:n},this.viewData[l].prop.k||this.drawPath(a[l],this.viewData[l].prop.v,this.viewData[l])}for(this.maskElement=M(v),i=o.length,l=0;l<i;l+=1)this.maskElement.appendChild(o[l]);0<s&&(this.maskElement.setAttribute(\"id\",m),this.element.maskedElement.setAttribute(g,\"url(\"+S+\"#\"+m+\")\"),t.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}function Ai(){}function ki(){}function Ri(){}function Li(){}function Ci(){}function Pi(e,t){this.elem=e,this.pos=t}function Di(e,t){this.data=e,this.type=e.ty,this.d=\"\",this.lvl=t,this._mdf=!1,this.closed=!0===e.hd,this.pElem=M(\"path\"),this.msElem=null}function Ii(e,t,i){this.caches=[],this.styles=[],this.transformers=e,this.lStr=\"\",this.sh=i,this.lvl=t,this._isAnimated=!!i.k;for(var n=0,r=e.length;n<r;){if(e[n].mProps.dynamicProperties.length){this._isAnimated=!0;break}n+=1}}function Fi(e,t,i){this.transform={mProps:e,op:t,container:i},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}function Ni(e,t,i){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=w.getProp(e,t.o,0,.01,this),this.w=w.getProp(e,t.w,0,null,this),this.d=new Wt(e,t.d||{},\"svg\",this),this.c=w.getProp(e,t.c,1,255,this),this.style=i,this._isAnimated=!!this._isAnimated}function Oi(e,t,i){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=w.getProp(e,t.o,0,.01,this),this.c=w.getProp(e,t.c,1,255,this),this.style=i}function Ui(e,t,i){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.initGradientData(e,t,i)}function Bi(e,t,i){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.w=w.getProp(e,t.w,0,null,this),this.d=new Wt(e,t.d||{},\"svg\",this),this.initGradientData(e,t,i),this._isAnimated=!!this._isAnimated}function zi(){this.it=[],this.prevViewData=[],this.gr=M(\"g\")}function Hi(){}Si.prototype.checkLayers=function(e){var t,i,n=this.layers.length;for(this.completeLayers=!0,t=n-1;0<=t;--t)this.elements[t]||(i=this.layers[t]).ip-i.st<=e-this.layers[t].st&&i.op-i.st>e-this.layers[t].st&&this.buildItem(t),this.completeLayers=!!this.elements[t]&&this.completeLayers;this.checkPendingElements()},Si.prototype.createItem=function(e){switch(e.ty){case 2:return this.createImage(e);case 0:return this.createComp(e);case 1:return this.createSolid(e);case 3:return this.createNull(e);case 4:return this.createShape(e);case 5:return this.createText(e);case 6:return this.createAudio(e);case 13:return this.createCamera(e);case 15:return this.createFootage(e);default:return this.createNull(e)}},Si.prototype.createCamera=function(){throw new Error(\"You're using a 3d camera. Try the html renderer.\")},Si.prototype.createAudio=function(e){return new sn(e,this.globalData,this)},Si.prototype.createFootage=function(e){return new FootageElement(e,this.globalData,this)},Si.prototype.buildAllItems=function(){for(var e=this.layers.length,t=0;t<e;t+=1)this.buildItem(t);this.checkPendingElements()},Si.prototype.includeLayers=function(e){this.completeLayers=!1;for(var t,i=e.length,n=this.layers.length,r=0;r<i;r+=1)for(t=0;t<n;){if(this.layers[t].id===e[r].id){this.layers[t]=e[r];break}t+=1}},Si.prototype.setProjectInterface=function(e){this.globalData.projectInterface=e},Si.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},Si.prototype.buildElementParenting=function(e,t,i){for(var n=this.elements,r=this.layers,a=0,s=r.length;a<s;)r[a].ind==t&&(n[a]&&!0!==n[a]?(i.push(n[a]),n[a].setAsParent(),void 0!==r[a].parent?this.buildElementParenting(e,r[a].parent,i):e.setHierarchy(i)):(this.buildItem(a),this.addPendingElement(e))),a+=1},Si.prototype.addPendingElement=function(e){this.pendingElements.push(e)},Si.prototype.searchExtraCompositions=function(e){for(var t,i=e.length,n=0;n<i;n+=1)e[n].xt&&((t=this.createComp(e[n])).initExpressions(),this.globalData.projectInterface.registerComposition(t))},Si.prototype.setupGlobalData=function(e,t){this.globalData.fontManager=new _t,this.globalData.fontManager.addChars(e.chars),this.globalData.fontManager.addFonts(e.fonts,t),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=e.fr,this.globalData.nm=e.nm,this.globalData.compSize={w:e.w,h:e.h}},m([Si],Ei),Ei.prototype.createNull=function(e){return new Qi(e,this.globalData,this)},Ei.prototype.createShape=function(e){return new hn(e,this.globalData,this)},Ei.prototype.createText=function(e){return new ln(e,this.globalData,this)},Ei.prototype.createImage=function(e){return new rn(e,this.globalData,this)},Ei.prototype.createComp=function(e){return new on(e,this.globalData,this)},Ei.prototype.createSolid=function(e){return new an(e,this.globalData,this)},Ei.prototype.configAnimation=function(e){this.svgElement.setAttribute(\"xmlns\",\"http://www.w3.org/2000/svg\"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute(\"viewBox\",this.renderConfig.viewBoxSize):this.svgElement.setAttribute(\"viewBox\",\"0 0 \"+e.w+\" \"+e.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute(\"width\",e.w),this.svgElement.setAttribute(\"height\",e.h),this.svgElement.style.width=\"100%\",this.svgElement.style.height=\"100%\",this.svgElement.style.transform=\"translate3d(0,0,0)\",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.className&&this.svgElement.setAttribute(\"class\",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute(\"id\",this.renderConfig.id),void 0!==this.renderConfig.focusable&&this.svgElement.setAttribute(\"focusable\",this.renderConfig.focusable),this.svgElement.setAttribute(\"preserveAspectRatio\",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var t=this.globalData.defs,i=(this.setupGlobalData(e,t),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=e,M(\"clipPath\")),n=M(\"rect\"),r=(n.setAttribute(\"width\",e.w),n.setAttribute(\"height\",e.h),n.setAttribute(\"x\",0),n.setAttribute(\"y\",0),F());i.setAttribute(\"id\",r),i.appendChild(n),this.layerElement.setAttribute(\"clip-path\",\"url(\"+S+\"#\"+r+\")\"),t.appendChild(i),this.layers=e.layers,this.elements=b(e.layers.length)},Ei.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=\"\"),this.layerElement=null,this.globalData.defs=null;for(var e=this.layers?this.layers.length:0,t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},Ei.prototype.updateContainerSize=function(){},Ei.prototype.buildItem=function(e){var t,i=this.elements;i[e]||99===this.layers[e].ty||(i[e]=!0,t=this.createItem(this.layers[e]),i[e]=t,s&&(0===this.layers[e].ty&&this.globalData.projectInterface.registerComposition(t),t.initExpressions()),this.appendElementInPos(t,e),this.layers[e].tt&&(this.elements[e-1]&&!0!==this.elements[e-1]?t.setMatte(i[e-1].layerId):(this.buildItem(e-1),this.addPendingElement(t))))},Ei.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var e=this.pendingElements.pop();if(e.checkParenting(),e.data.tt)for(var t=0,i=this.elements.length;t<i;){if(this.elements[t]===e){e.setMatte(this.elements[t-1].layerId);break}t+=1}}},Ei.prototype.renderFrame=function(e){if(this.renderedFrame!==e&&!this.destroyed){null===e?e=this.renderedFrame:this.renderedFrame=e,this.globalData.frameNum=e,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=e,this.globalData._mdf=!1;var t,i=this.layers.length;for(this.completeLayers||this.checkLayers(e),t=i-1;0<=t;--t)(this.completeLayers||this.elements[t])&&this.elements[t].prepareFrame(e-this.layers[t].st);if(this.globalData._mdf)for(t=0;t<i;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()}},Ei.prototype.appendElementInPos=function(e,t){e=e.getBaseElement();if(e){for(var i,n=0;n<t;)this.elements[n]&&!0!==this.elements[n]&&this.elements[n].getBaseElement()&&(i=this.elements[n].getBaseElement()),n+=1;i?this.layerElement.insertBefore(e,i):this.layerElement.appendChild(e)}},Ei.prototype.hide=function(){this.layerElement.style.display=\"none\"},Ei.prototype.show=function(){this.layerElement.style.display=\"block\"},Ti.prototype.getMaskProperty=function(e){return this.viewData[e].prop},Ti.prototype.renderFrame=function(e){for(var t,i=this.element.finalTransform.mat,n=this.masksProperties.length,r=0;r<n;r+=1)(this.viewData[r].prop._mdf||e)&&this.drawPath(this.masksProperties[r],this.viewData[r].prop.v,this.viewData[r]),(this.viewData[r].op._mdf||e)&&this.viewData[r].elem.setAttribute(\"fill-opacity\",this.viewData[r].op.v),\"n\"!==this.masksProperties[r].mode&&(this.viewData[r].invRect&&(this.element.finalTransform.mProp._mdf||e)&&this.viewData[r].invRect.setAttribute(\"transform\",i.getInverseMatrix().to2dCSS()),this.storedData[r].x&&(this.storedData[r].x._mdf||e))&&(t=this.storedData[r].expan,this.storedData[r].x.v<0?(\"erode\"!==this.storedData[r].lastOperator&&(this.storedData[r].lastOperator=\"erode\",this.storedData[r].elem.setAttribute(\"filter\",\"url(\"+S+\"#\"+this.storedData[r].filterId+\")\")),t.setAttribute(\"radius\",-this.storedData[r].x.v)):(\"dilate\"!==this.storedData[r].lastOperator&&(this.storedData[r].lastOperator=\"dilate\",this.storedData[r].elem.setAttribute(\"filter\",null)),this.storedData[r].elem.setAttribute(\"stroke-width\",2*this.storedData[r].x.v)))},Ti.prototype.getMaskelement=function(){return this.maskElement},Ti.prototype.createLayerSolidPath=function(){var e=\"M0,0 \";return(e+=\" h\"+this.globalData.compSize.w)+(\" v\"+this.globalData.compSize.h)+(\" h-\"+this.globalData.compSize.w)+\" v-\"+this.globalData.compSize.h+\" \"},Ti.prototype.drawPath=function(e,t,i){for(var n,r=\" M\"+t.v[0][0]+\",\"+t.v[0][1],a=t._length,s=1;s<a;s+=1)r+=\" C\"+t.o[s-1][0]+\",\"+t.o[s-1][1]+\" \"+t.i[s][0]+\",\"+t.i[s][1]+\" \"+t.v[s][0]+\",\"+t.v[s][1];t.c&&1<a&&(r+=\" C\"+t.o[s-1][0]+\",\"+t.o[s-1][1]+\" \"+t.i[0][0]+\",\"+t.i[0][1]+\" \"+t.v[0][0]+\",\"+t.v[0][1]),i.lastPath!==r&&(n=\"\",i.elem&&(t.c&&(n=e.inv?this.solidPath+r:r),i.elem.setAttribute(\"d\",n)),i.lastPath=r)},Ti.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null},Ai.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(e){this.hierarchy=e},setAsParent:function(){this._isParent=!0},checkParenting:function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent,[])}},ki.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(e,t){for(var i=this.dynamicProperties.length,n=0;n<i;n+=1)(t||this._isParent&&\"transform\"===this.dynamicProperties[n].propType)&&(this.dynamicProperties[n].getValue(),this.dynamicProperties[n]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(e){-1===this.dynamicProperties.indexOf(e)&&this.dynamicProperties.push(e)}},Ri.prototype={initTransform:function(){this.finalTransform={mProp:this.data.ks?xt.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_opMdf:!1,mat:new ie},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var e,t=this.finalTransform.mat,i=0,n=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;i<n;){if(this.hierarchy[i].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}i+=1}if(this.finalTransform._matMdf)for(e=this.finalTransform.mProp.v.props,t.cloneFromProps(e),i=0;i<n;i+=1)e=this.hierarchy[i].finalTransform.mProp.v.props,t.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}},globalToLocal:function(e){var t=[];t.push(this.finalTransform);for(var i=!0,n=this.comp;i;)n.finalTransform?(n.data.hasMask&&t.splice(0,0,n.finalTransform),n=n.comp):i=!1;for(var r,a=t.length,s=0;s<a;s+=1)r=t[s].mat.applyToPointArray(0,0,0),e=[e[0]-r[0],e[1]-r[1],0];return e},mHelper:new ie},Li.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(e){-1===this.renderableComponents.indexOf(e)&&this.renderableComponents.push(e)},removeRenderableComponent:function(e){-1!==this.renderableComponents.indexOf(e)&&this.renderableComponents.splice(this.renderableComponents.indexOf(e),1)},prepareRenderableFrame:function(e){this.checkLayerLimits(e)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(e){this.data.ip-this.data.st<=e&&this.data.op-this.data.st>e?!0!==this.isInRange&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):!1!==this.isInRange&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){for(var e=this.renderableComponents.length,t=0;t<e;t+=1)this.renderableComponents[t].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}},m([Li,(Hi.prototype={initElement:function(e,t,i){this.initFrame(),this.initBaseData(e,t,i),this.initTransform(e,t,i),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display=\"none\",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display=\"block\"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}},Hi)],Ci),Di.prototype.reset=function(){this.d=\"\",this._mdf=!1},Ii.prototype.setAsAnimated=function(){this._isAnimated=!0},m([q],Ni),m([q],Oi),Ui.prototype.initGradientData=function(e,t,i){this.o=w.getProp(e,t.o,0,.01,this),this.s=w.getProp(e,t.s,1,null,this),this.e=w.getProp(e,t.e,1,null,this),this.h=w.getProp(e,t.h||{k:0},0,.01,this),this.a=w.getProp(e,t.a||{k:0},0,W,this),this.g=new jt(e,t.g,this),this.style=i,this.stops=[],this.setGradientData(i.pElem,t),this.setGradientOpacity(t,i),this._isAnimated=!!this._isAnimated},Ui.prototype.setGradientData=function(e,t){var i=F(),n=M(1===t.t?\"linearGradient\":\"radialGradient\");n.setAttribute(\"id\",i),n.setAttribute(\"spreadMethod\",\"pad\"),n.setAttribute(\"gradientUnits\",\"userSpaceOnUse\");for(var r,a=[],s=4*t.g.p,o=0;o<s;o+=4)r=M(\"stop\"),n.appendChild(r),a.push(r);e.setAttribute(\"gf\"===t.ty?\"fill\":\"stroke\",\"url(\"+S+\"#\"+i+\")\"),this.gf=n,this.cst=a},Ui.prototype.setGradientOpacity=function(e,u){if(this.g._hasOpacity&&!this.g._collapsable){for(var t,i,n=M(\"mask\"),r=M(\"path\"),a=(n.appendChild(r),F()),s=F(),o=(n.setAttribute(\"id\",s),M(1===e.t?\"linearGradient\":\"radialGradient\")),l=(o.setAttribute(\"id\",a),o.setAttribute(\"spreadMethod\",\"pad\"),o.setAttribute(\"gradientUnits\",\"userSpaceOnUse\"),i=(e.g.k.k[0].s||e.g.k.k).length,this.stops),h=4*e.g.p;h<i;h+=2)(t=M(\"stop\")).setAttribute(\"stop-color\",\"rgb(255,255,255)\"),o.appendChild(t),l.push(t);r.setAttribute(\"gf\"===e.ty?\"fill\":\"stroke\",\"url(\"+S+\"#\"+a+\")\"),\"gs\"===e.ty&&(r.setAttribute(\"stroke-linecap\",ee[e.lc||2]),r.setAttribute(\"stroke-linejoin\",te[e.lj||2]),1===e.lj&&r.setAttribute(\"stroke-miterlimit\",e.ml)),this.of=o,this.ms=n,this.ost=l,this.maskId=s,u.msElem=r}},m([q],Ui),m([Ui,q],Bi);Gi=new ie,Vi=new ie;var Gi,Vi,Wi={createRenderFunction:function(e){switch(e.ty){case\"fl\":return qi;case\"gf\":return Ji;case\"gs\":return Yi;case\"st\":return Zi;case\"sh\":case\"el\":case\"rc\":case\"sr\":return Xi;case\"tr\":return ji;default:return null}}};function ji(e,t,i){(i||t.transform.op._mdf)&&t.transform.container.setAttribute(\"opacity\",t.transform.op.v),(i||t.transform.mProps._mdf)&&t.transform.container.setAttribute(\"transform\",t.transform.mProps.v.to2dCSS())}function Xi(u,e,c){for(var t,d,i,n,r,p,a,s,o,l,f=e.styles.length,m=e.lvl,h=0;h<f;h+=1){if(n=e.sh._mdf||c,e.styles[h].lvl<m){for(a=Vi.reset(),o=m-e.styles[h].lvl,l=e.transformers.length-1;!n&&0<o;)n=e.transformers[l].mProps._mdf||n,--o,--l;if(n)for(o=m-e.styles[h].lvl,l=e.transformers.length-1;0<o;)s=e.transformers[l].mProps.v.props,a.transform(s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8],s[9],s[10],s[11],s[12],s[13],s[14],s[15]),--o,--l}else a=Gi;if(d=(p=e.sh.paths)._length,n){for(i=\"\",t=0;t<d;t+=1)(r=p.shapes[t])&&r._length&&(i+=Xt(r,r._length,r.c,a));e.caches[h]=i}else i=e.caches[h];e.styles[h].d+=!0===u.hd?\"\":i,e.styles[h]._mdf=n||e.styles[h]._mdf}}function qi(e,t,i){var n=t.style;(t.c._mdf||i)&&n.pElem.setAttribute(\"fill\",\"rgb(\"+d(t.c.v[0])+\",\"+d(t.c.v[1])+\",\"+d(t.c.v[2])+\")\"),(t.o._mdf||i)&&n.pElem.setAttribute(\"fill-opacity\",t.o.v)}function Yi(e,t,i){Ji(e,t,i),Zi(0,t,i)}function Ji(e,t,i){var u,n,r,a,s=t.gf,c=t.g._hasOpacity,o=t.s.v,l=t.e.v;if((t.o._mdf||i)&&(r=\"gf\"===e.ty?\"fill-opacity\":\"stroke-opacity\",t.style.pElem.setAttribute(r,t.o.v)),(t.s._mdf||i)&&(a=\"x1\"==(r=1===e.t?\"x1\":\"cx\")?\"y1\":\"cy\",s.setAttribute(r,o[0]),s.setAttribute(a,o[1]),c&&!t.g._collapsable&&(t.of.setAttribute(r,o[0]),t.of.setAttribute(a,o[1]))),t.g._cmdf||i)for(var d=t.cst,p=t.g.c,f=d.length,h=0;h<f;h+=1)(u=d[h]).setAttribute(\"offset\",p[4*h]+\"%\"),u.setAttribute(\"stop-color\",\"rgb(\"+p[4*h+1]+\",\"+p[4*h+2]+\",\"+p[4*h+3]+\")\");if(c&&(t.g._omdf||i)){var m=t.g.o;for(f=(d=t.g._collapsable?t.cst:t.ost).length,h=0;h<f;h+=1)u=d[h],t.g._collapsable||u.setAttribute(\"offset\",m[2*h]+\"%\"),u.setAttribute(\"stop-opacity\",m[2*h+1])}1===e.t?(t.e._mdf||i)&&(s.setAttribute(\"x2\",l[0]),s.setAttribute(\"y2\",l[1]),c&&!t.g._collapsable&&(t.of.setAttribute(\"x2\",l[0]),t.of.setAttribute(\"y2\",l[1]))):((t.s._mdf||t.e._mdf||i)&&(n=Math.sqrt(Math.pow(o[0]-l[0],2)+Math.pow(o[1]-l[1],2)),s.setAttribute(\"r\",n),c&&!t.g._collapsable&&t.of.setAttribute(\"r\",n)),(t.e._mdf||t.h._mdf||t.a._mdf||i)&&(n=n||Math.sqrt(Math.pow(o[0]-l[0],2)+Math.pow(o[1]-l[1],2)),r=Math.atan2(l[1]-o[1],l[0]-o[0]),1<=(a=t.h.v)?a=.99:a<=-1&&(a=-.99),e=n*a,i=Math.cos(r+t.a.v)*e+o[0],l=Math.sin(r+t.a.v)*e+o[1],s.setAttribute(\"fx\",i),s.setAttribute(\"fy\",l),c&&!t.g._collapsable&&(t.of.setAttribute(\"fx\",i),t.of.setAttribute(\"fy\",l))))}function Zi(e,t,i){var n=t.style,r=t.d;r&&(r._mdf||i)&&r.dashStr&&(n.pElem.setAttribute(\"stroke-dasharray\",r.dashStr),n.pElem.setAttribute(\"stroke-dashoffset\",r.dashoffset[0])),t.c&&(t.c._mdf||i)&&n.pElem.setAttribute(\"stroke\",\"rgb(\"+d(t.c.v[0])+\",\"+d(t.c.v[1])+\",\"+d(t.c.v[2])+\")\"),(t.o._mdf||i)&&n.pElem.setAttribute(\"stroke-opacity\",t.o.v),(t.w._mdf||i)&&(n.pElem.setAttribute(\"stroke-width\",t.w.v),n.msElem&&n.msElem.setAttribute(\"stroke-width\",t.w.v))}function Ki(){}function Qi(e,t,i){this.initFrame(),this.initBaseData(e,t,i),this.initFrame(),this.initTransform(e,t,i),this.initHierarchy()}function $i(){}function en(){}function tn(){}function nn(){}function rn(e,t,i){this.assetData=t.getAssetData(e.refId),this.initElement(e,t,i),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function an(e,t,i){this.initElement(e,t,i)}function sn(e,t,i){this.initFrame(),this.initRenderable(),this.assetData=t.getAssetData(e.refId),this.initBaseData(e,t,i),this._isPlaying=!1,this._canPlay=!1;i=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(i),this._currentTime=0,this.globalData.audioController.addAudio(this),this.tm=e.tm?w.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function on(e,t,i){this.layers=e.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?b(this.layers.length):[],this.initElement(e,t,i),this.tm=e.tm?w.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function ln(e,t,i){this.textSpans=[],this.renderType=\"svg\",this.initElement(e,t,i)}function hn(e,t,i){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(e,t,i),this.prevViewData=[]}function un(){}Ki.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var e=0,t=this.data.masksProperties.length;e<t;){if(\"n\"!==this.data.masksProperties[e].mode&&!1!==this.data.masksProperties[e].cl)return!0;e+=1}return!1},initExpressions:function(){this.layerInterface=LayerExpressionInterface(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var e=EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(e),0===this.data.ty||this.data.xt?this.compInterface=CompExpressionInterface(this):4===this.data.ty?(this.layerInterface.shapeInterface=ShapeExpressionInterface(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):5===this.data.ty&&(this.layerInterface.textInterface=TextExpressionInterface(this),this.layerInterface.text=this.layerInterface.textInterface)},setBlendMode:function(){var e=Y(this.data.bm);(this.baseElement||this.layerElement).style[\"mix-blend-mode\"]=e},initBaseData:function(e,t,i){this.globalData=t,this.comp=i,this.data=e,this.layerId=F(),this.data.sr||(this.data.sr=1),this.effectsManager=new En(this.data,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},Qi.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},Qi.prototype.renderFrame=function(){},Qi.prototype.getBaseElement=function(){return null},Qi.prototype.destroy=function(){},Qi.prototype.sourceRectAtTime=function(){},Qi.prototype.hide=function(){},m([Ki,Ri,Ai,ki],Qi),$i.prototype={initRendererElement:function(){this.layerElement=M(\"g\")},createContainerElements:function(){this.matteElement=M(\"g\"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var e,t,i,n,r,a,s,o=null;this.data.td?3==this.data.td||1==this.data.td?((t=M(\"mask\")).setAttribute(\"id\",this.layerId),t.setAttribute(\"mask-type\",3==this.data.td?\"luminance\":\"alpha\"),t.appendChild(this.layerElement),this.globalData.defs.appendChild(o=t),Zt.maskType||1!=this.data.td||(t.setAttribute(\"mask-type\",\"luminance\"),r=F(),a=Kt.createFilter(r),this.globalData.defs.appendChild(a),a.appendChild(Kt.createAlphaToLuminanceFilter()),(e=M(\"g\")).appendChild(this.layerElement),o=e,t.appendChild(e),e.setAttribute(\"filter\",\"url(\"+S+\"#\"+r+\")\"))):2==this.data.td&&((t=M(\"mask\")).setAttribute(\"id\",this.layerId),t.setAttribute(\"mask-type\",\"alpha\"),i=M(\"g\"),t.appendChild(i),r=F(),a=Kt.createFilter(r),(s=M(\"feComponentTransfer\")).setAttribute(\"in\",\"SourceGraphic\"),a.appendChild(s),(n=M(\"feFuncA\")).setAttribute(\"type\",\"table\"),n.setAttribute(\"tableValues\",\"1.0 0.0\"),s.appendChild(n),this.globalData.defs.appendChild(a),(s=M(\"rect\")).setAttribute(\"width\",this.comp.data.w),s.setAttribute(\"height\",this.comp.data.h),s.setAttribute(\"x\",\"0\"),s.setAttribute(\"y\",\"0\"),s.setAttribute(\"fill\",\"#ffffff\"),s.setAttribute(\"opacity\",\"0\"),i.setAttribute(\"filter\",\"url(\"+S+\"#\"+r+\")\"),i.appendChild(s),i.appendChild(this.layerElement),o=i,Zt.maskType||(t.setAttribute(\"mask-type\",\"luminance\"),a.appendChild(Kt.createAlphaToLuminanceFilter()),e=M(\"g\"),i.appendChild(s),e.appendChild(this.layerElement),o=e,i.appendChild(e)),this.globalData.defs.appendChild(t)):this.data.tt?(this.matteElement.appendChild(this.layerElement),o=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute(\"id\",this.data.ln),this.data.cl&&this.layerElement.setAttribute(\"class\",this.data.cl),0!==this.data.ty||this.data.hd||(n=M(\"clipPath\"),(r=M(\"path\")).setAttribute(\"d\",\"M0,0 L\"+this.data.w+\",0 L\"+this.data.w+\",\"+this.data.h+\" L0,\"+this.data.h+\"z\"),a=F(),n.setAttribute(\"id\",a),n.appendChild(r),this.globalData.defs.appendChild(n),this.checkMasks()?((s=M(\"g\")).setAttribute(\"clip-path\",\"url(\"+S+\"#\"+a+\")\"),s.appendChild(this.layerElement),this.transformedElement=s,o?o.appendChild(this.transformedElement):this.baseElement=this.transformedElement):this.layerElement.setAttribute(\"clip-path\",\"url(\"+S+\"#\"+a+\")\")),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&this.transformedElement.setAttribute(\"transform\",this.finalTransform.mat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute(\"opacity\",this.finalTransform.mProp.o.v)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new Ti(this.data,this,this.globalData),this.renderableEffectsManager=new un},setMatte:function(e){this.matteElement&&this.matteElement.setAttribute(\"mask\",\"url(\"+S+\"#\"+e+\")\")}},en.prototype={addShapeToModifiers:function(e){for(var t=this.shapeModifiers.length,i=0;i<t;i+=1)this.shapeModifiers[i].addShape(e)},isShapeInAnimatedModifiers:function(e){for(var t=this.shapeModifiers.length;0<t;)if(this.shapeModifiers[0].isAnimatedWithShape(e))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){for(var e=this.shapes.length,t=0;t<e;t+=1)this.shapes[t].sh.reset();for(t=(e=this.shapeModifiers.length)-1;0<=t&&!this.shapeModifiers[t].processShapes(this._isFirstFrame);--t);}},searchProcessedElement:function(e){for(var t=this.processedElements,i=0,n=t.length;i<n;){if(t[i].elem===e)return t[i].pos;i+=1}return 0},addProcessedElement:function(e,t){for(var i=this.processedElements,n=i.length;n;)if(i[--n].elem===e)return void(i[n].pos=t);i.push(new Pi(e,t))},prepareFrame:function(e){this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange)}},tn.prototype.initElement=function(e,t,i){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(e,t,i),this.textProperty=new si(this,e.t,this.dynamicProperties),this.textAnimator=new ni(e.t,this.renderType,this),this.initTransform(e,t,i),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},tn.prototype.prepareFrame=function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)},tn.prototype.createPathShape=function(e,t){for(var i,n=t.length,r=\"\",a=0;a<n;a+=1)i=t[a].ks.k,r+=Xt(i,i.i.length,!0,e);return r},tn.prototype.updateDocumentData=function(e,t){this.textProperty.updateDocumentData(e,t)},tn.prototype.canResizeFont=function(e){this.textProperty.canResizeFont(e)},tn.prototype.setMinimumFontSize=function(e){this.textProperty.setMinimumFontSize(e)},tn.prototype.applyTextPropertiesToMatrix=function(e,t,i,n,r){switch(e.ps&&t.translate(e.ps[0],e.ps[1]+e.ascent,0),t.translate(0,-e.ls,0),e.j){case 1:t.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[i]),0,0);break;case 2:t.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[i])/2,0,0)}t.translate(n,r,0)},tn.prototype.buildColor=function(e){return\"rgb(\"+Math.round(255*e[0])+\",\"+Math.round(255*e[1])+\",\"+Math.round(255*e[2])+\")\"},tn.prototype.emptyProp=new ai,tn.prototype.destroy=function(){},m([Ki,Ri,Ai,ki,Ci],nn),nn.prototype.initElement=function(e,t,i){this.initFrame(),this.initBaseData(e,t,i),this.initTransform(e,t,i),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&t.progressiveLoad||this.buildAllItems(),this.hide()},nn.prototype.prepareFrame=function(e){if(this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),this.isInRange||this.data.xt){this.tm._placeholder?this.renderedFrame=e/this.data.sr:((e=this.tm.v)===this.data.op&&(e=this.data.op-1),this.renderedFrame=e);var t,e=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),t=e-1;0<=t;--t)(this.completeLayers||this.elements[t])&&(this.elements[t].prepareFrame(this.renderedFrame-this.layers[t].st),this.elements[t]._mdf&&(this._mdf=!0))}},nn.prototype.renderInnerContent=function(){for(var e=this.layers.length,t=0;t<e;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},nn.prototype.setElements=function(e){this.elements=e},nn.prototype.getElements=function(){return this.elements},nn.prototype.destroyElements=function(){for(var e=this.layers.length,t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy()},nn.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},m([Ki,Ri,$i,Ai,ki,Ci],rn),rn.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData);this.innerElem=M(\"image\"),this.innerElem.setAttribute(\"width\",this.assetData.w+\"px\"),this.innerElem.setAttribute(\"height\",this.assetData.h+\"px\"),this.innerElem.setAttribute(\"preserveAspectRatio\",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS(\"http://www.w3.org/1999/xlink\",\"href\",e),this.layerElement.appendChild(this.innerElem)},rn.prototype.sourceRectAtTime=function(){return this.sourceRect},m([rn],an),an.prototype.createContent=function(){var e=M(\"rect\");e.setAttribute(\"width\",this.data.sw),e.setAttribute(\"height\",this.data.sh),e.setAttribute(\"fill\",this.data.sc),this.layerElement.appendChild(e)},sn.prototype.prepareFrame=function(e){this.prepareRenderableFrame(e,!0),this.prepareProperties(e,!0),this.tm._placeholder?this._currentTime=e/this.data.sr:(e=this.tm.v,this._currentTime=e)},m([Li,Ki,ki],sn),sn.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||.1<Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek()))&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},sn.prototype.show=function(){},sn.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},sn.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},sn.prototype.resume=function(){this._canPlay=!0},sn.prototype.setRate=function(e){this.audio.rate(e)},sn.prototype.volume=function(e){this.audio.volume(e)},sn.prototype.getBaseElement=function(){return null},sn.prototype.destroy=function(){},sn.prototype.sourceRectAtTime=function(){},sn.prototype.initExpressions=function(){},m([Ei,nn,$i],on),m([Ki,Ri,$i,Ai,ki,Ci,tn],ln),ln.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=M(\"text\"))},ln.prototype.buildTextContents=function(e){for(var t=0,i=e.length,n=[],r=\"\";t<i;)e[t]===String.fromCharCode(13)||e[t]===String.fromCharCode(3)?(n.push(r),r=\"\"):r+=e[t],t+=1;return n.push(r),n},ln.prototype.buildNewText=function(){var u,c,e=this.textProperty.currentData,t=(this.renderedLetters=b(e?e.l.length:0),e.fc?this.layerElement.setAttribute(\"fill\",this.buildColor(e.fc)):this.layerElement.setAttribute(\"fill\",\"rgba(0,0,0,0)\"),e.sc&&(this.layerElement.setAttribute(\"stroke\",this.buildColor(e.sc)),this.layerElement.setAttribute(\"stroke-width\",e.sw)),this.layerElement.setAttribute(\"font-size\",e.finalSize),this.globalData.fontManager.getFontByName(e.f));t.fClass?this.layerElement.setAttribute(\"class\",t.fClass):(this.layerElement.setAttribute(\"font-family\",t.fFamily),u=e.fWeight,c=e.fStyle,this.layerElement.setAttribute(\"font-style\",c),this.layerElement.setAttribute(\"font-weight\",u)),this.layerElement.setAttribute(\"aria-label\",e.t);var i,n=e.l||[],r=!!this.globalData.fontManager.chars;x=n.length;var a=this.mHelper,d=\"\",s=this.data.singleShape,p=0,o=0,f=!0,m=.001*e.tr*e.finalSize;if(!s||r||e.sz){for(var l,v=this.textSpans.length,h=0;h<x;h+=1)r&&s&&0!==h||(i=h<v?this.textSpans[h]:M(r?\"path\":\"text\"),v<=h&&(i.setAttribute(\"stroke-linecap\",\"butt\"),i.setAttribute(\"stroke-linejoin\",\"round\"),i.setAttribute(\"stroke-miterlimit\",\"4\"),this.textSpans[h]=i,this.layerElement.appendChild(i)),i.style.display=\"inherit\"),a.reset(),a.scale(e.finalSize/100,e.finalSize/100),s&&(n[h].n&&(p=-m,o=o+e.yOffset+(f?1:0),f=!1),this.applyTextPropertiesToMatrix(e,a,n[h].line,p,o),p=p+(n[h].l||0)+m),r?(l=(l=(l=this.globalData.fontManager.getCharData(e.finalText[h],t.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily))&&l.data||{}).shapes?l.shapes[0].it:[],s?d+=this.createPathShape(a,l):i.setAttribute(\"d\",this.createPathShape(a,l))):(s&&i.setAttribute(\"transform\",\"translate(\"+a.props[12]+\",\"+a.props[13]+\")\"),i.textContent=n[h].val,i.setAttributeNS(\"http://www.w3.org/XML/1998/namespace\",\"xml:space\",\"preserve\"));s&&i&&i.setAttribute(\"d\",d)}else{var g=this.textContainer,y=\"start\";switch(e.j){case 1:y=\"end\";break;case 2:y=\"middle\";break;default:y=\"start\"}g.setAttribute(\"text-anchor\",y),g.setAttribute(\"letter-spacing\",m);var _=this.buildTextContents(e.finalText),x=_.length,o=e.ps?e.ps[1]+e.ascent:0;for(h=0;h<x;h+=1)(i=this.textSpans[h]||M(\"tspan\")).textContent=_[h],i.setAttribute(\"x\",0),i.setAttribute(\"y\",o),i.style.display=\"inherit\",g.appendChild(i),this.textSpans[h]=i,o+=e.finalLineHeight;this.layerElement.appendChild(g)}for(;h<this.textSpans.length;)this.textSpans[h].style.display=\"none\",h+=1;this._sizeChanged=!0},ln.prototype.sourceRectAtTime=function(){var e;return this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged&&(this._sizeChanged=!1,e=this.layerElement.getBBox(),this.bbox={top:e.y,left:e.x,width:e.width,height:e.height}),this.bbox},ln.prototype.renderInnerContent=function(){if(!this.data.singleShape&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;for(var e,t,i=this.textAnimator.renderedLetters,n=this.textProperty.currentData.l,r=n.length,a=0;a<r;a+=1)n[a].n||(e=i[a],t=this.textSpans[a],e._mdf.m&&t.setAttribute(\"transform\",e.m),e._mdf.o&&t.setAttribute(\"opacity\",e.o),e._mdf.sw&&t.setAttribute(\"stroke-width\",e.sw),e._mdf.sc&&t.setAttribute(\"stroke\",e.sc),e._mdf.fc&&t.setAttribute(\"fill\",e.fc))}},m([Ki,Ri,$i,en,Ai,ki,Ci],hn),hn.prototype.initSecondaryElement=function(){},hn.prototype.identityMatrix=new ie,hn.prototype.buildExpressionInterface=function(){},hn.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},hn.prototype.filterUniqueShapes=function(){for(var e,t,i,n=this.shapes.length,r=this.stylesList.length,a=[],s=!1,o=0;o<r;o+=1){for(i=this.stylesList[o],s=!1,e=a.length=0;e<n;e+=1)-1!==(t=this.shapes[e]).styles.indexOf(i)&&(a.push(t),s=t._isAnimated||s);1<a.length&&s&&this.setShapesAsAnimated(a)}},hn.prototype.setShapesAsAnimated=function(e){for(var t=e.length,i=0;i<t;i+=1)e[i].setAsAnimated()},hn.prototype.createStyleElement=function(e,t){var i,t=new Di(e,t),n=t.pElem;return\"st\"===e.ty?i=new Ni(this,e,t):\"fl\"===e.ty?i=new Oi(this,e,t):\"gf\"!==e.ty&&\"gs\"!==e.ty||(i=new(\"gf\"===e.ty?Ui:Bi)(this,e,t),this.globalData.defs.appendChild(i.gf),i.maskId&&(this.globalData.defs.appendChild(i.ms),this.globalData.defs.appendChild(i.of),n.setAttribute(\"mask\",\"url(\"+S+\"#\"+i.maskId+\")\"))),\"st\"!==e.ty&&\"gs\"!==e.ty||(n.setAttribute(\"stroke-linecap\",ee[e.lc||2]),n.setAttribute(\"stroke-linejoin\",te[e.lj||2]),n.setAttribute(\"fill-opacity\",\"0\"),1===e.lj&&n.setAttribute(\"stroke-miterlimit\",e.ml)),2===e.r&&n.setAttribute(\"fill-rule\",\"evenodd\"),e.ln&&n.setAttribute(\"id\",e.ln),e.cl&&n.setAttribute(\"class\",e.cl),e.bm&&(n.style[\"mix-blend-mode\"]=Y(e.bm)),this.stylesList.push(t),this.addToAnimatedContents(e,i),i},hn.prototype.createGroupElement=function(e){var t=new zi;return e.ln&&t.gr.setAttribute(\"id\",e.ln),e.cl&&t.gr.setAttribute(\"class\",e.cl),e.bm&&(t.gr.style[\"mix-blend-mode\"]=Y(e.bm)),t},hn.prototype.createTransformElement=function(e,t){var i=xt.getTransformProperty(this,e,this),i=new Fi(i,i.o,t);return this.addToAnimatedContents(e,i),i},hn.prototype.createShapeElement=function(e,t,i){var n=4,t=(\"rc\"===e.ty?n=5:\"el\"===e.ty?n=6:\"sr\"===e.ty&&(n=7),new Ii(t,i,Nt.getShapeProp(this,e,n,this)));return this.shapes.push(t),this.addShapeToModifiers(t),this.addToAnimatedContents(e,t),t},hn.prototype.addToAnimatedContents=function(e,t){for(var i=0,n=this.animatedContents.length;i<n;){if(this.animatedContents[i].element===t)return;i+=1}this.animatedContents.push({fn:Wi.createRenderFunction(e),element:t,data:e})},hn.prototype.setElementStyles=function(e){for(var t=e.styles,i=this.stylesList.length,n=0;n<i;n+=1)this.stylesList[n].closed||t.push(this.stylesList[n])},hn.prototype.reloadShapes=function(){this._isFirstFrame=!0;for(var e=this.itemsData.length,t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers()},hn.prototype.searchShapes=function(e,t,u,i,n,c,d){for(var r,p,f,a,s,m=[].concat(c),o=e.length-1,v=[],l=[],h=o;0<=h;--h){if((s=this.searchProcessedElement(e[h]))?t[h]=u[s-1]:e[h]._render=d,\"fl\"===e[h].ty||\"st\"===e[h].ty||\"gf\"===e[h].ty||\"gs\"===e[h].ty)s?t[h].style.closed=!1:t[h]=this.createStyleElement(e[h],n),e[h]._render&&t[h].style.pElem.parentNode!==i&&i.appendChild(t[h].style.pElem),v.push(t[h].style);else if(\"gr\"===e[h].ty){if(s)for(p=t[h].it.length,r=0;r<p;r+=1)t[h].prevViewData[r]=t[h].it[r];else t[h]=this.createGroupElement(e[h]);this.searchShapes(e[h].it,t[h].it,t[h].prevViewData,t[h].gr,n+1,m,d),e[h]._render&&t[h].gr.parentNode!==i&&i.appendChild(t[h].gr)}else\"tr\"===e[h].ty?(s||(t[h]=this.createTransformElement(e[h],i)),f=t[h].transform,m.push(f)):\"sh\"===e[h].ty||\"rc\"===e[h].ty||\"el\"===e[h].ty||\"sr\"===e[h].ty?(s||(t[h]=this.createShapeElement(e[h],m,n)),this.setElementStyles(t[h])):\"tm\"===e[h].ty||\"rd\"===e[h].ty||\"ms\"===e[h].ty||\"pb\"===e[h].ty?(s?(a=t[h]).closed=!1:((a=Ot.getModifier(e[h].ty)).init(this,e[h]),t[h]=a,this.shapeModifiers.push(a)),l.push(a)):\"rp\"===e[h].ty&&(s?(a=t[h]).closed=!0:(a=Ot.getModifier(e[h].ty),(t[h]=a).init(this,e,h,t),this.shapeModifiers.push(a),d=!1),l.push(a));this.addProcessedElement(e[h],h+1)}for(o=v.length,h=0;h<o;h+=1)v[h].closed=!0;for(o=l.length,h=0;h<o;h+=1)l[h].closed=!0},hn.prototype.renderInnerContent=function(){this.renderModifiers();for(var e=this.stylesList.length,t=0;t<e;t+=1)this.stylesList[t].reset();for(this.renderShape(),t=0;t<e;t+=1)(this.stylesList[t]._mdf||this._isFirstFrame)&&(this.stylesList[t].msElem&&(this.stylesList[t].msElem.setAttribute(\"d\",this.stylesList[t].d),this.stylesList[t].d=\"M0 0\"+this.stylesList[t].d),this.stylesList[t].pElem.setAttribute(\"d\",this.stylesList[t].d||\"M0 0\"))},hn.prototype.renderShape=function(){for(var e,t=this.animatedContents.length,i=0;i<t;i+=1)e=this.animatedContents[i],(this._isFirstFrame||e.element._isAnimated)&&!0!==e.data&&e.fn(e.data,e.element,this._isFirstFrame)},hn.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};r=[],mn=!(fn=!(pn=dn=cn=0)),(t={}).registerAnimation=yn,t.loadAnimation=function(e){var t=new a;return bn(t,null),t.setParams(e),t},t.setSpeed=function(e,t){for(var i=0;i<dn;i+=1)r[i].animation.setSpeed(e,t)},t.setDirection=function(e,t){for(var i=0;i<dn;i+=1)r[i].animation.setDirection(e,t)},t.play=function(e){for(var t=0;t<dn;t+=1)r[t].animation.play(e)},t.pause=function(e){for(var t=0;t<dn;t+=1)r[t].animation.pause(e)},t.stop=function(e){for(var t=0;t<dn;t+=1)r[t].animation.stop(e)},t.togglePause=function(e){for(var t=0;t<dn;t+=1)r[t].animation.togglePause(e)},t.searchAnimations=function(e,t,i){for(var n,r=[].concat([].slice.call(document.getElementsByClassName(\"lottie\")),[].slice.call(document.getElementsByClassName(\"bodymovin\"))),a=r.length,s=0;s<a;s+=1)i&&r[s].setAttribute(\"data-bm-type\",i),yn(r[s],e);t&&0===a&&(i=i||\"svg\",(t=document.getElementsByTagName(\"body\")[0]).innerText=\"\",(n=X(\"div\")).style.width=\"100%\",n.style.height=\"100%\",n.setAttribute(\"data-bm-type\",i),t.appendChild(n),yn(n,e))},t.resize=function(){for(var e=0;e<dn;e+=1)r[e].animation.resize()},t.goToAndStop=function(e,t,i){for(var n=0;n<dn;n+=1)r[n].animation.goToAndStop(e,t,i)},t.destroy=function(e){for(var t=dn-1;0<=t;--t)r[t].animation.destroy(e)},t.freeze=function(){mn=!0},t.unfreeze=function(){mn=!1,Sn()},t.setVolume=function(e,t){for(var i=0;i<dn;i+=1)r[i].animation.setVolume(e,t)},t.mute=function(e){for(var t=0;t<dn;t+=1)r[t].animation.mute(e)},t.unmute=function(e){for(var t=0;t<dn;t+=1)r[t].animation.unmute(e)},t.getRegisteredAnimations=function(){for(var e=r.length,t=[],i=0;i<e;i+=1)t.push(r[i].animation);return t};var r,cn,dn,pn,fn,mn,vn=t,a=function(){this._cbs=[],this.name=\"\",this.path=\"\",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=F(),this.assetsPath=\"\",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=h,this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface={},this.imagePreloader=new Jt,this.audioController=Yt(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this)};function gn(e){for(var t=0,i=e.target;t<dn;)r[t].animation===i&&(r.splice(t,1),--t,--dn,i.isPaused||xn()),t+=1}function yn(e,t){if(!e)return null;for(var i=0;i<dn;){if(r[i].elem===e&&null!==r[i].elem)return r[i].animation;i+=1}var n=new a;return bn(n,e),n.setData(e,t),n}function _n(){pn+=1,Sn()}function xn(){--pn}function bn(e,t){e.addEventListener(\"destroy\",gn),e.addEventListener(\"_active\",_n),e.addEventListener(\"_idle\",xn),r.push({elem:t,animation:e}),dn+=1}function Mn(e){for(var t=e-cn,i=0;i<dn;i+=1)r[i].animation.advanceTime(t);cn=e,pn&&!mn?n.requestAnimationFrame(Mn):fn=!0}function wn(e){cn=e,n.requestAnimationFrame(Mn)}function Sn(){!mn&&pn&&fn&&(n.requestAnimationFrame(wn),fn=!1)}function En(){this.effectElements=[]}m([B],a),a.prototype.setParams=function(e){(e.wrapper||e.container)&&(this.wrapper=e.wrapper||e.container);var t=\"svg\";switch(e.animType?t=e.animType:e.renderer&&(t=e.renderer),t){case\"canvas\":this.renderer=new CanvasRenderer(this,e.rendererSettings);break;case\"svg\":this.renderer=new Ei(this,e.rendererSettings);break;default:this.renderer=new HybridRenderer(this,e.rendererSettings)}this.imagePreloader.setCacheType(t,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=t,\"\"===e.loop||null===e.loop||void 0===e.loop||!0===e.loop?this.loop=!0:!1===e.loop?this.loop=!1:this.loop=parseInt(e.loop,10),this.autoplay=!(\"autoplay\"in e)||e.autoplay,this.name=e.name||\"\",this.autoloadSegments=!Object.prototype.hasOwnProperty.call(e,\"autoloadSegments\")||e.autoloadSegments,this.assetsPath=e.assetsPath,this.initialSegment=e.initialSegment,e.audioFactory&&this.audioController.setAudioFactory(e.audioFactory),e.animationData?this.setupAnimation(e.animationData):e.path&&(-1!==e.path.lastIndexOf(\"\\\\\")?this.path=e.path.substr(0,e.path.lastIndexOf(\"\\\\\")+1):this.path=e.path.substr(0,e.path.lastIndexOf(\"/\")+1),this.fileName=e.path.substr(e.path.lastIndexOf(\"/\")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(\".json\")),nt.loadAnimation(e.path,this.configAnimation,this.onSetupError))},a.prototype.onSetupError=function(){this.trigger(\"data_failed\")},a.prototype.setupAnimation=function(e){nt.completeAnimation(e,this.configAnimation)},a.prototype.setData=function(e,t){var t={wrapper:e,animationData:t=t&&\"object\"!=(0,Pn.default)(t)?JSON.parse(t):t},e=e.attributes,i=(t.path=e.getNamedItem(\"data-animation-path\")?e.getNamedItem(\"data-animation-path\").value:e.getNamedItem(\"data-bm-path\")?e.getNamedItem(\"data-bm-path\").value:e.getNamedItem(\"bm-path\")?e.getNamedItem(\"bm-path\").value:\"\",t.animType=e.getNamedItem(\"data-anim-type\")?e.getNamedItem(\"data-anim-type\").value:e.getNamedItem(\"data-bm-type\")?e.getNamedItem(\"data-bm-type\").value:e.getNamedItem(\"bm-type\")?e.getNamedItem(\"bm-type\").value:e.getNamedItem(\"data-bm-renderer\")?e.getNamedItem(\"data-bm-renderer\").value:e.getNamedItem(\"bm-renderer\")?e.getNamedItem(\"bm-renderer\").value:\"canvas\",e.getNamedItem(\"data-anim-loop\")?e.getNamedItem(\"data-anim-loop\").value:e.getNamedItem(\"data-bm-loop\")?e.getNamedItem(\"data-bm-loop\").value:e.getNamedItem(\"bm-loop\")?e.getNamedItem(\"bm-loop\").value:\"\"),i=(\"false\"===i?t.loop=!1:\"true\"===i?t.loop=!0:\"\"!==i&&(t.loop=parseInt(i,10)),e.getNamedItem(\"data-anim-autoplay\")?e.getNamedItem(\"data-anim-autoplay\").value:e.getNamedItem(\"data-bm-autoplay\")?e.getNamedItem(\"data-bm-autoplay\").value:!e.getNamedItem(\"bm-autoplay\")||e.getNamedItem(\"bm-autoplay\").value);t.autoplay=\"false\"!==i,t.name=e.getNamedItem(\"data-name\")?e.getNamedItem(\"data-name\").value:e.getNamedItem(\"data-bm-name\")?e.getNamedItem(\"data-bm-name\").value:e.getNamedItem(\"bm-name\")?e.getNamedItem(\"bm-name\").value:\"\",\"false\"===(e.getNamedItem(\"data-anim-prerender\")?e.getNamedItem(\"data-anim-prerender\").value:e.getNamedItem(\"data-bm-prerender\")?e.getNamedItem(\"data-bm-prerender\").value:e.getNamedItem(\"bm-prerender\")?e.getNamedItem(\"bm-prerender\").value:\"\")&&(t.prerender=!1),this.setParams(t)},a.prototype.includeLayers=function(e){e.op>this.animationData.op&&(this.animationData.op=e.op,this.totalFrames=Math.floor(e.op-this.animationData.ip));for(var t,i=this.animationData.layers,n=i.length,r=e.layers,a=r.length,s=0;s<a;s+=1)for(t=0;t<n;){if(i[t].id===r[s].id){i[t]=r[s];break}t+=1}if((e.chars||e.fonts)&&(this.renderer.globalData.fontManager.addChars(e.chars),this.renderer.globalData.fontManager.addFonts(e.fonts,this.renderer.globalData.defs)),e.assets)for(n=e.assets.length,t=0;t<n;t+=1)this.animationData.assets.push(e.assets[t]);this.animationData.__complete=!1,nt.completeAnimation(this.animationData,this.onSegmentComplete)},a.prototype.onSegmentComplete=function(e){this.animationData=e,s&&s.initExpressions(this),this.loadNextSegment()},a.prototype.loadNextSegment=function(){var e=this.animationData.segments;if(!e||0===e.length||!this.autoloadSegments)return this.trigger(\"data_ready\"),void(this.timeCompleted=this.totalFrames);e=e.shift(),this.timeCompleted=e.time*this.frameRate,e=this.path+this.fileName+\"_\"+this.segmentPos+\".json\";this.segmentPos+=1,nt.loadData(e,this.includeLayers.bind(this),function(){this.trigger(\"data_failed\")}.bind(this))},a.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},a.prototype.imagesLoaded=function(){this.trigger(\"loaded_images\"),this.checkLoaded()},a.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},a.prototype.configAnimation=function(e){if(this.renderer)try{this.animationData=e,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(e),e.assets||(e.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(e.assets),this.markers=Mi(e.markers||[]),this.trigger(\"config_ready\"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(e){this.triggerConfigError(e)}},a.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},a.prototype.checkLoaded=function(){!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||\"canvas\"!==this.renderer.rendererType)&&this.imagePreloader.loadedFootages()&&(this.isLoaded=!0,s&&s.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger(\"DOMLoaded\")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play())},a.prototype.resize=function(){this.renderer.updateContainerSize()},a.prototype.setSubframe=function(e){this.isSubframeEnabled=!!e},a.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger(\"enterFrame\"),this.renderFrame(),this.trigger(\"drawnFrame\")},a.prototype.renderFrame=function(){if(!1!==this.isLoaded&&this.renderer)try{this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(e){this.triggerRenderFrameError(e)}},a.prototype.play=function(e){e&&this.name!==e||!0===this.isPaused&&(this.isPaused=!1,this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger(\"_active\")))},a.prototype.pause=function(e){e&&this.name!==e||!1===this.isPaused&&(this.isPaused=!0,this._idle=!0,this.trigger(\"_idle\"),this.audioController.pause())},a.prototype.togglePause=function(e){e&&this.name!==e||(!0===this.isPaused?this.play():this.pause())},a.prototype.stop=function(e){e&&this.name!==e||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},a.prototype.getMarkerData=function(e){for(var t,i=0;i<this.markers.length;i+=1)if((t=this.markers[i]).payload&&t.payload.name===e)return t;return null},a.prototype.goToAndStop=function(e,t,i){i&&this.name!==i||(i=Number(e),isNaN(i)?(i=this.getMarkerData(e))&&this.goToAndStop(i.time,!0):t?this.setCurrentRawFrameValue(e):this.setCurrentRawFrameValue(e*this.frameModifier),this.pause())},a.prototype.goToAndPlay=function(e,t,i){var n;i&&this.name!==i||(n=Number(e),isNaN(n)?(e=this.getMarkerData(e))&&(e.duration?this.playSegments([e.time,e.time+e.duration],!0):this.goToAndStop(e.time,!0)):this.goToAndStop(n,t,i),this.play())},a.prototype.advanceTime=function(e){var t;!0!==this.isPaused&&!1!==this.isLoaded&&(t=!1,(e=this.currentRawFrame+e*this.frameModifier)>=this.totalFrames-1&&0<this.frameModifier?this.loop&&this.playCount!==this.loop?e>=this.totalFrames?(this.playCount+=1,this.checkSegments(e%this.totalFrames)||(this.setCurrentRawFrameValue(e%this.totalFrames),this._completedLoop=!0,this.trigger(\"loopComplete\"))):this.setCurrentRawFrameValue(e):this.checkSegments(e>this.totalFrames?e%this.totalFrames:0)||(t=!0,e=this.totalFrames-1):e<0?this.checkSegments(e%this.totalFrames)||(!this.loop||this.playCount--<=0&&!0!==this.loop?(t=!0,e=0):(this.setCurrentRawFrameValue(this.totalFrames+e%this.totalFrames),this._completedLoop?this.trigger(\"loopComplete\"):this._completedLoop=!0)):this.setCurrentRawFrameValue(e),t&&(this.setCurrentRawFrameValue(e),this.pause(),this.trigger(\"complete\")))},a.prototype.adjustSegment=function(e,t){this.playCount=0,e[1]<e[0]?(0<this.frameModifier&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=e[0]-e[1],this.timeCompleted=this.totalFrames,this.firstFrame=e[1],this.setCurrentRawFrameValue(this.totalFrames-.001-t)):e[1]>e[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=e[1]-e[0],this.timeCompleted=this.totalFrames,this.firstFrame=e[0],this.setCurrentRawFrameValue(.001+t)),this.trigger(\"segmentStart\")},a.prototype.setSegment=function(e,t){var i=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<e?i=e:this.currentRawFrame+this.firstFrame>t&&(i=t-e)),this.firstFrame=e,this.totalFrames=t-e,this.timeCompleted=this.totalFrames,-1!==i&&this.goToAndStop(i,!0)},a.prototype.playSegments=function(e,t){if(t&&(this.segments.length=0),\"object\"==(0,Pn.default)(e[0]))for(var i=e.length,n=0;n<i;n+=1)this.segments.push(e[n]);else this.segments.push(e);this.segments.length&&t&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},a.prototype.resetSegments=function(e){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),e&&this.checkSegments(0)},a.prototype.checkSegments=function(e){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),e),!0)},a.prototype.destroy=function(e){e&&this.name!==e||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger(\"destroy\"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.renderer=null,this.imagePreloader=null,this.projectInterface=null)},a.prototype.setCurrentRawFrameValue=function(e){this.currentRawFrame=e,this.gotoFrame()},a.prototype.setSpeed=function(e){this.playSpeed=e,this.updaFrameModifier()},a.prototype.setDirection=function(e){this.playDirection=e<0?-1:1,this.updaFrameModifier()},a.prototype.setVolume=function(e,t){t&&this.name!==t||this.audioController.setVolume(e)},a.prototype.getVolume=function(){return this.audioController.getVolume()},a.prototype.mute=function(e){e&&this.name!==e||this.audioController.mute()},a.prototype.unmute=function(e){e&&this.name!==e||this.audioController.unmute()},a.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},a.prototype.getPath=function(){return this.path},a.prototype.getAssetsPath=function(e){var t,i=\"\";return i=e.e?e.p:this.assetsPath?(-1!==(t=e.p).indexOf(\"images/\")&&(t=t.split(\"/\")[1]),this.assetsPath+t):(i=this.path,(i+=e.u||\"\")+e.p)},a.prototype.getAssetData=function(e){for(var t=0,i=this.assets.length;t<i;){if(e===this.assets[t].id)return this.assets[t];t+=1}return null},a.prototype.hide=function(){this.renderer.hide()},a.prototype.show=function(){this.renderer.show()},a.prototype.getDuration=function(e){return e?this.totalFrames:this.totalFrames/this.frameRate},a.prototype.trigger=function(e){if(this._cbs&&this._cbs[e])switch(e){case\"enterFrame\":case\"drawnFrame\":this.triggerEvent(e,new k(e,this.currentFrame,this.totalFrames,this.frameModifier));break;case\"loopComplete\":this.triggerEvent(e,new L(e,this.loop,this.playCount,this.frameMult));break;case\"complete\":this.triggerEvent(e,new R(e,this.frameMult));break;case\"segmentStart\":this.triggerEvent(e,new C(e,this.firstFrame,this.totalFrames));break;case\"destroy\":this.triggerEvent(e,new P(e,this));break;default:this.triggerEvent(e)}\"enterFrame\"===e&&this.onEnterFrame&&this.onEnterFrame.call(this,new k(e,this.currentFrame,this.totalFrames,this.frameMult)),\"loopComplete\"===e&&this.onLoopComplete&&this.onLoopComplete.call(this,new L(e,this.loop,this.playCount,this.frameMult)),\"complete\"===e&&this.onComplete&&this.onComplete.call(this,new R(e,this.frameMult)),\"segmentStart\"===e&&this.onSegmentStart&&this.onSegmentStart.call(this,new C(e,this.firstFrame,this.totalFrames)),\"destroy\"===e&&this.onDestroy&&this.onDestroy.call(this,new P(e,this))},a.prototype.triggerRenderFrameError=function(e){e=new D(e,this.currentFrame);this.triggerEvent(\"error\",e),this.onError&&this.onError.call(this,e)},a.prototype.triggerConfigError=function(e){e=new I(e,this.currentFrame);this.triggerEvent(\"error\",e),this.onError&&this.onError.call(this,e)};var e={};function Tn(){!0===kn?vn.searchAnimations(Rn,kn,Ln):vn.searchAnimations()}e.play=vn.play,e.pause=vn.pause,e.setLocationHref=function(e){S=e},e.togglePause=vn.togglePause,e.setSpeed=vn.setSpeed,e.setDirection=vn.setDirection,e.stop=vn.stop,e.searchAnimations=Tn,e.registerAnimation=vn.registerAnimation,e.loadAnimation=function(e){return!0===kn&&(e.animationData=JSON.parse(Rn)),vn.loadAnimation(e)},e.setSubframeRendering=function(e){h=e},e.resize=vn.resize,e.goToAndStop=vn.goToAndStop,e.destroy=vn.destroy,e.setQuality=function(e){if(\"string\"==typeof e)switch(e){case\"high\":E=200;break;default:case\"medium\":E=50;break;case\"low\":E=10}else!isNaN(e)&&1<e&&(E=e);A(!(50<=E))},e.inBrowser=function(){return\"undefined\"!=typeof navigator},e.installPlugin=function(e,t){\"expressions\"===e&&(s=t)},e.freeze=vn.freeze,e.unfreeze=vn.unfreeze,e.setVolume=vn.setVolume,e.mute=vn.mute,e.unmute=vn.unmute,e.getRegisteredAnimations=vn.getRegisteredAnimations,e.useWebWorker=function(e){l=e},e.setIDPrefix=function(e){u=e},e.__getFactory=function(e){switch(e){case\"propertyFactory\":return w;case\"shapePropertyFactory\":return Nt;case\"matrix\":return ie;default:return null}},e.version=\"5.8.1\";var t,An,kn=\"__[STANDALONE]__\",Rn=\"__[ANIMATIONDATA]__\",Ln=\"\",Cn=(kn&&(t=document.getElementsByTagName(\"script\"),An=(t[t.length-1]||{src:\"\"}).src.replace(/^[^\\?]+\\??/,\"\"),Ln=function(){for(var e=An.split(\"&\"),t=0;t<e.length;t+=1){var i=e[t].split(\"=\");if(\"renderer\"==decodeURIComponent(i[0]))return decodeURIComponent(i[1])}return null}()),setInterval(function(){\"complete\"===document.readyState&&(clearInterval(Cn),Tn())},100));return e},\"function\"==typeof define&&define.amd?define(function(){return o(s)}):\"object\"===(0,Pn.default)(b)&&b.exports?b.exports=o(s):(s.lottie=o(s),s.bodymovin=s.lottie)),b=b.exports,{});(h=function(e){if(Array.isArray(e))return e}).__esModule=!0,h.default=h;var u={};(u=function(e,t){var i=null==e?null:\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(null!=i){var n,r,a=[],s=!0,o=!1;try{for(i=i.call(e);!(s=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);s=!0);}catch(e){o=!0,r=e}finally{try{s||null==i.return||i.return()}finally{if(o)throw r}}return a}}).__esModule=!0,u.default=u;var c={};(c=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}).__esModule=!0,c.default=c;var d={};(d=function(e,t){if(e){if(\"string\"==typeof e)return c(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return\"Map\"===(i=\"Object\"===i&&e.constructor?e.constructor.name:i)||\"Set\"===i?Array.from(e):\"Arguments\"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?c(e,t):void 0}}).__esModule=!0,d.default=d;var p={};(p=function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}).__esModule=!0,p.default=p;n={};(n=function(e,t){return h(e)||u(e,t)||d(e,t)||p()}).__esModule=!0,n.default=n;var f={};function m(e){return(f=m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)}).__esModule=!0,f.default=f,m(e)}(f=m).__esModule=!0,f.default=f;var M={};(M=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}).__esModule=!0,M.default=M;var w={};function S(){return(w=S=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=M(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:i):n.value}).__esModule=!0,w.default=w,S.apply(this,arguments)}(w=S).__esModule=!0,w.default=w;i={};(i=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}).__esModule=!0,i.default=i;var E={};(E=function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}).__esModule=!0,E.default=E;var T={};function A(e,t){return(T=A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e}).__esModule=!0,T.default=T,A(e,t)}(T=A).__esModule=!0,T.default=T;var R={};(R=function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&T(e,t)}).__esModule=!0,R.default=R;var L={},C=y.default;(L=function(e,t){if(t&&(\"object\"===C(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return E(e)}).__esModule=!0,L.default=L;var P={};(P=function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}).__esModule=!0,P.default=P;var D={};function I(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(D=function(e,t,i){return t&&I(e.prototype,t),i&&I(e,i),Object.defineProperty(e,\"prototype\",{writable:!1}),e}).__esModule=!0,D.default=D;var J={exports:{}},iy=v(_),uy=v(x),cy=v(n),ny=v(w),ry=v(i),dy=v(E),ay=v(R),py=v(L),sy=v(f),oy=v(P),ly=v(D),n=v(y);function fy(e,t){var i,n=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if(\"string\"==typeof e)return F(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return\"Map\"===(i=\"Object\"===i&&e.constructor?e.constructor.name:i)||\"Set\"===i?Array.from(e):\"Arguments\"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?F(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length)return n&&(e=n),i=0,{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t};throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function my(t,e){var i,n=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)),n}function hy(i){var n=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,sy.default)(i);return e=n?(e=(0,sy.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,py.default)(this,e)}}i=function(e){for(var Le=\"136\",G=0,V=1,W=2,L=1,x=2,C=3,Ce=0,Pe=1,De=2,j=0,X=1,q=2,Y=3,J=4,Z=5,K=100,Q=101,ee=102,te=103,ie=104,ne=200,re=201,ae=202,se=203,oe=204,le=205,he=206,ue=207,ce=208,de=209,pe=210,fe=0,me=1,ve=2,ge=3,ye=4,_e=5,xe=6,be=7,b=0,M=1,E=2,Ie=0,T=301,A=302,l=303,h=304,D=306,I=307,Me=1e3,Fe=1001,we=1002,Ne=1003,Se=1004,Ee=1005,Te=1006,Ae=1007,Oe=1008,Ue=1009,a=1010,s=1011,ke=1012,o=1013,Be=1014,ze=1015,He=1016,u=1017,c=1018,d=1019,Ge=1020,p=1021,Ve=1022,We=1023,f=1024,m=1025,je=1026,Xe=1027,v=1028,g=1029,y=1030,k=1031,F=1032,N=1033,O=33776,U=33777,B=33778,z=33779,H=35840,Je=35841,Ze=35842,Ke=35843,Qe=36196,$e=37492,et=37496,tt=37808,it=37809,nt=37810,rt=37811,at=37812,st=37813,ot=37814,lt=37815,ht=37816,ut=37817,ct=37818,dt=37819,pt=37820,ft=37821,mt=36492,vt=37840,gt=37841,yt=37842,_t=37843,xt=37844,bt=37845,Mt=37846,wt=37847,St=37848,Et=37849,Tt=37850,At=37851,kt=37852,Rt=37853,Lt=2400,Ct=3e3,Pt=3001,t=3201,Dt=0,It=1,n=35044,i=35048,Ft=\"300 es\",r=((0,ly.default)(Ut,[{key:\"addEventListener\",value:function(e,t){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}},{key:\"hasEventListener\",value:function(e,t){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}},{key:\"removeEventListener\",value:function(e,t){void 0!==this._listeners&&(void 0===(e=this._listeners[e])||-1!==(t=e.indexOf(t))&&e.splice(t,1))}},{key:\"dispatchEvent\",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var i=t.slice(0),n=0,r=i.length;n<r;n++)i[n].call(this,e);e.target=null}}}}]),Ut),Nt=[],Ot=0;Ot<256;Ot++)Nt[Ot]=(Ot<16?\"0\":\"\")+Ot.toString(16);function Ut(){(0,oy.default)(this,Ut)}var Bt=1234567,zt=Math.PI/180,Ht=180/Math.PI;function Gt(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(Nt[255&e]+Nt[e>>8&255]+Nt[e>>16&255]+Nt[e>>24&255]+\"-\"+Nt[255&t]+Nt[t>>8&255]+\"-\"+Nt[t>>16&15|64]+Nt[t>>24&255]+\"-\"+Nt[63&i|128]+Nt[i>>8&255]+\"-\"+Nt[i>>16&255]+Nt[i>>24&255]+Nt[255&n]+Nt[n>>8&255]+Nt[n>>16&255]+Nt[n>>24&255]).toUpperCase()}function Vt(e,t,i){return Math.max(t,Math.min(i,e))}function Wt(e,t){return(e%t+t)%t}function jt(e,t,i){return(1-i)*e+i*t}function Xt(e){return 0==(e&e-1)&&0!==e}function qt(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Yt(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}var Jt=Object.freeze({__proto__:null,DEG2RAD:zt,RAD2DEG:Ht,generateUUID:Gt,clamp:Vt,euclideanModulo:Wt,mapLinear:function(e,t,i,n,r){return n+(e-t)*(r-n)/(i-t)},inverseLerp:function(e,t,i){return e!==t?(i-e)/(t-e):0},lerp:jt,damp:function(e,t,i,n){return jt(e,t,1-Math.exp(-i*n))},pingpong:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(Wt(e,2*t)-t)},smoothstep:function(e,t,i){return e<=t?0:i<=e?1:(e=(e-t)/(i-t))*e*(3-2*e)},smootherstep:function(e,t,i){return e<=t?0:i<=e?1:(e=(e-t)/(i-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return((Bt=16807*(Bt=void 0!==e?e%2147483647:Bt)%2147483647)-1)/2147483646},degToRad:function(e){return e*zt},radToDeg:function(e){return e*Ht},isPowerOfTwo:Xt,ceilPowerOfTwo:qt,floorPowerOfTwo:Yt,setQuaternionFromProperEuler:function(e,t,u,i,c){var n=Math.cos,r=Math.sin,a=n(u/2),s=r(u/2),o=n((t+i)/2),l=r((t+i)/2),h=n((t-i)/2),d=r((t-i)/2),p=n((i-t)/2),f=r((i-t)/2);switch(c){case\"XYX\":e.set(a*l,s*h,s*d,a*o);break;case\"YZY\":e.set(s*d,a*l,s*h,a*o);break;case\"ZXZ\":e.set(s*h,s*d,a*l,a*o);break;case\"XZX\":e.set(a*l,s*f,s*p,a*o);break;case\"YXY\":e.set(s*p,a*l,s*f,a*o);break;case\"ZYZ\":e.set(s*f,s*p,a*l,a*o);break;default:console.warn(\"THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: \"+c)}}}),qe=(gi=Symbol.iterator,(0,ly.default)(Zt,[{key:\"width\",get:function(){return this.x},set:function(e){this.x=e}},{key:\"height\",get:function(){return this.y},set:function(e){this.y=e}},{key:\"set\",value:function(e,t){return this.x=e,this.y=t,this}},{key:\"setScalar\",value:function(e){return this.x=e,this.y=e,this}},{key:\"setX\",value:function(e){return this.x=e,this}},{key:\"setY\",value:function(e){return this.y=e,this}},{key:\"setComponent\",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error(\"index is out of range: \"+e)}return this}},{key:\"getComponent\",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error(\"index is out of range: \"+e)}}},{key:\"clone\",value:function(){return new this.constructor(this.x,this.y)}},{key:\"copy\",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:\"add\",value:function(e,t){return void 0!==t?(console.warn(\"THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}},{key:\"addScalar\",value:function(e){return this.x+=e,this.y+=e,this}},{key:\"addVectors\",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:\"addScaledVector\",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:\"sub\",value:function(e,t){return void 0!==t?(console.warn(\"THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}},{key:\"subScalar\",value:function(e){return this.x-=e,this.y-=e,this}},{key:\"subVectors\",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:\"multiply\",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:\"multiplyScalar\",value:function(e){return this.x*=e,this.y*=e,this}},{key:\"divide\",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:\"divideScalar\",value:function(e){return this.multiplyScalar(1/e)}},{key:\"applyMatrix3\",value:function(e){var t=this.x,i=this.y,e=e.elements;return this.x=e[0]*t+e[3]*i+e[6],this.y=e[1]*t+e[4]*i+e[7],this}},{key:\"min\",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:\"max\",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:\"clamp\",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:\"clampScalar\",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:\"clampLength\",value:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}},{key:\"floor\",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:\"ceil\",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:\"round\",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:\"roundToZero\",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:\"negate\",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:\"dot\",value:function(e){return this.x*e.x+this.y*e.y}},{key:\"cross\",value:function(e){return this.x*e.y-this.y*e.x}},{key:\"lengthSq\",value:function(){return this.x*this.x+this.y*this.y}},{key:\"length\",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:\"manhattanLength\",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:\"normalize\",value:function(){return this.divideScalar(this.length()||1)}},{key:\"angle\",value:function(){return Math.atan2(-this.y,-this.x)+Math.PI}},{key:\"distanceTo\",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:\"distanceToSquared\",value:function(e){var t=this.x-e.x,e=this.y-e.y;return t*t+e*e}},{key:\"manhattanDistanceTo\",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:\"setLength\",value:function(e){return this.normalize().multiplyScalar(e)}},{key:\"lerp\",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:\"lerpVectors\",value:function(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}},{key:\"equals\",value:function(e){return e.x===this.x&&e.y===this.y}},{key:\"fromArray\",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:\"toArray\",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:\"fromBufferAttribute\",value:function(e,t,i){return void 0!==i&&console.warn(\"THREE.Vector2: offset has been removed from .fromBufferAttribute().\"),this.x=e.getX(t),this.y=e.getY(t),this}},{key:\"rotateAround\",value:function(e,t){var i=Math.cos(t),t=Math.sin(t),n=this.x-e.x,r=this.y-e.y;return this.x=n*i-r*t+e.x,this.y=n*t+r*i+e.y,this}},{key:\"random\",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:gi,value:iy.default.mark(function e(){return iy.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case\"end\":return e.stop()}},e,this)})}]),Zt);function Zt(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;(0,oy.default)(this,Zt),this.x=e,this.y=t}qe.prototype.isVector2=!0;(0,ly.default)(Qt,[{key:\"set\",value:function(e,t,i,n,r,a,s,o,l){var h=this.elements;return h[0]=e,h[1]=n,h[2]=s,h[3]=t,h[4]=r,h[5]=o,h[6]=i,h[7]=a,h[8]=l,this}},{key:\"identity\",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:\"copy\",value:function(e){var t=this.elements,e=e.elements;return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],this}},{key:\"extractBasis\",value:function(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}},{key:\"setFromMatrix4\",value:function(e){e=e.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}},{key:\"multiply\",value:function(e){return this.multiplyMatrices(this,e)}},{key:\"premultiply\",value:function(e){return this.multiplyMatrices(e,this)}},{key:\"multiplyMatrices\",value:function(e,t){var e=e.elements,t=t.elements,i=this.elements,n=e[0],r=e[3],a=e[6],s=e[1],o=e[4],l=e[7],h=e[2],u=e[5],e=e[8],c=t[0],d=t[3],p=t[6],f=t[1],m=t[4],v=t[7],g=t[2],y=t[5],t=t[8];return i[0]=n*c+r*f+a*g,i[3]=n*d+r*m+a*y,i[6]=n*p+r*v+a*t,i[1]=s*c+o*f+l*g,i[4]=s*d+o*m+l*y,i[7]=s*p+o*v+l*t,i[2]=h*c+u*f+e*g,i[5]=h*d+u*m+e*y,i[8]=h*p+u*v+e*t,this}},{key:\"multiplyScalar\",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:\"determinant\",value:function(){var e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],e=e[8];return t*a*e-t*s*l-i*r*e+i*s*o+n*r*l-n*a*o}},{key:\"invert\",value:function(){var e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],u=e[8],c=u*a-s*l,d=s*o-u*r,p=l*r-a*o,h=t*c+i*d+n*p;if(0==h)return this.set(0,0,0,0,0,0,0,0,0);h=1/h;return e[0]=c*h,e[1]=(n*l-u*i)*h,e[2]=(s*i-n*a)*h,e[3]=d*h,e[4]=(u*t-n*o)*h,e[5]=(n*r-s*t)*h,e[6]=p*h,e[7]=(i*o-l*t)*h,e[8]=(a*t-i*r)*h,this}},{key:\"transpose\",value:function(){var e=this.elements,t=e[1];return e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}},{key:\"getNormalMatrix\",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:\"transposeIntoArray\",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:\"setUvTransform\",value:function(e,t,i,n,r,a,s){var o=Math.cos(r),r=Math.sin(r);return this.set(i*o,i*r,-i*(o*a+r*s)+a+e,-n*r,n*o,-n*(-r*a+o*s)+s+t,0,0,1),this}},{key:\"scale\",value:function(e,t){var i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}},{key:\"rotate\",value:function(e){var t=Math.cos(e),e=Math.sin(e),i=this.elements,n=i[0],r=i[3],a=i[6],s=i[1],o=i[4],l=i[7];return i[0]=t*n+e*s,i[3]=t*r+e*o,i[6]=t*a+e*l,i[1]=-e*n+t*s,i[4]=-e*r+t*o,i[7]=-e*a+t*l,this}},{key:\"translate\",value:function(e,t){var i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}},{key:\"equals\",value:function(e){for(var t=this.elements,i=e.elements,n=0;n<9;n++)if(t[n]!==i[n])return!1;return!0}},{key:\"fromArray\",value:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=0;i<9;i++)this.elements[i]=e[i+t];return this}},{key:\"toArray\",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}},{key:\"clone\",value:function(){return(new this.constructor).fromArray(this.elements)}}]);var Kt=Qt;function Qt(){(0,oy.default)(this,Qt),this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error(\"THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.\")}function $t(e){if(0===e.length)return-1/0;for(var t=e[0],i=1,n=e.length;i<n;++i)e[i]>t&&(t=e[i]);return t}Kt.prototype.isMatrix3=!0;var ei,ti={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function ii(e,t){return new ti[e](t)}function ni(e){return document.createElementNS(\"http://www.w3.org/1999/xhtml\",e)}(0,ly.default)(hi,null,[{key:\"getDataURL\",value:function(e){if(/^data:/i.test(e.src))return e.src;if(\"undefined\"==typeof HTMLCanvasElement)return e.src;var t=e instanceof HTMLCanvasElement?e:((ei=void 0===ei?ni(\"canvas\"):ei).width=e.width,ei.height=e.height,t=ei.getContext(\"2d\"),e instanceof ImageData?t.putImageData(e,0,0):t.drawImage(e,0,0,e.width,e.height),ei);return 2048<t.width||2048<t.height?(console.warn(\"THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons\",e),t.toDataURL(\"image/jpeg\",.6)):t.toDataURL(\"image/png\")}}]);var ri,ai=hi,si=0,oi=((0,ay.default)(li,r),ri=hy(li),(0,ly.default)(li,[{key:\"updateMatrix\",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}},{key:\"copy\",value:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:\"toJSON\",value:function(e){var t=void 0===e||\"string\"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var i={metadata:{version:4.5,type:\"Texture\",generator:\"Texture.toJSON\"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var n=this.image;if(void 0===n.uuid&&(n.uuid=Gt()),!t&&void 0===e.images[n.uuid]){if(Array.isArray(n))for(var r=[],a=0,s=n.length;a<s;a++)n[a].isDataTexture?r.push(ui(n[a].image)):r.push(ui(n[a]));else r=ui(n);e.images[n.uuid]={uuid:n.uuid,url:r}}i.image=n.uuid}return\"{}\"!==JSON.stringify(this.userData)&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}},{key:\"dispose\",value:function(){this.dispatchEvent({type:\"dispose\"})}},{key:\"transformUv\",value:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||1<e.x)switch(this.wrapS){case Me:e.x=e.x-Math.floor(e.x);break;case Fe:e.x=e.x<0?0:1;break;case we:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||1<e.y)switch(this.wrapT){case Me:e.y=e.y-Math.floor(e.y);break;case Fe:e.y=e.y<0?0:1;break;case we:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:\"needsUpdate\",set:function(e){!0===e&&this.version++}}]),li);function li(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:li.DEFAULT_IMAGE,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:li.DEFAULT_MAPPING,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Fe,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:Fe,a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:Te,s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:Oe,o=6<arguments.length&&void 0!==arguments[6]?arguments[6]:We,l=7<arguments.length&&void 0!==arguments[7]?arguments[7]:Ue,h=8<arguments.length&&void 0!==arguments[8]?arguments[8]:1,u=9<arguments.length&&void 0!==arguments[9]?arguments[9]:Ct;return(0,oy.default)(this,li),e=ri.call(this),Object.defineProperty((0,dy.default)(e),\"id\",{value:si++}),e.uuid=Gt(),e.name=\"\",e.image=t,e.mipmaps=[],e.mapping=i,e.wrapS=n,e.wrapT=r,e.magFilter=a,e.minFilter=s,e.anisotropy=h,e.format=o,e.internalFormat=null,e.type=l,e.offset=new qe(0,0),e.repeat=new qe(1,1),e.center=new qe(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new Kt,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.encoding=u,e.userData={},e.version=0,e.onUpdate=null,e.isRenderTargetTexture=!1,e}function hi(){(0,oy.default)(this,hi)}function ui(e){return\"undefined\"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||\"undefined\"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||\"undefined\"!=typeof ImageBitmap&&e instanceof ImageBitmap?ai.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn(\"THREE.Texture: Unable to serialize Texture.\"),{})}oi.DEFAULT_IMAGE=void 0,oi.DEFAULT_MAPPING=300,oi.prototype.isTexture=!0;gi=Symbol.iterator,(0,ly.default)(di,[{key:\"width\",get:function(){return this.z},set:function(e){this.z=e}},{key:\"height\",get:function(){return this.w},set:function(e){this.w=e}},{key:\"set\",value:function(e,t,i,n){return this.x=e,this.y=t,this.z=i,this.w=n,this}},{key:\"setScalar\",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:\"setX\",value:function(e){return this.x=e,this}},{key:\"setY\",value:function(e){return this.y=e,this}},{key:\"setZ\",value:function(e){return this.z=e,this}},{key:\"setW\",value:function(e){return this.w=e,this}},{key:\"setComponent\",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error(\"index is out of range: \"+e)}return this}},{key:\"getComponent\",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error(\"index is out of range: \"+e)}}},{key:\"clone\",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:\"copy\",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:\"add\",value:function(e,t){return void 0!==t?(console.warn(\"THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}},{key:\"addScalar\",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:\"addVectors\",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:\"addScaledVector\",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:\"sub\",value:function(e,t){return void 0!==t?(console.warn(\"THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}},{key:\"subScalar\",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:\"subVectors\",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:\"multiply\",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:\"multiplyScalar\",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:\"applyMatrix4\",value:function(e){var t=this.x,i=this.y,n=this.z,r=this.w,e=e.elements;return this.x=e[0]*t+e[4]*i+e[8]*n+e[12]*r,this.y=e[1]*t+e[5]*i+e[9]*n+e[13]*r,this.z=e[2]*t+e[6]*i+e[10]*n+e[14]*r,this.w=e[3]*t+e[7]*i+e[11]*n+e[15]*r,this}},{key:\"divideScalar\",value:function(e){return this.multiplyScalar(1/e)}},{key:\"setAxisAngleFromQuaternion\",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:\"setAxisAngleFromRotationMatrix\",value:function(e){var t,i,n,e=e.elements,u=e[0],r=e[4],a=e[8],s=e[1],c=e[5],o=e[9],l=e[2],d=e[6],e=e[10];if(Math.abs(r-s)<.01&&Math.abs(a-l)<.01&&Math.abs(o-d)<.01){if(Math.abs(r+s)<.1&&Math.abs(a+l)<.1&&Math.abs(o+d)<.1&&Math.abs(u+c+e-3)<.1)return this.set(1,0,0,0),this;var p=Math.PI,h=(u+1)/2,f=(c+1)/2,m=(e+1)/2,v=(r+s)/4,g=(a+l)/4,y=(o+d)/4;return f<h&&m<h?n=h<.01?(t=0,i=.707106781):(i=v/(t=Math.sqrt(h)),g/t):m<f?n=f<.01?(i=0,t=.707106781):(t=v/(i=Math.sqrt(f)),y/i):m<.01?(i=t=.707106781,n=0):(t=g/(n=Math.sqrt(m)),i=y/n),this.set(t,i,n,p),this}h=Math.sqrt((d-o)*(d-o)+(a-l)*(a-l)+(s-r)*(s-r));return Math.abs(h)<.001&&(h=1),this.x=(d-o)/h,this.y=(a-l)/h,this.z=(s-r)/h,this.w=Math.acos((u+c+e-1)/2),this}},{key:\"min\",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:\"max\",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:\"clamp\",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:\"clampScalar\",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:\"clampLength\",value:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}},{key:\"floor\",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:\"ceil\",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:\"round\",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:\"roundToZero\",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:\"negate\",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:\"dot\",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:\"lengthSq\",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:\"length\",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:\"manhattanLength\",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:\"normalize\",value:function(){return this.divideScalar(this.length()||1)}},{key:\"setLength\",value:function(e){return this.normalize().multiplyScalar(e)}},{key:\"lerp\",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:\"lerpVectors\",value:function(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}},{key:\"equals\",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:\"fromArray\",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:\"toArray\",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:\"fromBufferAttribute\",value:function(e,t,i){return void 0!==i&&console.warn(\"THREE.Vector4: offset has been removed from .fromBufferAttribute().\"),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:\"random\",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:gi,value:iy.default.mark(function e(){return iy.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case\"end\":return e.stop()}},e,this)})}]);var ci=di;function di(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;(0,oy.default)(this,di),this.x=e,this.y=t,this.z=i,this.w=n}ci.prototype.isVector4=!0;(0,ay.default)(mi,r),pi=hy(mi),(0,ly.default)(mi,[{key:\"setTexture\",value:function(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}},{key:\"setSize\",value:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===i||(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}},{key:\"copy\",value:function(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?my(Object(i),!0).forEach(function(e){(0,ry.default)(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):my(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}({},this.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}},{key:\"dispose\",value:function(){this.dispatchEvent({type:\"dispose\"})}}]);var pi,fi=mi;function mi(e,t){var i,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return(0,oy.default)(this,mi),(i=pi.call(this)).width=e,i.height=t,i.depth=1,i.scissor=new ci(0,0,e,t),i.scissorTest=!1,i.viewport=new ci(0,0,e,t),i.texture=new oi(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),i.texture.isRenderTargetTexture=!0,i.texture.image={width:e,height:t,depth:1},i.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,i.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,i.texture.minFilter=void 0!==n.minFilter?n.minFilter:Te,i.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,i.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,i.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,i}fi.prototype.isWebGLRenderTarget=!0;(0,ay.default)(yi,fi),vi=hy(yi),(0,ly.default)(yi,[{key:\"setSize\",value:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(var n=0,r=this.texture.length;n<r;n++)this.texture[n].image.width=e,this.texture[n].image.height=t,this.texture[n].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}},{key:\"copy\",value:function(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture;for(var t=this.texture.length=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone();return this}}]);var vi,gi=yi;function yi(e,t,i){(0,oy.default)(this,yi);var n,r=(n=vi.call(this,e,t)).texture;n.texture=[];for(var a=0;a<i;a++)n.texture[a]=r.clone();return n}gi.prototype.isWebGLMultipleRenderTargets=!0;(0,ay.default)(bi,fi),_i=hy(bi),(0,ly.default)(bi,[{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(bi.prototype),\"copy\",this).call(this,e),this.samples=e.samples,this.useRenderToTexture=e.useRenderToTexture,this.useRenderbuffer=e.useRenderbuffer,this}}]);var _i,xi=bi;function bi(e,t){var i,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return(0,oy.default)(this,bi),(i=_i.call(this,e,t,n)).samples=4,i.ignoreDepthForMultisampleCopy=void 0===n.ignoreDepth||n.ignoreDepth,i.useRenderToTexture=void 0!==n.useRenderToTexture&&n.useRenderToTexture,i.useRenderbuffer=!1===i.useRenderToTexture,i}xi.prototype.isWebGLMultisampleRenderTarget=!0;(0,ly.default)(wi,[{key:\"x\",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:\"y\",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:\"z\",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:\"w\",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:\"set\",value:function(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._w=n,this._onChangeCallback(),this}},{key:\"clone\",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:\"copy\",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:\"setFromEuler\",value:function(e,u){if(!e||!e.isEuler)throw new Error(\"THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.\");var t=e._x,i=e._y,c=e._z,d=e._order,e=Math.cos,n=Math.sin,r=e(t/2),a=e(i/2),s=e(c/2),o=n(t/2),l=n(i/2),h=n(c/2);switch(d){case\"XYZ\":this._x=o*a*s+r*l*h,this._y=r*l*s-o*a*h,this._z=r*a*h+o*l*s,this._w=r*a*s-o*l*h;break;case\"YXZ\":this._x=o*a*s+r*l*h,this._y=r*l*s-o*a*h,this._z=r*a*h-o*l*s,this._w=r*a*s+o*l*h;break;case\"ZXY\":this._x=o*a*s-r*l*h,this._y=r*l*s+o*a*h,this._z=r*a*h+o*l*s,this._w=r*a*s-o*l*h;break;case\"ZYX\":this._x=o*a*s-r*l*h,this._y=r*l*s+o*a*h,this._z=r*a*h-o*l*s,this._w=r*a*s+o*l*h;break;case\"YZX\":this._x=o*a*s+r*l*h,this._y=r*l*s+o*a*h,this._z=r*a*h-o*l*s,this._w=r*a*s-o*l*h;break;case\"XZY\":this._x=o*a*s-r*l*h,this._y=r*l*s-o*a*h,this._z=r*a*h+o*l*s,this._w=r*a*s+o*l*h;break;default:console.warn(\"THREE.Quaternion: .setFromEuler() encountered an unknown order: \"+d)}return!1!==u&&this._onChangeCallback(),this}},{key:\"setFromAxisAngle\",value:function(e,t){var t=t/2,i=Math.sin(t);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(t),this._onChangeCallback(),this}},{key:\"setFromRotationMatrix\",value:function(e){var e=e.elements,t=e[0],i=e[4],n=e[8],r=e[1],a=e[5],s=e[9],o=e[2],l=e[6],e=e[10],h=t+a+e;return 0<h?(h=.5/Math.sqrt(h+1),this._w=.25/h,this._x=(l-s)*h,this._y=(n-o)*h,this._z=(r-i)*h):a<t&&e<t?(h=2*Math.sqrt(1+t-a-e),this._w=(l-s)/h,this._x=.25*h,this._y=(i+r)/h,this._z=(n+o)/h):e<a?(h=2*Math.sqrt(1+a-t-e),this._w=(n-o)/h,this._x=(i+r)/h,this._y=.25*h,this._z=(s+l)/h):(h=2*Math.sqrt(1+e-t-a),this._w=(r-i)/h,this._x=(n+o)/h,this._y=(s+l)/h,this._z=.25*h),this._onChangeCallback(),this}},{key:\"setFromUnitVectors\",value:function(e,t){var i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0):(this._x=0,this._y=-e.z,this._z=e.y)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x),this._w=i,this.normalize()}},{key:\"angleTo\",value:function(e){return 2*Math.acos(Math.abs(Vt(this.dot(e),-1,1)))}},{key:\"rotateTowards\",value:function(e,t){var i=this.angleTo(e);if(0===i)return this;t=Math.min(1,t/i);return this.slerp(e,t),this}},{key:\"identity\",value:function(){return this.set(0,0,0,1)}},{key:\"invert\",value:function(){return this.conjugate()}},{key:\"conjugate\",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:\"dot\",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:\"lengthSq\",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:\"length\",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:\"normalize\",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(e=1/e),this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:\"multiply\",value:function(e,t){return void 0!==t?(console.warn(\"THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.\"),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}},{key:\"premultiply\",value:function(e){return this.multiplyQuaternions(e,this)}},{key:\"multiplyQuaternions\",value:function(e,t){var i=e._x,n=e._y,r=e._z,e=e._w,a=t._x,s=t._y,o=t._z,t=t._w;return this._x=i*t+e*a+n*o-r*s,this._y=n*t+e*s+r*a-i*o,this._z=r*t+e*o+i*s-n*a,this._w=e*t-i*a-n*s-r*o,this._onChangeCallback(),this}},{key:\"slerp\",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var i=this._x,n=this._y,r=this._z,a=this._w,s=a*e._w+i*e._x+n*e._y+r*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),1<=s)return this._w=a,this._x=i,this._y=n,this._z=r,this;e=1-s*s;if(e<=Number.EPSILON)return this._w=(o=1-t)*a+t*this._w,this._x=o*i+t*this._x,this._y=o*n+t*this._y,this._z=o*r+t*this._z,this.normalize(),this._onChangeCallback(),this;var o=Math.sqrt(e),e=Math.atan2(o,s),s=Math.sin((1-t)*e)/o,t=Math.sin(t*e)/o;return this._w=a*s+this._w*t,this._x=i*s+this._x*t,this._y=n*s+this._y*t,this._z=r*s+this._z*t,this._onChangeCallback(),this}},{key:\"slerpQuaternions\",value:function(e,t,i){this.copy(e).slerp(t,i)}},{key:\"random\",value:function(){var e=Math.random(),t=Math.sqrt(1-e),e=Math.sqrt(e),i=2*Math.PI*Math.random(),n=2*Math.PI*Math.random();return this.set(t*Math.cos(i),e*Math.sin(n),e*Math.cos(n),t*Math.sin(i))}},{key:\"equals\",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:\"fromArray\",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:\"toArray\",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:\"fromBufferAttribute\",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:\"_onChange\",value:function(e){return this._onChangeCallback=e,this}},{key:\"_onChangeCallback\",value:function(){}}],[{key:\"slerp\",value:function(e,t,i,n){return console.warn(\"THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead.\"),i.slerpQuaternions(e,t,n)}},{key:\"slerpFlat\",value:function(e,t,i,n,u,r,c){var d,a,s,o=i[n+0],l=i[n+1],h=i[n+2],i=i[n+3],n=u[r+0],p=u[r+1],f=u[r+2],u=u[r+3];return 0===c?(e[t+0]=o,e[t+1]=l,e[t+2]=h,void(e[t+3]=i)):1===c?(e[t+0]=n,e[t+1]=p,e[t+2]=f,void(e[t+3]=u)):(i===u&&o===n&&l===p&&h===f||(r=1-c,d=0<=(a=o*n+l*p+h*f+i*u)?1:-1,(s=1-a*a)>Number.EPSILON&&(s=Math.sqrt(s),a=Math.atan2(s,a*d),r=Math.sin(r*a)/s,c=Math.sin(c*a)/s),o=o*r+n*(a=c*d),l=l*r+p*a,h=h*r+f*a,i=i*r+u*a,r===1-c&&(o*=s=1/Math.sqrt(o*o+l*l+h*h+i*i),l*=s,h*=s,i*=s)),e[t]=o,e[t+1]=l,e[t+2]=h,void(e[t+3]=i))}},{key:\"multiplyQuaternionsFlat\",value:function(e,t,i,n,r,a){var s=i[n],o=i[n+1],l=i[n+2],i=i[n+3],n=r[a],h=r[a+1],u=r[a+2],r=r[a+3];return e[t]=s*r+i*n+o*u-l*h,e[t+1]=o*r+i*h+l*n-s*u,e[t+2]=l*r+i*u+s*h-o*n,e[t+3]=i*r-s*n-o*h-l*u,e}}]);var Mi=wi;function wi(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;(0,oy.default)(this,wi),this._x=e,this._y=t,this._z=i,this._w=n}Mi.prototype.isQuaternion=!0;qn=Symbol.iterator,(0,ly.default)(Si,[{key:\"set\",value:function(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}},{key:\"setScalar\",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:\"setX\",value:function(e){return this.x=e,this}},{key:\"setY\",value:function(e){return this.y=e,this}},{key:\"setZ\",value:function(e){return this.z=e,this}},{key:\"setComponent\",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error(\"index is out of range: \"+e)}return this}},{key:\"getComponent\",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error(\"index is out of range: \"+e)}}},{key:\"clone\",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:\"copy\",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:\"add\",value:function(e,t){return void 0!==t?(console.warn(\"THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}},{key:\"addScalar\",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:\"addVectors\",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:\"addScaledVector\",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:\"sub\",value:function(e,t){return void 0!==t?(console.warn(\"THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}},{key:\"subScalar\",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:\"subVectors\",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:\"multiply\",value:function(e,t){return void 0!==t?(console.warn(\"THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.\"),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}},{key:\"multiplyScalar\",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:\"multiplyVectors\",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:\"applyEuler\",value:function(e){return e&&e.isEuler||console.error(\"THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.\"),this.applyQuaternion(Ti.setFromEuler(e))}},{key:\"applyAxisAngle\",value:function(e,t){return this.applyQuaternion(Ti.setFromAxisAngle(e,t))}},{key:\"applyMatrix3\",value:function(e){var t=this.x,i=this.y,n=this.z,e=e.elements;return this.x=e[0]*t+e[3]*i+e[6]*n,this.y=e[1]*t+e[4]*i+e[7]*n,this.z=e[2]*t+e[5]*i+e[8]*n,this}},{key:\"applyNormalMatrix\",value:function(e){return this.applyMatrix3(e).normalize()}},{key:\"applyMatrix4\",value:function(e){var t=this.x,i=this.y,n=this.z,e=e.elements,r=1/(e[3]*t+e[7]*i+e[11]*n+e[15]);return this.x=(e[0]*t+e[4]*i+e[8]*n+e[12])*r,this.y=(e[1]*t+e[5]*i+e[9]*n+e[13])*r,this.z=(e[2]*t+e[6]*i+e[10]*n+e[14])*r,this}},{key:\"applyQuaternion\",value:function(e){var t=this.x,i=this.y,n=this.z,r=e.x,a=e.y,s=e.z,e=e.w,o=e*t+a*n-s*i,l=e*i+s*t-r*n,h=e*n+r*i-a*t,t=-r*t-a*i-s*n;return this.x=o*e+t*-r+l*-s-h*-a,this.y=l*e+t*-a+h*-r-o*-s,this.z=h*e+t*-s+o*-a-l*-r,this}},{key:\"project\",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:\"unproject\",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:\"transformDirection\",value:function(e){var t=this.x,i=this.y,n=this.z,e=e.elements;return this.x=e[0]*t+e[4]*i+e[8]*n,this.y=e[1]*t+e[5]*i+e[9]*n,this.z=e[2]*t+e[6]*i+e[10]*n,this.normalize()}},{key:\"divide\",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:\"divideScalar\",value:function(e){return this.multiplyScalar(1/e)}},{key:\"min\",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:\"max\",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:\"clamp\",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:\"clampScalar\",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:\"clampLength\",value:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}},{key:\"floor\",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:\"ceil\",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:\"round\",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:\"roundToZero\",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:\"negate\",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:\"dot\",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:\"lengthSq\",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:\"length\",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:\"manhattanLength\",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:\"normalize\",value:function(){return this.divideScalar(this.length()||1)}},{key:\"setLength\",value:function(e){return this.normalize().multiplyScalar(e)}},{key:\"lerp\",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:\"lerpVectors\",value:function(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}},{key:\"cross\",value:function(e,t){return void 0!==t?(console.warn(\"THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.\"),this.crossVectors(e,t)):this.crossVectors(this,e)}},{key:\"crossVectors\",value:function(e,t){var i=e.x,n=e.y,e=e.z,r=t.x,a=t.y,t=t.z;return this.x=n*t-e*a,this.y=e*r-i*t,this.z=i*a-n*r,this}},{key:\"projectOnVector\",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);t=e.dot(this)/t;return this.copy(e).multiplyScalar(t)}},{key:\"projectOnPlane\",value:function(e){return Ei.copy(this).projectOnVector(e),this.sub(Ei)}},{key:\"reflect\",value:function(e){return this.sub(Ei.copy(e).multiplyScalar(2*this.dot(e)))}},{key:\"angleTo\",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;e=this.dot(e)/t;return Math.acos(Vt(e,-1,1))}},{key:\"distanceTo\",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:\"distanceToSquared\",value:function(e){var t=this.x-e.x,i=this.y-e.y,e=this.z-e.z;return t*t+i*i+e*e}},{key:\"manhattanDistanceTo\",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:\"setFromSpherical\",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:\"setFromSphericalCoords\",value:function(e,t,i){var n=Math.sin(t)*e;return this.x=n*Math.sin(i),this.y=Math.cos(t)*e,this.z=n*Math.cos(i),this}},{key:\"setFromCylindrical\",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:\"setFromCylindricalCoords\",value:function(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}},{key:\"setFromMatrixPosition\",value:function(e){e=e.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}},{key:\"setFromMatrixScale\",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),e=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=e,this}},{key:\"setFromMatrixColumn\",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:\"setFromMatrix3Column\",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:\"equals\",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:\"fromArray\",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:\"toArray\",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:\"fromBufferAttribute\",value:function(e,t,i){return void 0!==i&&console.warn(\"THREE.Vector3: offset has been removed from .fromBufferAttribute().\"),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:\"random\",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:\"randomDirection\",value:function(){var e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,i=Math.sqrt(1-Math.pow(e,2));return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}},{key:qn,value:iy.default.mark(function e(){return iy.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case\"end\":return e.stop()}},e,this)})}]);var Ye=Si;function Si(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;(0,oy.default)(this,Si),this.x=e,this.y=t,this.z=i}Ye.prototype.isVector3=!0;var Ei=new Ye,Ti=new Mi,Ai=((0,ly.default)(ki,[{key:\"set\",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:\"setFromArray\",value:function(e){for(var t=1/0,i=1/0,n=1/0,r=-1/0,a=-1/0,u=-1/0,s=0,c=e.length;s<c;s+=3){var o=e[s],l=e[s+1],h=e[s+2];o<t&&(t=o),l<i&&(i=l),h<n&&(n=h),r<o&&(r=o),a<l&&(a=l),u<h&&(u=h)}return this.min.set(t,i,n),this.max.set(r,a,u),this}},{key:\"setFromBufferAttribute\",value:function(e){for(var t=1/0,i=1/0,n=1/0,r=-1/0,a=-1/0,u=-1/0,s=0,c=e.count;s<c;s++){var o=e.getX(s),l=e.getY(s),h=e.getZ(s);o<t&&(t=o),l<i&&(i=l),h<n&&(n=h),r<o&&(r=o),a<l&&(a=l),u<h&&(u=h)}return this.min.set(t,i,n),this.max.set(r,a,u),this}},{key:\"setFromPoints\",value:function(e){this.makeEmpty();for(var t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}},{key:\"setFromCenterAndSize\",value:function(e,t){t=Li.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(t),this.max.copy(e).add(t),this}},{key:\"setFromObject\",value:function(e){return this.makeEmpty(),this.expandByObject(e)}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}},{key:\"copy\",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:\"makeEmpty\",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:\"isEmpty\",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:\"getCenter\",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:\"getSize\",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:\"expandByPoint\",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:\"expandByVector\",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:\"expandByScalar\",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:\"expandByObject\",value:function(e){e.updateWorldMatrix(!1,!1);var t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),Ci.copy(t.boundingBox),Ci.applyMatrix4(e.matrixWorld),this.union(Ci));for(var i=e.children,n=0,r=i.length;n<r;n++)this.expandByObject(i[n]);return this}},{key:\"containsPoint\",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:\"containsBox\",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:\"getParameter\",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:\"intersectsBox\",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:\"intersectsSphere\",value:function(e){return this.clampPoint(e.center,Li),Li.distanceToSquared(e.center)<=e.radius*e.radius}},{key:\"intersectsPlane\",value:function(e){var t,i=0<e.normal.x?(t=e.normal.x*this.min.x,e.normal.x*this.max.x):(t=e.normal.x*this.max.x,e.normal.x*this.min.x);return 0<e.normal.y?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),0<e.normal.z?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}},{key:\"intersectsTriangle\",value:function(e){return!this.isEmpty()&&(this.getCenter(Ui),Bi.subVectors(this.max,Ui),Pi.subVectors(e.a,Ui),Di.subVectors(e.b,Ui),Ii.subVectors(e.c,Ui),Fi.subVectors(Di,Pi),Ni.subVectors(Ii,Di),Oi.subVectors(Pi,Ii),!!Gi([0,-Fi.z,Fi.y,0,-Ni.z,Ni.y,0,-Oi.z,Oi.y,Fi.z,0,-Fi.x,Ni.z,0,-Ni.x,Oi.z,0,-Oi.x,-Fi.y,Fi.x,0,-Ni.y,Ni.x,0,-Oi.y,Oi.x,0],Pi,Di,Ii,Bi)&&!!Gi([1,0,0,0,1,0,0,0,1],Pi,Di,Ii,Bi)&&(zi.crossVectors(Fi,Ni),Gi([zi.x,zi.y,zi.z],Pi,Di,Ii,Bi)))}},{key:\"clampPoint\",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:\"distanceToPoint\",value:function(e){return Li.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:\"getBoundingSphere\",value:function(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Li).length(),e}},{key:\"intersect\",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:\"union\",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:\"applyMatrix4\",value:function(e){return this.isEmpty()||(Ri[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ri[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ri[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ri[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ri[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ri[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ri[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ri[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ri)),this}},{key:\"translate\",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:\"equals\",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),ki);function ki(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ye(1/0,1/0,1/0),t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ye(-1/0,-1/0,-1/0);(0,oy.default)(this,ki),this.min=e,this.max=t}Ai.prototype.isBox3=!0;var Ri=[new Ye,new Ye,new Ye,new Ye,new Ye,new Ye,new Ye,new Ye],Li=new Ye,Ci=new Ai,Pi=new Ye,Di=new Ye,Ii=new Ye,Fi=new Ye,Ni=new Ye,Oi=new Ye,Ui=new Ye,Bi=new Ye,zi=new Ye,Hi=new Ye;function Gi(e,t,i,n,r){for(var a=0,s=e.length-3;a<=s;a+=3){Hi.fromArray(e,a);var u=r.x*Math.abs(Hi.x)+r.y*Math.abs(Hi.y)+r.z*Math.abs(Hi.z),o=t.dot(Hi),l=i.dot(Hi),h=n.dot(Hi);if(Math.max(-Math.max(o,l,h),Math.min(o,l,h))>u)return!1}return!0}var Vi=new Ai,Wi=new Ye,ji=new Ye,Xi=new Ye,qi=((0,ly.default)(an,[{key:\"set\",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:\"setFromPoints\",value:function(e,t){var i=this.center;void 0!==t?i.copy(t):Vi.setFromPoints(e).getCenter(i);for(var n=0,r=0,a=e.length;r<a;r++)n=Math.max(n,i.distanceToSquared(e[r]));return this.radius=Math.sqrt(n),this}},{key:\"copy\",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:\"isEmpty\",value:function(){return this.radius<0}},{key:\"makeEmpty\",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:\"containsPoint\",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:\"distanceToPoint\",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:\"intersectsSphere\",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:\"intersectsBox\",value:function(e){return e.intersectsSphere(this)}},{key:\"intersectsPlane\",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:\"clampPoint\",value:function(e,t){var i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:\"getBoundingBox\",value:function(e){return this.isEmpty()?e.makeEmpty():(e.set(this.center,this.center),e.expandByScalar(this.radius)),e}},{key:\"applyMatrix4\",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:\"translate\",value:function(e){return this.center.add(e),this}},{key:\"expandByPoint\",value:function(e){Xi.subVectors(e,this.center);var t,e=Xi.lengthSq();return e>this.radius*this.radius&&(t=.5*((e=Math.sqrt(e))-this.radius),this.center.add(Xi.multiplyScalar(t/e)),this.radius+=t),this}},{key:\"union\",value:function(e){return(!0===this.center.equals(e.center)?ji.set(0,0,1):ji.subVectors(e.center,this.center).normalize()).multiplyScalar(e.radius),this.expandByPoint(Wi.copy(e.center).add(ji)),this.expandByPoint(Wi.copy(e.center).sub(ji)),this}},{key:\"equals\",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}}]),an),Yi=new Ye,Ji=new Ye,Zi=new Ye,Ki=new Ye,Qi=new Ye,$i=new Ye,en=new Ye,tn=((0,ly.default)(rn,[{key:\"set\",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:\"copy\",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:\"at\",value:function(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:\"lookAt\",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:\"recast\",value:function(e){return this.origin.copy(this.at(e,Yi)),this}},{key:\"closestPointToPoint\",value:function(e,t){t.subVectors(e,this.origin);e=t.dot(this.direction);return e<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:\"distanceToPoint\",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:\"distanceSqToPoint\",value:function(e){var t=Yi.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Yi.copy(this.direction).multiplyScalar(t).add(this.origin),Yi.distanceToSquared(e))}},{key:\"distanceSqToSegment\",value:function(e,t,i,u){Ji.copy(e).add(t).multiplyScalar(.5),Zi.copy(t).sub(e).normalize(),Ki.copy(this.origin).sub(Ji);var n,r,a,e=.5*e.distanceTo(t),t=-this.direction.dot(Zi),s=Ki.dot(this.direction),o=-Ki.dot(Zi),l=Ki.lengthSq(),h=Math.abs(1-t*t);return h=0<h?(r=t*s-o,a=e*h,0<=(n=t*o-s)?-a<=r?r<=a?(n*=h=1/h)*(n+t*(r*=h)+2*s)+r*(t*n+r+2*o)+l:(r=e,-(n=Math.max(0,-(t*r+s)))*n+r*(r+2*o)+l):(r=-e,-(n=Math.max(0,-(t*r+s)))*n+r*(r+2*o)+l):r<=-a?-(n=Math.max(0,-(-t*e+s)))*n+(r=0<n?-e:Math.min(Math.max(-e,-o),e))*(r+2*o)+l:r<=a?(n=0,(r=Math.min(Math.max(-e,-o),e))*(r+2*o)+l):-(n=Math.max(0,-(t*e+s)))*n+(r=0<n?e:Math.min(Math.max(-e,-o),e))*(r+2*o)+l):(r=0<t?-e:e,-(n=Math.max(0,-(t*r+s)))*n+r*(r+2*o)+l),i&&i.copy(this.direction).multiplyScalar(n).add(this.origin),u&&u.copy(Zi).multiplyScalar(r).add(Ji),h}},{key:\"intersectSphere\",value:function(e,t){Yi.subVectors(e.center,this.origin);var i=Yi.dot(this.direction),n=Yi.dot(Yi)-i*i,e=e.radius*e.radius;if(e<n)return null;e=Math.sqrt(e-n),n=i-e,i+=e;return n<0&&i<0?null:n<0?this.at(i,t):this.at(n,t)}},{key:\"intersectsSphere\",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:\"distanceToPlane\",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;e=-(this.origin.dot(e.normal)+e.constant)/t;return 0<=e?e:null}},{key:\"intersectPlane\",value:function(e,t){e=this.distanceToPlane(e);return null===e?null:this.at(e,t)}},{key:\"intersectsPlane\",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}},{key:\"intersectBox\",value:function(e,t){var i,n,r,a=1/this.direction.x,s=1/this.direction.y,o=1/this.direction.z,l=this.origin,a=0<=a?(i=(e.min.x-l.x)*a,(e.max.x-l.x)*a):(i=(e.max.x-l.x)*a,(e.min.x-l.x)*a),s=0<=s?(r=(e.min.y-l.y)*s,(e.max.y-l.y)*s):(r=(e.max.y-l.y)*s,(e.min.y-l.y)*s);return s<i||a<r?null:((i<r||i!=i)&&(i=r),(s<a||a!=a)&&(a=s),(r=0<=o?(n=(e.min.z-l.z)*o,(e.max.z-l.z)*o):(n=(e.max.z-l.z)*o,(e.min.z-l.z)*o))<i||a<n?null:((i<n||i!=i)&&(i=n),(a=r<a||a!=a?r:a)<0?null:this.at(0<=i?i:a,t)))}},{key:\"intersectsBox\",value:function(e){return null!==this.intersectBox(e,Yi)}},{key:\"intersectTriangle\",value:function(e,t,i,n,r){Qi.subVectors(t,e),$i.subVectors(i,e),en.crossVectors(Qi,$i);var a,t=this.direction.dot(en);if(0<t){if(n)return null;a=1}else{if(!(t<0))return null;a=-1,t=-t}Ki.subVectors(this.origin,e);i=a*this.direction.dot($i.crossVectors(Ki,$i));if(i<0)return null;n=a*this.direction.dot(Qi.cross(Ki));if(n<0)return null;if(t<i+n)return null;e=-a*Ki.dot(en);return e<0?null:this.at(e/t,r)}},{key:\"applyMatrix4\",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:\"equals\",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}}]),rn),Re=((0,ly.default)(nn,[{key:\"set\",value:function(e,t,i,n,r,a,s,o,l,u,c,d,p,f,m,v){var h=this.elements;return h[0]=e,h[4]=t,h[8]=i,h[12]=n,h[1]=r,h[5]=a,h[9]=s,h[13]=o,h[2]=l,h[6]=u,h[10]=c,h[14]=d,h[3]=p,h[7]=f,h[11]=m,h[15]=v,this}},{key:\"identity\",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:\"clone\",value:function(){return(new nn).fromArray(this.elements)}},{key:\"copy\",value:function(e){var t=this.elements,e=e.elements;return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],this}},{key:\"copyPosition\",value:function(e){var t=this.elements,e=e.elements;return t[12]=e[12],t[13]=e[13],t[14]=e[14],this}},{key:\"setFromMatrix3\",value:function(e){e=e.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}},{key:\"extractBasis\",value:function(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}},{key:\"makeBasis\",value:function(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}},{key:\"extractRotation\",value:function(e){var t=this.elements,i=e.elements,n=1/sn.setFromMatrixColumn(e,0).length(),r=1/sn.setFromMatrixColumn(e,1).length(),e=1/sn.setFromMatrixColumn(e,2).length();return t[0]=i[0]*n,t[1]=i[1]*n,t[2]=i[2]*n,t[3]=0,t[4]=i[4]*r,t[5]=i[5]*r,t[6]=i[6]*r,t[7]=0,t[8]=i[8]*e,t[9]=i[9]*e,t[10]=i[10]*e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:\"makeRotationFromEuler\",value:function(u){u&&u.isEuler||console.error(\"THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.\");var e,t,i,c,n=this.elements,r=u.x,a=u.y,s=u.z,o=Math.cos(r),r=Math.sin(r),l=Math.cos(a),a=Math.sin(a),h=Math.cos(s),s=Math.sin(s);return\"XYZ\"===u.order?(t=o*h,i=o*s,c=r*h,e=r*s,n[0]=l*h,n[4]=-l*s,n[8]=a,n[1]=i+c*a,n[5]=t-e*a,n[9]=-r*l,n[2]=e-t*a,n[6]=c+i*a,n[10]=o*l):\"YXZ\"===u.order?(e=l*s,t=a*h,n[0]=(c=l*h)+(i=a*s)*r,n[4]=t*r-e,n[8]=o*a,n[1]=o*s,n[5]=o*h,n[9]=-r,n[2]=e*r-t,n[6]=i+c*r,n[10]=o*l):\"ZXY\"===u.order?(e=l*s,t=a*h,n[0]=(i=l*h)-(c=a*s)*r,n[4]=-o*s,n[8]=t+e*r,n[1]=e+t*r,n[5]=o*h,n[9]=c-i*r,n[2]=-o*a,n[6]=r,n[10]=o*l):\"ZYX\"===u.order?(e=o*h,t=o*s,c=r*h,i=r*s,n[0]=l*h,n[4]=c*a-t,n[8]=e*a+i,n[1]=l*s,n[5]=i*a+e,n[9]=t*a-c,n[2]=-a,n[6]=r*l,n[10]=o*l):\"YZX\"===u.order?(i=o*l,e=o*a,t=r*l,c=r*a,n[0]=l*h,n[4]=c-i*s,n[8]=t*s+e,n[1]=s,n[5]=o*h,n[9]=-r*h,n[2]=-a*h,n[6]=e*s+t,n[10]=i-c*s):\"XZY\"===u.order&&(e=o*l,t=o*a,i=r*l,c=r*a,n[0]=l*h,n[4]=-s,n[8]=a*h,n[1]=e*s+c,n[5]=o*h,n[9]=t*s-i,n[2]=i*s-t,n[6]=r*h,n[10]=c*s+e),n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}},{key:\"makeRotationFromQuaternion\",value:function(e){return this.compose(ln,e,hn)}},{key:\"lookAt\",value:function(e,t,i){var n=this.elements;return dn.subVectors(e,t),0===dn.lengthSq()&&(dn.z=1),dn.normalize(),un.crossVectors(i,dn),0===un.lengthSq()&&(1===Math.abs(i.z)?dn.x+=1e-4:dn.z+=1e-4,dn.normalize(),un.crossVectors(i,dn)),un.normalize(),cn.crossVectors(dn,un),n[0]=un.x,n[4]=cn.x,n[8]=dn.x,n[1]=un.y,n[5]=cn.y,n[9]=dn.y,n[2]=un.z,n[6]=cn.z,n[10]=dn.z,this}},{key:\"multiply\",value:function(e,t){return void 0!==t?(console.warn(\"THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.\"),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}},{key:\"premultiply\",value:function(e){return this.multiplyMatrices(e,this)}},{key:\"multiplyMatrices\",value:function(e,t){var e=e.elements,t=t.elements,i=this.elements,n=e[0],r=e[4],a=e[8],s=e[12],o=e[1],l=e[5],h=e[9],u=e[13],c=e[2],d=e[6],p=e[10],f=e[14],m=e[3],v=e[7],g=e[11],e=e[15],y=t[0],_=t[4],x=t[8],b=t[12],M=t[1],w=t[5],S=t[9],E=t[13],T=t[2],A=t[6],k=t[10],R=t[14],L=t[3],C=t[7],P=t[11],t=t[15];return i[0]=n*y+r*M+a*T+s*L,i[4]=n*_+r*w+a*A+s*C,i[8]=n*x+r*S+a*k+s*P,i[12]=n*b+r*E+a*R+s*t,i[1]=o*y+l*M+h*T+u*L,i[5]=o*_+l*w+h*A+u*C,i[9]=o*x+l*S+h*k+u*P,i[13]=o*b+l*E+h*R+u*t,i[2]=c*y+d*M+p*T+f*L,i[6]=c*_+d*w+p*A+f*C,i[10]=c*x+d*S+p*k+f*P,i[14]=c*b+d*E+p*R+f*t,i[3]=m*y+v*M+g*T+e*L,i[7]=m*_+v*w+g*A+e*C,i[11]=m*x+v*S+g*k+e*P,i[15]=m*b+v*E+g*R+e*t,this}},{key:\"multiplyScalar\",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:\"determinant\",value:function(){var e=this.elements,t=e[0],i=e[4],n=e[8],r=e[12],a=e[1],s=e[5],o=e[9],l=e[13],h=e[2],u=e[6],c=e[10],d=e[14];return e[3]*(+r*o*u-n*l*u-r*s*c+i*l*c+n*s*d-i*o*d)+e[7]*(+t*o*d-t*l*c+r*a*c-n*a*d+n*l*h-r*o*h)+e[11]*(+t*l*u-t*s*d-r*a*u+i*a*d+r*s*h-i*l*h)+e[15]*(-n*s*h-t*o*u+t*s*c+n*a*u-i*a*c+i*o*h)}},{key:\"transpose\",value:function(){var e=this.elements,t=e[1];return e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}},{key:\"setPosition\",value:function(e,t,i){var n=this.elements;return e.isVector3?(n[12]=e.x,n[13]=e.y,n[14]=e.z):(n[12]=e,n[13]=t,n[14]=i),this}},{key:\"invert\",value:function(){var e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],u=e[8],c=e[9],d=e[10],p=e[11],f=e[12],m=e[13],v=e[14],g=e[15],y=c*v*l-m*d*l+m*o*p-s*v*p-c*o*g+s*d*g,_=f*d*l-u*v*l-f*o*p+a*v*p+u*o*g-a*d*g,x=u*m*l-f*c*l+f*s*p-a*m*p-u*s*g+a*c*g,b=f*c*o-u*m*o-f*s*d+a*m*d+u*s*v-a*c*v,h=t*y+i*_+n*x+r*b;if(0==h)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);h=1/h;return e[0]=y*h,e[1]=(m*d*r-c*v*r-m*n*p+i*v*p+c*n*g-i*d*g)*h,e[2]=(s*v*r-m*o*r+m*n*l-i*v*l-s*n*g+i*o*g)*h,e[3]=(c*o*r-s*d*r-c*n*l+i*d*l+s*n*p-i*o*p)*h,e[4]=_*h,e[5]=(u*v*r-f*d*r+f*n*p-t*v*p-u*n*g+t*d*g)*h,e[6]=(f*o*r-a*v*r-f*n*l+t*v*l+a*n*g-t*o*g)*h,e[7]=(a*d*r-u*o*r+u*n*l-t*d*l-a*n*p+t*o*p)*h,e[8]=x*h,e[9]=(f*c*r-u*m*r-f*i*p+t*m*p+u*i*g-t*c*g)*h,e[10]=(a*m*r-f*s*r+f*i*l-t*m*l-a*i*g+t*s*g)*h,e[11]=(u*s*r-a*c*r-u*i*l+t*c*l+a*i*p-t*s*p)*h,e[12]=b*h,e[13]=(u*m*n-f*c*n+f*i*d-t*m*d-u*i*v+t*c*v)*h,e[14]=(f*s*n-a*m*n-f*i*o+t*m*o+a*i*v-t*s*v)*h,e[15]=(a*c*n-u*s*n+u*i*o-t*c*o-a*i*d+t*s*d)*h,this}},{key:\"scale\",value:function(e){var t=this.elements,i=e.x,n=e.y,e=e.z;return t[0]*=i,t[4]*=n,t[8]*=e,t[1]*=i,t[5]*=n,t[9]*=e,t[2]*=i,t[6]*=n,t[10]*=e,t[3]*=i,t[7]*=n,t[11]*=e,this}},{key:\"getMaxScaleOnAxis\",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,e))}},{key:\"makeTranslation\",value:function(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}},{key:\"makeRotationX\",value:function(e){var t=Math.cos(e),e=Math.sin(e);return this.set(1,0,0,0,0,t,-e,0,0,e,t,0,0,0,0,1),this}},{key:\"makeRotationY\",value:function(e){var t=Math.cos(e),e=Math.sin(e);return this.set(t,0,e,0,0,1,0,0,-e,0,t,0,0,0,0,1),this}},{key:\"makeRotationZ\",value:function(e){var t=Math.cos(e),e=Math.sin(e);return this.set(t,-e,0,0,e,t,0,0,0,0,1,0,0,0,0,1),this}},{key:\"makeRotationAxis\",value:function(e,t){var i=Math.cos(t),t=Math.sin(t),n=1-i,r=e.x,a=e.y,e=e.z,s=n*r,o=n*a;return this.set(s*r+i,s*a-t*e,s*e+t*a,0,s*a+t*e,o*a+i,o*e-t*r,0,s*e-t*a,o*e+t*r,n*e*e+i,0,0,0,0,1),this}},{key:\"makeScale\",value:function(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}},{key:\"makeShear\",value:function(e,t,i,n,r,a){return this.set(1,i,r,0,e,1,a,0,t,n,1,0,0,0,0,1),this}},{key:\"compose\",value:function(e,t,i){var n=this.elements,r=t._x,a=t._y,s=t._z,t=t._w,o=r+r,l=a+a,h=s+s,u=r*o,c=r*l,r=r*h,d=a*l,a=a*h,s=s*h,o=t*o,l=t*l,t=t*h,h=i.x,p=i.y,i=i.z;return n[0]=(1-(d+s))*h,n[1]=(c+t)*h,n[2]=(r-l)*h,n[3]=0,n[4]=(c-t)*p,n[5]=(1-(u+s))*p,n[6]=(a+o)*p,n[7]=0,n[8]=(r+l)*i,n[9]=(a-o)*i,n[10]=(1-(u+d))*i,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this}},{key:\"decompose\",value:function(e,t,i){var n=this.elements,r=sn.set(n[0],n[1],n[2]).length(),a=sn.set(n[4],n[5],n[6]).length(),s=sn.set(n[8],n[9],n[10]).length(),e=(this.determinant()<0&&(r=-r),e.x=n[12],e.y=n[13],e.z=n[14],on.copy(this),1/r),n=1/a,o=1/s;return on.elements[0]*=e,on.elements[1]*=e,on.elements[2]*=e,on.elements[4]*=n,on.elements[5]*=n,on.elements[6]*=n,on.elements[8]*=o,on.elements[9]*=o,on.elements[10]*=o,t.setFromRotationMatrix(on),i.x=r,i.y=a,i.z=s,this}},{key:\"makePerspective\",value:function(e,t,i,n,r,a){void 0===a&&console.warn(\"THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.\");var s=this.elements,o=2*r/(i-n),l=(t+e)/(t-e),i=(i+n)/(i-n),n=-(a+r)/(a-r),a=-2*a*r/(a-r);return s[0]=2*r/(t-e),s[4]=0,s[8]=l,s[12]=0,s[1]=0,s[5]=o,s[9]=i,s[13]=0,s[2]=0,s[6]=0,s[10]=n,s[14]=a,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}},{key:\"makeOrthographic\",value:function(e,t,i,n,r,a){var s=this.elements,o=1/(t-e),l=1/(i-n),h=1/(a-r),t=(t+e)*o,e=(i+n)*l,i=(a+r)*h;return s[0]=2*o,s[4]=0,s[8]=0,s[12]=-t,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-e,s[2]=0,s[6]=0,s[10]=-2*h,s[14]=-i,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}},{key:\"equals\",value:function(e){for(var t=this.elements,i=e.elements,n=0;n<16;n++)if(t[n]!==i[n])return!1;return!0}},{key:\"fromArray\",value:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=0;i<16;i++)this.elements[i]=e[i+t];return this}},{key:\"toArray\",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}]),nn);function nn(){(0,oy.default)(this,nn),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error(\"THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.\")}function rn(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ye,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ye(0,0,-1);(0,oy.default)(this,rn),this.origin=e,this.direction=t}function an(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ye,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1;(0,oy.default)(this,an),this.center=e,this.radius=t}Re.prototype.isMatrix4=!0;var sn=new Ye,on=new Re,ln=new Ye(0,0,0),hn=new Ye(1,1,1),un=new Ye,cn=new Ye,dn=new Ye,pn=new Re,fn=new Mi,mn=((0,ly.default)(vn,[{key:\"x\",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:\"y\",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:\"z\",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:\"order\",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:\"set\",value:function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=i,this._order=n,this._onChangeCallback(),this}},{key:\"clone\",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:\"copy\",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:\"setFromRotationMatrix\",value:function(h){var u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._order,c=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],e=h.elements,t=e[0],i=e[4],n=e[8],r=e[1],a=e[5],s=e[9],o=e[2],d=e[6],l=e[10];switch(u){case\"XYZ\":this._y=Math.asin(Vt(n,-1,1)),Math.abs(n)<.9999999?(this._x=Math.atan2(-s,l),this._z=Math.atan2(-i,t)):(this._x=Math.atan2(d,a),this._z=0);break;case\"YXZ\":this._x=Math.asin(-Vt(s,-1,1)),Math.abs(s)<.9999999?(this._y=Math.atan2(n,l),this._z=Math.atan2(r,a)):(this._y=Math.atan2(-o,t),this._z=0);break;case\"ZXY\":this._x=Math.asin(Vt(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-o,l),this._z=Math.atan2(-i,a)):(this._y=0,this._z=Math.atan2(r,t));break;case\"ZYX\":this._y=Math.asin(-Vt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,l),this._z=Math.atan2(r,t)):(this._x=0,this._z=Math.atan2(-i,a));break;case\"YZX\":this._z=Math.asin(Vt(r,-1,1)),Math.abs(r)<.9999999?(this._x=Math.atan2(-s,a),this._y=Math.atan2(-o,t)):(this._x=0,this._y=Math.atan2(n,l));break;case\"XZY\":this._z=Math.asin(-Vt(i,-1,1)),Math.abs(i)<.9999999?(this._x=Math.atan2(d,a),this._y=Math.atan2(n,t)):(this._x=Math.atan2(-s,l),this._y=0);break;default:console.warn(\"THREE.Euler: .setFromRotationMatrix() encountered an unknown order: \"+u)}return this._order=u,!0===c&&this._onChangeCallback(),this}},{key:\"setFromQuaternion\",value:function(e,t,i){return pn.makeRotationFromQuaternion(e),this.setFromRotationMatrix(pn,t,i)}},{key:\"setFromVector3\",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}},{key:\"reorder\",value:function(e){return fn.setFromEuler(this),this.setFromQuaternion(fn,e)}},{key:\"equals\",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:\"fromArray\",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:\"toArray\",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:\"toVector3\",value:function(e){return e?e.set(this._x,this._y,this._z):new Ye(this._x,this._y,this._z)}},{key:\"_onChange\",value:function(e){return this._onChangeCallback=e,this}},{key:\"_onChangeCallback\",value:function(){}}]),vn);function vn(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:vn.DefaultOrder;(0,oy.default)(this,vn),this._x=e,this._y=t,this._z=i,this._order=n}mn.prototype.isEuler=!0,mn.DefaultOrder=\"XYZ\",mn.RotationOrders=[\"XYZ\",\"YZX\",\"ZXY\",\"XZY\",\"YXZ\",\"ZYX\"];(0,ly.default)(Dn,[{key:\"set\",value:function(e){this.mask=(1<<e|0)>>>0}},{key:\"enable\",value:function(e){this.mask|=1<<e|0}},{key:\"enableAll\",value:function(){this.mask=-1}},{key:\"toggle\",value:function(e){this.mask^=1<<e|0}},{key:\"disable\",value:function(e){this.mask&=~(1<<e|0)}},{key:\"disableAll\",value:function(){this.mask=0}},{key:\"test\",value:function(e){return 0!=(this.mask&e.mask)}},{key:\"isEnabled\",value:function(e){return 0!=(this.mask&(1<<e|0))}}]);var gn,yn=Dn,_n=0,xn=new Ye,bn=new Mi,Mn=new Re,wn=new Ye,Sn=new Ye,En=new Ye,Tn=new Mi,An=new Ye(1,0,0),kn=new Ye(0,1,0),Rn=new Ye(0,0,1),Ln={type:\"added\"},Cn={type:\"removed\"},w=((0,ay.default)(Pn,r),gn=hy(Pn),(0,ly.default)(Pn,[{key:\"onBeforeRender\",value:function(){}},{key:\"onAfterRender\",value:function(){}},{key:\"applyMatrix4\",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:\"applyQuaternion\",value:function(e){return this.quaternion.premultiply(e),this}},{key:\"setRotationFromAxisAngle\",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:\"setRotationFromEuler\",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:\"setRotationFromMatrix\",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:\"setRotationFromQuaternion\",value:function(e){this.quaternion.copy(e)}},{key:\"rotateOnAxis\",value:function(e,t){return bn.setFromAxisAngle(e,t),this.quaternion.multiply(bn),this}},{key:\"rotateOnWorldAxis\",value:function(e,t){return bn.setFromAxisAngle(e,t),this.quaternion.premultiply(bn),this}},{key:\"rotateX\",value:function(e){return this.rotateOnAxis(An,e)}},{key:\"rotateY\",value:function(e){return this.rotateOnAxis(kn,e)}},{key:\"rotateZ\",value:function(e){return this.rotateOnAxis(Rn,e)}},{key:\"translateOnAxis\",value:function(e,t){return xn.copy(e).applyQuaternion(this.quaternion),this.position.add(xn.multiplyScalar(t)),this}},{key:\"translateX\",value:function(e){return this.translateOnAxis(An,e)}},{key:\"translateY\",value:function(e){return this.translateOnAxis(kn,e)}},{key:\"translateZ\",value:function(e){return this.translateOnAxis(Rn,e)}},{key:\"localToWorld\",value:function(e){return e.applyMatrix4(this.matrixWorld)}},{key:\"worldToLocal\",value:function(e){return e.applyMatrix4(Mn.copy(this.matrixWorld).invert())}},{key:\"lookAt\",value:function(e,t,i){e.isVector3?wn.copy(e):wn.set(e,t,i);e=this.parent;this.updateWorldMatrix(!0,!1),Sn.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Mn.lookAt(Sn,wn,this.up):Mn.lookAt(wn,Sn,this.up),this.quaternion.setFromRotationMatrix(Mn),e&&(Mn.extractRotation(e.matrixWorld),bn.setFromRotationMatrix(Mn),this.quaternion.premultiply(bn.invert()))}},{key:\"add\",value:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?console.error(\"THREE.Object3D.add: object can't be added as a child of itself.\",e):e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),(e.parent=this).children.push(e),e.dispatchEvent(Ln)):console.error(\"THREE.Object3D.add: object not an instance of THREE.Object3D.\",e),this}},{key:\"remove\",value:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var i=this.children.indexOf(e);return-1!==i&&(e.parent=null,this.children.splice(i,1),e.dispatchEvent(Cn)),this}},{key:\"removeFromParent\",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:\"clear\",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.parent=null,t.dispatchEvent(Cn)}return this.children.length=0,this}},{key:\"attach\",value:function(e){return this.updateWorldMatrix(!0,!1),Mn.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Mn.multiply(e.parent.matrixWorld)),e.applyMatrix4(Mn),this.add(e),e.updateWorldMatrix(!1,!0),this}},{key:\"getObjectById\",value:function(e){return this.getObjectByProperty(\"id\",e)}},{key:\"getObjectByName\",value:function(e){return this.getObjectByProperty(\"name\",e)}},{key:\"getObjectByProperty\",value:function(e,t){if(this[e]===t)return this;for(var i=0,n=this.children.length;i<n;i++){var r=this.children[i].getObjectByProperty(e,t);if(void 0!==r)return r}}},{key:\"getWorldPosition\",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:\"getWorldQuaternion\",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Sn,e,En),e}},{key:\"getWorldScale\",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Sn,Tn,e),e}},{key:\"getWorldDirection\",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:\"raycast\",value:function(){}},{key:\"traverse\",value:function(e){e(this);for(var t=this.children,i=0,n=t.length;i<n;i++)t[i].traverse(e)}},{key:\"traverseVisible\",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,i=0,n=t.length;i<n;i++)t[i].traverseVisible(e)}}},{key:\"traverseAncestors\",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:\"updateMatrix\",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:\"updateMatrixWorld\",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e=!(this.matrixWorldNeedsUpdate=!1));for(var t=this.children,i=0,n=t.length;i<n;i++)t[i].updateMatrixWorld(e)}},{key:\"updateWorldMatrix\",value:function(e,t){var i=this.parent;if(!0===e&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var n=this.children,r=0,a=n.length;r<a;r++)n[r].updateWorldMatrix(!1,!0)}},{key:\"toJSON\",value:function(i){var e,t,u,c,d,n=void 0===i||\"string\"==typeof i,r={},a=(n&&(i={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},r.metadata={version:4.5,type:\"Object\",generator:\"Object3D.toJSON\"}),{});function s(e,t){return void 0===e[t.uuid]&&(e[t.uuid]=t.toJSON(i)),t.uuid}if(a.uuid=this.uuid,a.type=this.type,\"\"!==this.name&&(a.name=this.name),!0===this.castShadow&&(a.castShadow=!0),!0===this.receiveShadow&&(a.receiveShadow=!0),!1===this.visible&&(a.visible=!1),!1===this.frustumCulled&&(a.frustumCulled=!1),0!==this.renderOrder&&(a.renderOrder=this.renderOrder),\"{}\"!==JSON.stringify(this.userData)&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type=\"InstancedMesh\",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(a.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(i).uuid)),this.environment&&this.environment.isTexture&&(a.environment=this.environment.toJSON(i).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=s(i.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var l=o.shapes;if(Array.isArray(l))for(var p=0,f=l.length;p<f;p++){var m=l[p];s(i.shapes,m)}else s(i.shapes,l)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(s(i.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var v=[],g=0,y=this.material.length;g<y;g++)v.push(s(i.materials,this.material[g]));a.material=v}else a.material=s(i.materials,this.material);if(0<this.children.length){a.children=[];for(var _=0;_<this.children.length;_++)a.children.push(this.children[_].toJSON(i).object)}if(0<this.animations.length){a.animations=[];for(var x=0;x<this.animations.length;x++){var b=this.animations[x];a.animations.push(s(i.animations,b))}}return n&&(o=h(i.geometries),n=h(i.materials),e=h(i.textures),t=h(i.images),u=h(i.shapes),c=h(i.skeletons),d=h(i.animations),0<o.length&&(r.geometries=o),0<n.length&&(r.materials=n),0<e.length&&(r.textures=e),0<t.length&&(r.images=t),0<u.length&&(r.shapes=u),0<c.length&&(r.skeletons=c),0<d.length&&(r.animations=d)),r.object=a,r;function h(e){var t,i=[];for(t in e){var n=e[t];delete n.metadata,i.push(n)}return i}}},{key:\"clone\",value:function(e){return(new this.constructor).copy(this,e)}},{key:\"copy\",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var i=0;i<e.children.length;i++){var n=e.children[i];this.add(n.clone())}return this}}]),Pn);function Pn(){(0,oy.default)(this,Pn),e=gn.call(this),Object.defineProperty((0,dy.default)(e),\"id\",{value:_n++}),e.uuid=Gt(),e.name=\"\",e.type=\"Object3D\",e.parent=null,e.children=[],e.up=Pn.DefaultUp.clone();var e,t=new Ye,i=new mn,n=new Mi,r=new Ye(1,1,1);return i._onChange(function(){n.setFromEuler(i,!1)}),n._onChange(function(){i.setFromQuaternion(n,void 0,!1)}),Object.defineProperties((0,dy.default)(e),{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Re},normalMatrix:{value:new Kt}}),e.matrix=new Re,e.matrixWorld=new Re,e.matrixAutoUpdate=Pn.DefaultMatrixAutoUpdate,e.matrixWorldNeedsUpdate=!1,e.layers=new yn,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}function Dn(){(0,oy.default)(this,Dn),this.mask=1}w.DefaultUp=new Ye(0,1,0),w.DefaultMatrixAutoUpdate=!0,w.prototype.isObject3D=!0;var In,Fn=new Ye,Nn=new Ye,On=new Ye,Un=new Ye,Bn=new Ye,zn=new Ye,Hn=new Ye,Gn=new Ye,Vn=new Ye,Wn=new Ye,jn=((0,ly.default)(Jn,[{key:\"set\",value:function(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}},{key:\"setFromPointsAndIndices\",value:function(e,t,i,n){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[n]),this}},{key:\"setFromAttributeAndIndices\",value:function(e,t,i,n){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,n),this}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}},{key:\"copy\",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:\"getArea\",value:function(){return Fn.subVectors(this.c,this.b),Nn.subVectors(this.a,this.b),.5*Fn.cross(Nn).length()}},{key:\"getMidpoint\",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:\"getNormal\",value:function(e){return Jn.getNormal(this.a,this.b,this.c,e)}},{key:\"getPlane\",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:\"getBarycoord\",value:function(e,t){return Jn.getBarycoord(e,this.a,this.b,this.c,t)}},{key:\"getUV\",value:function(e,t,i,n,r){return Jn.getUV(e,this.a,this.b,this.c,t,i,n,r)}},{key:\"containsPoint\",value:function(e){return Jn.containsPoint(e,this.a,this.b,this.c)}},{key:\"isFrontFacing\",value:function(e){return Jn.isFrontFacing(this.a,this.b,this.c,e)}},{key:\"intersectsBox\",value:function(e){return e.intersectsTriangle(this)}},{key:\"closestPointToPoint\",value:function(e,t){var i=this.a,n=this.b,r=this.c,a=(Bn.subVectors(n,i),zn.subVectors(r,i),Gn.subVectors(e,i),Bn.dot(Gn)),s=zn.dot(Gn);if(a<=0&&s<=0)return t.copy(i);Vn.subVectors(e,n);var o=Bn.dot(Vn),l=zn.dot(Vn);if(0<=o&&l<=o)return t.copy(n);var u=a*l-o*s;if(u<=0&&0<=a&&o<=0)return c=a/(a-o),t.copy(i).addScaledVector(Bn,c);Wn.subVectors(e,r);var e=Bn.dot(Wn),h=zn.dot(Wn);if(0<=h&&e<=h)return t.copy(r);a=e*s-a*h;if(a<=0&&0<=s&&h<=0)return d=s/(s-h),t.copy(i).addScaledVector(zn,d);s=o*h-e*l;if(s<=0&&0<=l-o&&0<=e-h)return Hn.subVectors(r,n),d=(l-o)/(l-o+(e-h)),t.copy(n).addScaledVector(Hn,d);var r=1/(s+a+u),c=a*r,d=u*r;return t.copy(i).addScaledVector(Bn,c).addScaledVector(zn,d)}},{key:\"equals\",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:\"getNormal\",value:function(e,t,i,n){n.subVectors(i,t),Fn.subVectors(e,t),n.cross(Fn);i=n.lengthSq();return 0<i?n.multiplyScalar(1/Math.sqrt(i)):n.set(0,0,0)}},{key:\"getBarycoord\",value:function(e,t,i,n,r){Fn.subVectors(n,t),Nn.subVectors(i,t),On.subVectors(e,t);var n=Fn.dot(Fn),i=Fn.dot(Nn),e=Fn.dot(On),t=Nn.dot(Nn),a=Nn.dot(On),s=n*t-i*i;if(0==s)return r.set(-2,-1,-1);s=1/s,t=(t*e-i*a)*s,n=(n*a-i*e)*s;return r.set(1-t-n,n,t)}},{key:\"containsPoint\",value:function(e,t,i,n){return this.getBarycoord(e,t,i,n,Un),0<=Un.x&&0<=Un.y&&Un.x+Un.y<=1}},{key:\"getUV\",value:function(e,t,i,n,r,a,s,o){return this.getBarycoord(e,t,i,n,Un),o.set(0,0),o.addScaledVector(r,Un.x),o.addScaledVector(a,Un.y),o.addScaledVector(s,Un.z),o}},{key:\"isFrontFacing\",value:function(e,t,i,n){return Fn.subVectors(i,t),Nn.subVectors(e,t),Fn.cross(Nn).dot(n)<0}}]),Jn),Xn=0,qn=((0,ay.default)(Yn,r),In=hy(Yn),(0,ly.default)(Yn,[{key:\"alphaTest\",get:function(){return this._alphaTest},set:function(e){0<this._alphaTest!=0<e&&this.version++,this._alphaTest=e}},{key:\"onBuild\",value:function(){}},{key:\"onBeforeRender\",value:function(){}},{key:\"onBeforeCompile\",value:function(){}},{key:\"customProgramCacheKey\",value:function(){return this.onBeforeCompile.toString()}},{key:\"setValues\",value:function(e){if(void 0!==e)for(var t in e){var i,n=e[t];void 0!==n?\"shading\"!==t?void 0!==(i=this[t])?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn(\"THREE.\"+this.type+\": '\"+t+\"' is not a property of this material.\"):(console.warn(\"THREE.\"+this.type+\": .shading has been removed. Use the boolean .flatShading instead.\"),this.flatShading=1===n):console.warn(\"THREE.Material: '\"+t+\"' parameter is undefined.\")}}},{key:\"toJSON\",value:function(e){var t=void 0===e||\"string\"==typeof e,i=(t&&(e={textures:{},images:{}}),{metadata:{version:4.5,type:\"Material\",generator:\"Material.toJSON\"}});function n(e){var t,i=[];for(t in e){var n=e[t];delete n.metadata,i.push(n)}return i}return i.uuid=this.uuid,i.type=this.type,\"\"!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==X&&(i.blending=this.blending),this.side!==Ce&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.format!==We&&(i.format=this.format),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),0<this.alphaTest&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),1<this.wireframeLinewidth&&(i.wireframeLinewidth=this.wireframeLinewidth),\"round\"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),\"round\"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),\"{}\"!==JSON.stringify(this.userData)&&(i.userData=this.userData),t&&(t=n(e.textures),e=n(e.images),0<t.length&&(i.textures=t),0<e.length&&(i.images=e)),i}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}},{key:\"copy\",value:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,i=null;if(null!==t)for(var n=t.length,i=new Array(n),r=0;r!==n;++r)i[r]=t[r].clone();return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:\"dispose\",value:function(){this.dispatchEvent({type:\"dispose\"})}},{key:\"needsUpdate\",set:function(e){!0===e&&this.version++}}]),Yn);function Yn(){var e;return(0,oy.default)(this,Yn),e=In.call(this),Object.defineProperty((0,dy.default)(e),\"id\",{value:Xn++}),e.uuid=Gt(),e.name=\"\",e.type=\"Material\",e.fog=!0,e.blending=X,e.side=Ce,e.vertexColors=!1,e.opacity=1,e.format=We,e.transparent=!1,e.blendSrc=oe,e.blendDst=le,e.blendEquation=K,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.depthFunc=ge,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=519,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=7680,e.stencilZFail=7680,e.stencilZPass=7680,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}function Jn(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ye,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ye,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new Ye;(0,oy.default)(this,Jn),this.a=e,this.b=t,this.c=i}qn.prototype.isMaterial=!0;var Zn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Kn={h:0,s:0,l:0},Qn={h:0,s:0,l:0};function $n(e,t,i){return i<0&&(i+=1),1<i&&--i,i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+6*(t-e)*(2/3-i):e}function er(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function tr(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}(0,ly.default)(ir,[{key:\"set\",value:function(e){return e&&e.isColor?this.copy(e):\"number\"==typeof e?this.setHex(e):\"string\"==typeof e&&this.setStyle(e),this}},{key:\"setScalar\",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:\"setHex\",value:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}},{key:\"setRGB\",value:function(e,t,i){return this.r=e,this.g=t,this.b=i,this}},{key:\"setHSL\",value:function(e,t,i){return e=Wt(e,1),t=Vt(t,0,1),i=Vt(i,0,1),0===t?this.r=this.g=this.b=i:(this.r=$n(t=2*i-(i=i<=.5?i*(1+t):i+t-i*t),i,e+1/3),this.g=$n(t,i,e),this.b=$n(t,i,e-1/3)),this}},{key:\"setStyle\",value:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn(\"THREE.Color: Alpha component of \"+t+\" will be ignored.\")}if(l=/^((?:rgb|hsl)a?)\\(([^\\)]*)\\)/.exec(t)){var i,n,r,a,s=l[1],o=l[2];switch(s){case\"rgb\":case\"rgba\":if(i=/^\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[4]),this;if(i=/^\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[4]),this;break;case\"hsl\":case\"hsla\":if(i=/^\\s*(\\d*\\.?\\d+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec(o))return n=parseFloat(i[1])/360,r=parseInt(i[2],10)/100,a=parseInt(i[3],10)/100,e(i[4]),this.setHSL(n,r,a)}}else if(l=/^\\#([A-Fa-f\\d]+)$/.exec(t)){var s=l[1],l=s.length;if(3===l)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,this}return t&&0<t.length?this.setColorName(t):this}},{key:\"setColorName\",value:function(e){var t=Zn[e.toLowerCase()];return void 0!==t?this.setHex(t):console.warn(\"THREE.Color: Unknown color \"+e),this}},{key:\"clone\",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:\"copy\",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:\"copySRGBToLinear\",value:function(e){return this.r=er(e.r),this.g=er(e.g),this.b=er(e.b),this}},{key:\"copyLinearToSRGB\",value:function(e){return this.r=tr(e.r),this.g=tr(e.g),this.b=tr(e.b),this}},{key:\"convertSRGBToLinear\",value:function(){return this.copySRGBToLinear(this),this}},{key:\"convertLinearToSRGB\",value:function(){return this.copyLinearToSRGB(this),this}},{key:\"getHex\",value:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}},{key:\"getHexString\",value:function(){return(\"000000\"+this.getHex().toString(16)).slice(-6)}},{key:\"getHSL\",value:function(e){var t,i=this.r,n=this.g,r=this.b,a=Math.max(i,n,r),s=Math.min(i,n,r),o=(s+a)/2;if(s===a)h=t=0;else{var l=a-s,h=o<=.5?l/(a+s):l/(2-a-s);switch(a){case i:t=(n-r)/l+(n<r?6:0);break;case n:t=(r-i)/l+2;break;case r:t=(i-n)/l+4}t/=6}return e.h=t,e.s=h,e.l=o,e}},{key:\"getStyle\",value:function(){return\"rgb(\"+(255*this.r|0)+\",\"+(255*this.g|0)+\",\"+(255*this.b|0)+\")\"}},{key:\"offsetHSL\",value:function(e,t,i){return this.getHSL(Kn),Kn.h+=e,Kn.s+=t,Kn.l+=i,this.setHSL(Kn.h,Kn.s,Kn.l),this}},{key:\"add\",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:\"addColors\",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:\"addScalar\",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:\"sub\",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:\"multiply\",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:\"multiplyScalar\",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:\"lerp\",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:\"lerpColors\",value:function(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}},{key:\"lerpHSL\",value:function(e,t){this.getHSL(Kn),e.getHSL(Qn);var e=jt(Kn.h,Qn.h,t),i=jt(Kn.s,Qn.s,t),t=jt(Kn.l,Qn.l,t);return this.setHSL(e,i,t),this}},{key:\"equals\",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:\"fromArray\",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:\"toArray\",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:\"fromBufferAttribute\",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:\"toJSON\",value:function(){return this.getHex()}}]);var S=ir;function ir(e,t,i){return(0,oy.default)(this,ir),void 0===t&&void 0===i?this.set(e):this.setRGB(e,t,i)}S.NAMES=Zn,S.prototype.isColor=!0,S.prototype.r=1,S.prototype.g=1,S.prototype.b=1;(0,ay.default)(ar,qn),nr=hy(ar),(0,ly.default)(ar,[{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(ar.prototype),\"copy\",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]);var nr,rr=ar;function ar(e){var t;return(0,oy.default)(this,ar),(t=nr.call(this)).type=\"MeshBasicMaterial\",t.color=new S(16777215),t.map=null,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=null,t.aoMapIntensity=1,t.specularMap=null,t.alphaMap=null,t.envMap=null,t.combine=b,t.reflectivity=1,t.refractionRatio=.98,t.wireframe=!1,t.wireframeLinewidth=1,t.wireframeLinecap=\"round\",t.wireframeLinejoin=\"round\",t.setValues(e),t}rr.prototype.isMeshBasicMaterial=!0;var sr=new Ye,or=new qe,lr=((0,ly.default)(hr,[{key:\"onUploadCallback\",value:function(){}},{key:\"needsUpdate\",set:function(e){!0===e&&this.version++}},{key:\"setUsage\",value:function(e){return this.usage=e,this}},{key:\"copy\",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:\"copyAt\",value:function(e,t,i){e*=this.itemSize,i*=t.itemSize;for(var n=0,r=this.itemSize;n<r;n++)this.array[e+n]=t.array[i+n];return this}},{key:\"copyArray\",value:function(e){return this.array.set(e),this}},{key:\"copyColorsArray\",value:function(e){for(var t=this.array,i=0,n=0,r=e.length;n<r;n++){var a=e[n];void 0===a&&(console.warn(\"THREE.BufferAttribute.copyColorsArray(): color is undefined\",n),a=new S),t[i++]=a.r,t[i++]=a.g,t[i++]=a.b}return this}},{key:\"copyVector2sArray\",value:function(e){for(var t=this.array,i=0,n=0,r=e.length;n<r;n++){var a=e[n];void 0===a&&(console.warn(\"THREE.BufferAttribute.copyVector2sArray(): vector is undefined\",n),a=new qe),t[i++]=a.x,t[i++]=a.y}return this}},{key:\"copyVector3sArray\",value:function(e){for(var t=this.array,i=0,n=0,r=e.length;n<r;n++){var a=e[n];void 0===a&&(console.warn(\"THREE.BufferAttribute.copyVector3sArray(): vector is undefined\",n),a=new Ye),t[i++]=a.x,t[i++]=a.y,t[i++]=a.z}return this}},{key:\"copyVector4sArray\",value:function(e){for(var t=this.array,i=0,n=0,r=e.length;n<r;n++){var a=e[n];void 0===a&&(console.warn(\"THREE.BufferAttribute.copyVector4sArray(): vector is undefined\",n),a=new ci),t[i++]=a.x,t[i++]=a.y,t[i++]=a.z,t[i++]=a.w}return this}},{key:\"applyMatrix3\",value:function(e){if(2===this.itemSize)for(var t=0,i=this.count;t<i;t++)or.fromBufferAttribute(this,t),or.applyMatrix3(e),this.setXY(t,or.x,or.y);else if(3===this.itemSize)for(var n=0,r=this.count;n<r;n++)sr.fromBufferAttribute(this,n),sr.applyMatrix3(e),this.setXYZ(n,sr.x,sr.y,sr.z);return this}},{key:\"applyMatrix4\",value:function(e){for(var t=0,i=this.count;t<i;t++)sr.x=this.getX(t),sr.y=this.getY(t),sr.z=this.getZ(t),sr.applyMatrix4(e),this.setXYZ(t,sr.x,sr.y,sr.z);return this}},{key:\"applyNormalMatrix\",value:function(e){for(var t=0,i=this.count;t<i;t++)sr.x=this.getX(t),sr.y=this.getY(t),sr.z=this.getZ(t),sr.applyNormalMatrix(e),this.setXYZ(t,sr.x,sr.y,sr.z);return this}},{key:\"transformDirection\",value:function(e){for(var t=0,i=this.count;t<i;t++)sr.x=this.getX(t),sr.y=this.getY(t),sr.z=this.getZ(t),sr.transformDirection(e),this.setXYZ(t,sr.x,sr.y,sr.z);return this}},{key:\"set\",value:function(e){return this.array.set(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0),this}},{key:\"getX\",value:function(e){return this.array[e*this.itemSize]}},{key:\"setX\",value:function(e,t){return this.array[e*this.itemSize]=t,this}},{key:\"getY\",value:function(e){return this.array[e*this.itemSize+1]}},{key:\"setY\",value:function(e,t){return this.array[e*this.itemSize+1]=t,this}},{key:\"getZ\",value:function(e){return this.array[e*this.itemSize+2]}},{key:\"setZ\",value:function(e,t){return this.array[e*this.itemSize+2]=t,this}},{key:\"getW\",value:function(e){return this.array[e*this.itemSize+3]}},{key:\"setW\",value:function(e,t){return this.array[e*this.itemSize+3]=t,this}},{key:\"setXY\",value:function(e,t,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this}},{key:\"setXYZ\",value:function(e,t,i,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this}},{key:\"setXYZW\",value:function(e,t,i,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this.array[e+3]=r,this}},{key:\"onUpload\",value:function(e){return this.onUploadCallback=e,this}},{key:\"clone\",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:\"toJSON\",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return\"\"!==this.name&&(e.name=this.name),this.usage!==n&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}]),hr);function hr(e,t,i){if((0,oy.default)(this,hr),Array.isArray(e))throw new TypeError(\"THREE.BufferAttribute: array should be a Typed Array.\");this.name=\"\",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===i,this.usage=n,this.updateRange={offset:0,count:-1},this.version=0}lr.prototype.isBufferAttribute=!0;(0,ay.default)(Dr,lr),gr=hy(Dr);var ur,cr,dr,pr,fr,mr,vr,gr,yr=(0,ly.default)(Dr),_r=((0,ay.default)(Pr,lr),vr=hy(Pr),(0,ly.default)(Pr)),xr=((0,ay.default)(Cr,lr),mr=hy(Cr),(0,ly.default)(Cr)),br=((0,ay.default)(Lr,lr),fr=hy(Lr),(0,ly.default)(Lr)),Mr=((0,ay.default)(Rr,lr),pr=hy(Rr),(0,ly.default)(Rr)),wr=((0,ay.default)(kr,lr),dr=hy(kr),(0,ly.default)(kr)),Sr=((0,ay.default)(Ar,lr),cr=hy(Ar),(0,ly.default)(Ar)),Er=((0,ay.default)(Tr,lr),ur=hy(Tr),(0,ly.default)(Tr));function Tr(e,t,i){return(0,oy.default)(this,Tr),ur.call(this,new Uint16Array(e),t,i)}function Ar(e,t,i){return(0,oy.default)(this,Ar),cr.call(this,new Uint32Array(e),t,i)}function kr(e,t,i){return(0,oy.default)(this,kr),dr.call(this,new Int32Array(e),t,i)}function Rr(e,t,i){return(0,oy.default)(this,Rr),pr.call(this,new Uint16Array(e),t,i)}function Lr(e,t,i){return(0,oy.default)(this,Lr),fr.call(this,new Int16Array(e),t,i)}function Cr(e,t,i){return(0,oy.default)(this,Cr),mr.call(this,new Uint8ClampedArray(e),t,i)}function Pr(e,t,i){return(0,oy.default)(this,Pr),vr.call(this,new Uint8Array(e),t,i)}function Dr(e,t,i){return(0,oy.default)(this,Dr),gr.call(this,new Int8Array(e),t,i)}Er.prototype.isFloat16BufferAttribute=!0;(0,ay.default)(qr,lr),Nr=hy(qr);var Ir,Fr,Nr,$=(0,ly.default)(qr),Or=((0,ay.default)(Xr,lr),Fr=hy(Xr),(0,ly.default)(Xr)),Ur=0,Br=new Re,zr=new w,Hr=new Ye,Gr=new Ai,Vr=new Ai,Wr=new Ye,R=((0,ay.default)(jr,r),Ir=hy(jr),(0,ly.default)(jr,[{key:\"getIndex\",value:function(){return this.index}},{key:\"setIndex\",value:function(e){return Array.isArray(e)?this.index=new(65535<$t(e)?Sr:Mr)(e,1):this.index=e,this}},{key:\"getAttribute\",value:function(e){return this.attributes[e]}},{key:\"setAttribute\",value:function(e,t){return this.attributes[e]=t,this}},{key:\"deleteAttribute\",value:function(e){return delete this.attributes[e],this}},{key:\"hasAttribute\",value:function(e){return void 0!==this.attributes[e]}},{key:\"addGroup\",value:function(e,t){this.groups.push({start:e,count:t,materialIndex:2<arguments.length&&void 0!==arguments[2]?arguments[2]:0})}},{key:\"clearGroups\",value:function(){this.groups=[]}},{key:\"setDrawRange\",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:\"applyMatrix4\",value:function(e){var t=this.attributes.position,t=(void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0),this.attributes.normal),i=(void 0!==t&&(i=(new Kt).getNormalMatrix(e),t.applyNormalMatrix(i),t.needsUpdate=!0),this.attributes.tangent);return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:\"applyQuaternion\",value:function(e){return Br.makeRotationFromQuaternion(e),this.applyMatrix4(Br),this}},{key:\"rotateX\",value:function(e){return Br.makeRotationX(e),this.applyMatrix4(Br),this}},{key:\"rotateY\",value:function(e){return Br.makeRotationY(e),this.applyMatrix4(Br),this}},{key:\"rotateZ\",value:function(e){return Br.makeRotationZ(e),this.applyMatrix4(Br),this}},{key:\"translate\",value:function(e,t,i){return Br.makeTranslation(e,t,i),this.applyMatrix4(Br),this}},{key:\"scale\",value:function(e,t,i){return Br.makeScale(e,t,i),this.applyMatrix4(Br),this}},{key:\"lookAt\",value:function(e){return zr.lookAt(e),zr.updateMatrix(),this.applyMatrix4(zr.matrix),this}},{key:\"center\",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Hr).negate(),this.translate(Hr.x,Hr.y,Hr.z),this}},{key:\"setFromPoints\",value:function(e){for(var t=[],i=0,n=e.length;i<n;i++){var r=e[i];t.push(r.x,r.y,r.z||0)}return this.setAttribute(\"position\",new $(t,3)),this}},{key:\"computeBoundingBox\",value:function(){null===this.boundingBox&&(this.boundingBox=new Ai);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set \"mesh.frustumCulled\" to \"false\".',this),void this.boundingBox.set(new Ye(-1/0,-1/0,-1/0),new Ye(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var i=0,n=t.length;i<n;i++){var r=t[i];Gr.setFromBufferAttribute(r),this.morphTargetsRelative?(Wr.addVectors(this.boundingBox.min,Gr.min),this.boundingBox.expandByPoint(Wr),Wr.addVectors(this.boundingBox.max,Gr.max),this.boundingBox.expandByPoint(Wr)):(this.boundingBox.expandByPoint(Gr.min),this.boundingBox.expandByPoint(Gr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.',this)}},{key:\"computeBoundingSphere\",value:function(){null===this.boundingSphere&&(this.boundingSphere=new qi);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set \"mesh.frustumCulled\" to \"false\".',this),void this.boundingSphere.set(new Ye,1/0);if(e){var i=this.boundingSphere.center;if(Gr.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var u=t[n];Vr.setFromBufferAttribute(u),this.morphTargetsRelative?(Wr.addVectors(Gr.min,Vr.min),Gr.expandByPoint(Wr),Wr.addVectors(Gr.max,Vr.max),Gr.expandByPoint(Wr)):(Gr.expandByPoint(Vr.min),Gr.expandByPoint(Vr.max))}Gr.getCenter(i);for(var a=0,s=0,c=e.count;s<c;s++)Wr.fromBufferAttribute(e,s),a=Math.max(a,i.distanceToSquared(Wr));if(t)for(var o=0,d=t.length;o<d;o++)for(var l=t[o],p=this.morphTargetsRelative,h=0,f=l.count;h<f;h++)Wr.fromBufferAttribute(l,h),p&&(Hr.fromBufferAttribute(e,h),Wr.add(Hr)),a=Math.max(a,i.distanceToSquared(Wr));this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.',this)}}},{key:\"computeTangents\",value:function(){var e,t,i,n,u=this.index,r=this.attributes;if(null!==u&&void 0!==r.position&&void 0!==r.normal&&void 0!==r.uv){var a=u.array,c=r.position.array,d=r.normal.array,p=r.uv.array,f=c.length/3;void 0===r.tangent&&this.setAttribute(\"tangent\",new lr(new Float32Array(4*f),4));for(var m=r.tangent.array,s=[],v=[],g=0;g<f;g++)s[g]=new Ye,v[g]=new Ye;for(var y=new Ye,_=new Ye,x=new Ye,b=new qe,o=new qe,l=new qe,M=new Ye,w=new Ye,h=this.groups,S=0,E=(h=0===h.length?[{start:0,count:a.length}]:h).length;S<E;++S)for(var T=h[S],A=T.start,k=A,R=A+T.count;k<R;k+=3)e=a[k+0],t=a[k+1],i=a[k+2],n=void 0,y.fromArray(c,3*e),_.fromArray(c,3*t),x.fromArray(c,3*i),b.fromArray(p,2*e),o.fromArray(p,2*t),l.fromArray(p,2*i),_.sub(y),x.sub(y),o.sub(b),l.sub(b),n=1/(o.x*l.y-l.x*o.y),isFinite(n)&&(M.copy(_).multiplyScalar(l.y).addScaledVector(x,-o.y).multiplyScalar(n),w.copy(x).multiplyScalar(o.x).addScaledVector(_,-l.x).multiplyScalar(n),s[e].add(M),s[t].add(M),s[i].add(M),v[e].add(w),v[t].add(w),v[i].add(w));for(var L=new Ye,C=new Ye,P=new Ye,D=new Ye,I=0,F=h.length;I<F;++I)for(var N=h[I],O=N.start,U=O,B=O+N.count;U<B;U+=3)z(a[U+0]),z(a[U+1]),z(a[U+2])}else console.error(\"THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)\");function z(e){P.fromArray(d,3*e),D.copy(P);var t=s[e],t=(L.copy(t),L.sub(P.multiplyScalar(P.dot(t))).normalize(),C.crossVectors(D,t),C.dot(v[e])<0?-1:1);m[4*e]=L.x,m[4*e+1]=L.y,m[4*e+2]=L.z,m[4*e+3]=t}}},{key:\"computeVertexNormals\",value:function(){var e=this.index,t=this.getAttribute(\"position\");if(void 0!==t){var i=this.getAttribute(\"normal\");if(void 0===i)i=new lr(new Float32Array(3*t.count),3),this.setAttribute(\"normal\",i);else for(var u=0,c=i.count;u<c;u++)i.setXYZ(u,0,0,0);var d=new Ye,n=new Ye,p=new Ye,r=new Ye,a=new Ye,s=new Ye,o=new Ye,f=new Ye;if(e)for(var l=0,m=e.count;l<m;l+=3){var v=e.getX(l+0),g=e.getX(l+1),y=e.getX(l+2);d.fromBufferAttribute(t,v),n.fromBufferAttribute(t,g),p.fromBufferAttribute(t,y),o.subVectors(p,n),f.subVectors(d,n),o.cross(f),r.fromBufferAttribute(i,v),a.fromBufferAttribute(i,g),s.fromBufferAttribute(i,y),r.add(o),a.add(o),s.add(o),i.setXYZ(v,r.x,r.y,r.z),i.setXYZ(g,a.x,a.y,a.z),i.setXYZ(y,s.x,s.y,s.z)}else for(var h=0,_=t.count;h<_;h+=3)d.fromBufferAttribute(t,h+0),n.fromBufferAttribute(t,h+1),p.fromBufferAttribute(t,h+2),o.subVectors(p,n),f.subVectors(d,n),o.cross(f),i.setXYZ(h+0,o.x,o.y,o.z),i.setXYZ(h+1,o.x,o.y,o.z),i.setXYZ(h+2,o.x,o.y,o.z);this.normalizeNormals(),i.needsUpdate=!0}}},{key:\"merge\",value:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn(\"THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.\"));var i,n=this.attributes;for(i in n)if(void 0!==e.attributes[i])for(var r=n[i].array,a=e.attributes[i],s=a.array,a=a.itemSize*t,o=Math.min(s.length,r.length-a),l=0,h=a;l<o;l++,h++)r[h]=s[l];return this}console.error(\"THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.\",e)}},{key:\"normalizeNormals\",value:function(){for(var e=this.attributes.normal,t=0,i=e.count;t<i;t++)Wr.fromBufferAttribute(e,t),Wr.normalize(),e.setXYZ(t,Wr.x,Wr.y,Wr.z)}},{key:\"toNonIndexed\",value:function(){function e(e,t){for(var i=e.array,n=e.itemSize,r=e.normalized,a=new i.constructor(t.length*n),s=0,o=0,l=0,u=t.length;l<u;l++)for(var s=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*n,h=0;h<n;h++)a[o++]=i[s++];return new lr(a,n,r)}if(null===this.index)return console.warn(\"THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed.\"),this;var t,i=new jr,n=this.index.array,r=this.attributes;for(t in r){var u=e(r[t],n);i.setAttribute(t,u)}var a,s=this.morphAttributes;for(a in s){for(var c=[],d=s[a],o=0,p=d.length;o<p;o++){var f=e(d[o],n);c.push(f)}i.morphAttributes[a]=c}i.morphTargetsRelative=this.morphTargetsRelative;for(var m=this.groups,l=0,v=m.length;l<v;l++){var h=m[l];i.addGroup(h.start,h.count,h.materialIndex)}return i}},{key:\"toJSON\",value:function(){var e={metadata:{version:4.5,type:\"BufferGeometry\",generator:\"BufferGeometry.toJSON\"}};if(e.uuid=this.uuid,e.type=this.type,\"\"!==this.name&&(e.name=this.name),0<Object.keys(this.userData).length&&(e.userData=this.userData),void 0!==this.parameters){var t,i=this.parameters;for(t in i)void 0!==i[t]&&(e[t]=i[t]);return e}e.data={attributes:{}};var n,r=this.index,a=(null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)}),this.attributes);for(n in a){var u=a[n];e.data.attributes[n]=u.toJSON(e.data)}var s,o={},c=!1;for(s in this.morphAttributes){for(var d=this.morphAttributes[s],l=[],h=0,p=d.length;h<p;h++){var f=d[h];l.push(f.toJSON(e.data))}0<l.length&&(o[s]=l,c=!0)}c&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);r=this.groups,0<r.length&&(e.data.groups=JSON.parse(JSON.stringify(r))),r=this.boundingSphere;return null!==r&&(e.data.boundingSphere={center:r.center.toArray(),radius:r.radius}),e}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}},{key:\"copy\",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t,i={},n=(this.name=e.name,e.index),r=(null!==n&&this.setIndex(n.clone(i)),e.attributes);for(t in r){var u=r[t];this.setAttribute(t,u.clone(i))}var a,s=e.morphAttributes;for(a in s){for(var c=[],d=s[a],o=0,p=d.length;o<p;o++)c.push(d[o].clone(i));this.morphAttributes[a]=c}this.morphTargetsRelative=e.morphTargetsRelative;for(var f=e.groups,l=0,m=f.length;l<m;l++){var h=f[l];this.addGroup(h.start,h.count,h.materialIndex)}n=e.boundingBox,null!==n&&(this.boundingBox=n.clone()),n=e.boundingSphere;return null!==n&&(this.boundingSphere=n.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}},{key:\"dispose\",value:function(){this.dispatchEvent({type:\"dispose\"})}}]),jr);function jr(){var e;return(0,oy.default)(this,jr),e=Ir.call(this),Object.defineProperty((0,dy.default)(e),\"id\",{value:Ur++}),e.uuid=Gt(),e.name=\"\",e.type=\"BufferGeometry\",e.index=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}function Xr(e,t,i){return(0,oy.default)(this,Xr),Fr.call(this,new Float64Array(e),t,i)}function qr(e,t,i){return(0,oy.default)(this,qr),Nr.call(this,new Float32Array(e),t,i)}R.prototype.isBufferGeometry=!0;var Yr,Jr=new Re,Zr=new tn,Kr=new qi,Qr=new Ye,$r=new Ye,ea=new Ye,ta=new Ye,ia=new Ye,na=new Ye,ra=new Ye,aa=new Ye,sa=new Ye,oa=new qe,la=new qe,ha=new qe,ua=new Ye,ca=new Ye,da=((0,ay.default)(pa,w),Yr=hy(pa),(0,ly.default)(pa,[{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(pa.prototype),\"copy\",this).call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}},{key:\"updateMorphTargets\",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,i=Object.keys(t);if(0<i.length){var n=t[i[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,a=n.length;r<a;r++){var s=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=r}}}}else{t=e.morphTargets;void 0!==t&&0<t.length&&console.error(\"THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.\")}}},{key:\"raycast\",value:function(e,u){var t,i=this.geometry,n=this.material,c=this.matrixWorld;if(void 0!==n&&(null===i.boundingSphere&&i.computeBoundingSphere(),Kr.copy(i.boundingSphere),Kr.applyMatrix4(c),!1!==e.ray.intersectsSphere(Kr)&&(Jr.copy(c).invert(),Zr.copy(e.ray).applyMatrix4(Jr),null===i.boundingBox||!1!==Zr.intersectsBox(i.boundingBox))))if(i.isBufferGeometry){var r=i.index,a=i.attributes.position,d=i.morphAttributes.position,p=i.morphTargetsRelative,f=i.attributes.uv,m=i.attributes.uv2,v=i.groups,s=i.drawRange;if(null!==r)if(Array.isArray(n))for(var g=0,y=v.length;g<y;g++)for(var _=v[g],x=n[_.materialIndex],o=Math.max(_.start,s.start),b=Math.min(r.count,Math.min(_.start+_.count,s.start+s.count));o<b;o+=3){var M=r.getX(o),w=r.getX(o+1),S=r.getX(o+2);(t=fa(this,x,e,Zr,a,d,p,f,m,M,w,S))&&(t.faceIndex=Math.floor(o/3),t.face.materialIndex=_.materialIndex,u.push(t))}else for(var l=Math.max(0,s.start),E=Math.min(r.count,s.start+s.count);l<E;l+=3){var T=r.getX(l),A=r.getX(l+1),k=r.getX(l+2);(t=fa(this,n,e,Zr,a,d,p,f,m,T,A,k))&&(t.faceIndex=Math.floor(l/3),u.push(t))}else if(void 0!==a)if(Array.isArray(n))for(var R=0,L=v.length;R<L;R++)for(var C=v[R],P=n[C.materialIndex],h=Math.max(C.start,s.start),D=Math.min(a.count,Math.min(C.start+C.count,s.start+s.count));h<D;h+=3)(t=fa(this,P,e,Zr,a,d,p,f,m,h,h+1,h+2))&&(t.faceIndex=Math.floor(h/3),t.face.materialIndex=C.materialIndex,u.push(t));else for(var I=Math.max(0,s.start),F=Math.min(a.count,s.start+s.count);I<F;I+=3)(t=fa(this,n,e,Zr,a,d,p,f,m,I,I+1,I+2))&&(t.faceIndex=Math.floor(I/3),u.push(t))}else i.isGeometry&&console.error(\"THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.\")}}]),pa);function pa(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new R,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new rr;return(0,oy.default)(this,pa),(e=Yr.call(this)).type=\"Mesh\",e.geometry=t,e.material=i,e.updateMorphTargets(),e}function fa(e,u,c,d,t,i,p,n,r,a,s,o){Qr.fromBufferAttribute(t,a),$r.fromBufferAttribute(t,s),ea.fromBufferAttribute(t,o);var f=e.morphTargetInfluences;if(i&&f){ra.set(0,0,0),aa.set(0,0,0),sa.set(0,0,0);for(var l=0,m=i.length;l<m;l++){var h=f[l],v=i[l];0!==h&&(ta.fromBufferAttribute(v,a),ia.fromBufferAttribute(v,s),na.fromBufferAttribute(v,o),p?(ra.addScaledVector(ta,h),aa.addScaledVector(ia,h),sa.addScaledVector(na,h)):(ra.addScaledVector(ta.sub(Qr),h),aa.addScaledVector(ia.sub($r),h),sa.addScaledVector(na.sub(ea),h)))}Qr.add(ra),$r.add(aa),ea.add(sa)}e.isSkinnedMesh&&(e.boneTransform(a,Qr),e.boneTransform(s,$r),e.boneTransform(o,ea));t=function(e,t,i,n,r,a,s,o){if(null===(t.side===Pe?n.intersectTriangle(s,a,r,!0,o):n.intersectTriangle(r,a,s,t.side!==De,o)))return null;ca.copy(o),ca.applyMatrix4(e.matrixWorld);n=i.ray.origin.distanceTo(ca);return n<i.near||n>i.far?null:{distance:n,point:ca.clone(),object:e}}(e,u,c,d,Qr,$r,ea,ua);return t&&(n&&(oa.fromBufferAttribute(n,a),la.fromBufferAttribute(n,s),ha.fromBufferAttribute(n,o),t.uv=jn.getUV(ua,Qr,$r,ea,oa,la,ha,new qe)),r&&(oa.fromBufferAttribute(r,a),la.fromBufferAttribute(r,s),ha.fromBufferAttribute(r,o),t.uv2=jn.getUV(ua,Qr,$r,ea,oa,la,ha,new qe)),e={a:a,b:s,c:o,normal:new Ye,materialIndex:0},jn.getNormal(Qr,$r,ea,e.normal),t.face=e),t}da.prototype.isMesh=!0;(0,ay.default)(ga,R),ma=hy(ga),(0,ly.default)(ga,null,[{key:\"fromJSON\",value:function(e){return new ga(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}]);var ma,va=ga;function ga(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:1,C=((0,oy.default)(this,ga),(e=ma.call(this)).type=\"BoxGeometry\",e.parameters={width:t,height:i,depth:n,widthSegments:r,heightSegments:a,depthSegments:s},(0,dy.default)(e)),r=Math.floor(r),a=Math.floor(a),s=Math.floor(s),P=[],D=[],I=[],F=[],L=0,N=0;function o(e,u,c,d,p,f,m,v,t,i,g){for(var y=f/t,_=m/i,x=f/2,b=m/2,M=v/2,n=t+1,w=i+1,S=0,r=0,a=new Ye,s=0;s<w;s++)for(var E=s*_-b,o=0;o<n;o++)a[e]=(o*y-x)*d,a[u]=E*p,a[c]=M,D.push(a.x,a.y,a.z),a[e]=0,a[u]=0,a[c]=0<v?1:-1,I.push(a.x,a.y,a.z),F.push(o/t),F.push(1-s/i),S+=1;for(var l=0;l<i;l++)for(var h=0;h<t;h++){var T=L+h+n*l,A=L+h+n*(l+1),k=L+(h+1)+n*(l+1),R=L+(h+1)+n*l;P.push(T,A,R),P.push(A,k,R),r+=6}C.addGroup(N,r,g),N+=r,L+=S}return o(\"z\",\"y\",\"x\",-1,-1,n,i,t,s,a,0),o(\"z\",\"y\",\"x\",1,-1,n,i,-t,s,a,1),o(\"x\",\"z\",\"y\",1,1,t,n,i,r,s,2),o(\"x\",\"z\",\"y\",1,-1,t,n,-i,r,s,3),o(\"x\",\"y\",\"z\",1,-1,t,i,n,r,a,4),o(\"x\",\"y\",\"z\",-1,-1,t,i,-n,r,a,5),e.setIndex(P),e.setAttribute(\"position\",new $(D,3)),e.setAttribute(\"normal\",new $(I,3)),e.setAttribute(\"uv\",new $(F,2)),e}function ya(e){var t,i={};for(t in e)for(var n in i[t]={},e[t]){var r=e[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?i[t][n]=r.clone():Array.isArray(r)?i[t][n]=r.slice():i[t][n]=r}return i}function _a(e){for(var t={},i=0;i<e.length;i++){var n,r=ya(e[i]);for(n in r)t[n]=r[n]}return t}var xa,ba={clone:ya,merge:_a},Ma=((0,ay.default)(wa,qn),xa=hy(wa),(0,ly.default)(wa,[{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(wa.prototype),\"copy\",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ya(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:\"toJSON\",value:function(e){var t,i=(0,ny.default)((0,sy.default)(wa.prototype),\"toJSON\",this).call(this,e);for(t in i.glslVersion=this.glslVersion,i.uniforms={},this.uniforms){var n=this.uniforms[t].value;n&&n.isTexture?i.uniforms[t]={type:\"t\",value:n.toJSON(e).uuid}:n&&n.isColor?i.uniforms[t]={type:\"c\",value:n.getHex()}:n&&n.isVector2?i.uniforms[t]={type:\"v2\",value:n.toArray()}:n&&n.isVector3?i.uniforms[t]={type:\"v3\",value:n.toArray()}:n&&n.isVector4?i.uniforms[t]={type:\"v4\",value:n.toArray()}:n&&n.isMatrix3?i.uniforms[t]={type:\"m3\",value:n.toArray()}:n&&n.isMatrix4?i.uniforms[t]={type:\"m4\",value:n.toArray()}:i.uniforms[t]={value:n}}0<Object.keys(this.defines).length&&(i.defines=this.defines),i.vertexShader=this.vertexShader,i.fragmentShader=this.fragmentShader;var r,a={};for(r in this.extensions)!0===this.extensions[r]&&(a[r]=!0);return 0<Object.keys(a).length&&(i.extensions=a),i}}]),wa);function wa(e){var t;return(0,oy.default)(this,wa),(t=xa.call(this)).type=\"ShaderMaterial\",t.defines={},t.uniforms={},t.vertexShader=\"void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}\",t.fragmentShader=\"void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}\",t.linewidth=1,t.wireframe=!1,t.wireframeLinewidth=1,t.fog=!1,t.lights=!1,t.clipping=!1,t.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},t.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},t.index0AttributeName=void 0,t.uniformsNeedUpdate=!1,t.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error(\"THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.\"),t.setValues(e)),t}Ma.prototype.isShaderMaterial=!0;(0,ay.default)(Ta,w),Sa=hy(Ta),(0,ly.default)(Ta,[{key:\"copy\",value:function(e,t){return(0,ny.default)((0,sy.default)(Ta.prototype),\"copy\",this).call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}},{key:\"getWorldDirection\",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}},{key:\"updateMatrixWorld\",value:function(e){(0,ny.default)((0,sy.default)(Ta.prototype),\"updateMatrixWorld\",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:\"updateWorldMatrix\",value:function(e,t){(0,ny.default)((0,sy.default)(Ta.prototype),\"updateWorldMatrix\",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}}]);var Sa,Ea=Ta;function Ta(){var e;return(0,oy.default)(this,Ta),(e=Sa.call(this)).type=\"Camera\",e.matrixWorldInverse=new Re,e.projectionMatrix=new Re,e.projectionMatrixInverse=new Re,e}Ea.prototype.isCamera=!0;(0,ay.default)(Ra,Ea),Aa=hy(Ra),(0,ly.default)(Ra,[{key:\"copy\",value:function(e,t){return(0,ny.default)((0,sy.default)(Ra.prototype),\"copy\",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:\"setFocalLength\",value:function(e){e=.5*this.getFilmHeight()/e;this.fov=2*Ht*Math.atan(e),this.updateProjectionMatrix()}},{key:\"getFocalLength\",value:function(){var e=Math.tan(.5*zt*this.fov);return.5*this.getFilmHeight()/e}},{key:\"getEffectiveFOV\",value:function(){return 2*Ht*Math.atan(Math.tan(.5*zt*this.fov)/this.zoom)}},{key:\"getFilmWidth\",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:\"getFilmHeight\",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:\"setViewOffset\",value:function(e,t,i,n,r,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}},{key:\"clearViewOffset\",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:\"updateProjectionMatrix\",value:function(){var e,t=this.near,i=t*Math.tan(.5*zt*this.fov)/this.zoom,n=2*i,r=this.aspect*n,a=-.5*r,s=this.view,o=(null!==this.view&&this.view.enabled&&(o=s.fullWidth,e=s.fullHeight,a+=s.offsetX*r/o,i-=s.offsetY*n/e,r*=s.width/o,n*=s.height/e),this.filmOffset);0!==o&&(a+=t*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,i,i-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:\"toJSON\",value:function(e){e=(0,ny.default)((0,sy.default)(Ra.prototype),\"toJSON\",this).call(this,e);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}]);var Aa,ka=Ra;function Ra(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:.1,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:2e3;return(0,oy.default)(this,Ra),(e=Aa.call(this)).type=\"PerspectiveCamera\",e.fov=t,e.zoom=1,e.near=n,e.far=r,e.focus=10,e.aspect=i,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}ka.prototype.isPerspectiveCamera=!0;(0,ay.default)(Fa,w),Ca=hy(Fa),(0,ly.default)(Fa,[{key:\"update\",value:function(e,t){null===this.parent&&this.updateMatrixWorld();var i=this.renderTarget,n=(0,cy.default)(this.children,6),r=n[0],a=n[1],s=n[2],o=n[3],l=n[4],n=n[5],h=e.xr.enabled,u=e.getRenderTarget(),c=(e.xr.enabled=!1,i.texture.generateMipmaps);i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,a),e.setRenderTarget(i,2),e.render(t,s),e.setRenderTarget(i,3),e.render(t,o),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=c,e.setRenderTarget(i,5),e.render(t,n),e.setRenderTarget(u),e.xr.enabled=h}}]);var La,Ca,Pa=Fa,Da=((0,ay.default)(Ia,oi),La=hy(Ia),(0,ly.default)(Ia,[{key:\"images\",get:function(){return this.image},set:function(e){this.image=e}}]),Ia);function Ia(e,t,i,n,r,a,s,o,l,h){return(0,oy.default)(this,Ia),(e=La.call(this,e=void 0!==e?e:[],t=void 0!==t?t:T,i,n,r,a,s,o,l,h)).flipY=!1,e}function Fa(e,t,i){var n;if((0,oy.default)(this,Fa),(n=Ca.call(this)).type=\"CubeCamera\",!0!==i.isWebGLCubeRenderTarget)return console.error(\"THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.\"),(0,py.default)(n);n.renderTarget=i;i=new ka(90,1,e,t),i.layers=n.layers,i.up.set(0,-1,0),i.lookAt(new Ye(1,0,0)),n.add(i),i=new ka(90,1,e,t),i.layers=n.layers,i.up.set(0,-1,0),i.lookAt(new Ye(-1,0,0)),n.add(i),i=new ka(90,1,e,t),i.layers=n.layers,i.up.set(0,0,1),i.lookAt(new Ye(0,1,0)),n.add(i),i=new ka(90,1,e,t),i.layers=n.layers,i.up.set(0,0,-1),i.lookAt(new Ye(0,-1,0)),n.add(i),i=new ka(90,1,e,t),i.layers=n.layers,i.up.set(0,-1,0),i.lookAt(new Ye(0,0,1)),n.add(i),i=new ka(90,1,e,t);return i.layers=n.layers,i.up.set(0,-1,0),i.lookAt(new Ye(0,0,-1)),n.add(i),n}Da.prototype.isCubeTexture=!0;(0,ay.default)(Ua,fi),Na=hy(Ua),(0,ly.default)(Ua,[{key:\"fromEquirectangularTexture\",value:function(e,t){this.texture.type=t.type,this.texture.format=We,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var i=new va(5,5,5),n=new Ma({name:\"CubemapFromEquirect\",uniforms:ya({tEquirect:{value:null}}),vertexShader:\"\\n\\n\\t\\t\\t\\tvarying vec3 vWorldDirection;\\n\\n\\t\\t\\t\\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\n\\t\\t\\t\\t\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tvoid main() {\\n\\n\\t\\t\\t\\t\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\n\\t\\t\\t\\t\\t#include <begin_vertex>\\n\\t\\t\\t\\t\\t#include <project_vertex>\\n\\n\\t\\t\\t\\t}\\n\\t\\t\\t\",fragmentShader:\"\\n\\n\\t\\t\\t\\tuniform sampler2D tEquirect;\\n\\n\\t\\t\\t\\tvarying vec3 vWorldDirection;\\n\\n\\t\\t\\t\\t#include <common>\\n\\n\\t\\t\\t\\tvoid main() {\\n\\n\\t\\t\\t\\t\\tvec3 direction = normalize( vWorldDirection );\\n\\n\\t\\t\\t\\t\\tvec2 sampleUV = equirectUv( direction );\\n\\n\\t\\t\\t\\t\\tgl_FragColor = texture2D( tEquirect, sampleUV );\\n\\n\\t\\t\\t\\t}\\n\\t\\t\\t\",side:Pe,blending:j}),i=(n.uniforms.tEquirect.value=t,new da(i,n)),n=t.minFilter;return t.minFilter===Oe&&(t.minFilter=Te),new Pa(1,10,this).update(e,i),t.minFilter=n,i.geometry.dispose(),i.material.dispose(),this}},{key:\"clear\",value:function(e,t,i,n){for(var r=e.getRenderTarget(),a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,i,n);e.setRenderTarget(r)}}]);var Na,Oa=Ua;function Ua(e,t,i){return(0,oy.default)(this,Ua),Number.isInteger(t)&&(console.warn(\"THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )\"),t=i),(i=Na.call(this,e,e,t)).texture=new Da(void 0,(t=t||{}).mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),i.texture.isRenderTargetTexture=!0,i.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,i.texture.minFilter=void 0!==t.minFilter?t.minFilter:Te,i.texture._needsFlipEnvMap=!1,i}Oa.prototype.isWebGLCubeRenderTarget=!0;var Ba=new Ye,za=new Ye,Ha=new Kt,Ga=((0,ly.default)(Va,[{key:\"set\",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:\"setComponents\",value:function(e,t,i,n){return this.normal.set(e,t,i),this.constant=n,this}},{key:\"setFromNormalAndCoplanarPoint\",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:\"setFromCoplanarPoints\",value:function(e,t,i){i=Ba.subVectors(i,t).cross(za.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}},{key:\"copy\",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:\"normalize\",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:\"negate\",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:\"distanceToPoint\",value:function(e){return this.normal.dot(e)+this.constant}},{key:\"distanceToSphere\",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:\"projectPoint\",value:function(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:\"intersectLine\",value:function(e,t){var i=e.delta(Ba),n=this.normal.dot(i);if(0===n)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;n=-(e.start.dot(this.normal)+this.constant)/n;return n<0||1<n?null:t.copy(i).multiplyScalar(n).add(e.start)}},{key:\"intersectsLine\",value:function(e){var t=this.distanceToPoint(e.start),e=this.distanceToPoint(e.end);return t<0&&0<e||e<0&&0<t}},{key:\"intersectsBox\",value:function(e){return e.intersectsPlane(this)}},{key:\"intersectsSphere\",value:function(e){return e.intersectsPlane(this)}},{key:\"coplanarPoint\",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:\"applyMatrix4\",value:function(e,t){t=t||Ha.getNormalMatrix(e),e=this.coplanarPoint(Ba).applyMatrix4(e),t=this.normal.applyMatrix3(t).normalize();return this.constant=-e.dot(t),this}},{key:\"translate\",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:\"equals\",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}}]),Va);function Va(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ye(1,0,0),t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;(0,oy.default)(this,Va),this.normal=e,this.constant=t}Ga.prototype.isPlane=!0;var Wa=new qi,ja=new Ye,Xa=((0,ly.default)(qa,[{key:\"set\",value:function(e,t,i,n,r,a){var s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(i),s[3].copy(n),s[4].copy(r),s[5].copy(a),this}},{key:\"copy\",value:function(e){for(var t=this.planes,i=0;i<6;i++)t[i].copy(e.planes[i]);return this}},{key:\"setFromProjectionMatrix\",value:function(e){var t=this.planes,e=e.elements,i=e[0],n=e[1],r=e[2],a=e[3],s=e[4],o=e[5],u=e[6],l=e[7],c=e[8],d=e[9],p=e[10],h=e[11],f=e[12],m=e[13],v=e[14],e=e[15];return t[0].setComponents(a-i,l-s,h-c,e-f).normalize(),t[1].setComponents(a+i,l+s,h+c,e+f).normalize(),t[2].setComponents(a+n,l+o,h+d,e+m).normalize(),t[3].setComponents(a-n,l-o,h-d,e-m).normalize(),t[4].setComponents(a-r,l-u,h-p,e-v).normalize(),t[5].setComponents(a+r,l+u,h+p,e+v).normalize(),this}},{key:\"intersectsObject\",value:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Wa.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Wa)}},{key:\"intersectsSprite\",value:function(e){return Wa.center.set(0,0,0),Wa.radius=.7071067811865476,Wa.applyMatrix4(e.matrixWorld),this.intersectsSphere(Wa)}},{key:\"intersectsSphere\",value:function(e){for(var t=this.planes,i=e.center,n=-e.radius,r=0;r<6;r++)if(t[r].distanceToPoint(i)<n)return!1;return!0}},{key:\"intersectsBox\",value:function(e){for(var t=this.planes,i=0;i<6;i++){var n=t[i];if(ja.x=(0<n.normal.x?e.max:e.min).x,ja.y=(0<n.normal.y?e.max:e.min).y,ja.z=(0<n.normal.z?e.max:e.min).z,n.distanceToPoint(ja)<0)return!1}return!0}},{key:\"containsPoint\",value:function(e){for(var t=this.planes,i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}}]),qa);function qa(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ga,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ga,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new Ga,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:new Ga,r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:new Ga,a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:new Ga;(0,oy.default)(this,qa),this.planes=[e,t,i,n,r,a]}function Ya(){var i=null,e=!1,n=null,r=null;function a(e,t){n(e,t),r=i.requestAnimationFrame(a)}return{start:function(){!0!==e&&null!==n&&(r=i.requestAnimationFrame(a),e=!0)},stop:function(){i.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(e){n=e},setContext:function(e){i=e}}}function Ja(l,e){var h=e.isWebGL2,u=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),u.get(e)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);var t=u.get(e);t&&(l.deleteBuffer(t.buffer),u.delete(e))},update:function(e,t){var i,n,r,a,s,o;e.isGLBufferAttribute?(!(i=u.get(e))||i.version<e.version)&&u.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}):(e.isInterleavedBufferAttribute&&(e=e.data),void 0===(i=u.get(e))?u.set(e,(r=t,a=(n=e).array,s=n.usage,o=l.createBuffer(),l.bindBuffer(r,o),l.bufferData(r,a,s),n.onUploadCallback(),r=l.FLOAT,a instanceof Float32Array?r=l.FLOAT:a instanceof Float64Array?console.warn(\"THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.\"):a instanceof Uint16Array?n.isFloat16BufferAttribute?h?r=l.HALF_FLOAT:console.warn(\"THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.\"):r=l.UNSIGNED_SHORT:a instanceof Int16Array?r=l.SHORT:a instanceof Uint32Array?r=l.UNSIGNED_INT:a instanceof Int32Array?r=l.INT:a instanceof Int8Array?r=l.BYTE:(a instanceof Uint8Array||a instanceof Uint8ClampedArray)&&(r=l.UNSIGNED_BYTE),{buffer:o,type:r,bytesPerElement:a.BYTES_PER_ELEMENT,version:n.version})):i.version<e.version&&(s=i.buffer,o=t,a=(r=e).array,r=r.updateRange,l.bindBuffer(o,s),-1===r.count?l.bufferSubData(o,0,a):(h?l.bufferSubData(o,r.offset*a.BYTES_PER_ELEMENT,a,r.offset,r.count):l.bufferSubData(o,r.offset*a.BYTES_PER_ELEMENT,a.subarray(r.offset,r.offset+r.count)),r.count=-1),i.version=e.version))}}}(0,ay.default)($a,R),Za=hy($a),(0,ly.default)($a,null,[{key:\"fromJSON\",value:function(e){return new $a(e.width,e.height,e.widthSegments,e.heightSegments)}}]);var Za,Ka=$a,_={alphamap_fragment:\"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\",alphamap_pars_fragment:\"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\",alphatest_fragment:\"#ifdef USE_ALPHATEST\\n\\tif ( diffuseColor.a < alphaTest ) discard;\\n#endif\",alphatest_pars_fragment:\"#ifdef USE_ALPHATEST\\n\\tuniform float alphaTest;\\n#endif\",aomap_fragment:\"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD )\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\\n\\t#endif\\n#endif\",aomap_pars_fragment:\"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif\",begin_vertex:\"vec3 transformed = vec3( position );\",beginnormal_vertex:\"vec3 objectNormal = vec3( normal );\\n#ifdef USE_TANGENT\\n\\tvec3 objectTangent = vec3( tangent.xyz );\\n#endif\",bsdfs:\"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\\n\\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\\n\\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\\n}\\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\tfloat dotNL = saturate( dot( normal, lightDir ) );\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\\n\\tvec3 F = F_Schlick( f0, f90, dotVH );\\n\\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\treturn F * ( V * D );\\n}\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\\n\\tfloat dotNV = saturate( dot( N, V ) );\\n\\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\\n\\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\\n\\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\\n\\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\\n\\treturn vec3( result );\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n}\\n#if defined( USE_SHEEN )\\nfloat D_Charlie( float roughness, float dotNH ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tfloat invAlpha = 1.0 / alpha;\\n\\tfloat cos2h = dotNH * dotNH;\\n\\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\\n\\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\\n}\\nfloat V_Neubelt( float dotNV, float dotNL ) {\\n\\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\\n}\\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\\n\\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\tfloat dotNL = saturate( dot( normal, lightDir ) );\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat D = D_Charlie( sheenRoughness, dotNH );\\n\\tfloat V = V_Neubelt( dotNV, dotNL );\\n\\treturn sheenColor * ( D * V );\\n}\\n#endif\",bumpmap_pars_fragment:\"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vUv );\\n\\t\\tvec2 dSTdy = dFdy( vUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\\n\\t\\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\\n\\t\\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\",clipping_planes_fragment:\"#if NUM_CLIPPING_PLANES > 0\\n\\tvec4 plane;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\\n\\t\\tplane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\tbool clipped = true;\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\\n\\t\\t\\tplane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t\\tif ( clipped ) discard;\\n\\t#endif\\n#endif\",clipping_planes_pars_fragment:\"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\",clipping_planes_pars_vertex:\"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n#endif\",clipping_planes_vertex:\"#if NUM_CLIPPING_PLANES > 0\\n\\tvClipPosition = - mvPosition.xyz;\\n#endif\",color_fragment:\"#if defined( USE_COLOR_ALPHA )\\n\\tdiffuseColor *= vColor;\\n#elif defined( USE_COLOR )\\n\\tdiffuseColor.rgb *= vColor;\\n#endif\",color_pars_fragment:\"#if defined( USE_COLOR_ALPHA )\\n\\tvarying vec4 vColor;\\n#elif defined( USE_COLOR )\\n\\tvarying vec3 vColor;\\n#endif\",color_pars_vertex:\"#if defined( USE_COLOR_ALPHA )\\n\\tvarying vec4 vColor;\\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\\n\\tvarying vec3 vColor;\\n#endif\",color_vertex:\"#if defined( USE_COLOR_ALPHA )\\n\\tvColor = vec4( 1.0 );\\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\\n\\tvColor = vec3( 1.0 );\\n#endif\\n#ifdef USE_COLOR\\n\\tvColor *= color;\\n#endif\\n#ifdef USE_INSTANCING_COLOR\\n\\tvColor.xyz *= instanceColor.xyz;\\n#endif\",common:\"#define PI 3.141592653589793\\n#define PI2 6.283185307179586\\n#define PI_HALF 1.5707963267948966\\n#define RECIPROCAL_PI 0.3183098861837907\\n#define RECIPROCAL_PI2 0.15915494309189535\\n#define EPSILON 1e-6\\n#ifndef saturate\\n#define saturate( a ) clamp( a, 0.0, 1.0 )\\n#endif\\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract( sin( sn ) * c );\\n}\\n#ifdef HIGH_PRECISION\\n\\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\\n#else\\n\\tfloat precisionSafeLength( vec3 v ) {\\n\\t\\tfloat maxComponent = max3( abs( v ) );\\n\\t\\treturn length( v / maxComponent ) * maxComponent;\\n\\t}\\n#endif\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n#ifdef USE_CLEARCOAT\\n\\tvec3 clearcoatNormal;\\n#endif\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nmat3 transposeMat3( const in mat3 m ) {\\n\\tmat3 tmp;\\n\\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\\n\\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\\n\\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\\n\\treturn tmp;\\n}\\nfloat linearToRelativeLuminance( const in vec3 color ) {\\n\\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\\n\\treturn dot( weights, color.rgb );\\n}\\nbool isPerspectiveMatrix( mat4 m ) {\\n\\treturn m[ 2 ][ 3 ] == - 1.0;\\n}\\nvec2 equirectUv( in vec3 dir ) {\\n\\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\treturn vec2( u, v );\\n}\",cube_uv_reflection_fragment:\"#ifdef ENVMAP_TYPE_CUBE_UV\\n\\t#define cubeUV_maxMipLevel 8.0\\n\\t#define cubeUV_minMipLevel 4.0\\n\\t#define cubeUV_maxTileSize 256.0\\n\\t#define cubeUV_minTileSize 16.0\\n\\tfloat getFace( vec3 direction ) {\\n\\t\\tvec3 absDirection = abs( direction );\\n\\t\\tfloat face = - 1.0;\\n\\t\\tif ( absDirection.x > absDirection.z ) {\\n\\t\\t\\tif ( absDirection.x > absDirection.y )\\n\\t\\t\\t\\tface = direction.x > 0.0 ? 0.0 : 3.0;\\n\\t\\t\\telse\\n\\t\\t\\t\\tface = direction.y > 0.0 ? 1.0 : 4.0;\\n\\t\\t} else {\\n\\t\\t\\tif ( absDirection.z > absDirection.y )\\n\\t\\t\\t\\tface = direction.z > 0.0 ? 2.0 : 5.0;\\n\\t\\t\\telse\\n\\t\\t\\t\\tface = direction.y > 0.0 ? 1.0 : 4.0;\\n\\t\\t}\\n\\t\\treturn face;\\n\\t}\\n\\tvec2 getUV( vec3 direction, float face ) {\\n\\t\\tvec2 uv;\\n\\t\\tif ( face == 0.0 ) {\\n\\t\\t\\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\\n\\t\\t} else if ( face == 1.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\\n\\t\\t} else if ( face == 2.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\\n\\t\\t} else if ( face == 3.0 ) {\\n\\t\\t\\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\\n\\t\\t} else if ( face == 4.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\\n\\t\\t} else {\\n\\t\\t\\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\\n\\t\\t}\\n\\t\\treturn 0.5 * ( uv + 1.0 );\\n\\t}\\n\\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\\n\\t\\tfloat face = getFace( direction );\\n\\t\\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\\n\\t\\tmipInt = max( mipInt, cubeUV_minMipLevel );\\n\\t\\tfloat faceSize = exp2( mipInt );\\n\\t\\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\\n\\t\\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\\n\\t\\tif ( face > 2.0 ) {\\n\\t\\t\\tuv.y += faceSize;\\n\\t\\t\\tface -= 3.0;\\n\\t\\t}\\n\\t\\tuv.x += face * faceSize;\\n\\t\\tif ( mipInt < cubeUV_maxMipLevel ) {\\n\\t\\t\\tuv.y += 2.0 * cubeUV_maxTileSize;\\n\\t\\t}\\n\\t\\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\\n\\t\\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\\n\\t\\tuv *= texelSize;\\n\\t\\treturn texture2D( envMap, uv ).rgb;\\n\\t}\\n\\t#define r0 1.0\\n\\t#define v0 0.339\\n\\t#define m0 - 2.0\\n\\t#define r1 0.8\\n\\t#define v1 0.276\\n\\t#define m1 - 1.0\\n\\t#define r4 0.4\\n\\t#define v4 0.046\\n\\t#define m4 2.0\\n\\t#define r5 0.305\\n\\t#define v5 0.016\\n\\t#define m5 3.0\\n\\t#define r6 0.21\\n\\t#define v6 0.0038\\n\\t#define m6 4.0\\n\\tfloat roughnessToMip( float roughness ) {\\n\\t\\tfloat mip = 0.0;\\n\\t\\tif ( roughness >= r1 ) {\\n\\t\\t\\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\\n\\t\\t} else if ( roughness >= r4 ) {\\n\\t\\t\\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\\n\\t\\t} else if ( roughness >= r5 ) {\\n\\t\\t\\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\\n\\t\\t} else if ( roughness >= r6 ) {\\n\\t\\t\\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\\n\\t\\t} else {\\n\\t\\t\\tmip = - 2.0 * log2( 1.16 * roughness );\\t\\t}\\n\\t\\treturn mip;\\n\\t}\\n\\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\\n\\t\\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\\n\\t\\tfloat mipF = fract( mip );\\n\\t\\tfloat mipInt = floor( mip );\\n\\t\\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\\n\\t\\tif ( mipF == 0.0 ) {\\n\\t\\t\\treturn vec4( color0, 1.0 );\\n\\t\\t} else {\\n\\t\\t\\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\\n\\t\\t\\treturn vec4( mix( color0, color1, mipF ), 1.0 );\\n\\t\\t}\\n\\t}\\n#endif\",defaultnormal_vertex:\"vec3 transformedNormal = objectNormal;\\n#ifdef USE_INSTANCING\\n\\tmat3 m = mat3( instanceMatrix );\\n\\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\\n\\ttransformedNormal = m * transformedNormal;\\n#endif\\ntransformedNormal = normalMatrix * transformedNormal;\\n#ifdef FLIP_SIDED\\n\\ttransformedNormal = - transformedNormal;\\n#endif\\n#ifdef USE_TANGENT\\n\\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#ifdef FLIP_SIDED\\n\\t\\ttransformedTangent = - transformedTangent;\\n\\t#endif\\n#endif\",displacementmap_pars_vertex:\"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\",displacementmap_vertex:\"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\\n#endif\",emissivemap_fragment:\"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\",emissivemap_pars_fragment:\"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\",encodings_fragment:\"gl_FragColor = linearToOutputTexel( gl_FragColor );\",encodings_pars_fragment:\"vec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 sRGBToLinear( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\\n}\",envmap_fragment:\"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvec3 cameraToFrag;\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t\\tenvColor = envMapTexelToLinear( envColor );\\n\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\",envmap_common_pars_fragment:\"#ifdef USE_ENVMAP\\n\\tuniform float envMapIntensity;\\n\\tuniform float flipEnvMap;\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\t\\n#endif\",envmap_pars_fragment:\"#ifdef USE_ENVMAP\\n\\tuniform float reflectivity;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\",envmap_pars_vertex:\"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\t\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\",envmap_physical_pars_fragment:\"#if defined( USE_ENVMAP )\\n\\t#ifdef ENVMAP_MODE_REFRACTION\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n\\tvec3 getIBLIrradiance( const in vec3 normal ) {\\n\\t\\t#if defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\\n\\t\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t\\t#else\\n\\t\\t\\treturn vec3( 0.0 );\\n\\t\\t#endif\\n\\t}\\n\\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\\n\\t\\t#if defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 reflectVec;\\n\\t\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\t\\treflectVec = reflect( - viewDir, normal );\\n\\t\\t\\t\\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\\n\\t\\t\\t#else\\n\\t\\t\\t\\treflectVec = refract( - viewDir, normal, refractionRatio );\\n\\t\\t\\t#endif\\n\\t\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\\n\\t\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t\\t#else\\n\\t\\t\\treturn vec3( 0.0 );\\n\\t\\t#endif\\n\\t}\\n#endif\",envmap_vertex:\"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex;\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\",fog_vertex:\"#ifdef USE_FOG\\n\\tvFogDepth = - mvPosition.z;\\n#endif\",fog_pars_vertex:\"#ifdef USE_FOG\\n\\tvarying float vFogDepth;\\n#endif\",fog_fragment:\"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\",fog_pars_fragment:\"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float vFogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\",gradientmap_pars_fragment:\"#ifdef USE_GRADIENTMAP\\n\\tuniform sampler2D gradientMap;\\n#endif\\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\tfloat dotNL = dot( normal, lightDirection );\\n\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t#ifdef USE_GRADIENTMAP\\n\\t\\treturn vec3( texture2D( gradientMap, coord ).r );\\n\\t#else\\n\\t\\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\\n\\t#endif\\n}\",lightmap_fragment:\"#ifdef USE_LIGHTMAP\\n\\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\\n\\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tlightMapIrradiance *= PI;\\n\\t#endif\\n\\treflectedLight.indirectDiffuse += lightMapIrradiance;\\n#endif\",lightmap_pars_fragment:\"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif\",lights_lambert_vertex:\"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\nvIndirectFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\\tvLightBack = vec3( 0.0 );\\n\\tvIndirectBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\\n#ifdef DOUBLE_SIDED\\n\\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\\n\\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\",lights_pars_begin:\"uniform bool receiveShadow;\\nuniform vec3 ambientLightColor;\\nuniform vec3 lightProbe[ 9 ];\\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\\n\\tfloat x = normal.x, y = normal.y, z = normal.z;\\n\\tvec3 result = shCoefficients[ 0 ] * 0.886227;\\n\\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\\n\\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\\n\\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\\n\\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\\n\\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\\n\\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\\n\\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\\n\\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\\n\\treturn result;\\n}\\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\\n\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\\n\\treturn irradiance;\\n}\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\treturn irradiance;\\n}\\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n\\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\t\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\t\\tif ( cutoffDistance > 0.0 ) {\\n\\t\\t\\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t\\t}\\n\\t\\treturn distanceFalloff;\\n\\t#else\\n\\t\\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\\n\\t\\t\\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n\\t\\t}\\n\\t\\treturn 1.0;\\n\\t#endif\\n}\\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\\n\\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\\n\\t\\tlight.color = directionalLight.color;\\n\\t\\tlight.direction = directionalLight.direction;\\n\\t\\tlight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tlight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tlight.color = pointLight.color;\\n\\t\\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tlight.visible = ( light.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tlight.direction = normalize( lVector );\\n\\t\\tfloat angleCos = dot( light.direction, spotLight.direction );\\n\\t\\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\tif ( spotAttenuation > 0.0 ) {\\n\\t\\t\\tfloat lightDistance = length( lVector );\\n\\t\\t\\tlight.color = spotLight.color * spotAttenuation;\\n\\t\\t\\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tlight.visible = ( light.color != vec3( 0.0 ) );\\n\\t\\t} else {\\n\\t\\t\\tlight.color = vec3( 0.0 );\\n\\t\\t\\tlight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltc_1;\\tuniform sampler2D ltc_2;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\\n\\t\\tfloat dotNL = dot( normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\",lights_toon_fragment:\"ToonMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\",lights_toon_pars_fragment:\"varying vec3 vViewPosition;\\nstruct ToonMaterial {\\n\\tvec3 diffuseColor;\\n};\\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Toon\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Toon\\n#define Material_LightProbeLOD( material )\\t(0)\",lights_phong_fragment:\"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\",lights_phong_pars_fragment:\"varying vec3 vViewPosition;\\nstruct BlinnPhongMaterial {\\n\\tvec3 diffuseColor;\\n\\tvec3 specularColor;\\n\\tfloat specularShininess;\\n\\tfloat specularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\\t(0)\",lights_physical_fragment:\"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\\nmaterial.roughness = min( material.roughness, 1.0 );\\n#ifdef IOR\\n\\t#ifdef SPECULAR\\n\\t\\tfloat specularIntensityFactor = specularIntensity;\\n\\t\\tvec3 specularColorFactor = specularColor;\\n\\t\\t#ifdef USE_SPECULARINTENSITYMAP\\n\\t\\t\\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\\n\\t\\t#endif\\n\\t\\t#ifdef USE_SPECULARCOLORMAP\\n\\t\\t\\tspecularColorFactor *= specularColorMapTexelToLinear( texture2D( specularColorMap, vUv ) ).rgb;\\n\\t\\t#endif\\n\\t\\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\\n\\t#else\\n\\t\\tfloat specularIntensityFactor = 1.0;\\n\\t\\tvec3 specularColorFactor = vec3( 1.0 );\\n\\t\\tmaterial.specularF90 = 1.0;\\n\\t#endif\\n\\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\\n\\tmaterial.specularF90 = 1.0;\\n#endif\\n#ifdef USE_CLEARCOAT\\n\\tmaterial.clearcoat = clearcoat;\\n\\tmaterial.clearcoatRoughness = clearcoatRoughness;\\n\\tmaterial.clearcoatF0 = vec3( 0.04 );\\n\\tmaterial.clearcoatF90 = 1.0;\\n\\t#ifdef USE_CLEARCOATMAP\\n\\t\\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\\n\\t#endif\\n\\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\t\\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\\n\\t#endif\\n\\tmaterial.clearcoat = saturate( material.clearcoat );\\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\\n\\tmaterial.clearcoatRoughness += geometryRoughness;\\n\\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\\n#endif\\n#ifdef USE_SHEEN\\n\\tmaterial.sheenColor = sheenColor;\\n\\t#ifdef USE_SHEENCOLORMAP\\n\\t\\tmaterial.sheenColor *= sheenColorMapTexelToLinear( texture2D( sheenColorMap, vUv ) ).rgb;\\n\\t#endif\\n\\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\\n\\t#ifdef USE_SHEENROUGHNESSMAP\\n\\t\\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\\n\\t#endif\\n#endif\",lights_physical_pars_fragment:\"struct PhysicalMaterial {\\n\\tvec3 diffuseColor;\\n\\tfloat roughness;\\n\\tvec3 specularColor;\\n\\tfloat specularF90;\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tfloat clearcoat;\\n\\t\\tfloat clearcoatRoughness;\\n\\t\\tvec3 clearcoatF0;\\n\\t\\tfloat clearcoatF90;\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\tvec3 sheenColor;\\n\\t\\tfloat sheenRoughness;\\n\\t#endif\\n};\\nvec3 clearcoatSpecular = vec3( 0.0 );\\nvec3 sheenSpecular = vec3( 0.0 );\\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat r2 = roughness * roughness;\\n\\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\\n\\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\\n\\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\\n\\treturn saturate( DG * RECIPROCAL_PI );\\n}\\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\\n\\treturn fab;\\n}\\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\\n\\tvec2 fab = DFGApprox( normal, viewDir, roughness );\\n\\treturn specularColor * fab.x + specularF90 * fab.y;\\n}\\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\\n\\tvec2 fab = DFGApprox( normal, viewDir, roughness );\\n\\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\\n\\tfloat Ess = fab.x + fab.y;\\n\\tfloat Ems = 1.0 - Ess;\\n\\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\\n\\tsingleScatter += FssEss;\\n\\tmultiScatter += Fms * Ems;\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 normal = geometry.normal;\\n\\t\\tvec3 viewDir = geometry.viewDir;\\n\\t\\tvec3 position = geometry.position;\\n\\t\\tvec3 lightPos = rectAreaLight.position;\\n\\t\\tvec3 halfWidth = rectAreaLight.halfWidth;\\n\\t\\tvec3 halfHeight = rectAreaLight.halfHeight;\\n\\t\\tvec3 lightColor = rectAreaLight.color;\\n\\t\\tfloat roughness = material.roughness;\\n\\t\\tvec3 rectCoords[ 4 ];\\n\\t\\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\\t\\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\\n\\t\\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\\n\\t\\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\\n\\t\\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\\n\\t\\tvec4 t1 = texture2D( ltc_1, uv );\\n\\t\\tvec4 t2 = texture2D( ltc_2, uv );\\n\\t\\tmat3 mInv = mat3(\\n\\t\\t\\tvec3( t1.x, 0, t1.y ),\\n\\t\\t\\tvec3(\\t\\t0, 1,\\t\\t0 ),\\n\\t\\t\\tvec3( t1.z, 0, t1.w )\\n\\t\\t);\\n\\t\\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\\n\\t\\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\\n\\t\\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\\n\\t\\tvec3 ccIrradiance = dotNLcc * directLight.color;\\n\\t\\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\\n\\t#endif\\n\\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\\n\\t#endif\\n\\tvec3 singleScattering = vec3( 0.0 );\\n\\tvec3 multiScattering = vec3( 0.0 );\\n\\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\\n\\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\\n\\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\\n\\treflectedLight.indirectSpecular += radiance * singleScattering;\\n\\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\\n\\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\",lights_fragment_begin:\"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\\n#ifdef USE_CLEARCOAT\\n\\tgeometry.clearcoatNormal = clearcoatNormal;\\n#endif\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointLightInfo( pointLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\\n\\t\\tpointLightShadow = pointLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotLightInfo( spotLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\\n\\t\\tspotLightShadow = spotLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\\n\\t\\tdirectionalLightShadow = directionalLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 iblIrradiance = vec3( 0.0 );\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tvec3 radiance = vec3( 0.0 );\\n\\tvec3 clearcoatRadiance = vec3( 0.0 );\\n#endif\",lights_fragment_maps:\"#if defined( RE_IndirectDiffuse )\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\\n\\t\\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tlightMapIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tiblIrradiance += getIBLIrradiance( geometry.normal );\\n\\t#endif\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\\n\\t#endif\\n#endif\",lights_fragment_end:\"#if defined( RE_IndirectDiffuse )\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\\n#endif\",logdepthbuf_fragment:\"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\\n#endif\",logdepthbuf_pars_fragment:\"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tuniform float logDepthBufFC;\\n\\tvarying float vFragDepth;\\n\\tvarying float vIsPerspective;\\n#endif\",logdepthbuf_pars_vertex:\"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t\\tvarying float vIsPerspective;\\n\\t#else\\n\\t\\tuniform float logDepthBufFC;\\n\\t#endif\\n#endif\",logdepthbuf_vertex:\"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t\\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\\n\\t#else\\n\\t\\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\\n\\t\\t\\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\\n\\t\\t\\tgl_Position.z *= gl_Position.w;\\n\\t\\t}\\n\\t#endif\\n#endif\",map_fragment:\"#ifdef USE_MAP\\n\\tvec4 texelColor = texture2D( map, vUv );\\n\\ttexelColor = mapTexelToLinear( texelColor );\\n\\tdiffuseColor *= texelColor;\\n#endif\",map_pars_fragment:\"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\",map_particle_fragment:\"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\\n#endif\\n#ifdef USE_MAP\\n\\tvec4 mapTexel = texture2D( map, uv );\\n\\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\\n#endif\",map_particle_pars_fragment:\"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tuniform mat3 uvTransform;\\n#endif\\n#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\",metalnessmap_fragment:\"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\\tmetalnessFactor *= texelMetalness.b;\\n#endif\",metalnessmap_pars_fragment:\"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif\",morphnormal_vertex:\"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal *= morphTargetBaseInfluence;\\n\\t#ifdef MORPHTARGETS_TEXTURE\\n\\t\\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\\n\\t\\t\\tif ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\\n\\t\\t}\\n\\t#else\\n\\t\\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\\n\\t\\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\\n\\t\\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\\n\\t\\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\\n\\t#endif\\n#endif\",morphtarget_pars_vertex:\"#ifdef USE_MORPHTARGETS\\n\\tuniform float morphTargetBaseInfluence;\\n\\t#ifdef MORPHTARGETS_TEXTURE\\n\\t\\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\\n\\t\\tuniform sampler2DArray morphTargetsTexture;\\n\\t\\tuniform vec2 morphTargetsTextureSize;\\n\\t\\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\\n\\t\\t\\tfloat texelIndex = float( vertexIndex * stride + offset );\\n\\t\\t\\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\\n\\t\\t\\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\\n\\t\\t\\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\\n\\t\\t\\treturn texture( morphTargetsTexture, morphUV ).xyz;\\n\\t\\t}\\n\\t#else\\n\\t\\t#ifndef USE_MORPHNORMALS\\n\\t\\t\\tuniform float morphTargetInfluences[ 8 ];\\n\\t\\t#else\\n\\t\\t\\tuniform float morphTargetInfluences[ 4 ];\\n\\t\\t#endif\\n\\t#endif\\n#endif\",morphtarget_vertex:\"#ifdef USE_MORPHTARGETS\\n\\ttransformed *= morphTargetBaseInfluence;\\n\\t#ifdef MORPHTARGETS_TEXTURE\\n\\t\\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\\n\\t\\t\\t#ifndef USE_MORPHNORMALS\\n\\t\\t\\t\\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\\n\\t\\t\\t#else\\n\\t\\t\\t\\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\\n\\t\\t\\t#endif\\n\\t\\t}\\n\\t#else\\n\\t\\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\\n\\t\\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\\n\\t\\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\\n\\t\\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\\n\\t\\t#ifndef USE_MORPHNORMALS\\n\\t\\t\\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\\n\\t\\t\\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\\n\\t\\t\\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\\n\\t\\t\\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\\n\\t\\t#endif\\n\\t#endif\\n#endif\",normal_fragment_begin:\"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\\n#ifdef FLAT_SHADED\\n\\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * faceDirection;\\n\\t#endif\\n\\t#ifdef USE_TANGENT\\n\\t\\tvec3 tangent = normalize( vTangent );\\n\\t\\tvec3 bitangent = normalize( vBitangent );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\ttangent = tangent * faceDirection;\\n\\t\\t\\tbitangent = bitangent * faceDirection;\\n\\t\\t#endif\\n\\t\\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\\n\\t\\t\\tmat3 vTBN = mat3( tangent, bitangent, normal );\\n\\t\\t#endif\\n\\t#endif\\n#endif\\nvec3 geometryNormal = normal;\",normal_fragment_maps:\"#ifdef OBJECTSPACE_NORMALMAP\\n\\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t#ifdef FLIP_SIDED\\n\\t\\tnormal = - normal;\\n\\t#endif\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * faceDirection;\\n\\t#endif\\n\\tnormal = normalize( normalMatrix * normal );\\n#elif defined( TANGENTSPACE_NORMALMAP )\\n\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tmapN.xy *= normalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tnormal = normalize( vTBN * mapN );\\n\\t#else\\n\\t\\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\\n\\t#endif\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\\n#endif\",normal_pars_fragment:\"#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\",normal_pars_vertex:\"#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\",normal_vertex:\"#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\",normalmap_pars_fragment:\"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n#endif\\n#ifdef OBJECTSPACE_NORMALMAP\\n\\tuniform mat3 normalMatrix;\\n#endif\\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\\n\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\\n\\t\\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\\n\\t\\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\\n\\t\\tvec2 st0 = dFdx( vUv.st );\\n\\t\\tvec2 st1 = dFdy( vUv.st );\\n\\t\\tvec3 N = surf_norm;\\n\\t\\tvec3 q1perp = cross( q1, N );\\n\\t\\tvec3 q0perp = cross( N, q0 );\\n\\t\\tvec3 T = q1perp * st0.x + q0perp * st1.x;\\n\\t\\tvec3 B = q1perp * st0.y + q0perp * st1.y;\\n\\t\\tfloat det = max( dot( T, T ), dot( B, B ) );\\n\\t\\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\\n\\t\\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\\n\\t}\\n#endif\",clearcoat_normal_fragment_begin:\"#ifdef USE_CLEARCOAT\\n\\tvec3 clearcoatNormal = geometryNormal;\\n#endif\",clearcoat_normal_fragment_maps:\"#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tclearcoatMapN.xy *= clearcoatNormalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\\n\\t#else\\n\\t\\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\\n\\t#endif\\n#endif\",clearcoat_pars_fragment:\"#ifdef USE_CLEARCOATMAP\\n\\tuniform sampler2D clearcoatMap;\\n#endif\\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\tuniform sampler2D clearcoatRoughnessMap;\\n#endif\\n#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tuniform sampler2D clearcoatNormalMap;\\n\\tuniform vec2 clearcoatNormalScale;\\n#endif\",output_fragment:\"#ifdef OPAQUE\\ndiffuseColor.a = 1.0;\\n#endif\\n#ifdef USE_TRANSMISSION\\ndiffuseColor.a *= transmissionAlpha + 0.1;\\n#endif\\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );\",packing:\"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 2.0 * rgb.xyz - 1.0;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nvec4 pack2HalfToRGBA( vec2 v ) {\\n\\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\\n\\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\\n}\\nvec2 unpackRGBATo2Half( vec4 v ) {\\n\\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n\\treturn linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\",premultiplied_alpha_fragment:\"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\",project_vertex:\"vec4 mvPosition = vec4( transformed, 1.0 );\\n#ifdef USE_INSTANCING\\n\\tmvPosition = instanceMatrix * mvPosition;\\n#endif\\nmvPosition = modelViewMatrix * mvPosition;\\ngl_Position = projectionMatrix * mvPosition;\",dithering_fragment:\"#ifdef DITHERING\\n\\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n#endif\",dithering_pars_fragment:\"#ifdef DITHERING\\n\\tvec3 dithering( vec3 color ) {\\n\\t\\tfloat grid_position = rand( gl_FragCoord.xy );\\n\\t\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\t\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\t\\treturn color + dither_shift_RGB;\\n\\t}\\n#endif\",roughnessmap_fragment:\"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\\troughnessFactor *= texelRoughness.g;\\n#endif\",roughnessmap_pars_fragment:\"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif\",shadowmap_pars_fragment:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\\n\\t\\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\\n\\t}\\n\\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\\n\\t\\tfloat occlusion = 1.0;\\n\\t\\tvec2 distribution = texture2DDistribution( shadow, uv );\\n\\t\\tfloat hard_shadow = step( compare , distribution.x );\\n\\t\\tif (hard_shadow != 1.0 ) {\\n\\t\\t\\tfloat distance = compare - distribution.x ;\\n\\t\\t\\tfloat variance = max( 0.00000, distribution.y * distribution.y );\\n\\t\\t\\tfloat softness_probability = variance / (variance + distance * distance );\\t\\t\\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\\t\\t\\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\\n\\t\\t}\\n\\t\\treturn occlusion;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tfloat shadow = 1.0;\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\\t\\tbool inFrustum = all( inFrustumVec );\\n\\t\\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\t\\tbool frustumTest = all( frustumTestVec );\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx2 = dx0 / 2.0;\\n\\t\\t\\tfloat dy2 = dy0 / 2.0;\\n\\t\\t\\tfloat dx3 = dx1 / 2.0;\\n\\t\\t\\tfloat dy3 = dy1 / 2.0;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 17.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx = texelSize.x;\\n\\t\\t\\tfloat dy = texelSize.y;\\n\\t\\t\\tvec2 uv = shadowCoord.xy;\\n\\t\\t\\tvec2 f = fract( uv * shadowMapSize + 0.5 );\\n\\t\\t\\tuv -= f * texelSize;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t\\tf.x ),\\n\\t\\t\\t\\t\\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t\\tf.x ),\\n\\t\\t\\t\\t\\t f.y )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#else\\n\\t\\t\\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn shadow;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\\t\\tdp += shadowBias;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif\",shadowmap_pars_vertex:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n#endif\",shadowmap_vertex:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\tvec4 shadowWorldPosition;\\n\\t#endif\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\",shadowmask_pars_fragment:\"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tspotLight = spotLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tpointLight = pointLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\",skinbase_vertex:\"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\",skinning_pars_vertex:\"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\t#ifdef BONE_TEXTURE\\n\\t\\tuniform highp sampler2D boneTexture;\\n\\t\\tuniform int boneTextureSize;\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tfloat j = i * 4.0;\\n\\t\\t\\tfloat x = mod( j, float( boneTextureSize ) );\\n\\t\\t\\tfloat y = floor( j / float( boneTextureSize ) );\\n\\t\\t\\tfloat dx = 1.0 / float( boneTextureSize );\\n\\t\\t\\tfloat dy = 1.0 / float( boneTextureSize );\\n\\t\\t\\ty = dy * ( y + 0.5 );\\n\\t\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\t\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#else\\n\\t\\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tmat4 bone = boneMatrices[ int(i) ];\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#endif\\n#endif\",skinning_vertex:\"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\ttransformed = ( bindMatrixInverse * skinned ).xyz;\\n#endif\",skinnormal_vertex:\"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n\\t#ifdef USE_TANGENT\\n\\t\\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#endif\\n#endif\",specularmap_fragment:\"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif\",specularmap_pars_fragment:\"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif\",tonemapping_fragment:\"#if defined( TONE_MAPPING )\\n\\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\",tonemapping_pars_fragment:\"#ifndef saturate\\n#define saturate( a ) clamp( a, 0.0, 1.0 )\\n#endif\\nuniform float toneMappingExposure;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\nvec3 RRTAndODTFit( vec3 v ) {\\n\\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\\n\\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\\n\\treturn a / b;\\n}\\nvec3 ACESFilmicToneMapping( vec3 color ) {\\n\\tconst mat3 ACESInputMat = mat3(\\n\\t\\tvec3( 0.59719, 0.07600, 0.02840 ),\\t\\tvec3( 0.35458, 0.90834, 0.13383 ),\\n\\t\\tvec3( 0.04823, 0.01566, 0.83777 )\\n\\t);\\n\\tconst mat3 ACESOutputMat = mat3(\\n\\t\\tvec3(\\t1.60475, -0.10208, -0.00327 ),\\t\\tvec3( -0.53108,\\t1.10813, -0.07276 ),\\n\\t\\tvec3( -0.07367, -0.00605,\\t1.07602 )\\n\\t);\\n\\tcolor *= toneMappingExposure / 0.6;\\n\\tcolor = ACESInputMat * color;\\n\\tcolor = RRTAndODTFit( color );\\n\\tcolor = ACESOutputMat * color;\\n\\treturn saturate( color );\\n}\\nvec3 CustomToneMapping( vec3 color ) { return color; }\",transmission_fragment:\"#ifdef USE_TRANSMISSION\\n\\tfloat transmissionAlpha = 1.0;\\n\\tfloat transmissionFactor = transmission;\\n\\tfloat thicknessFactor = thickness;\\n\\t#ifdef USE_TRANSMISSIONMAP\\n\\t\\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\\n\\t#endif\\n\\t#ifdef USE_THICKNESSMAP\\n\\t\\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\\n\\t#endif\\n\\tvec3 pos = vWorldPosition;\\n\\tvec3 v = normalize( cameraPosition - pos );\\n\\tvec3 n = inverseTransformDirection( normal, viewMatrix );\\n\\tvec4 transmission = getIBLVolumeRefraction(\\n\\t\\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\\n\\t\\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\\n\\t\\tattenuationColor, attenuationDistance );\\n\\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\\n\\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\\n#endif\",transmission_pars_fragment:\"#ifdef USE_TRANSMISSION\\n\\tuniform float transmission;\\n\\tuniform float thickness;\\n\\tuniform float attenuationDistance;\\n\\tuniform vec3 attenuationColor;\\n\\t#ifdef USE_TRANSMISSIONMAP\\n\\t\\tuniform sampler2D transmissionMap;\\n\\t#endif\\n\\t#ifdef USE_THICKNESSMAP\\n\\t\\tuniform sampler2D thicknessMap;\\n\\t#endif\\n\\tuniform vec2 transmissionSamplerSize;\\n\\tuniform sampler2D transmissionSamplerMap;\\n\\tuniform mat4 modelMatrix;\\n\\tuniform mat4 projectionMatrix;\\n\\tvarying vec3 vWorldPosition;\\n\\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\\n\\t\\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\\n\\t\\tvec3 modelScale;\\n\\t\\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\\n\\t\\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\\n\\t\\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\\n\\t\\treturn normalize( refractionVector ) * thickness * modelScale;\\n\\t}\\n\\tfloat applyIorToRoughness( float roughness, float ior ) {\\n\\t\\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\\n\\t}\\n\\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\\n\\t\\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\\n\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\\n\\t\\t#else\\n\\t\\t\\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\\n\\t\\t#endif\\n\\t}\\n\\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\\n\\t\\tif ( attenuationDistance == 0.0 ) {\\n\\t\\t\\treturn radiance;\\n\\t\\t} else {\\n\\t\\t\\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\\n\\t\\t\\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\\t\\t\\treturn transmittance * radiance;\\n\\t\\t}\\n\\t}\\n\\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\\n\\t\\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\\n\\t\\tvec3 attenuationColor, float attenuationDistance ) {\\n\\t\\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\\n\\t\\tvec3 refractedRayExit = position + transmissionRay;\\n\\t\\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\\n\\t\\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\\n\\t\\trefractionCoords += 1.0;\\n\\t\\trefractionCoords /= 2.0;\\n\\t\\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\\n\\t\\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\\n\\t\\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\\n\\t\\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\\n\\t}\\n#endif\",uv_pars_fragment:\"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\\n\\tvarying vec2 vUv;\\n#endif\",uv_pars_vertex:\"#ifdef USE_UV\\n\\t#ifdef UVS_VERTEX_ONLY\\n\\t\\tvec2 vUv;\\n\\t#else\\n\\t\\tvarying vec2 vUv;\\n\\t#endif\\n\\tuniform mat3 uvTransform;\\n#endif\",uv_vertex:\"#ifdef USE_UV\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n#endif\",uv2_pars_fragment:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvarying vec2 vUv2;\\n#endif\",uv2_pars_vertex:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n\\tuniform mat3 uv2Transform;\\n#endif\",uv2_vertex:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\\n#endif\",worldpos_vertex:\"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\\n\\tvec4 worldPosition = vec4( transformed, 1.0 );\\n\\t#ifdef USE_INSTANCING\\n\\t\\tworldPosition = instanceMatrix * worldPosition;\\n\\t#endif\\n\\tworldPosition = modelMatrix * worldPosition;\\n#endif\",background_vert:\"varying vec2 vUv;\\nuniform mat3 uvTransform;\\nvoid main() {\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n\\tgl_Position = vec4( position.xy, 1.0, 1.0 );\\n}\",background_frag:\"uniform sampler2D t2D;\\nvarying vec2 vUv;\\nvoid main() {\\n\\tvec4 texColor = texture2D( t2D, vUv );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\",cube_vert:\"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\tgl_Position.z = gl_Position.w;\\n}\",cube_frag:\"#include <envmap_common_pars_fragment>\\nuniform float opacity;\\nvarying vec3 vWorldDirection;\\n#include <cube_uv_reflection_fragment>\\nvoid main() {\\n\\tvec3 vReflect = vWorldDirection;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = envColor;\\n\\tgl_FragColor.a *= opacity;\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\",depth_vert:\"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvHighPrecisionZW = gl_Position.zw;\\n}\",depth_frag:\"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( fragCoordZ );\\n\\t#endif\\n}\",distanceRGBA_vert:\"#define DISTANCE\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition.xyz;\\n}\",distanceRGBA_frag:\"#define DISTANCE\\nuniform vec3 referencePosition;\\nuniform float nearDistance;\\nuniform float farDistance;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\tfloat dist = length( vWorldPosition - referencePosition );\\n\\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\\n\\tdist = saturate( dist );\\n\\tgl_FragColor = packDepthToRGBA( dist );\\n}\",equirect_vert:\"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\",equirect_frag:\"uniform sampler2D tEquirect;\\nvarying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldDirection );\\n\\tvec2 sampleUV = equirectUv( direction );\\n\\tvec4 texColor = texture2D( tEquirect, sampleUV );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\",linedashed_vert:\"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\tvLineDistance = scale * lineDistance;\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\",linedashed_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\",meshbasic_vert:\"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinbase_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\",meshbasic_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\t\\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <envmap_fragment>\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",meshlambert_vert:\"#define LAMBERT\\nvarying vec3 vLightFront;\\nvarying vec3 vIndirectFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n\\tvarying vec3 vIndirectBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <lights_lambert_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\",meshlambert_frag:\"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\nvarying vec3 vIndirectFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n\\tvarying vec3 vIndirectBack;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <emissivemap_fragment>\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vIndirectFront;\\n\\t#endif\\n\\t#include <lightmap_fragment>\\n\\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\\t#else\\n\\t\\treflectedLight.directDiffuse = vLightFront;\\n\\t#endif\\n\\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",meshmatcap_vert:\"#define MATCAP\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <color_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n}\",meshmatcap_frag:\"#define MATCAP\\nuniform vec3 diffuse;\\nuniform float opacity;\\nuniform sampler2D matcap;\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <normal_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tvec3 viewDir = normalize( vViewPosition );\\n\\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\\n\\tvec3 y = cross( viewDir, x );\\n\\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\\n\\t#ifdef USE_MATCAP\\n\\t\\tvec4 matcapColor = texture2D( matcap, uv );\\n\\t\\tmatcapColor = matcapTexelToLinear( matcapColor );\\n\\t#else\\n\\t\\tvec4 matcapColor = vec4( 1.0 );\\n\\t#endif\\n\\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",meshnormal_vert:\"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\",meshnormal_frag:\"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <normal_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n}\",meshphong_vert:\"#define PHONG\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\",meshphong_frag:\"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <normal_pars_fragment>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",meshphysical_vert:\"#define STANDARD\\nvarying vec3 vViewPosition;\\n#ifdef USE_TRANSMISSION\\n\\tvarying vec3 vWorldPosition;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n#ifdef USE_TRANSMISSION\\n\\tvWorldPosition = worldPosition.xyz;\\n#endif\\n}\",meshphysical_frag:\"#define STANDARD\\n#ifdef PHYSICAL\\n\\t#define IOR\\n\\t#define SPECULAR\\n#endif\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifdef IOR\\n\\tuniform float ior;\\n#endif\\n#ifdef SPECULAR\\n\\tuniform float specularIntensity;\\n\\tuniform vec3 specularColor;\\n\\t#ifdef USE_SPECULARINTENSITYMAP\\n\\t\\tuniform sampler2D specularIntensityMap;\\n\\t#endif\\n\\t#ifdef USE_SPECULARCOLORMAP\\n\\t\\tuniform sampler2D specularColorMap;\\n\\t#endif\\n#endif\\n#ifdef USE_CLEARCOAT\\n\\tuniform float clearcoat;\\n\\tuniform float clearcoatRoughness;\\n#endif\\n#ifdef USE_SHEEN\\n\\tuniform vec3 sheenColor;\\n\\tuniform float sheenRoughness;\\n\\t#ifdef USE_SHEENCOLORMAP\\n\\t\\tuniform sampler2D sheenColorMap;\\n\\t#endif\\n\\t#ifdef USE_SHEENROUGHNESSMAP\\n\\t\\tuniform sampler2D sheenRoughnessMap;\\n\\t#endif\\n#endif\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_physical_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <lights_pars_begin>\\n#include <normal_pars_fragment>\\n#include <lights_physical_pars_fragment>\\n#include <transmission_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <clearcoat_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <clearcoat_normal_fragment_begin>\\n\\t#include <clearcoat_normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\\n\\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\\n\\t#include <transmission_fragment>\\n\\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\\n\\t#ifdef USE_SHEEN\\n\\t\\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\\n\\t\\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\\n\\t#endif\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\\n\\t\\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\\n\\t\\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\\n\\t#endif\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",meshtoon_vert:\"#define TOON\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\",meshtoon_frag:\"#define TOON\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <normal_pars_fragment>\\n#include <lights_toon_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_toon_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",points_vert:\"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\tgl_PointSize = size;\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <fog_vertex>\\n}\",points_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\",shadow_vert:\"#include <common>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\",shadow_frag:\"uniform vec3 color;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\",sprite_vert:\"uniform float rotation;\\nuniform vec2 center;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\tvec2 scale;\\n\\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\\n\\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\\n\\t#ifndef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) scale *= - mvPosition.z;\\n\\t#endif\\n\\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\\n\\tvec2 rotatedPosition;\\n\\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\\n\\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\\n\\tmvPosition.xy += rotatedPosition;\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\",sprite_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\"},P={common:{diffuse:{value:new S(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Kt},uv2Transform:{value:new Kt},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new qe(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new S(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new S(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Kt}},sprite:{diffuse:{value:new S(16777215)},opacity:{value:1},center:{value:new qe(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Kt}}},Qa={basic:{uniforms:_a([P.common,P.specularmap,P.envmap,P.aomap,P.lightmap,P.fog]),vertexShader:_.meshbasic_vert,fragmentShader:_.meshbasic_frag},lambert:{uniforms:_a([P.common,P.specularmap,P.envmap,P.aomap,P.lightmap,P.emissivemap,P.fog,P.lights,{emissive:{value:new S(0)}}]),vertexShader:_.meshlambert_vert,fragmentShader:_.meshlambert_frag},phong:{uniforms:_a([P.common,P.specularmap,P.envmap,P.aomap,P.lightmap,P.emissivemap,P.bumpmap,P.normalmap,P.displacementmap,P.fog,P.lights,{emissive:{value:new S(0)},specular:{value:new S(1118481)},shininess:{value:30}}]),vertexShader:_.meshphong_vert,fragmentShader:_.meshphong_frag},standard:{uniforms:_a([P.common,P.envmap,P.aomap,P.lightmap,P.emissivemap,P.bumpmap,P.normalmap,P.displacementmap,P.roughnessmap,P.metalnessmap,P.fog,P.lights,{emissive:{value:new S(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:_.meshphysical_vert,fragmentShader:_.meshphysical_frag},toon:{uniforms:_a([P.common,P.aomap,P.lightmap,P.emissivemap,P.bumpmap,P.normalmap,P.displacementmap,P.gradientmap,P.fog,P.lights,{emissive:{value:new S(0)}}]),vertexShader:_.meshtoon_vert,fragmentShader:_.meshtoon_frag},matcap:{uniforms:_a([P.common,P.bumpmap,P.normalmap,P.displacementmap,P.fog,{matcap:{value:null}}]),vertexShader:_.meshmatcap_vert,fragmentShader:_.meshmatcap_frag},points:{uniforms:_a([P.points,P.fog]),vertexShader:_.points_vert,fragmentShader:_.points_frag},dashed:{uniforms:_a([P.common,P.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:_.linedashed_vert,fragmentShader:_.linedashed_frag},depth:{uniforms:_a([P.common,P.displacementmap]),vertexShader:_.depth_vert,fragmentShader:_.depth_frag},normal:{uniforms:_a([P.common,P.bumpmap,P.normalmap,P.displacementmap,{opacity:{value:1}}]),vertexShader:_.meshnormal_vert,fragmentShader:_.meshnormal_frag},sprite:{uniforms:_a([P.sprite,P.fog]),vertexShader:_.sprite_vert,fragmentShader:_.sprite_frag},background:{uniforms:{uvTransform:{value:new Kt},t2D:{value:null}},vertexShader:_.background_vert,fragmentShader:_.background_frag},cube:{uniforms:_a([P.envmap,{opacity:{value:1}}]),vertexShader:_.cube_vert,fragmentShader:_.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:_.equirect_vert,fragmentShader:_.equirect_frag},distanceRGBA:{uniforms:_a([P.common,P.displacementmap,{referencePosition:{value:new Ye},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:_.distanceRGBA_vert,fragmentShader:_.distanceRGBA_frag},shadow:{uniforms:_a([P.lights,P.fog,{color:{value:new S(0)},opacity:{value:1}}]),vertexShader:_.shadow_vert,fragmentShader:_.shadow_frag}};function $a(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,u=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,c=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;(0,oy.default)(this,$a),(e=Za.call(this)).type=\"PlaneGeometry\",e.parameters={width:t,height:h,widthSegments:u,heightSegments:c};for(var d=t/2,p=h/2,i=Math.floor(u),n=Math.floor(c),r=i+1,f=n+1,m=t/i,v=h/n,g=[],y=[],_=[],x=[],a=0;a<f;a++)for(var b=a*v-p,s=0;s<r;s++)y.push(s*m-d,-b,0),_.push(0,0,1),x.push(s/i),x.push(1-a/n);for(var o=0;o<n;o++)for(var l=0;l<i;l++){var M=l+r*(o+1),w=l+1+r*(o+1),S=l+1+r*o;g.push(l+r*o,M,S),g.push(M,w,S)}return e.setIndex(g),e.setAttribute(\"position\",new $(y,3)),e.setAttribute(\"normal\",new $(_,3)),e.setAttribute(\"uv\",new $(x,2)),e}function es(r,f,i,a,n){var s,o,l=new S(0),h=0,u=null,c=0,d=null;function p(e,t){i.buffers.color.setClear(e.r,e.g,e.b,t,n)}return{getClearColor:function(){return l},setClearColor:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;l.set(e),p(l,h=t)},getClearAlpha:function(){return h},setClearAlpha:function(e){p(l,h=e)},render:function(e,t){var i=!1,t=!0===t.isScene?t.background:null,n=(t&&t.isTexture&&(t=f.get(t)),r.xr),n=n.getSession&&n.getSession();null===(t=n&&\"additive\"===n.environmentBlendMode?null:t)?p(l,h):t&&t.isColor&&(p(t,1),i=!0),(r.autoClear||i)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),t&&(t.isCubeTexture||t.mapping===D)?(void 0===o&&((o=new da(new va(1,1,1),new Ma({name:\"BackgroundCubeMaterial\",uniforms:ya(Qa.cube.uniforms),vertexShader:Qa.cube.vertexShader,fragmentShader:Qa.cube.fragmentShader,side:Pe,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute(\"normal\"),o.geometry.deleteAttribute(\"uv\"),o.onBeforeRender=function(e,t,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(o.material,\"envMap\",{get:function(){return this.uniforms.envMap.value}}),a.update(o)),o.material.uniforms.envMap.value=t,o.material.uniforms.flipEnvMap.value=t.isCubeTexture&&!1===t.isRenderTargetTexture?-1:1,u===t&&c===t.version&&d===r.toneMapping||(o.material.needsUpdate=!0,c=(u=t).version,d=r.toneMapping),e.unshift(o,o.geometry,o.material,0,0,null)):t&&t.isTexture&&(void 0===s&&((s=new da(new Ka(2,2),new Ma({name:\"BackgroundMaterial\",uniforms:ya(Qa.background.uniforms),vertexShader:Qa.background.vertexShader,fragmentShader:Qa.background.fragmentShader,side:Ce,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute(\"normal\"),Object.defineProperty(s.material,\"map\",{get:function(){return this.uniforms.t2D.value}}),a.update(s)),!0===(s.material.uniforms.t2D.value=t).matrixAutoUpdate&&t.updateMatrix(),s.material.uniforms.uvTransform.value.copy(t.matrix),u===t&&c===t.version&&d===r.toneMapping||(s.material.needsUpdate=!0,c=(u=t).version,d=r.toneMapping),e.unshift(s,s.geometry,s.material,0,0,null))}}}function ts(z,H,G,V){var s=z.getParameter(z.MAX_VERTEX_ATTRIBS),W=V.isWebGL2?null:H.get(\"OES_vertex_array_object\"),Y=V.isWebGL2||null!==W,j={},e=Z(null),X=e;function J(e){return V.isWebGL2?z.bindVertexArray(e):W.bindVertexArrayOES(e)}function a(e){return V.isWebGL2?z.deleteVertexArray(e):W.deleteVertexArrayOES(e)}function Z(e){for(var t=[],i=[],n=[],r=0;r<s;r++)t[r]=0,i[r]=0,n[r]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:i,attributeDivisors:n,object:e,attributes:{},index:null}}function K(){for(var e=X.newAttributes,t=0,i=e.length;t<i;t++)e[t]=0}function q(e){Q(e,0)}function Q(e,t){var i=X.newAttributes,n=X.enabledAttributes,r=X.attributeDivisors;i[e]=1,0===n[e]&&(z.enableVertexAttribArray(e),n[e]=1),r[e]!==t&&((V.isWebGL2?z:H.get(\"ANGLE_instanced_arrays\"))[V.isWebGL2?\"vertexAttribDivisor\":\"vertexAttribDivisorANGLE\"](e,t),r[e]=t)}function $(){for(var e=X.newAttributes,t=X.enabledAttributes,i=0,n=t.length;i<n;i++)t[i]!==e[i]&&(z.disableVertexAttribArray(i),t[i]=0)}function ee(e,t,i,n,r,a){!0!==V.isWebGL2||i!==z.INT&&i!==z.UNSIGNED_INT?z.vertexAttribPointer(e,t,i,n,r,a):z.vertexAttribIPointer(e,t,i,r,a)}function o(){t(),X!==e&&J((X=e).object)}function t(){e.geometry=null,e.program=null,e.wireframe=!1}return{setup:function(u,c,d,o,e){var p=!1;if(Y){t=d,b=!0===c.wireframe,void 0===(n=j[o.id])&&(j[o.id]=n={}),void 0===(f=n[t.id])&&(n[t.id]=f={}),void 0===(n=f[b])&&(n=Z(V.isWebGL2?z.createVertexArray():W.createVertexArrayOES()),f[b]=n);var t=n;if(X!==t&&J((X=t).object),p=function(e){var t,i=X.attributes,n=o.attributes,r=0;for(t in n){var a=i[t],s=n[t];if(void 0===a)return!0;if(a.attribute!==s)return!0;if(a.data!==s.data)return!0;r++}return X.attributesNum!==r||X.index!==e}(e)){var f=e;var m,v={},g=o.attributes,y=0;for(m in g){var _=g[m],x={};(x.attribute=_).data&&(x.data=_.data),v[m]=x,y++}X.attributes=v,X.attributesNum=y,X.index=f}}else{var b=!0===c.wireframe;X.geometry===o.id&&X.program===d.id&&X.wireframe===b||(X.geometry=o.id,X.program=d.id,X.wireframe=b,p=!0)}if(!0===u.isInstancedMesh&&(p=!0),null!==e&&G.update(e,z.ELEMENT_ARRAY_BUFFER),p){var i=u,n=c,t=d,r=o;if(!1!==V.isWebGL2||!i.isInstancedMesh&&!r.isInstancedBufferGeometry||null!==H.get(\"ANGLE_instanced_arrays\")){K();var a,M=r.attributes,w=t.getAttributes(),S=n.defaultAttributeValues;for(a in w){var s=w[a];if(0<=s.location){var l=M[a];if(void 0===l&&(\"instanceMatrix\"===a&&i.instanceMatrix&&(l=i.instanceMatrix),\"instanceColor\"===a&&i.instanceColor&&(l=i.instanceColor)),void 0!==l){var E=l.normalized,T=l.itemSize,A=G.get(l);if(void 0!==A){var k=A.buffer,R=A.type,L=A.bytesPerElement;if(l.isInterleavedBufferAttribute){var h=l.data,C=h.stride,P=l.offset;if(h&&h.isInstancedInterleavedBuffer){for(var D=0;D<s.locationSize;D++)Q(s.location+D,h.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===r._maxInstanceCount&&(r._maxInstanceCount=h.meshPerAttribute*h.count)}else for(var I=0;I<s.locationSize;I++)q(s.location+I);z.bindBuffer(z.ARRAY_BUFFER,k);for(var F=0;F<s.locationSize;F++)ee(s.location+F,T/s.locationSize,R,E,C*L,(P+T/s.locationSize*F)*L)}else{if(l.isInstancedBufferAttribute){for(var N=0;N<s.locationSize;N++)Q(s.location+N,l.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===r._maxInstanceCount&&(r._maxInstanceCount=l.meshPerAttribute*l.count)}else for(var O=0;O<s.locationSize;O++)q(s.location+O);z.bindBuffer(z.ARRAY_BUFFER,k);for(var U=0;U<s.locationSize;U++)ee(s.location+U,T/s.locationSize,R,E,T*L,T/s.locationSize*U*L)}}}else if(void 0!==S){var B=S[a];if(void 0!==B)switch(B.length){case 2:z.vertexAttrib2fv(s.location,B);break;case 3:z.vertexAttrib3fv(s.location,B);break;case 4:z.vertexAttrib4fv(s.location,B);break;default:z.vertexAttrib1fv(s.location,B)}}}}$()}null!==e&&z.bindBuffer(z.ELEMENT_ARRAY_BUFFER,G.get(e).buffer)}else;},reset:o,resetDefaultState:t,dispose:function(){for(var e in o(),j){var t,i=j[e];for(t in i){var n,r=i[t];for(n in r)a(r[n].object),delete r[n];delete i[t]}delete j[e]}},releaseStatesOfGeometry:function(e){if(void 0!==j[e.id]){var t,i=j[e.id];for(t in i){var n,r=i[t];for(n in r)a(r[n].object),delete r[n];delete i[t]}delete j[e.id]}},releaseStatesOfProgram:function(e){for(var t in j){t=j[t];if(void 0!==t[e.id]){var i,n=t[e.id];for(i in n)a(n[i].object),delete n[i];delete t[e.id]}}},initAttributes:K,enableAttribute:q,disableUnusedAttributes:$}}function is(a,s,o,e){var l,h=e.isWebGL2;this.setMode=function(e){l=e},this.render=function(e,t){a.drawArrays(l,e,t),o.update(t,l,1)},this.renderInstances=function(e,t,i){if(0!==i){var n,r;if(h)n=a,r=\"drawArraysInstanced\";else if(r=\"drawArraysInstancedANGLE\",null===(n=s.get(\"ANGLE_instanced_arrays\")))return void console.error(\"THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.\");n[r](l,e,t,i),o.update(t,l,i)}}}function ns(t,i,e){var n;function r(e){if(\"highp\"===e){if(0<t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision&&0<t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision)return\"highp\";e=\"mediump\"}return\"mediump\"===e&&0<t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision&&0<t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision?\"mediump\":\"lowp\"}var a=\"undefined\"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||\"undefined\"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext,s=void 0!==e.precision?e.precision:\"highp\",o=r(s),o=(o!==s&&(console.warn(\"THREE.WebGLRenderer:\",s,\"not supported, using\",o,\"instead.\"),s=o),a||i.has(\"WEBGL_draw_buffers\")),e=!0===e.logarithmicDepthBuffer,u=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),l=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),c=t.getParameter(t.MAX_TEXTURE_SIZE),d=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),p=t.getParameter(t.MAX_VERTEX_ATTRIBS),f=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),m=t.getParameter(t.MAX_VARYING_VECTORS),v=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),h=0<l,g=a||i.has(\"OES_texture_float\");return{isWebGL2:a,drawBuffers:o,getMaxAnisotropy:function(){return void 0!==n?n:n=!0===i.has(\"EXT_texture_filter_anisotropic\")?(e=i.get(\"EXT_texture_filter_anisotropic\"),t.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT)):0;var e},getMaxPrecision:r,precision:s,logarithmicDepthBuffer:e,maxTextures:u,maxVertexTextures:l,maxTextureSize:c,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:h,floatFragmentTextures:g,floatVertexTextures:h&&g,maxSamples:a?t.getParameter(t.MAX_SAMPLES):0}}function rs(_){var h=this,u=null,c=0,d=!1,p=!1,f=new Ga,m=new Kt,v={value:null,needsUpdate:!1};function g(){v.value!==u&&(v.value=u,v.needsUpdate=0<c),h.numPlanes=c,h.numIntersection=0}function y(e,t,i,n){var r=null!==e?e.length:0,a=null;if(0!==r){if(a=v.value,!0!==n||null===a){var n=i+4*r,s=t.matrixWorldInverse;m.getNormalMatrix(s),(null===a||a.length<n)&&(a=new Float32Array(n));for(var o=0,l=i;o!==r;++o,l+=4)f.copy(e[o]).applyMatrix4(s,m),f.normal.toArray(a,l),a[l+3]=f.constant}v.value=a,v.needsUpdate=!0}return h.numPlanes=r,h.numIntersection=0,a}this.uniform=v,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,i){var n=0!==e.length||t||0!==c||d;return d=t,u=y(e,i,0),c=e.length,n},this.beginShadows=function(){p=!0,y(null)},this.endShadows=function(){p=!1,g()},this.setState=function(e,t,i){var n=e.clippingPlanes,r=e.clipIntersection,a=e.clipShadows,e=_.get(e);if(!d||null===n||0===n.length||p&&!a)p?y(null):g();else{var a=p?0:c,s=4*a,o=e.clippingState||null;v.value=o;for(var o=y(n,t,s,i),l=0;l!==s;++l)o[l]=u[l];e.clippingState=o,this.numIntersection=r?this.numPlanes:0,this.numPlanes+=a}}}function as(n){var r=new WeakMap;function a(e,t){return t===l?e.mapping=T:t===h&&(e.mapping=A),e}function s(e){var e=e.target,t=(e.removeEventListener(\"dispose\",s),r.get(e));void 0!==t&&(r.delete(e),t.dispose())}return{get:function(e){if(e&&e.isTexture&&!1===e.isRenderTargetTexture){var t=e.mapping;if(t===l||t===h){if(r.has(e))return a(r.get(e).texture,e.mapping);var i,t=e.image;return t&&0<t.height?(i=n.getRenderTarget(),(t=new Oa(t.height/2)).fromEquirectangularTexture(n,e),r.set(e,t),n.setRenderTarget(i),e.addEventListener(\"dispose\",s),a(t.texture,e.mapping)):null}}return e},dispose:function(){r=new WeakMap}}}Qa.physical={uniforms:_a([Qa.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new qe(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new S(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new qe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new S(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new S(1,1,1)},specularColorMap:{value:null}}]),vertexShader:_.meshphysical_vert,fragmentShader:_.meshphysical_frag};(0,ay.default)(ls,Ea),ss=hy(ls),(0,ly.default)(ls,[{key:\"copy\",value:function(e,t){return(0,ny.default)((0,sy.default)(ls.prototype),\"copy\",this).call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:\"setViewOffset\",value:function(e,t,i,n,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}},{key:\"clearViewOffset\",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:\"updateProjectionMatrix\",value:function(){var e,t=(this.right-this.left)/(2*this.zoom),i=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,a=n-t,n=n+t,t=r+i,r=r-i;null!==this.view&&this.view.enabled&&(i=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom,n=(a+=i*this.view.offsetX)+i*this.view.width,r=(t-=e*this.view.offsetY)-e*this.view.height),this.projectionMatrix.makeOrthographic(a,n,t,r,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:\"toJSON\",value:function(e){e=(0,ny.default)((0,sy.default)(ls.prototype),\"toJSON\",this).call(this,e);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}]);var ss,os=ls;function ls(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:-1,a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:.1,s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:2e3;return(0,oy.default)(this,ls),(e=ss.call(this)).type=\"OrthographicCamera\",e.zoom=1,e.view=null,e.left=t,e.right=i,e.top=n,e.bottom=r,e.near=a,e.far=s,e.updateProjectionMatrix(),e}os.prototype.isOrthographicCamera=!0;(0,ay.default)(cs,Ma),hs=hy(cs);var hs,us=(0,ly.default)(cs);function cs(e){return(0,oy.default)(this,cs),(e=hs.call(this,e)).type=\"RawShaderMaterial\",e}us.prototype.isRawShaderMaterial=!0;var ds=Math.pow(2,8),ps=[.125,.215,.35,.446,.526,.582],fs=5+ps.length,ms=((0,ry.default)(gs={},Ct,0),(0,ry.default)(gs,Pt,1),gs),vs=new os,gs=function(){for(var e=[],t=[],i=[],n=8,r=0;r<fs;r++){var a=Math.pow(2,n),s=(t.push(a),1/a);4<r?s=ps[r-8+4-1]:0==r&&(s=0),i.push(s);for(var s=1/(a-1),a=-s/2,s=1+s/2,u=[a,a,s,a,s,s,a,a,s,s,a,s],c=new Float32Array(108),d=new Float32Array(72),p=new Float32Array(36),o=0;o<6;o++){var l=o%3*2/3-1,h=2<o?0:-1,l=[l,h,0,l+2/3,h,0,l+2/3,1+h,0,l,h,0,l+2/3,1+h,0,l,1+h,0],h=(c.set(l,18*o),d.set(u,12*o),[o,o,o,o,o,o]);p.set(h,6*o)}a=new R;a.setAttribute(\"position\",new lr(c,3)),a.setAttribute(\"uv\",new lr(d,2)),a.setAttribute(\"faceIndex\",new lr(p,1)),e.push(a),4<n&&n--}return{_lodPlanes:e,_sizeLods:t,_sigmas:i}}(),ys=gs._lodPlanes,_s=gs._sizeLods,xs=gs._sigmas,bs=new S,Ms=null,gs=(1+Math.sqrt(5))/2,ws=1/gs,Ss=[new Ye(1,1,1),new Ye(-1,1,1),new Ye(1,1,-1),new Ye(-1,1,-1),new Ye(0,gs,ws),new Ye(0,gs,-ws),new Ye(ws,0,gs),new Ye(-ws,0,gs),new Ye(gs,ws,0),new Ye(-gs,ws,0)],Es=((0,ly.default)(Ts,[{key:\"fromScene\",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:.1,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:100,r=(Ms=this._renderer.getRenderTarget(),this._allocateTargets());return this._sceneToCubeUV(e,i,n,r),0<t&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}},{key:\"fromEquirectangular\",value:function(e){return this._fromTexture(e)}},{key:\"fromCubemap\",value:function(e){return this._fromTexture(e)}},{key:\"compileCubemapShader\",value:function(){null===this._cubemapShader&&(this._cubemapShader=Ls(),this._compileMaterial(this._cubemapShader))}},{key:\"compileEquirectangularShader\",value:function(){null===this._equirectShader&&(this._equirectShader=Rs(),this._compileMaterial(this._equirectShader))}},{key:\"dispose\",value:function(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(var e=0;e<ys.length;e++)ys[e].dispose()}},{key:\"_cleanup\",value:function(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Ms),e.scissorTest=!1,ks(e,0,0,e.width,e.height)}},{key:\"_fromTexture\",value:function(e){Ms=this._renderer.getRenderTarget();var t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}},{key:\"_allocateTargets\",value:function(e){var t={magFilter:Te,minFilter:Te,generateMipmaps:!1,type:He,format:We,encoding:Ct,depthBuffer:!1},i=As(t);return i.depthBuffer=!e,this._pingPongRenderTarget=As(t),i}},{key:\"_compileMaterial\",value:function(e){e=new da(ys[0],e);this._renderer.compile(e,vs)}},{key:\"_sceneToCubeUV\",value:function(e,u,c,d){var t=new ka(90,1,u,c),i=[1,-1,1,1,1,1],n=[1,1,1,-1,-1,-1],r=this._renderer,u=r.autoClear,c=r.toneMapping,a=(r.getClearColor(bs),r.toneMapping=Ie,r.autoClear=!1,new rr({name:\"PMREM.Background\",side:Pe,depthWrite:!1,depthTest:!1})),s=new da(new va,a),o=!1,l=e.background;l?l.isColor&&(a.color.copy(l),o=!(e.background=null)):(a.color.copy(bs),o=!0);for(var h=0;h<6;h++){var p=h%3;0==p?(t.up.set(0,i[h],0),t.lookAt(n[h],0,0)):1==p?(t.up.set(0,0,i[h]),t.lookAt(0,n[h],0)):(t.up.set(0,i[h],0),t.lookAt(0,0,n[h])),ks(d,p*ds,2<h?ds:0,ds,ds),r.setRenderTarget(d),o&&r.render(s,t),r.render(e,t)}s.geometry.dispose(),s.material.dispose(),r.toneMapping=c,r.autoClear=u,e.background=l}},{key:\"_setEncoding\",value:function(e,t){!0===this._renderer.capabilities.isWebGL2&&t.format===We&&t.type===Ue&&t.encoding===Pt?e.value=ms[Ct]:e.value=ms[t.encoding]}},{key:\"_textureToCubeUV\",value:function(e,t){var i=this._renderer,n=e.mapping===T||e.mapping===A,r=(n?null==this._cubemapShader&&(this._cubemapShader=Ls()):null==this._equirectShader&&(this._equirectShader=Rs()),n?this._cubemapShader:this._equirectShader),a=new da(ys[0],r),r=r.uniforms;r.envMap.value=e,n||r.texelSize.value.set(1/e.image.width,1/e.image.height),this._setEncoding(r.inputEncoding,e),ks(t,0,0,3*ds,2*ds),i.setRenderTarget(t),i.render(a,vs)}},{key:\"_applyPMREM\",value:function(e){var t=this._renderer,i=t.autoClear;t.autoClear=!1;for(var n=1;n<fs;n++){var r=Math.sqrt(xs[n]*xs[n]-xs[n-1]*xs[n-1]);this._blur(e,n-1,n,r,Ss[(n-1)%Ss.length])}t.autoClear=i}},{key:\"_blur\",value:function(e,t,i,n,r){var a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,n,\"latitudinal\",r),this._halfBlur(a,e,i,i,n,\"longitudinal\",r)}},{key:\"_halfBlur\",value:function(u,c,d,e,t,i,p){var f=this._renderer,n=this._blurMaterial,m=(\"latitudinal\"!==i&&\"longitudinal\"!==i&&console.error(\"blur direction must be either latitudinal or longitudinal!\"),new da(ys[e],n)),n=n.uniforms,r=_s[d]-1,r=isFinite(t)?Math.PI/(2*r):2*Math.PI/39,v=t/r,a=isFinite(t)?1+Math.floor(3*v):20;20<a&&console.warn(\"sigmaRadians, \".concat(t,\", is too large and will clip, as it requested \").concat(a,\" samples when the maximum is set to \").concat(20));for(var s=[],g=0,o=0;o<20;++o){var l=o/v,l=Math.exp(-l*l/2);s.push(l),0==o?g+=l:o<a&&(g+=2*l)}for(var h=0;h<s.length;h++)s[h]=s[h]/g;n.envMap.value=u.texture,n.samples.value=a,n.weights.value=s,n.latitudinal.value=\"latitudinal\"===i,p&&(n.poleAxis.value=p),n.dTheta.value=r,n.mipInt.value=8-d;t=_s[e];ks(c,3*Math.max(0,ds-2*t),(0===e?0:2*ds)+2*t*(4<e?e-8+4:0),3*t,2*t),f.setRenderTarget(c),f.render(m,vs)}}]),Ts);function Ts(e){var t;(0,oy.default)(this,Ts),this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=(e=new Float32Array(20),t=new Ye(0,1,0),new us({name:\"SphericalGaussianBlur\",defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:t}},vertexShader:\"\\n\\n\\t\\tprecision mediump float;\\n\\t\\tprecision mediump int;\\n\\n\\t\\tattribute vec3 position;\\n\\t\\tattribute vec2 uv;\\n\\t\\tattribute float faceIndex;\\n\\n\\t\\tvarying vec3 vOutputDirection;\\n\\n\\t\\t// RH coordinate system; PMREM face-indexing convention\\n\\t\\tvec3 getDirection( vec2 uv, float face ) {\\n\\n\\t\\t\\tuv = 2.0 * uv - 1.0;\\n\\n\\t\\t\\tvec3 direction = vec3( uv, 1.0 );\\n\\n\\t\\t\\tif ( face == 0.0 ) {\\n\\n\\t\\t\\t\\tdirection = direction.zyx; // ( 1, v, u ) pos x\\n\\n\\t\\t\\t} else if ( face == 1.0 ) {\\n\\n\\t\\t\\t\\tdirection = direction.xzy;\\n\\t\\t\\t\\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\\n\\n\\t\\t\\t} else if ( face == 2.0 ) {\\n\\n\\t\\t\\t\\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\\n\\n\\t\\t\\t} else if ( face == 3.0 ) {\\n\\n\\t\\t\\t\\tdirection = direction.zyx;\\n\\t\\t\\t\\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\\n\\n\\t\\t\\t} else if ( face == 4.0 ) {\\n\\n\\t\\t\\t\\tdirection = direction.xzy;\\n\\t\\t\\t\\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\\n\\n\\t\\t\\t} else if ( face == 5.0 ) {\\n\\n\\t\\t\\t\\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\\n\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn direction;\\n\\n\\t\\t}\\n\\n\\t\\tvoid main() {\\n\\n\\t\\t\\tvOutputDirection = getDirection( uv, faceIndex );\\n\\t\\t\\tgl_Position = vec4( position, 1.0 );\\n\\n\\t\\t}\\n\\t\",fragmentShader:\"\\n\\n\\t\\t\\tprecision mediump float;\\n\\t\\t\\tprecision mediump int;\\n\\n\\t\\t\\tvarying vec3 vOutputDirection;\\n\\n\\t\\t\\tuniform sampler2D envMap;\\n\\t\\t\\tuniform int samples;\\n\\t\\t\\tuniform float weights[ n ];\\n\\t\\t\\tuniform bool latitudinal;\\n\\t\\t\\tuniform float dTheta;\\n\\t\\t\\tuniform float mipInt;\\n\\t\\t\\tuniform vec3 poleAxis;\\n\\n\\t\\t\\t\".concat(\"\\n\\n\\t\\tuniform int inputEncoding;\\n\\n\\t\\t#include <encodings_pars_fragment>\\n\\n\\t\\tvec4 inputTexelToLinear( vec4 value ) {\\n\\n\\t\\t\\tif ( inputEncoding == 0 ) {\\n\\n\\t\\t\\t\\treturn value;\\n\\n\\t\\t\\t} else {\\n\\n\\t\\t\\t\\treturn sRGBToLinear( value );\\n\\n\\t\\t\\t}\\n\\n\\t\\t}\\n\\n\\t\\tvec4 envMapTexelToLinear( vec4 color ) {\\n\\n\\t\\t\\treturn inputTexelToLinear( color );\\n\\n\\t\\t}\\n\\t\",\"\\n\\n\\t\\t\\t#define ENVMAP_TYPE_CUBE_UV\\n\\t\\t\\t#include <cube_uv_reflection_fragment>\\n\\n\\t\\t\\tvec3 getSample( float theta, vec3 axis ) {\\n\\n\\t\\t\\t\\tfloat cosTheta = cos( theta );\\n\\t\\t\\t\\t// Rodrigues' axis-angle rotation\\n\\t\\t\\t\\tvec3 sampleDirection = vOutputDirection * cosTheta\\n\\t\\t\\t\\t\\t+ cross( axis, vOutputDirection ) * sin( theta )\\n\\t\\t\\t\\t\\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\\n\\n\\t\\t\\t\\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\\n\\n\\t\\t\\t}\\n\\n\\t\\t\\tvoid main() {\\n\\n\\t\\t\\t\\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\\n\\n\\t\\t\\t\\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\\n\\n\\t\\t\\t\\t\\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\\n\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\taxis = normalize( axis );\\n\\n\\t\\t\\t\\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\t\\t\\t\\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\\n\\n\\t\\t\\t\\tfor ( int i = 1; i < n; i++ ) {\\n\\n\\t\\t\\t\\t\\tif ( i >= samples ) {\\n\\n\\t\\t\\t\\t\\t\\tbreak;\\n\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\tfloat theta = dTheta * float( i );\\n\\t\\t\\t\\t\\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\\n\\t\\t\\t\\t\\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\\n\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t}\\n\\t\\t\"),blending:j,depthTest:!1,depthWrite:!1})),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}function As(e){e=new fi(3*ds,3*ds,e);return e.texture.mapping=D,e.texture.name=\"PMREM.cubeUv\",e.scissorTest=!0,e}function ks(e,t,i,n,r){e.viewport.set(t,i,n,r),e.scissor.set(t,i,n,r)}function Rs(){var e=new qe(1,1);return new us({name:\"EquirectangularToCubeUV\",uniforms:{envMap:{value:null},texelSize:{value:e},inputEncoding:{value:ms[Ct]}},vertexShader:\"\\n\\n\\t\\tprecision mediump float;\\n\\t\\tprecision mediump int;\\n\\n\\t\\tattribute vec3 position;\\n\\t\\tattribute vec2 uv;\\n\\t\\tattribute float faceIndex;\\n\\n\\t\\tvarying vec3 vOutputDirection;\\n\\n\\t\\t// RH coordinate system; PMREM face-indexing convention\\n\\t\\tvec3 getDirection( vec2 uv, float face ) {\\n\\n\\t\\t\\tuv = 2.0 * uv - 1.0;\\n\\n\\t\\t\\tvec3 direction = vec3( uv, 1.0 );\\n\\n\\t\\t\\tif ( face == 0.0 ) {\\n\\n\\t\\t\\t\\tdirection = direction.zyx; // ( 1, v, u ) pos x\\n\\n\\t\\t\\t} else if ( face == 1.0 ) {\\n\\n\\t\\t\\t\\tdirection = direction.xzy;\\n\\t\\t\\t\\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\\n\\n\\t\\t\\t} else if ( face == 2.0 ) {\\n\\n\\t\\t\\t\\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\\n\\n\\t\\t\\t} else if ( face == 3.0 ) {\\n\\n\\t\\t\\t\\tdirection = direction.zyx;\\n\\t\\t\\t\\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\\n\\n\\t\\t\\t} else if ( face == 4.0 ) {\\n\\n\\t\\t\\t\\tdirection = direction.xzy;\\n\\t\\t\\t\\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\\n\\n\\t\\t\\t} else if ( face == 5.0 ) {\\n\\n\\t\\t\\t\\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\\n\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn direction;\\n\\n\\t\\t}\\n\\n\\t\\tvoid main() {\\n\\n\\t\\t\\tvOutputDirection = getDirection( uv, faceIndex );\\n\\t\\t\\tgl_Position = vec4( position, 1.0 );\\n\\n\\t\\t}\\n\\t\",fragmentShader:\"\\n\\n\\t\\t\\tprecision mediump float;\\n\\t\\t\\tprecision mediump int;\\n\\n\\t\\t\\tvarying vec3 vOutputDirection;\\n\\n\\t\\t\\tuniform sampler2D envMap;\\n\\t\\t\\tuniform vec2 texelSize;\\n\\n\\t\\t\\t\".concat(\"\\n\\n\\t\\tuniform int inputEncoding;\\n\\n\\t\\t#include <encodings_pars_fragment>\\n\\n\\t\\tvec4 inputTexelToLinear( vec4 value ) {\\n\\n\\t\\t\\tif ( inputEncoding == 0 ) {\\n\\n\\t\\t\\t\\treturn value;\\n\\n\\t\\t\\t} else {\\n\\n\\t\\t\\t\\treturn sRGBToLinear( value );\\n\\n\\t\\t\\t}\\n\\n\\t\\t}\\n\\n\\t\\tvec4 envMapTexelToLinear( vec4 color ) {\\n\\n\\t\\t\\treturn inputTexelToLinear( color );\\n\\n\\t\\t}\\n\\t\",\"\\n\\n\\t\\t\\t#include <common>\\n\\n\\t\\t\\tvoid main() {\\n\\n\\t\\t\\t\\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\n\\t\\t\\t\\tvec3 outputDirection = normalize( vOutputDirection );\\n\\t\\t\\t\\tvec2 uv = equirectUv( outputDirection );\\n\\n\\t\\t\\t\\tvec2 f = fract( uv / texelSize - 0.5 );\\n\\t\\t\\t\\tuv -= f * texelSize;\\n\\t\\t\\t\\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\\n\\t\\t\\t\\tuv.x += texelSize.x;\\n\\t\\t\\t\\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\\n\\t\\t\\t\\tuv.y += texelSize.y;\\n\\t\\t\\t\\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\\n\\t\\t\\t\\tuv.x -= texelSize.x;\\n\\t\\t\\t\\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\\n\\n\\t\\t\\t\\tvec3 tm = mix( tl, tr, f.x );\\n\\t\\t\\t\\tvec3 bm = mix( bl, br, f.x );\\n\\t\\t\\t\\tgl_FragColor.rgb = mix( tm, bm, f.y );\\n\\n\\t\\t\\t}\\n\\t\\t\"),blending:j,depthTest:!1,depthWrite:!1})}function Ls(){return new us({name:\"CubemapToCubeUV\",uniforms:{envMap:{value:null},inputEncoding:{value:ms[Ct]}},vertexShader:\"\\n\\n\\t\\tprecision mediump float;\\n\\t\\tprecision mediump int;\\n\\n\\t\\tattribute vec3 position;\\n\\t\\tattribute vec2 uv;\\n\\t\\tattribute float faceIndex;\\n\\n\\t\\tvarying vec3 vOutputDirection;\\n\\n\\t\\t// RH coordinate system; PMREM face-indexing convention\\n\\t\\tvec3 getDirection( vec2 uv, float face ) {\\n\\n\\t\\t\\tuv = 2.0 * uv - 1.0;\\n\\n\\t\\t\\tvec3 direction = vec3( uv, 1.0 );\\n\\n\\t\\t\\tif ( face == 0.0 ) {\\n\\n\\t\\t\\t\\tdirection = direction.zyx; // ( 1, v, u ) pos x\\n\\n\\t\\t\\t} else if ( face == 1.0 ) {\\n\\n\\t\\t\\t\\tdirection = direction.xzy;\\n\\t\\t\\t\\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\\n\\n\\t\\t\\t} else if ( face == 2.0 ) {\\n\\n\\t\\t\\t\\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\\n\\n\\t\\t\\t} else if ( face == 3.0 ) {\\n\\n\\t\\t\\t\\tdirection = direction.zyx;\\n\\t\\t\\t\\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\\n\\n\\t\\t\\t} else if ( face == 4.0 ) {\\n\\n\\t\\t\\t\\tdirection = direction.xzy;\\n\\t\\t\\t\\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\\n\\n\\t\\t\\t} else if ( face == 5.0 ) {\\n\\n\\t\\t\\t\\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\\n\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn direction;\\n\\n\\t\\t}\\n\\n\\t\\tvoid main() {\\n\\n\\t\\t\\tvOutputDirection = getDirection( uv, faceIndex );\\n\\t\\t\\tgl_Position = vec4( position, 1.0 );\\n\\n\\t\\t}\\n\\t\",fragmentShader:\"\\n\\n\\t\\t\\tprecision mediump float;\\n\\t\\t\\tprecision mediump int;\\n\\n\\t\\t\\tvarying vec3 vOutputDirection;\\n\\n\\t\\t\\tuniform samplerCube envMap;\\n\\n\\t\\t\\t\".concat(\"\\n\\n\\t\\tuniform int inputEncoding;\\n\\n\\t\\t#include <encodings_pars_fragment>\\n\\n\\t\\tvec4 inputTexelToLinear( vec4 value ) {\\n\\n\\t\\t\\tif ( inputEncoding == 0 ) {\\n\\n\\t\\t\\t\\treturn value;\\n\\n\\t\\t\\t} else {\\n\\n\\t\\t\\t\\treturn sRGBToLinear( value );\\n\\n\\t\\t\\t}\\n\\n\\t\\t}\\n\\n\\t\\tvec4 envMapTexelToLinear( vec4 color ) {\\n\\n\\t\\t\\treturn inputTexelToLinear( color );\\n\\n\\t\\t}\\n\\t\",\"\\n\\n\\t\\t\\tvoid main() {\\n\\n\\t\\t\\t\\tgl_FragColor = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) );\\n\\n\\t\\t\\t}\\n\\t\\t\"),blending:j,depthTest:!1,depthWrite:!1})}function Cs(r){var a=new WeakMap,s=null;function o(e){var e=e.target,t=(e.removeEventListener(\"dispose\",o),a.get(e));void 0!==t&&(a.delete(e),t.dispose())}return{get:function(e){if(e&&e.isTexture&&!1===e.isRenderTargetTexture){var t=e.mapping,i=t===l||t===h,t=t===T||t===A;if(i||t){if(a.has(e))return a.get(e).texture;var n=e.image;return i&&n&&0<n.height||t&&n&&function(e){for(var t=0,i=0;i<6;i++)void 0!==e[i]&&t++;return 6===t}(n)?(t=r.getRenderTarget(),null===s&&(s=new Es(r)),n=i?s.fromEquirectangular(e):s.fromCubemap(e),a.set(e,n),r.setRenderTarget(t),e.addEventListener(\"dispose\",o),n.texture):null}}return e},dispose:function(){a=new WeakMap,null!==s&&(s.dispose(),s=null)}}}function Ps(i){var n={};function r(e){if(void 0!==n[e])return n[e];var t;switch(e){case\"WEBGL_depth_texture\":t=i.getExtension(\"WEBGL_depth_texture\")||i.getExtension(\"MOZ_WEBGL_depth_texture\")||i.getExtension(\"WEBKIT_WEBGL_depth_texture\");break;case\"EXT_texture_filter_anisotropic\":t=i.getExtension(\"EXT_texture_filter_anisotropic\")||i.getExtension(\"MOZ_EXT_texture_filter_anisotropic\")||i.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\");break;case\"WEBGL_compressed_texture_s3tc\":t=i.getExtension(\"WEBGL_compressed_texture_s3tc\")||i.getExtension(\"MOZ_WEBGL_compressed_texture_s3tc\")||i.getExtension(\"WEBKIT_WEBGL_compressed_texture_s3tc\");break;case\"WEBGL_compressed_texture_pvrtc\":t=i.getExtension(\"WEBGL_compressed_texture_pvrtc\")||i.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\");break;default:t=i.getExtension(e)}return n[e]=t}return{has:function(e){return null!==r(e)},init:function(e){e.isWebGL2?r(\"EXT_color_buffer_float\"):(r(\"WEBGL_depth_texture\"),r(\"OES_texture_float\"),r(\"OES_texture_half_float\"),r(\"OES_texture_half_float_linear\"),r(\"OES_standard_derivatives\"),r(\"OES_element_index_uint\"),r(\"OES_vertex_array_object\"),r(\"ANGLE_instanced_arrays\")),r(\"OES_texture_float_linear\"),r(\"EXT_color_buffer_half_float\"),r(\"WEBGL_multisampled_render_to_texture\")},get:function(e){var t=r(e);return null===t&&console.warn(\"THREE.WebGLRenderer: \"+e+\" extension not supported.\"),t}}}function Ds(l,v,n,r){var a={},g=new WeakMap;function s(e){var t,i=e.target;for(t in null!==i.index&&v.remove(i.index),i.attributes)v.remove(i.attributes[t]);i.removeEventListener(\"dispose\",s),delete a[i.id];e=g.get(i);e&&(v.remove(e),g.delete(i)),r.releaseStatesOfGeometry(i),!0===i.isInstancedBufferGeometry&&delete i._maxInstanceCount,n.memory.geometries--}function o(e){var t=[],i=e.index,n=e.attributes.position,r=0;if(null!==i)for(var a=i.array,r=i.version,s=0,u=a.length;s<u;s+=3){var o=a[s+0],l=a[s+1],c=a[s+2];t.push(o,l,l,c,c,o)}else{i=n.array;r=n.version;for(var h=0,d=i.length/3-1;h<d;h+=3){var p=h+0,f=h+1,m=h+2;t.push(p,f,f,m,m,p)}}n=new(65535<$t(t)?Sr:Mr)(t,1),n.version=r,i=g.get(e);i&&v.remove(i),g.set(e,n)}return{get:function(e,t){return!0===a[t.id]||(t.addEventListener(\"dispose\",s),a[t.id]=!0,n.memory.geometries++),t},update:function(e){var t,i=e.attributes;for(t in i)v.update(i[t],l.ARRAY_BUFFER);var n,r=e.morphAttributes;for(n in r)for(var a=r[n],s=0,o=a.length;s<o;s++)v.update(a[s],l.ARRAY_BUFFER)},getWireframeAttribute:function(e){var t,i=g.get(e);return(!i||null!==(t=e.index)&&i.version<t.version)&&o(e),g.get(e)}}}function Is(a,s,o,e){var l,h,u,c=e.isWebGL2;this.setMode=function(e){l=e},this.setIndex=function(e){h=e.type,u=e.bytesPerElement},this.render=function(e,t){a.drawElements(l,t,h,e*u),o.update(t,l,1)},this.renderInstances=function(e,t,i){if(0!==i){var n,r;if(c)n=a,r=\"drawElementsInstanced\";else if(r=\"drawElementsInstancedANGLE\",null===(n=s.get(\"ANGLE_instanced_arrays\")))return void console.error(\"THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.\");n[r](l,t,h,e*u,i),o.update(t,l,i)}}}function Fs(n){var r={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:r,programs:null,autoReset:!0,reset:function(){r.frame++,r.calls=0,r.triangles=0,r.points=0,r.lines=0},update:function(e,t,i){switch(r.calls++,t){case n.TRIANGLES:r.triangles+=i*(e/3);break;case n.LINES:r.lines+=i*(e/2);break;case n.LINE_STRIP:r.lines+=i*(e-1);break;case n.LINE_LOOP:r.lines+=i*e;break;case n.POINTS:r.points+=i*e;break;default:console.error(\"THREE.WebGLInfo: Unknown draw mode:\",t)}}}}(0,ay.default)(Us,oi),Ns=hy(Us);var Ns,Os=(0,ly.default)(Us);function Us(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;return(0,oy.default)(this,Us),(e=Ns.call(this,null)).image={data:t,width:i,height:n,depth:r},e.magFilter=Ne,e.minFilter=Ne,e.wrapR=Fe,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}function Bs(e,t){return e[0]-t[0]}function zs(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Hs(e,t){var i=1,t=(t.isInterleavedBufferAttribute?t.data:t).array;t instanceof Int8Array?i=127:t instanceof Int16Array?i=32767:t instanceof Int32Array?i=2147483647:console.error(\"THREE.WebGLMorphtargets: Unsupported morph attribute data type: \",t),e.divideScalar(i)}function Gs(F,N,O){for(var U={},B=new Float32Array(8),z=new WeakMap,H=new Ye,G=[],e=0;e<8;e++)G[e]=[e,0];return{update:function(e,t,u,i){var c=e.morphTargetInfluences;if(!0===N.isWebGL2){var d=t.morphAttributes.position.length,e=z.get(t);if(void 0===e||e.count!==d){void 0!==e&&e.texture.dispose();var p=void 0!==t.morphAttributes.normal,f=t.morphAttributes.position,m=t.morphAttributes.normal||[],v=!0==p?2:1,n=t.attributes.position.count*v,g=1,r=(n>N.maxTextureSize&&(g=Math.ceil(n/N.maxTextureSize),n=N.maxTextureSize),new Float32Array(n*g*4*d)),y=new Os(r,n,g,d);y.format=We,y.type=ze,y.needsUpdate=!0;for(var _=4*v,x=0;x<d;x++)for(var b=f[x],M=m[x],a=n*g*4*x,w=0;w<b.count;w++){H.fromBufferAttribute(b,w),!0===b.normalized&&Hs(H,b);var s=w*_;r[a+s]=H.x,r[a+s+1]=H.y,r[a+s+2]=H.z,!(r[a+s+3]=0)==p&&(H.fromBufferAttribute(M,w),!0===M.normalized&&Hs(H,M),r[a+s+4]=H.x,r[a+s+5]=H.y,r[a+s+6]=H.z,r[a+s+7]=0)}e={count:d,texture:y,size:new qe(n,g)},z.set(t,e)}for(var S=0,E=0;E<c.length;E++)S+=c[E];v=t.morphTargetsRelative?1:1-S;i.getUniforms().setValue(F,\"morphTargetBaseInfluence\",v),i.getUniforms().setValue(F,\"morphTargetInfluences\",c),i.getUniforms().setValue(F,\"morphTargetsTexture\",e.texture,O),i.getUniforms().setValue(F,\"morphTargetsTextureSize\",e.size)}else{var T=void 0===c?0:c.length;if(void 0===(o=U[t.id])||o.length!==T){for(var o=[],A=0;A<T;A++)o[A]=[A,0];U[t.id]=o}for(var k=0;k<T;k++){var R=o[k];R[0]=k,R[1]=c[k]}o.sort(zs);for(var l=0;l<8;l++)l<T&&o[l][1]?(G[l][0]=o[l][0],G[l][1]=o[l][1]):(G[l][0]=Number.MAX_SAFE_INTEGER,G[l][1]=0);G.sort(Bs);for(var L=t.morphAttributes.position,C=t.morphAttributes.normal,P=0,h=0;h<8;h++){var D=G[h],I=D[0],D=D[1];I!==Number.MAX_SAFE_INTEGER&&D?(L&&t.getAttribute(\"morphTarget\"+h)!==L[I]&&t.setAttribute(\"morphTarget\"+h,L[I]),C&&t.getAttribute(\"morphNormal\"+h)!==C[I]&&t.setAttribute(\"morphNormal\"+h,C[I]),P+=B[h]=D):(L&&!0===t.hasAttribute(\"morphTarget\"+h)&&t.deleteAttribute(\"morphTarget\"+h),C&&!0===t.hasAttribute(\"morphNormal\"+h)&&t.deleteAttribute(\"morphNormal\"+h),B[h]=0)}y=t.morphTargetsRelative?1:1-P;i.getUniforms().setValue(F,\"morphTargetBaseInfluence\",y),i.getUniforms().setValue(F,\"morphTargetInfluences\",B)}}}}function Vs(n,r,a,s){var o=new WeakMap;function l(e){e=e.target;e.removeEventListener(\"dispose\",l),a.remove(e.instanceMatrix),null!==e.instanceColor&&a.remove(e.instanceColor)}return{update:function(e){var t=s.render.frame,i=e.geometry,i=r.get(e,i);return o.get(i)!==t&&(r.update(i),o.set(i,t)),e.isInstancedMesh&&(!1===e.hasEventListener(\"dispose\",l)&&e.addEventListener(\"dispose\",l),a.update(e.instanceMatrix,n.ARRAY_BUFFER),null!==e.instanceColor&&a.update(e.instanceColor,n.ARRAY_BUFFER)),i},dispose:function(){o=new WeakMap}}}Os.prototype.isDataTexture2DArray=!0;(0,ay.default)(js,oi),Ws=hy(js);var Ws,gs=(0,ly.default)(js);function js(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;return(0,oy.default)(this,js),(e=Ws.call(this,null)).image={data:t,width:i,height:n,depth:r},e.magFilter=Ne,e.minFilter=Ne,e.wrapR=Fe,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}gs.prototype.isDataTexture3D=!0;var Xs=new oi,qs=new Os,Ys=new gs,Js=new Da,Zs=[],Ks=[],Qs=new Float32Array(16),$s=new Float32Array(9),eo=new Float32Array(4);function to(e,t,i){var n=e[0];if(n<=0||0<n)return e;var r=t*i,a=Zs[r];if(void 0===a&&(a=new Float32Array(r),Zs[r]=a),0!==t){n.toArray(a,0);for(var s=1,o=0;s!==t;++s)e[s].toArray(a,o+=i)}return a}function io(e,t){if(e.length===t.length){for(var i=0,n=e.length;i<n;i++)if(e[i]!==t[i])return;return 1}}function no(e,t){for(var i=0,n=t.length;i<n;i++)e[i]=t[i]}function ro(e,t){var i=Ks[t];void 0===i&&(i=new Int32Array(t),Ks[t]=i);for(var n=0;n!==t;++n)i[n]=e.allocateTextureUnit();return i}function ao(e,t){var i=this.cache;i[0]!==t&&(e.uniform1f(this.addr,t),i[0]=t)}function so(e,t){var i=this.cache;void 0!==t.x?i[0]===t.x&&i[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y):io(i,t)||(e.uniform2fv(this.addr,t),no(i,t))}function oo(e,t){var i=this.cache;void 0!==t.x?i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z):void 0!==t.r?i[0]===t.r&&i[1]===t.g&&i[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b):io(i,t)||(e.uniform3fv(this.addr,t),no(i,t))}function lo(e,t){var i=this.cache;void 0!==t.x?i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w):io(i,t)||(e.uniform4fv(this.addr,t),no(i,t))}function ho(e,t){var i=this.cache,n=t.elements;void 0===n?io(i,t)||(e.uniformMatrix2fv(this.addr,!1,t),no(i,t)):io(i,n)||(eo.set(n),e.uniformMatrix2fv(this.addr,!1,eo),no(i,n))}function uo(e,t){var i=this.cache,n=t.elements;void 0===n?io(i,t)||(e.uniformMatrix3fv(this.addr,!1,t),no(i,t)):io(i,n)||($s.set(n),e.uniformMatrix3fv(this.addr,!1,$s),no(i,n))}function co(e,t){var i=this.cache,n=t.elements;void 0===n?io(i,t)||(e.uniformMatrix4fv(this.addr,!1,t),no(i,t)):io(i,n)||(Qs.set(n),e.uniformMatrix4fv(this.addr,!1,Qs),no(i,n))}function po(e,t){var i=this.cache;i[0]!==t&&(e.uniform1i(this.addr,t),i[0]=t)}function fo(e,t){var i=this.cache;io(i,t)||(e.uniform2iv(this.addr,t),no(i,t))}function mo(e,t){var i=this.cache;io(i,t)||(e.uniform3iv(this.addr,t),no(i,t))}function vo(e,t){var i=this.cache;io(i,t)||(e.uniform4iv(this.addr,t),no(i,t))}function go(e,t){var i=this.cache;i[0]!==t&&(e.uniform1ui(this.addr,t),i[0]=t)}function yo(e,t){var i=this.cache;io(i,t)||(e.uniform2uiv(this.addr,t),no(i,t))}function _o(e,t){var i=this.cache;io(i,t)||(e.uniform3uiv(this.addr,t),no(i,t))}function xo(e,t){var i=this.cache;io(i,t)||(e.uniform4uiv(this.addr,t),no(i,t))}function bo(e,t,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.safeSetTexture2D(t||Xs,r)}function Mo(e,t,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTexture3D(t||Ys,r)}function wo(e,t,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.safeSetTextureCube(t||Js,r)}function So(e,t,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTexture2DArray(t||qs,r)}function Eo(e,t){e.uniform1fv(this.addr,t)}function To(e,t){t=to(t,this.size,2);e.uniform2fv(this.addr,t)}function Ao(e,t){t=to(t,this.size,3);e.uniform3fv(this.addr,t)}function ko(e,t){t=to(t,this.size,4);e.uniform4fv(this.addr,t)}function Ro(e,t){t=to(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,t)}function Lo(e,t){t=to(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,t)}function Co(e,t){t=to(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,t)}function Po(e,t){e.uniform1iv(this.addr,t)}function Do(e,t){e.uniform2iv(this.addr,t)}function Io(e,t){e.uniform3iv(this.addr,t)}function Fo(e,t){e.uniform4iv(this.addr,t)}function No(e,t){e.uniform1uiv(this.addr,t)}function Oo(e,t){e.uniform2uiv(this.addr,t)}function Uo(e,t){e.uniform3uiv(this.addr,t)}function Bo(e,t){e.uniform4uiv(this.addr,t)}function zo(e,t,i){var n=t.length,r=ro(i,n);e.uniform1iv(this.addr,r);for(var a=0;a!==n;++a)i.safeSetTexture2D(t[a]||Xs,r[a])}function Ho(e,t,i){var n=t.length,r=ro(i,n);e.uniform1iv(this.addr,r);for(var a=0;a!==n;++a)i.setTexture3D(t[a]||Ys,r[a])}function Go(e,t,i){var n=t.length,r=ro(i,n);e.uniform1iv(this.addr,r);for(var a=0;a!==n;++a)i.safeSetTextureCube(t[a]||Js,r[a])}function Vo(e,t,i){var n=t.length,r=ro(i,n);e.uniform1iv(this.addr,r);for(var a=0;a!==n;++a)i.setTexture2DArray(t[a]||qs,r[a])}function Wo(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function(){switch(t.type){case 5126:return ao;case 35664:return so;case 35665:return oo;case 35666:return lo;case 35674:return ho;case 35675:return uo;case 35676:return co;case 5124:case 35670:return po;case 35667:case 35671:return fo;case 35668:case 35672:return mo;case 35669:case 35673:return vo;case 5125:return go;case 36294:return yo;case 36295:return _o;case 36296:return xo;case 35678:case 36198:case 36298:case 36306:case 35682:return bo;case 35679:case 36299:case 36307:return Mo;case 35680:case 36300:case 36308:case 36293:return wo;case 36289:case 36303:case 36311:case 36292:return So}}()}function jo(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function(){switch(t.type){case 5126:return Eo;case 35664:return To;case 35665:return Ao;case 35666:return ko;case 35674:return Ro;case 35675:return Lo;case 35676:return Co;case 5124:case 35670:return Po;case 35667:case 35671:return Do;case 35668:case 35672:return Io;case 35669:case 35673:return Fo;case 5125:return No;case 36294:return Oo;case 36295:return Uo;case 36296:return Bo;case 35678:case 36198:case 36298:case 36306:case 35682:return zo;case 35679:case 36299:case 36307:return Ho;case 35680:case 36300:case 36308:case 36293:return Go;case 36289:case 36303:case 36311:case 36292:return Vo}}()}function Xo(e){this.id=e,this.seq=[],this.map={}}jo.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),no(t,e)},Xo.prototype.setValue=function(e,t,i){for(var n=this.seq,r=0,a=n.length;r!==a;++r){var s=n[r];s.setValue(e,t[s.id],i)}};var qo=/(\\w+)(\\])?(\\[|\\.)?/g;function Yo(e,t){e.seq.push(t),e.map[t.id]=t}function Jo(e,t){this.seq=[],this.map={};for(var u=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<u;++i){var n=e.getActiveUniform(t,i),r=(h=o=h=l=p=o=d=s=a=c=r=void 0,n),c=e.getUniformLocation(t,n.name),a=this,s=r.name,d=s.length;for(qo.lastIndex=0;;){var o=qo.exec(s),p=qo.lastIndex,l=o[1],h=\"]\"===o[2],o=o[3];if(h&&(l|=0),void 0===o||\"[\"===o&&p+2===d){Yo(a,new(void 0===o?Wo:jo)(l,r,c));break}h=a.map[l];void 0===h&&Yo(a,h=new Xo(l)),a=h}}}function Zo(e,t,i){t=e.createShader(t);return e.shaderSource(t,i),e.compileShader(t),t}Jo.prototype.setValue=function(e,t,i,n){t=this.map[t];void 0!==t&&t.setValue(e,i,n)},Jo.prototype.setOptional=function(e,t,i){t=t[i];void 0!==t&&this.setValue(e,i,t)},Jo.upload=function(e,t,i,n){for(var r=0,a=t.length;r!==a;++r){var s=t[r],o=i[s.id];!1!==o.needsUpdate&&s.setValue(e,o.value,n)}},Jo.seqWithValue=function(e,t){for(var i=[],n=0,r=e.length;n!==r;++n){var a=e[n];a.id in t&&i.push(a)}return i};var Ko=0;function Qo(e){switch(e){case Ct:return[\"Linear\",\"( value )\"];case Pt:return[\"sRGB\",\"( value )\"];default:return console.warn(\"THREE.WebGLProgram: Unsupported encoding:\",e),[\"Linear\",\"( value )\"]}}function $o(i,n,e){var t=i.getShaderParameter(n,i.COMPILE_STATUS),r=i.getShaderInfoLog(n).trim();return t&&\"\"===r?\"\":e.toUpperCase()+\"\\n\\n\"+r+\"\\n\\n\"+function(){for(var e=i.getShaderSource(n).split(\"\\n\"),t=0;t<e.length;t++)e[t]=t+1+\": \"+e[t];return e.join(\"\\n\")}()}function el(e,t){t=Qo(t);return\"vec4 \"+e+\"( vec4 value ) { return \"+t[0]+\"ToLinear\"+t[1]+\"; }\"}function tl(e){return\"\"!==e}function il(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function nl(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var rl=/^[ \\t]*#include +<([\\w\\d./]+)>/gm;function al(e){return e.replace(rl,sl)}function sl(e,t){var i=_[t];if(void 0===i)throw new Error(\"Can not resolve #include <\"+t+\">\");return al(i)}var ol=/#pragma unroll_loop[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g,ll=/#pragma unroll_loop_start\\s+for\\s*\\(\\s*int\\s+i\\s*=\\s*(\\d+)\\s*;\\s*i\\s*<\\s*(\\d+)\\s*;\\s*i\\s*\\+\\+\\s*\\)\\s*{([\\s\\S]+?)}\\s+#pragma unroll_loop_end/g;function hl(e){return e.replace(ll,cl).replace(ol,ul)}function ul(e,t,i,n){return console.warn(\"WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead.\"),cl(0,t,i,n)}function cl(e,t,i,n){for(var r=\"\",a=parseInt(t);a<parseInt(i);a++)r+=n.replace(/\\[\\s*i\\s*\\]/g,\"[ \"+a+\" ]\").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function dl(e){var t=\"precision \"+e.precision+\" float;\\nprecision \"+e.precision+\" int;\";return\"highp\"===e.precision?t+=\"\\n#define HIGH_PRECISION\":\"mediump\"===e.precision?t+=\"\\n#define MEDIUM_PRECISION\":\"lowp\"===e.precision&&(t+=\"\\n#define LOW_PRECISION\"),t}function pl(u,c,t,d){var e,i,n=u.getContext(),r=t.defines,a=t.vertexShader,s=t.fragmentShader,p=(h=\"SHADOWMAP_TYPE_BASIC\",t.shadowMapType===L?h=\"SHADOWMAP_TYPE_PCF\":t.shadowMapType===x?h=\"SHADOWMAP_TYPE_PCF_SOFT\":t.shadowMapType===C&&(h=\"SHADOWMAP_TYPE_VSM\"),function(){var e=\"ENVMAP_TYPE_CUBE\";if(t.envMap)switch(t.envMapMode){case T:case A:e=\"ENVMAP_TYPE_CUBE\";break;case D:case I:e=\"ENVMAP_TYPE_CUBE_UV\"}return e}()),o=function(){var e=\"ENVMAP_MODE_REFLECTION\";if(t.envMap)switch(t.envMapMode){case A:case I:e=\"ENVMAP_MODE_REFRACTION\"}return e}(),f=function(){var e=\"ENVMAP_BLENDING_NONE\";if(t.envMap)switch(t.combine){case b:e=\"ENVMAP_BLENDING_MULTIPLY\";break;case M:e=\"ENVMAP_BLENDING_MIX\";break;case E:e=\"ENVMAP_BLENDING_ADD\"}return e}(),m=t.isWebGL2?\"\":[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||\"physical\"===t.shaderID?\"#extension GL_OES_standard_derivatives : enable\":\"\",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?\"#extension GL_EXT_frag_depth : enable\":\"\",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?\"#extension GL_EXT_draw_buffers : require\":\"\",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?\"#extension GL_EXT_shader_texture_lod : enable\":\"\"].filter(tl).join(\"\\n\"),r=function(e){var t,i=[];for(t in e){var n=e[t];!1!==n&&i.push(\"#define \"+t+\" \"+n)}return i.join(\"\\n\")}(r),l=n.createProgram(),v=t.glslVersion?\"#version \"+t.glslVersion+\"\\n\":\"\";t.isRawShaderMaterial?(0<(e=[r].filter(tl).join(\"\\n\")).length&&(e+=\"\\n\"),0<(i=[m,r].filter(tl).join(\"\\n\")).length&&(i+=\"\\n\")):(e=[dl(t),\"#define SHADER_NAME \"+t.shaderName,r,t.instancing?\"#define USE_INSTANCING\":\"\",t.instancingColor?\"#define USE_INSTANCING_COLOR\":\"\",t.supportsVertexTextures?\"#define VERTEX_TEXTURES\":\"\",\"#define MAX_BONES \"+t.maxBones,t.useFog&&t.fog?\"#define USE_FOG\":\"\",t.useFog&&t.fogExp2?\"#define FOG_EXP2\":\"\",t.map?\"#define USE_MAP\":\"\",t.envMap?\"#define USE_ENVMAP\":\"\",t.envMap?\"#define \"+o:\"\",t.lightMap?\"#define USE_LIGHTMAP\":\"\",t.aoMap?\"#define USE_AOMAP\":\"\",t.emissiveMap?\"#define USE_EMISSIVEMAP\":\"\",t.bumpMap?\"#define USE_BUMPMAP\":\"\",t.normalMap?\"#define USE_NORMALMAP\":\"\",t.normalMap&&t.objectSpaceNormalMap?\"#define OBJECTSPACE_NORMALMAP\":\"\",t.normalMap&&t.tangentSpaceNormalMap?\"#define TANGENTSPACE_NORMALMAP\":\"\",t.clearcoatMap?\"#define USE_CLEARCOATMAP\":\"\",t.clearcoatRoughnessMap?\"#define USE_CLEARCOAT_ROUGHNESSMAP\":\"\",t.clearcoatNormalMap?\"#define USE_CLEARCOAT_NORMALMAP\":\"\",t.displacementMap&&t.supportsVertexTextures?\"#define USE_DISPLACEMENTMAP\":\"\",t.specularMap?\"#define USE_SPECULARMAP\":\"\",t.specularIntensityMap?\"#define USE_SPECULARINTENSITYMAP\":\"\",t.specularColorMap?\"#define USE_SPECULARCOLORMAP\":\"\",t.roughnessMap?\"#define USE_ROUGHNESSMAP\":\"\",t.metalnessMap?\"#define USE_METALNESSMAP\":\"\",t.alphaMap?\"#define USE_ALPHAMAP\":\"\",t.transmission?\"#define USE_TRANSMISSION\":\"\",t.transmissionMap?\"#define USE_TRANSMISSIONMAP\":\"\",t.thicknessMap?\"#define USE_THICKNESSMAP\":\"\",t.sheenColorMap?\"#define USE_SHEENCOLORMAP\":\"\",t.sheenRoughnessMap?\"#define USE_SHEENROUGHNESSMAP\":\"\",t.vertexTangents?\"#define USE_TANGENT\":\"\",t.vertexColors?\"#define USE_COLOR\":\"\",t.vertexAlphas?\"#define USE_COLOR_ALPHA\":\"\",t.vertexUvs?\"#define USE_UV\":\"\",t.uvsVertexOnly?\"#define UVS_VERTEX_ONLY\":\"\",t.flatShading?\"#define FLAT_SHADED\":\"\",t.skinning?\"#define USE_SKINNING\":\"\",t.useVertexTexture?\"#define BONE_TEXTURE\":\"\",t.morphTargets?\"#define USE_MORPHTARGETS\":\"\",t.morphNormals&&!1===t.flatShading?\"#define USE_MORPHNORMALS\":\"\",t.morphTargets&&t.isWebGL2?\"#define MORPHTARGETS_TEXTURE\":\"\",t.morphTargets&&t.isWebGL2?\"#define MORPHTARGETS_COUNT \"+t.morphTargetsCount:\"\",t.doubleSided?\"#define DOUBLE_SIDED\":\"\",t.flipSided?\"#define FLIP_SIDED\":\"\",t.shadowMapEnabled?\"#define USE_SHADOWMAP\":\"\",t.shadowMapEnabled?\"#define \"+h:\"\",t.sizeAttenuation?\"#define USE_SIZEATTENUATION\":\"\",t.logarithmicDepthBuffer?\"#define USE_LOGDEPTHBUF\":\"\",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?\"#define USE_LOGDEPTHBUF_EXT\":\"\",\"uniform mat4 modelMatrix;\",\"uniform mat4 modelViewMatrix;\",\"uniform mat4 projectionMatrix;\",\"uniform mat4 viewMatrix;\",\"uniform mat3 normalMatrix;\",\"uniform vec3 cameraPosition;\",\"uniform bool isOrthographic;\",\"#ifdef USE_INSTANCING\",\"\\tattribute mat4 instanceMatrix;\",\"#endif\",\"#ifdef USE_INSTANCING_COLOR\",\"\\tattribute vec3 instanceColor;\",\"#endif\",\"attribute vec3 position;\",\"attribute vec3 normal;\",\"attribute vec2 uv;\",\"#ifdef USE_TANGENT\",\"\\tattribute vec4 tangent;\",\"#endif\",\"#if defined( USE_COLOR_ALPHA )\",\"\\tattribute vec4 color;\",\"#elif defined( USE_COLOR )\",\"\\tattribute vec3 color;\",\"#endif\",\"#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )\",\"\\tattribute vec3 morphTarget0;\",\"\\tattribute vec3 morphTarget1;\",\"\\tattribute vec3 morphTarget2;\",\"\\tattribute vec3 morphTarget3;\",\"\\t#ifdef USE_MORPHNORMALS\",\"\\t\\tattribute vec3 morphNormal0;\",\"\\t\\tattribute vec3 morphNormal1;\",\"\\t\\tattribute vec3 morphNormal2;\",\"\\t\\tattribute vec3 morphNormal3;\",\"\\t#else\",\"\\t\\tattribute vec3 morphTarget4;\",\"\\t\\tattribute vec3 morphTarget5;\",\"\\t\\tattribute vec3 morphTarget6;\",\"\\t\\tattribute vec3 morphTarget7;\",\"\\t#endif\",\"#endif\",\"#ifdef USE_SKINNING\",\"\\tattribute vec4 skinIndex;\",\"\\tattribute vec4 skinWeight;\",\"#endif\",\"\\n\"].filter(tl).join(\"\\n\"),i=[m,dl(t),\"#define SHADER_NAME \"+t.shaderName,r,t.useFog&&t.fog?\"#define USE_FOG\":\"\",t.useFog&&t.fogExp2?\"#define FOG_EXP2\":\"\",t.map?\"#define USE_MAP\":\"\",t.matcap?\"#define USE_MATCAP\":\"\",t.envMap?\"#define USE_ENVMAP\":\"\",t.envMap?\"#define \"+p:\"\",t.envMap?\"#define \"+o:\"\",t.envMap?\"#define \"+f:\"\",t.lightMap?\"#define USE_LIGHTMAP\":\"\",t.aoMap?\"#define USE_AOMAP\":\"\",t.emissiveMap?\"#define USE_EMISSIVEMAP\":\"\",t.bumpMap?\"#define USE_BUMPMAP\":\"\",t.normalMap?\"#define USE_NORMALMAP\":\"\",t.normalMap&&t.objectSpaceNormalMap?\"#define OBJECTSPACE_NORMALMAP\":\"\",t.normalMap&&t.tangentSpaceNormalMap?\"#define TANGENTSPACE_NORMALMAP\":\"\",t.clearcoat?\"#define USE_CLEARCOAT\":\"\",t.clearcoatMap?\"#define USE_CLEARCOATMAP\":\"\",t.clearcoatRoughnessMap?\"#define USE_CLEARCOAT_ROUGHNESSMAP\":\"\",t.clearcoatNormalMap?\"#define USE_CLEARCOAT_NORMALMAP\":\"\",t.specularMap?\"#define USE_SPECULARMAP\":\"\",t.specularIntensityMap?\"#define USE_SPECULARINTENSITYMAP\":\"\",t.specularColorMap?\"#define USE_SPECULARCOLORMAP\":\"\",t.roughnessMap?\"#define USE_ROUGHNESSMAP\":\"\",t.metalnessMap?\"#define USE_METALNESSMAP\":\"\",t.alphaMap?\"#define USE_ALPHAMAP\":\"\",t.alphaTest?\"#define USE_ALPHATEST\":\"\",t.sheen?\"#define USE_SHEEN\":\"\",t.sheenColorMap?\"#define USE_SHEENCOLORMAP\":\"\",t.sheenRoughnessMap?\"#define USE_SHEENROUGHNESSMAP\":\"\",t.transmission?\"#define USE_TRANSMISSION\":\"\",t.transmissionMap?\"#define USE_TRANSMISSIONMAP\":\"\",t.thicknessMap?\"#define USE_THICKNESSMAP\":\"\",t.vertexTangents?\"#define USE_TANGENT\":\"\",t.vertexColors||t.instancingColor?\"#define USE_COLOR\":\"\",t.vertexAlphas?\"#define USE_COLOR_ALPHA\":\"\",t.vertexUvs?\"#define USE_UV\":\"\",t.uvsVertexOnly?\"#define UVS_VERTEX_ONLY\":\"\",t.gradientMap?\"#define USE_GRADIENTMAP\":\"\",t.flatShading?\"#define FLAT_SHADED\":\"\",t.doubleSided?\"#define DOUBLE_SIDED\":\"\",t.flipSided?\"#define FLIP_SIDED\":\"\",t.shadowMapEnabled?\"#define USE_SHADOWMAP\":\"\",t.shadowMapEnabled?\"#define \"+h:\"\",t.premultipliedAlpha?\"#define PREMULTIPLIED_ALPHA\":\"\",t.physicallyCorrectLights?\"#define PHYSICALLY_CORRECT_LIGHTS\":\"\",t.logarithmicDepthBuffer?\"#define USE_LOGDEPTHBUF\":\"\",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?\"#define USE_LOGDEPTHBUF_EXT\":\"\",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?\"#define TEXTURE_LOD_EXT\":\"\",\"uniform mat4 viewMatrix;\",\"uniform vec3 cameraPosition;\",\"uniform bool isOrthographic;\",t.toneMapping!==Ie?\"#define TONE_MAPPING\":\"\",t.toneMapping!==Ie?_.tonemapping_pars_fragment:\"\",t.toneMapping!==Ie?function(e,t){var i;switch(t){case 1:i=\"Linear\";break;case 2:i=\"Reinhard\";break;case 3:i=\"OptimizedCineon\";break;case 4:i=\"ACESFilmic\";break;case 5:i=\"Custom\";break;default:console.warn(\"THREE.WebGLProgram: Unsupported toneMapping:\",t),i=\"Linear\"}return\"vec3 \"+e+\"( vec3 color ) { return \"+i+\"ToneMapping( color ); }\"}(\"toneMapping\",t.toneMapping):\"\",t.dithering?\"#define DITHERING\":\"\",t.format===Ve?\"#define OPAQUE\":\"\",_.encodings_pars_fragment,t.map?el(\"mapTexelToLinear\",t.mapEncoding):\"\",t.matcap?el(\"matcapTexelToLinear\",t.matcapEncoding):\"\",t.envMap?el(\"envMapTexelToLinear\",t.envMapEncoding):\"\",t.emissiveMap?el(\"emissiveMapTexelToLinear\",t.emissiveMapEncoding):\"\",t.specularColorMap?el(\"specularColorMapTexelToLinear\",t.specularColorMapEncoding):\"\",t.sheenColorMap?el(\"sheenColorMapTexelToLinear\",t.sheenColorMapEncoding):\"\",t.lightMap?el(\"lightMapTexelToLinear\",t.lightMapEncoding):\"\",\"vec4 linearToOutputTexel( vec4 value ) { return LinearTo\"+(m=Qo(t.outputEncoding))[0]+m[1]+\"; }\",t.depthPacking?\"#define DEPTH_PACKING \"+t.depthPacking:\"\",\"\\n\"].filter(tl).join(\"\\n\")),a=nl(il(al(a),t),t),s=nl(il(al(s),t),t),a=hl(a),s=hl(s),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(v=\"#version 300 es\\n\",e=[\"precision mediump sampler2DArray;\",\"#define attribute in\",\"#define varying out\",\"#define texture2D texture\"].join(\"\\n\")+\"\\n\"+e,i=[\"#define varying in\",t.glslVersion===Ft?\"\":\"layout(location = 0) out highp vec4 pc_fragColor;\",t.glslVersion===Ft?\"\":\"#define gl_FragColor pc_fragColor\",\"#define gl_FragDepthEXT gl_FragDepth\",\"#define texture2D texture\",\"#define textureCube texture\",\"#define texture2DProj textureProj\",\"#define texture2DLodEXT textureLod\",\"#define texture2DProjLodEXT textureProjLod\",\"#define textureCubeLodEXT textureLod\",\"#define texture2DGradEXT textureGrad\",\"#define texture2DProjGradEXT textureProjGrad\",\"#define textureCubeGradEXT textureGrad\"].join(\"\\n\")+\"\\n\"+i);var g,y,h,r=v+i+s,p=Zo(n,n.VERTEX_SHADER,v+e+a),o=Zo(n,n.FRAGMENT_SHADER,r);return n.attachShader(l,p),n.attachShader(l,o),void 0!==t.index0AttributeName?n.bindAttribLocation(l,0,t.index0AttributeName):!0===t.morphTargets&&n.bindAttribLocation(l,0,\"position\"),n.linkProgram(l),u.debug.checkShaderErrors&&(f=n.getProgramInfoLog(l).trim(),h=n.getShaderInfoLog(p).trim(),m=n.getShaderInfoLog(o).trim(),!(v=s=!0)===n.getProgramParameter(l,n.LINK_STATUS)?(s=!1,a=$o(n,p,\"vertex\"),r=$o(n,o,\"fragment\"),console.error(\"THREE.WebGLProgram: Shader Error \"+n.getError()+\" - VALIDATE_STATUS \"+n.getProgramParameter(l,n.VALIDATE_STATUS)+\"\\n\\nProgram Info Log: \"+f+\"\\n\"+a+\"\\n\"+r)):\"\"!==f?console.warn(\"THREE.WebGLProgram: Program Info Log:\",f):\"\"!==h&&\"\"!==m||(v=!1),v&&(this.diagnostics={runnable:s,programLog:f,vertexShader:{log:h,prefix:e},fragmentShader:{log:m,prefix:i}})),n.deleteShader(p),n.deleteShader(o),this.getUniforms=function(){return g=void 0===g?new Jo(n,l):g},this.getAttributes=function(){return y=void 0===y?function(e,t){for(var i={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),r=0;r<n;r++){var a=e.getActiveAttrib(t,r),s=a.name,o=1;a.type===e.FLOAT_MAT2&&(o=2),a.type===e.FLOAT_MAT3&&(o=3),a.type===e.FLOAT_MAT4&&(o=4),i[s]={type:a.type,location:e.getAttribLocation(t,s),locationSize:o}}return i}(n,l):y},this.destroy=function(){d.releaseStatesOfProgram(this),n.deleteProgram(l),this.program=void 0},this.name=t.shaderName,this.id=Ko++,this.cacheKey=c,this.usedTimes=1,this.program=l,this.vertexShader=p,this.fragmentShader=o,this}var fl=0,ml=((0,ly.default)(gl,[{key:\"update\",value:function(e){var t=e.vertexShader,i=e.fragmentShader,t=this._getShaderStage(t),i=this._getShaderStage(i),e=this._getShaderCacheForMaterial(e);return!1===e.has(t)&&(e.add(t),t.usedTimes++),!1===e.has(i)&&(e.add(i),i.usedTimes++),this}},{key:\"remove\",value:function(e){var t,i=fy(this.materialCache.get(e));try{for(i.s();!(t=i.n()).done;){var n=t.value;n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n)}}catch(e){i.e(e)}finally{i.f()}return this.materialCache.delete(e),this}},{key:\"getVertexShaderID\",value:function(e){return this._getShaderStage(e.vertexShader).id}},{key:\"getFragmentShaderID\",value:function(e){return this._getShaderStage(e.fragmentShader).id}},{key:\"dispose\",value:function(){this.shaderCache.clear(),this.materialCache.clear()}},{key:\"_getShaderCacheForMaterial\",value:function(e){var t=this.materialCache;return!1===t.has(e)&&t.set(e,new Set),t.get(e)}},{key:\"_getShaderStage\",value:function(e){var t,i=this.shaderCache;return!1===i.has(e)&&(t=new vl,i.set(e,t)),i.get(e)}}]),gl),vl=(0,ly.default)(function e(){(0,oy.default)(this,e),this.id=fl++,this.usedTimes=0});function gl(){(0,oy.default)(this,gl),this.shaderCache=new Map,this.materialCache=new Map}function yl(m,w,S,v,g,o,y){var a=new yn,_=new ml,s=[],x=g.isWebGL2,E=g.logarithmicDepthBuffer,T=g.floatVertexTextures,A=g.maxVertexUniforms,k=g.vertexTextures,b=g.precision,R={MeshDepthMaterial:\"depth\",MeshDistanceMaterial:\"distanceRGBA\",MeshNormalMaterial:\"normal\",MeshBasicMaterial:\"basic\",MeshLambertMaterial:\"lambert\",MeshPhongMaterial:\"phong\",MeshToonMaterial:\"toon\",MeshStandardMaterial:\"physical\",MeshPhysicalMaterial:\"physical\",MeshMatcapMaterial:\"matcap\",LineBasicMaterial:\"basic\",LineDashedMaterial:\"dashed\",PointsMaterial:\"points\",ShadowMaterial:\"shadow\",SpriteMaterial:\"sprite\"};function M(e){var t=e&&e.isTexture?e.encoding:e&&e.isWebGLRenderTarget?(console.warn(\"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\"),e.texture.encoding):Ct;return t=x&&e&&e.isTexture&&e.format===We&&e.type===Ue&&e.encoding===Pt?Ct:t}return{getParameters:function(e,t,u,i,n){var r,c,a,s,o=i.fog,i=e.isMeshStandardMaterial?i.environment:null,i=(e.isMeshStandardMaterial?S:w).get(e.envMap||i),l=R[e.type],d=n.isSkinnedMesh?function(){var e=n.skeleton.bones;if(T)return 1024;var t=Math.floor((A-20)/4),t=Math.min(t,e.length);return t<e.length?(console.warn(\"THREE.WebGLRenderer: Skeleton has \"+e.length+\" bones. This GPU supports \"+t+\".\"),0):t}():0,p=(null!==e.precision&&(b=g.getMaxPrecision(e.precision))!==e.precision&&console.warn(\"THREE.WebGLProgram.getParameters:\",e.precision,\"not supported, using\",b,\"instead.\"),l?(a=(s=Qa[l]).vertexShader,s=s.fragmentShader):(a=e.vertexShader,s=e.fragmentShader,_.update(e),r=_.getVertexShaderID(e),c=_.getFragmentShaderID(e)),m.getRenderTarget()),f=0<e.alphaTest,h=0<e.clearcoat;return{isWebGL2:x,shaderID:l,shaderName:e.type,vertexShader:a,fragmentShader:s,defines:e.defines,customVertexShaderID:r,customFragmentShaderID:c,isRawShaderMaterial:!0===e.isRawShaderMaterial,glslVersion:e.glslVersion,precision:b,instancing:!0===n.isInstancedMesh,instancingColor:!0===n.isInstancedMesh&&null!==n.instanceColor,supportsVertexTextures:k,outputEncoding:null!==p?M(p.texture):m.outputEncoding,map:!!e.map,mapEncoding:M(e.map),matcap:!!e.matcap,matcapEncoding:M(e.matcap),envMap:!!i,envMapMode:i&&i.mapping,envMapEncoding:M(i),envMapCubeUV:!!i&&(i.mapping===D||i.mapping===I),lightMap:!!e.lightMap,lightMapEncoding:M(e.lightMap),aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:M(e.emissiveMap),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,objectSpaceNormalMap:e.normalMapType===It,tangentSpaceNormalMap:e.normalMapType===Dt,clearcoat:h,clearcoatMap:h&&!!e.clearcoatMap,clearcoatRoughnessMap:h&&!!e.clearcoatRoughnessMap,clearcoatNormalMap:h&&!!e.clearcoatNormalMap,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,specularIntensityMap:!!e.specularIntensityMap,specularColorMap:!!e.specularColorMap,specularColorMapEncoding:M(e.specularColorMap),alphaMap:!!e.alphaMap,alphaTest:f,gradientMap:!!e.gradientMap,sheen:0<e.sheen,sheenColorMap:!!e.sheenColorMap,sheenColorMapEncoding:M(e.sheenColorMap),sheenRoughnessMap:!!e.sheenRoughnessMap,transmission:0<e.transmission,transmissionMap:!!e.transmissionMap,thicknessMap:!!e.thicknessMap,combine:e.combine,vertexTangents:!!e.normalMap&&!!n.geometry&&!!n.geometry.attributes.tangent,vertexColors:e.vertexColors,vertexAlphas:!0===e.vertexColors&&!!n.geometry&&!!n.geometry.attributes.color&&4===n.geometry.attributes.color.itemSize,vertexUvs:!!(e.map||e.bumpMap||e.normalMap||e.specularMap||e.alphaMap||e.emissiveMap||e.roughnessMap||e.metalnessMap||e.clearcoatMap||e.clearcoatRoughnessMap||e.clearcoatNormalMap||e.displacementMap||e.transmissionMap||e.thicknessMap||e.specularIntensityMap||e.specularColorMap||e.sheenColorMap||e.sheenRoughnessMap),uvsVertexOnly:!(e.map||e.bumpMap||e.normalMap||e.specularMap||e.alphaMap||e.emissiveMap||e.roughnessMap||e.metalnessMap||e.clearcoatNormalMap||0<e.transmission||e.transmissionMap||e.thicknessMap||e.specularIntensityMap||e.specularColorMap||0<e.sheen||e.sheenColorMap||e.sheenRoughnessMap||!e.displacementMap),fog:!!o,useFog:e.fog,fogExp2:o&&o.isFogExp2,flatShading:!!e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:E,skinning:!0===n.isSkinnedMesh&&0<d,maxBones:d,useVertexTexture:T,morphTargets:!!n.geometry&&!!n.geometry.morphAttributes.position,morphNormals:!!n.geometry&&!!n.geometry.morphAttributes.normal,morphTargetsCount:n.geometry&&n.geometry.morphAttributes.position?n.geometry.morphAttributes.position.length:0,numDirLights:t.directional.length,numPointLights:t.point.length,numSpotLights:t.spot.length,numRectAreaLights:t.rectArea.length,numHemiLights:t.hemi.length,numDirLightShadows:t.directionalShadowMap.length,numPointLightShadows:t.pointShadowMap.length,numSpotLightShadows:t.spotShadowMap.length,numClippingPlanes:y.numPlanes,numClipIntersection:y.numIntersection,format:e.format,dithering:e.dithering,shadowMapEnabled:m.shadowMap.enabled&&0<u.length,shadowMapType:m.shadowMap.type,toneMapping:e.toneMapped?m.toneMapping:Ie,physicallyCorrectLights:m.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,doubleSided:e.side===De,flipSided:e.side===Pe,depthPacking:void 0!==e.depthPacking&&e.depthPacking,index0AttributeName:e.index0AttributeName,extensionDerivatives:e.extensions&&e.extensions.derivatives,extensionFragDepth:e.extensions&&e.extensions.fragDepth,extensionDrawBuffers:e.extensions&&e.extensions.drawBuffers,extensionShaderTextureLOD:e.extensions&&e.extensions.shaderTextureLOD,rendererExtensionFragDepth:x||v.has(\"EXT_frag_depth\"),rendererExtensionDrawBuffers:x||v.has(\"WEBGL_draw_buffers\"),rendererExtensionShaderTextureLod:x||v.has(\"EXT_shader_texture_lod\"),customProgramCacheKey:e.customProgramCacheKey()}},getProgramCacheKey:function(e){var t,i,n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.customVertexShaderID),n.push(e.customFragmentShaderID)),void 0!==e.defines)for(var r in e.defines)n.push(r),n.push(e.defines[r]);return!1===e.isRawShaderMaterial&&(i=e,(t=n).push(i.precision),t.push(i.outputEncoding),t.push(i.mapEncoding),t.push(i.matcapEncoding),t.push(i.envMapMode),t.push(i.envMapEncoding),t.push(i.lightMapEncoding),t.push(i.emissiveMapEncoding),t.push(i.combine),t.push(i.vertexUvs),t.push(i.fogExp2),t.push(i.sizeAttenuation),t.push(i.maxBones),t.push(i.morphTargetsCount),t.push(i.numDirLights),t.push(i.numPointLights),t.push(i.numSpotLights),t.push(i.numHemiLights),t.push(i.numRectAreaLights),t.push(i.numDirLightShadows),t.push(i.numPointLightShadows),t.push(i.numSpotLightShadows),t.push(i.shadowMapType),t.push(i.toneMapping),t.push(i.numClippingPlanes),t.push(i.numClipIntersection),t.push(i.format),t.push(i.specularColorMapEncoding),t.push(i.sheenColorMapEncoding),t=n,i=e,a.disableAll(),i.isWebGL2&&a.enable(0),i.supportsVertexTextures&&a.enable(1),i.instancing&&a.enable(2),i.instancingColor&&a.enable(3),i.map&&a.enable(4),i.matcap&&a.enable(5),i.envMap&&a.enable(6),i.envMapCubeUV&&a.enable(7),i.lightMap&&a.enable(8),i.aoMap&&a.enable(9),i.emissiveMap&&a.enable(10),i.bumpMap&&a.enable(11),i.normalMap&&a.enable(12),i.objectSpaceNormalMap&&a.enable(13),i.tangentSpaceNormalMap&&a.enable(14),i.clearcoat&&a.enable(15),i.clearcoatMap&&a.enable(16),i.clearcoatRoughnessMap&&a.enable(17),i.clearcoatNormalMap&&a.enable(18),i.displacementMap&&a.enable(19),i.specularMap&&a.enable(20),i.roughnessMap&&a.enable(21),i.metalnessMap&&a.enable(22),i.gradientMap&&a.enable(23),i.alphaMap&&a.enable(24),i.alphaTest&&a.enable(25),i.vertexColors&&a.enable(26),i.vertexAlphas&&a.enable(27),i.vertexUvs&&a.enable(28),i.vertexTangents&&a.enable(29),i.uvsVertexOnly&&a.enable(30),i.fog&&a.enable(31),t.push(a.mask),a.disableAll(),i.useFog&&a.enable(0),i.flatShading&&a.enable(1),i.logarithmicDepthBuffer&&a.enable(2),i.skinning&&a.enable(3),i.useVertexTexture&&a.enable(4),i.morphTargets&&a.enable(5),i.morphNormals&&a.enable(6),i.premultipliedAlpha&&a.enable(7),i.shadowMapEnabled&&a.enable(8),i.physicallyCorrectLights&&a.enable(9),i.doubleSided&&a.enable(10),i.flipSided&&a.enable(11),i.depthPacking&&a.enable(12),i.dithering&&a.enable(13),i.specularIntensityMap&&a.enable(14),i.specularColorMap&&a.enable(15),i.transmission&&a.enable(16),i.transmissionMap&&a.enable(17),i.thicknessMap&&a.enable(18),i.sheen&&a.enable(19),i.sheenColorMap&&a.enable(20),i.sheenRoughnessMap&&a.enable(21),t.push(a.mask),n.push(m.outputEncoding)),n.push(e.customProgramCacheKey),n.join()},getUniforms:function(e){var t=R[e.type];return t?(t=Qa[t],ba.clone(t.uniforms)):e.uniforms},acquireProgram:function(e,t){for(var i,n=0,r=s.length;n<r;n++){var a=s[n];if(a.cacheKey===t){++(i=a).usedTimes;break}}return void 0===i&&(i=new pl(m,t,e,o),s.push(i)),i},releaseProgram:function(e){var t;0==--e.usedTimes&&(t=s.indexOf(e),s[t]=s[s.length-1],s.pop(),e.destroy())},releaseShaderCache:function(e){_.remove(e)},programs:s,dispose:function(){_.dispose()}}}function _l(){var n=new WeakMap;return{get:function(e){var t=n.get(e);return void 0===t&&n.set(e,t={}),t},remove:function(e){n.delete(e)},update:function(e,t,i){n.get(e)[t]=i},dispose:function(){n=new WeakMap}}}function xl(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function bl(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Ml(){var o=[],l=0,s=[],h=[],u=[];function c(e,t,i,n,r,a){var s=o[l];return void 0===s?(s={id:e.id,object:e,geometry:t,material:i,groupOrder:n,renderOrder:e.renderOrder,z:r,group:a},o[l]=s):(s.id=e.id,s.object=e,s.geometry=t,s.material=i,s.groupOrder=n,s.renderOrder=e.renderOrder,s.z=r,s.group=a),l++,s}return{opaque:s,transmissive:h,transparent:u,init:function(){l=0,s.length=0,h.length=0,u.length=0},push:function(e,t,i,n,r,a){e=c(e,t,i,n,r,a);(0<i.transmission?h:!0===i.transparent?u:s).push(e)},unshift:function(e,t,i,n,r,a){e=c(e,t,i,n,r,a);(0<i.transmission?h:!0===i.transparent?u:s).unshift(e)},finish:function(){for(var e=l,t=o.length;e<t;e++){var i=o[e];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.group=null}},sort:function(e,t){1<s.length&&s.sort(e||xl),1<h.length&&h.sort(t||bl),1<u.length&&u.sort(t||bl)}}}function wl(){var n=new WeakMap;return{get:function(e,t){var i;return!1===n.has(e)?(i=new Ml,n.set(e,[i])):t>=n.get(e).length?(i=new Ml,n.get(e).push(i)):i=n.get(e)[t],i},dispose:function(){n=new WeakMap}}}function Sl(){var i={};return{get:function(e){if(void 0!==i[e.id])return i[e.id];var t;switch(e.type){case\"DirectionalLight\":t={direction:new Ye,color:new S};break;case\"SpotLight\":t={position:new Ye,direction:new Ye,color:new S,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case\"PointLight\":t={position:new Ye,color:new S,distance:0,decay:0};break;case\"HemisphereLight\":t={direction:new Ye,skyColor:new S,groundColor:new S};break;case\"RectAreaLight\":t={color:new S,position:new Ye,halfWidth:new Ye,halfHeight:new Ye}}return i[e.id]=t}}}var El=0;function Tl(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function Al(A,k){for(var i,R=new Sl,L=(i={},{get:function(e){if(void 0!==i[e.id])return i[e.id];var t;switch(e.type){case\"DirectionalLight\":case\"SpotLight\":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qe};break;case\"PointLight\":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qe,shadowCameraNear:1,shadowCameraFar:1e3}}return i[e.id]=t}}),C={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},e=0;e<9;e++)C.probe.push(new Ye);var f=new Ye,m=new Re,v=new Re;return{setup:function(u,e){for(var c=0,d=0,p=0,f=0;f<9;f++)C.probe[f].set(0,0,0);var t=0,i=0,n=0,m=0,v=0,g=0,y=0,_=0;u.sort(Tl);for(var r=!0!==e?Math.PI:1,x=0,b=u.length;x<b;x++){var a,s,M,w,o=u[x],l=o.color,S=o.intensity,h=o.distance,E=o.shadow&&o.shadow.map?o.shadow.map.texture:null;if(o.isAmbientLight)c+=l.r*S*r,d+=l.g*S*r,p+=l.b*S*r;else if(o.isLightProbe)for(var T=0;T<9;T++)C.probe[T].addScaledVector(o.sh.coefficients[T],S);else o.isDirectionalLight?((M=R.get(o)).color.copy(o.color).multiplyScalar(o.intensity*r),o.castShadow&&(a=o.shadow,(s=L.get(o)).shadowBias=a.bias,s.shadowNormalBias=a.normalBias,s.shadowRadius=a.radius,s.shadowMapSize=a.mapSize,C.directionalShadow[t]=s,C.directionalShadowMap[t]=E,C.directionalShadowMatrix[t]=o.shadow.matrix,g++),C.directional[t]=M,t++):o.isSpotLight?((a=R.get(o)).position.setFromMatrixPosition(o.matrixWorld),a.color.copy(l).multiplyScalar(S*r),a.distance=h,a.coneCos=Math.cos(o.angle),a.penumbraCos=Math.cos(o.angle*(1-o.penumbra)),a.decay=o.decay,o.castShadow&&(s=o.shadow,(M=L.get(o)).shadowBias=s.bias,M.shadowNormalBias=s.normalBias,M.shadowRadius=s.radius,M.shadowMapSize=s.mapSize,C.spotShadow[n]=M,C.spotShadowMap[n]=E,C.spotShadowMatrix[n]=o.shadow.matrix,_++),C.spot[n]=a,n++):o.isRectAreaLight?((h=R.get(o)).color.copy(l).multiplyScalar(S),h.halfWidth.set(.5*o.width,0,0),h.halfHeight.set(0,.5*o.height,0),C.rectArea[m]=h,m++):o.isPointLight?((l=R.get(o)).color.copy(o.color).multiplyScalar(o.intensity*r),l.distance=o.distance,l.decay=o.decay,o.castShadow&&(h=o.shadow,(w=L.get(o)).shadowBias=h.bias,w.shadowNormalBias=h.normalBias,w.shadowRadius=h.radius,w.shadowMapSize=h.mapSize,w.shadowCameraNear=h.camera.near,w.shadowCameraFar=h.camera.far,C.pointShadow[i]=w,C.pointShadowMap[i]=E,C.pointShadowMatrix[i]=o.shadow.matrix,y++),C.point[i]=l,i++):o.isHemisphereLight&&((h=R.get(o)).skyColor.copy(o.color).multiplyScalar(S*r),h.groundColor.copy(o.groundColor).multiplyScalar(S*r),C.hemi[v]=h,v++)}0<m&&(k.isWebGL2||!0===A.has(\"OES_texture_float_linear\")?(C.rectAreaLTC1=P.LTC_FLOAT_1,C.rectAreaLTC2=P.LTC_FLOAT_2):!0===A.has(\"OES_texture_half_float_linear\")?(C.rectAreaLTC1=P.LTC_HALF_1,C.rectAreaLTC2=P.LTC_HALF_2):console.error(\"THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.\")),C.ambient[0]=c,C.ambient[1]=d,C.ambient[2]=p;e=C.hash;e.directionalLength===t&&e.pointLength===i&&e.spotLength===n&&e.rectAreaLength===m&&e.hemiLength===v&&e.numDirectionalShadows===g&&e.numPointShadows===y&&e.numSpotShadows===_||(C.directional.length=t,C.spot.length=n,C.rectArea.length=m,C.point.length=i,C.hemi.length=v,C.directionalShadow.length=g,C.directionalShadowMap.length=g,C.pointShadow.length=y,C.pointShadowMap.length=y,C.spotShadow.length=_,C.spotShadowMap.length=_,C.directionalShadowMatrix.length=g,C.pointShadowMatrix.length=y,C.spotShadowMatrix.length=_,e.directionalLength=t,e.pointLength=i,e.spotLength=n,e.rectAreaLength=m,e.hemiLength=v,e.numDirectionalShadows=g,e.numPointShadows=y,e.numSpotShadows=_,C.version=El++)},setupView:function(e,u){for(var t=0,i=0,n=0,c=0,d=0,r=u.matrixWorldInverse,a=0,p=e.length;a<p;a++){var s,o,l,h=e[a];h.isDirectionalLight?((s=C.directional[t]).direction.setFromMatrixPosition(h.matrixWorld),f.setFromMatrixPosition(h.target.matrixWorld),s.direction.sub(f),s.direction.transformDirection(r),t++):h.isSpotLight?((s=C.spot[n]).position.setFromMatrixPosition(h.matrixWorld),s.position.applyMatrix4(r),s.direction.setFromMatrixPosition(h.matrixWorld),f.setFromMatrixPosition(h.target.matrixWorld),s.direction.sub(f),s.direction.transformDirection(r),n++):h.isRectAreaLight?((o=C.rectArea[c]).position.setFromMatrixPosition(h.matrixWorld),o.position.applyMatrix4(r),v.identity(),m.copy(h.matrixWorld),m.premultiply(r),v.extractRotation(m),o.halfWidth.set(.5*h.width,0,0),o.halfHeight.set(0,.5*h.height,0),o.halfWidth.applyMatrix4(v),o.halfHeight.applyMatrix4(v),c++):h.isPointLight?((o=C.point[i]).position.setFromMatrixPosition(h.matrixWorld),o.position.applyMatrix4(r),i++):h.isHemisphereLight&&((l=C.hemi[d]).direction.setFromMatrixPosition(h.matrixWorld),l.direction.transformDirection(r),l.direction.normalize(),d++)}},state:C}}function kl(e,t){var i=new Al(e,t),n=[],r=[];return{init:function(){n.length=0,r.length=0},state:{lightsArray:n,shadowsArray:r,lights:i},setupLights:function(e){i.setup(n,e)},setupLightsView:function(e){i.setupView(n,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){r.push(e)}}}function Rl(n,r){var a=new WeakMap;return{get:function(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return!1===a.has(e)?(t=new kl(n,r),a.set(e,[t])):i>=a.get(e).length?(t=new kl(n,r),a.get(e).push(t)):t=a.get(e)[i],t},dispose:function(){a=new WeakMap}}}(0,ay.default)(Pl,qn),Ll=hy(Pl),(0,ly.default)(Pl,[{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(Pl.prototype),\"copy\",this).call(this,e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}]);var Ll,Cl=Pl;function Pl(e){var t;return(0,oy.default)(this,Pl),(t=Ll.call(this)).type=\"MeshDepthMaterial\",t.depthPacking=3200,t.map=null,t.alphaMap=null,t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.wireframe=!1,t.wireframeLinewidth=1,t.fog=!1,t.setValues(e),t}Cl.prototype.isMeshDepthMaterial=!0;(0,ay.default)(Fl,qn),Dl=hy(Fl),(0,ly.default)(Fl,[{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(Fl.prototype),\"copy\",this).call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}]);var Dl,Il=Fl;function Fl(e){var t;return(0,oy.default)(this,Fl),(t=Dl.call(this)).type=\"MeshDistanceMaterial\",t.referencePosition=new Ye,t.nearDistance=1,t.farDistance=1e3,t.map=null,t.alphaMap=null,t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.fog=!1,t.setValues(e),t}Il.prototype.isMeshDistanceMaterial=!0;var Nl=\"void main() {\\n\\tgl_Position = vec4( position, 1.0 );\\n}\",Ol=\"uniform sampler2D shadow_pass;\\nuniform vec2 resolution;\\nuniform float radius;\\n#include <packing>\\nvoid main() {\\n\\tconst float samples = float( VSM_SAMPLES );\\n\\tfloat mean = 0.0;\\n\\tfloat squared_mean = 0.0;\\n\\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\\n\\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\\n\\tfor ( float i = 0.0; i < samples; i ++ ) {\\n\\t\\tfloat uvOffset = uvStart + i * uvStride;\\n\\t\\t#ifdef HORIZONTAL_PASS\\n\\t\\t\\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\\n\\t\\t\\tmean += distribution.x;\\n\\t\\t\\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\\n\\t\\t#else\\n\\t\\t\\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\\n\\t\\t\\tmean += depth;\\n\\t\\t\\tsquared_mean += depth * depth;\\n\\t\\t#endif\\n\\t}\\n\\tmean = mean / samples;\\n\\tsquared_mean = squared_mean / samples;\\n\\tfloat std_dev = sqrt( squared_mean - mean * mean );\\n\\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\\n}\";function Ul(g,y,e){var T=new Xa,_=new qe,x=new qe,A=new ci,u=new Cl({depthPacking:t}),c=new Il,d={},b=e.maxTextureSize,p={0:Pe,1:Ce,2:De},M=new Ma({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new qe},radius:{value:4}},vertexShader:Nl,fragmentShader:Ol}),w=M.clone(),e=(w.defines.HORIZONTAL_PASS=1,new R),S=(e.setAttribute(\"position\",new lr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3)),new da(e,M)),E=this;function k(e,h,t,i,n,r,a){var s,o,l=null,e=!0===i.isPointLight?e.customDistanceMaterial:e.customDepthMaterial,l=void 0!==e?e:!0===i.isPointLight?c:u;return(g.localClippingEnabled&&!0===t.clipShadows&&0!==t.clippingPlanes.length||t.displacementMap&&0!==t.displacementScale||t.alphaMap&&0<t.alphaTest)&&(e=l.uuid,s=t.uuid,void 0===(o=d[e])&&(d[e]=o={}),void 0===(e=o[s])&&(e=l.clone(),o[s]=e),l=e),l.visible=t.visible,l.wireframe=t.wireframe,l.side=a===C?null!==t.shadowSide?t.shadowSide:t.side:null!==t.shadowSide?t.shadowSide:p[t.side],l.alphaMap=t.alphaMap,l.alphaTest=t.alphaTest,l.clipShadows=t.clipShadows,l.clippingPlanes=t.clippingPlanes,l.clipIntersection=t.clipIntersection,l.displacementMap=t.displacementMap,l.displacementScale=t.displacementScale,l.displacementBias=t.displacementBias,l.wireframeLinewidth=t.wireframeLinewidth,l.linewidth=t.linewidth,!0===i.isPointLight&&!0===l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(i.matrixWorld),l.nearDistance=n,l.farDistance=r),l}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=L,this.render=function(e,u,c){if(!1!==E.enabled&&(!1!==E.autoUpdate||!1!==E.needsUpdate)&&0!==e.length){var d=g.getRenderTarget(),p=g.getActiveCubeFace(),f=g.getActiveMipmapLevel(),t=g.state;t.setBlending(j),t.buffers.color.setClear(1,1,1,1),t.buffers.depth.setTest(!0),t.setScissorTest(!1);for(var i=0,m=e.length;i<m;i++){var n=e[i],r=n.shadow;if(void 0!==r){if(!1!==r.autoUpdate||!1!==r.needsUpdate){_.copy(r.mapSize);var a=r.getFrameExtents();_.multiply(a),x.copy(r.mapSize),(_.x>b||_.y>b)&&(_.x>b&&(x.x=Math.floor(b/a.x),_.x=x.x*a.x,r.mapSize.x=x.x),_.y>b&&(x.y=Math.floor(b/a.y),_.y=x.y*a.y,r.mapSize.y=x.y)),null!==r.map||r.isPointLightShadow||this.type!==C||(r.map=new fi(_.x,_.y,a={minFilter:Te,magFilter:Te,format:We}),r.map.texture.name=n.name+\".shadowMap\",r.mapPass=new fi(_.x,_.y,a),r.camera.updateProjectionMatrix()),null===r.map&&(r.map=new fi(_.x,_.y,{minFilter:Ne,magFilter:Ne,format:We}),r.map.texture.name=n.name+\".shadowMap\",r.camera.updateProjectionMatrix()),g.setRenderTarget(r.map),g.clear();for(var v=r.getViewportCount(),s=0;s<v;s++){var o=r.getViewport(s);A.set(x.x*o.x,x.y*o.y,x.x*o.z,x.y*o.w),t.viewport(A),r.updateMatrices(n,s),T=r.getFrustum(),function u(e,t,i,n,r){if(!1!==e.visible){if(e.layers.test(t.layers)&&(e.isMesh||e.isLine||e.isPoints)&&(e.castShadow||e.receiveShadow&&r===C)&&(!e.frustumCulled||T.intersectsObject(e))){e.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,e.matrixWorld);var c,a=y.update(e),s=e.material;if(Array.isArray(s))for(var d=a.groups,o=0,p=d.length;o<p;o++){var f=d[o],l=s[f.materialIndex];l&&l.visible&&(l=k(e,0,l,n,i.near,i.far,r),g.renderBufferDirect(i,null,a,l,e,f))}else s.visible&&(c=k(e,0,s,n,i.near,i.far,r),g.renderBufferDirect(i,null,a,c,e,null))}for(var m=e.children,h=0,v=m.length;h<v;h++)u(m[h],t,i,n,r)}}(u,c,r.camera,n,this.type)}r.isPointLightShadow||this.type!==C||(a=r,l=c,h=void 0,h=y.update(S),M.defines.VSM_SAMPLES!==a.blurSamples&&(M.defines.VSM_SAMPLES=a.blurSamples,w.defines.VSM_SAMPLES=a.blurSamples,M.needsUpdate=!0,w.needsUpdate=!0),M.uniforms.shadow_pass.value=a.map.texture,M.uniforms.resolution.value=a.mapSize,M.uniforms.radius.value=a.radius,g.setRenderTarget(a.mapPass),g.clear(),g.renderBufferDirect(l,null,h,M,S,null),w.uniforms.shadow_pass.value=a.mapPass.texture,w.uniforms.resolution.value=a.mapSize,w.uniforms.radius.value=a.radius,g.setRenderTarget(a.map),g.clear(),g.renderBufferDirect(l,null,h,w,S,null)),r.needsUpdate=!1}}else console.warn(\"THREE.WebGLShadowMap:\",n,\"has no shadow.\")}E.needsUpdate=!1,g.setRenderTarget(d,p,f)}var l,h}}function Bl(u,s,e){var o=e.isWebGL2,h=new function(){var t=!1,a=new ci,i=null,s=new ci(0,0,0,0);return{setMask:function(e){i===e||t||(u.colorMask(e,e,e,e),i=e)},setLocked:function(e){t=e},setClear:function(e,t,i,n,r){!0===r&&(e*=n,t*=n,i*=n),a.set(e,t,i,n),!1===s.equals(a)&&(u.clearColor(e,t,i,n),s.copy(a))},reset:function(){t=!1,i=null,s.set(-1,0,0,0)}}},n=new function(){var t=!1,i=null,n=null,r=null;return{setTest:function(e){(e?c:d)(u.DEPTH_TEST)},setMask:function(e){i===e||t||(u.depthMask(e),i=e)},setFunc:function(e){if(n!==e){if(e)switch(e){case fe:u.depthFunc(u.NEVER);break;case me:u.depthFunc(u.ALWAYS);break;case ve:u.depthFunc(u.LESS);break;case ge:u.depthFunc(u.LEQUAL);break;case ye:u.depthFunc(u.EQUAL);break;case _e:u.depthFunc(u.GEQUAL);break;case xe:u.depthFunc(u.GREATER);break;case be:u.depthFunc(u.NOTEQUAL);break;default:u.depthFunc(u.LEQUAL)}else u.depthFunc(u.LEQUAL);n=e}},setLocked:function(e){t=e},setClear:function(e){r!==e&&(u.clearDepth(e),r=e)},reset:function(){t=!1,r=n=i=null}}},r=new function(){var t=!1,i=null,n=null,r=null,a=null,s=null,o=null,l=null,h=null;return{setTest:function(e){t||(e?c:d)(u.STENCIL_TEST)},setMask:function(e){i===e||t||(u.stencilMask(e),i=e)},setFunc:function(e,t,i){n===e&&r===t&&a===i||(u.stencilFunc(e,t,i),n=e,r=t,a=i)},setOp:function(e,t,i){s===e&&o===t&&l===i||(u.stencilOp(e,t,i),s=e,o=t,l=i)},setLocked:function(e){t=e},setClear:function(e){h!==e&&(u.clearStencil(e),h=e)},reset:function(){t=!1,h=l=o=s=a=r=n=i=null}}},t={},p={},f=null,m=!1,v=null,g=null,y=null,_=null,x=null,b=null,M=null,w=!1,S=null,E=null,T=null,A=null,k=null,R=u.getParameter(u.MAX_COMBINED_TEXTURE_IMAGE_UNITS),L=!1,e=0,i=u.getParameter(u.VERSION),a=(-1!==i.indexOf(\"WebGL\")?(e=parseFloat(/^WebGL (\\d)/.exec(i)[1]),L=1<=e):-1!==i.indexOf(\"OpenGL ES\")&&(e=parseFloat(/^OpenGL ES (\\d)/.exec(i)[1]),L=2<=e),null),C={},i=u.getParameter(u.SCISSOR_BOX),e=u.getParameter(u.VIEWPORT),P=(new ci).fromArray(i),D=(new ci).fromArray(e);function I(e,t,i){var n=new Uint8Array(4),r=u.createTexture();u.bindTexture(e,r),u.texParameteri(e,u.TEXTURE_MIN_FILTER,u.NEAREST),u.texParameteri(e,u.TEXTURE_MAG_FILTER,u.NEAREST);for(var a=0;a<i;a++)u.texImage2D(t+a,0,u.RGBA,1,1,0,u.RGBA,u.UNSIGNED_BYTE,n);return r}var F={};function c(e){!0!==t[e]&&(u.enable(e),t[e]=!0)}function d(e){!1!==t[e]&&(u.disable(e),t[e]=!1)}F[u.TEXTURE_2D]=I(u.TEXTURE_2D,u.TEXTURE_2D,1),F[u.TEXTURE_CUBE_MAP]=I(u.TEXTURE_CUBE_MAP,u.TEXTURE_CUBE_MAP_POSITIVE_X,6),h.setClear(0,0,0,1),n.setClear(1),r.setClear(0),c(u.DEPTH_TEST),n.setFunc(ge),U(!1),B(V),c(u.CULL_FACE),O(j);(0,ry.default)(i={},K,u.FUNC_ADD),(0,ry.default)(i,Q,u.FUNC_SUBTRACT),(0,ry.default)(i,ee,u.FUNC_REVERSE_SUBTRACT);var l=i,N=(o?(l[te]=u.MIN,l[ie]=u.MAX):null!==(e=s.get(\"EXT_blend_minmax\"))&&(l[te]=e.MIN_EXT,l[ie]=e.MAX_EXT),(0,ry.default)(i={},ne,u.ZERO),(0,ry.default)(i,re,u.ONE),(0,ry.default)(i,ae,u.SRC_COLOR),(0,ry.default)(i,oe,u.SRC_ALPHA),(0,ry.default)(i,pe,u.SRC_ALPHA_SATURATE),(0,ry.default)(i,ce,u.DST_COLOR),(0,ry.default)(i,he,u.DST_ALPHA),(0,ry.default)(i,se,u.ONE_MINUS_SRC_COLOR),(0,ry.default)(i,le,u.ONE_MINUS_SRC_ALPHA),(0,ry.default)(i,de,u.ONE_MINUS_DST_COLOR),(0,ry.default)(i,ue,u.ONE_MINUS_DST_ALPHA),i);function O(e,t,i,n,r,a,s,o){if(e!==j){if(!1===m&&(c(u.BLEND),m=!0),e===Z)r=r||t,a=a||i,s=s||n,t===g&&r===x||(u.blendEquationSeparate(l[t],l[r]),g=t,x=r),i===y&&n===_&&a===b&&s===M||(u.blendFuncSeparate(N[i],N[n],N[a],N[s]),y=i,_=n,b=a,M=s),v=e,w=null;else if(e!==v||o!==w){if(g===K&&x===K||(u.blendEquation(u.FUNC_ADD),x=g=K),o)switch(e){case X:u.blendFuncSeparate(u.ONE,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case q:u.blendFunc(u.ONE,u.ONE);break;case Y:u.blendFuncSeparate(u.ZERO,u.ZERO,u.ONE_MINUS_SRC_COLOR,u.ONE_MINUS_SRC_ALPHA);break;case J:u.blendFuncSeparate(u.ZERO,u.SRC_COLOR,u.ZERO,u.SRC_ALPHA);break;default:console.error(\"THREE.WebGLState: Invalid blending: \",e)}else switch(e){case X:u.blendFuncSeparate(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case q:u.blendFunc(u.SRC_ALPHA,u.ONE);break;case Y:u.blendFunc(u.ZERO,u.ONE_MINUS_SRC_COLOR);break;case J:u.blendFunc(u.ZERO,u.SRC_COLOR);break;default:console.error(\"THREE.WebGLState: Invalid blending: \",e)}M=b=_=y=null,v=e,w=o}}else!0===m&&(d(u.BLEND),m=!1)}function U(e){S!==e&&(e?u.frontFace(u.CW):u.frontFace(u.CCW),S=e)}function B(e){e!==G?(c(u.CULL_FACE),e!==E&&(e===V?u.cullFace(u.BACK):e===W?u.cullFace(u.FRONT):u.cullFace(u.FRONT_AND_BACK))):d(u.CULL_FACE),E=e}function z(e,t,i){e?(c(u.POLYGON_OFFSET_FILL),A===t&&k===i||(u.polygonOffset(t,i),A=t,k=i)):d(u.POLYGON_OFFSET_FILL)}function H(e){void 0===e&&(e=u.TEXTURE0+R-1),a!==e&&(u.activeTexture(e),a=e)}return{buffers:{color:h,depth:n,stencil:r},enable:c,disable:d,bindFramebuffer:function(e,t){return p[e]!==t&&(u.bindFramebuffer(e,t),p[e]=t,o&&(e===u.DRAW_FRAMEBUFFER&&(p[u.FRAMEBUFFER]=t),e===u.FRAMEBUFFER&&(p[u.DRAW_FRAMEBUFFER]=t)),!0)},useProgram:function(e){return f!==e&&(u.useProgram(e),f=e,!0)},setBlending:O,setMaterial:function(e,t){(e.side===De?d:c)(u.CULL_FACE);var i=e.side===Pe,t=(U(i=t?!i:i),e.blending===X&&!1===e.transparent?O(j):O(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),n.setFunc(e.depthFunc),n.setTest(e.depthTest),n.setMask(e.depthWrite),h.setMask(e.colorWrite),e.stencilWrite);r.setTest(t),t&&(r.setMask(e.stencilWriteMask),r.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),r.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),z(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),(!0===e.alphaToCoverage?c:d)(u.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:U,setCullFace:B,setLineWidth:function(e){e!==T&&(L&&u.lineWidth(e),T=e)},setPolygonOffset:z,setScissorTest:function(e){(e?c:d)(u.SCISSOR_TEST)},activeTexture:H,bindTexture:function(e,t){null===a&&H();var i=C[a];void 0===i&&(C[a]=i={type:void 0,texture:void 0}),i.type===e&&i.texture===t||(u.bindTexture(e,t||F[e]),i.type=e,i.texture=t)},unbindTexture:function(){var e=C[a];void 0!==e&&void 0!==e.type&&(u.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{u.compressedTexImage2D.apply(u,arguments)}catch(e){console.error(\"THREE.WebGLState:\",e)}},texImage2D:function(){try{u.texImage2D.apply(u,arguments)}catch(e){console.error(\"THREE.WebGLState:\",e)}},texImage3D:function(){try{u.texImage3D.apply(u,arguments)}catch(e){console.error(\"THREE.WebGLState:\",e)}},texStorage2D:function(){try{u.texStorage2D.apply(u,arguments)}catch(e){console.error(\"THREE.WebGLState:\",e)}},texStorage3D:function(){try{u.texStorage3D.apply(u,arguments)}catch(e){console.error(\"THREE.WebGLState:\",e)}},texSubImage2D:function(){try{u.texSubImage2D.apply(u,arguments)}catch(e){console.error(\"THREE.WebGLState:\",e)}},texSubImage3D:function(){try{u.texSubImage3D.apply(u,arguments)}catch(e){console.error(\"THREE.WebGLState:\",e)}},compressedTexSubImage2D:function(){try{u.compressedTexSubImage2D.apply(u,arguments)}catch(e){console.error(\"THREE.WebGLState:\",e)}},scissor:function(e){!1===P.equals(e)&&(u.scissor(e.x,e.y,e.z,e.w),P.copy(e))},viewport:function(e){!1===D.equals(e)&&(u.viewport(e.x,e.y,e.z,e.w),D.copy(e))},reset:function(){u.disable(u.BLEND),u.disable(u.CULL_FACE),u.disable(u.DEPTH_TEST),u.disable(u.POLYGON_OFFSET_FILL),u.disable(u.SCISSOR_TEST),u.disable(u.STENCIL_TEST),u.disable(u.SAMPLE_ALPHA_TO_COVERAGE),u.blendEquation(u.FUNC_ADD),u.blendFunc(u.ONE,u.ZERO),u.blendFuncSeparate(u.ONE,u.ZERO,u.ONE,u.ZERO),u.colorMask(!0,!0,!0,!0),u.clearColor(0,0,0,0),u.depthMask(!0),u.depthFunc(u.LESS),u.clearDepth(1),u.stencilMask(4294967295),u.stencilFunc(u.ALWAYS,0,4294967295),u.stencilOp(u.KEEP,u.KEEP,u.KEEP),u.clearStencil(0),u.cullFace(u.BACK),u.frontFace(u.CCW),u.polygonOffset(0,0),u.activeTexture(u.TEXTURE0),u.bindFramebuffer(u.FRAMEBUFFER,null),!0===o&&(u.bindFramebuffer(u.DRAW_FRAMEBUFFER,null),u.bindFramebuffer(u.READ_FRAMEBUFFER,null)),u.useProgram(null),u.lineWidth(1),u.scissor(0,0,u.canvas.width,u.canvas.height),u.viewport(0,0,u.canvas.width,u.canvas.height),t={},C={},w=m=!(p={}),k=A=T=E=S=M=b=x=_=y=g=v=f=a=null,P.set(0,0,u.canvas.width,u.canvas.height),D.set(0,0,u.canvas.width,u.canvas.height),h.reset(),n.reset(),r.reset()}}}function zl(E,r,T,A,b,k,M){var e,a,R=b.isWebGL2,t=b.maxTextures,C=b.maxCubemapSize,_=b.maxTextureSize,i=b.maxSamples,l=r.has(\"WEBGL_multisampled_render_to_texture\")?r.get(\"WEBGL_multisampled_render_to_texture\"):void 0,s=new WeakMap,n=!1;try{n=\"undefined\"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext(\"2d\")}catch(E){}function o(e,t){return n?new OffscreenCanvas(e,t):ni(\"canvas\")}function P(e,t,i,n){var r=1;return(r=e.width>n||e.height>n?n/Math.max(e.width,e.height):r)<1||!0===t?\"undefined\"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||\"undefined\"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||\"undefined\"!=typeof ImageBitmap&&e instanceof ImageBitmap?(t=(n=t?Yt:Math.floor)(r*e.width),n=n(r*e.height),void 0===a&&(a=o(t,n)),(r=i?o(t,n):a).width=t,r.height=n,r.getContext(\"2d\").drawImage(e,0,0,t,n),console.warn(\"THREE.WebGLRenderer: Texture has been resized from (\"+e.width+\"x\"+e.height+\") to (\"+t+\"x\"+n+\").\"),r):(\"data\"in e&&console.warn(\"THREE.WebGLRenderer: Image in DataTexture is too big (\"+e.width+\"x\"+e.height+\").\"),e):e}function D(e){return Xt(e.width)&&Xt(e.height)}function L(e,t){return e.generateMipmaps&&t&&e.minFilter!==Ne&&e.minFilter!==Te}function I(e){E.generateMipmap(e)}function F(e,t,i,n){if(!1===R)return t;if(null!==e){if(void 0!==E[e])return E[e];console.warn(\"THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '\"+e+\"'\")}e=t;return t===E.RED&&(i===E.FLOAT&&(e=E.R32F),i===E.HALF_FLOAT&&(e=E.R16F),i===E.UNSIGNED_BYTE&&(e=E.R8)),t===E.RGB&&(i===E.FLOAT&&(e=E.RGB32F),i===E.HALF_FLOAT&&(e=E.RGB16F),i===E.UNSIGNED_BYTE&&(e=E.RGB8)),t===E.RGBA&&(i===E.FLOAT&&(e=E.RGBA32F),i===E.HALF_FLOAT&&(e=E.RGBA16F),i===E.UNSIGNED_BYTE&&(e=n===Pt?E.SRGB8_ALPHA8:E.RGBA8)),e!==E.R16F&&e!==E.R32F&&e!==E.RGBA16F&&e!==E.RGBA32F||r.get(\"EXT_color_buffer_float\"),e}function N(e,t,i){return!0===L(e,i)||e.isFramebufferTexture&&e.minFilter!==Ne&&e.minFilter!==Te?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&0<e.mipmaps.length?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function h(e){return e===Ne||e===Se||e===Ee?E.NEAREST:E.LINEAR}function u(e){var t,i,e=e.target;e.removeEventListener(\"dispose\",u),t=e,void 0!==(i=A.get(t)).__webglInit&&(E.deleteTexture(i.__webglTexture),A.remove(t)),e.isVideoTexture&&s.delete(e),M.memory.textures--}function w(e){var e=e.target,t=(e.removeEventListener(\"dispose\",w),e.texture),i=A.get(e),n=A.get(t);if(e){if(void 0!==n.__webglTexture&&(E.deleteTexture(n.__webglTexture),M.memory.textures--),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(var r=0;r<6;r++)E.deleteFramebuffer(i.__webglFramebuffer[r]),i.__webglDepthbuffer&&E.deleteRenderbuffer(i.__webglDepthbuffer[r]);else E.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&E.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&E.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&E.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&E.deleteRenderbuffer(i.__webglDepthRenderbuffer);if(e.isWebGLMultipleRenderTargets)for(var a=0,s=t.length;a<s;a++){var o=A.get(t[a]);o.__webglTexture&&(E.deleteTexture(o.__webglTexture),M.memory.textures--),A.remove(t[a])}A.remove(t),A.remove(e)}}var c=0;function d(e,t){var i,n=A.get(e);if(e.isVideoTexture&&(i=e,r=M.render.frame,s.get(i)!==r&&(s.set(i,r),i.update())),0<e.version&&n.__version!==e.version){var r=e.image;if(void 0===r)console.warn(\"THREE.WebGLRenderer: Texture marked for update but image is undefined\");else{if(!1!==r.complete)return void v(n,e,t);console.warn(\"THREE.WebGLRenderer: Texture marked for update but image is incomplete\")}}T.activeTexture(E.TEXTURE0+t),T.bindTexture(E.TEXTURE_2D,n.__webglTexture)}function p(e,u){var c=A.get(e);if(0<e.version&&c.__version!==e.version){var d=c,t=e,e=u;if(6===t.image.length){U(d,t),T.activeTexture(E.TEXTURE0+e),T.bindTexture(E.TEXTURE_CUBE_MAP,d.__webglTexture),E.pixelStorei(E.UNPACK_FLIP_Y_WEBGL,t.flipY),E.pixelStorei(E.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),E.pixelStorei(E.UNPACK_ALIGNMENT,t.unpackAlignment),E.pixelStorei(E.UNPACK_COLORSPACE_CONVERSION_WEBGL,E.NONE);for(var p=t&&(t.isCompressedTexture||t.image[0].isCompressedTexture),f=t.image[0]&&t.image[0].isDataTexture,i=[],m=0;m<6;m++)i[m]=p||f?f?t.image[m].image:t.image[m]:P(t.image[m],!1,!0,C);var e=i[0],v=D(e)||R,n=k.convert(t.format),r=k.convert(t.type),a=F(t.internalFormat,n,r,t.encoding),s=R&&!0!==t.isVideoTexture,g=void 0===d.__version,y=N(t,e,v);if(O(E.TEXTURE_CUBE_MAP,t,v),p){s&&g&&T.texStorage2D(E.TEXTURE_CUBE_MAP,y,a,e.width,e.height);for(var _=0;_<6;_++)for(var o=i[_].mipmaps,x=0;x<o.length;x++){var l=o[x];t.format!==We&&t.format!==Ve?null!==n?s?T.compressedTexSubImage2D(E.TEXTURE_CUBE_MAP_POSITIVE_X+_,x,0,0,l.width,l.height,n,l.data):T.compressedTexImage2D(E.TEXTURE_CUBE_MAP_POSITIVE_X+_,x,a,l.width,l.height,0,l.data):console.warn(\"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()\"):s?T.texSubImage2D(E.TEXTURE_CUBE_MAP_POSITIVE_X+_,x,0,0,l.width,l.height,n,r,l.data):T.texImage2D(E.TEXTURE_CUBE_MAP_POSITIVE_X+_,x,a,l.width,l.height,0,n,r,l.data)}}else{o=t.mipmaps,s&&g&&(0<o.length&&y++,T.texStorage2D(E.TEXTURE_CUBE_MAP,y,a,i[0].width,i[0].height));for(var h=0;h<6;h++)if(f){s?T.texSubImage2D(E.TEXTURE_CUBE_MAP_POSITIVE_X+h,0,0,0,i[h].width,i[h].height,n,r,i[h].data):T.texImage2D(E.TEXTURE_CUBE_MAP_POSITIVE_X+h,0,a,i[h].width,i[h].height,0,n,r,i[h].data);for(var b=0;b<o.length;b++){var M=o[b].image[h].image;s?T.texSubImage2D(E.TEXTURE_CUBE_MAP_POSITIVE_X+h,b+1,0,0,M.width,M.height,n,r,M.data):T.texImage2D(E.TEXTURE_CUBE_MAP_POSITIVE_X+h,b+1,a,M.width,M.height,0,n,r,M.data)}}else{s?T.texSubImage2D(E.TEXTURE_CUBE_MAP_POSITIVE_X+h,0,0,0,n,r,i[h]):T.texImage2D(E.TEXTURE_CUBE_MAP_POSITIVE_X+h,0,a,n,r,i[h]);for(var w=0;w<o.length;w++){var S=o[w];s?T.texSubImage2D(E.TEXTURE_CUBE_MAP_POSITIVE_X+h,w+1,0,0,n,r,S.image[h]):T.texImage2D(E.TEXTURE_CUBE_MAP_POSITIVE_X+h,w+1,a,n,r,S.image[h])}}}L(t,v)&&I(E.TEXTURE_CUBE_MAP),d.__version=t.version,t.onUpdate&&t.onUpdate(t)}}else T.activeTexture(E.TEXTURE0+u),void T.bindTexture(E.TEXTURE_CUBE_MAP,c.__webglTexture)}(0,ry.default)(e={},Me,E.REPEAT),(0,ry.default)(e,Fe,E.CLAMP_TO_EDGE),(0,ry.default)(e,we,E.MIRRORED_REPEAT);var f=e,m=((0,ry.default)(e={},Ne,E.NEAREST),(0,ry.default)(e,Se,E.NEAREST_MIPMAP_NEAREST),(0,ry.default)(e,Ee,E.NEAREST_MIPMAP_LINEAR),(0,ry.default)(e,Te,E.LINEAR),(0,ry.default)(e,Ae,E.LINEAR_MIPMAP_NEAREST),(0,ry.default)(e,Oe,E.LINEAR_MIPMAP_LINEAR),e);function O(e,t,i){i?(E.texParameteri(e,E.TEXTURE_WRAP_S,f[t.wrapS]),E.texParameteri(e,E.TEXTURE_WRAP_T,f[t.wrapT]),e!==E.TEXTURE_3D&&e!==E.TEXTURE_2D_ARRAY||E.texParameteri(e,E.TEXTURE_WRAP_R,f[t.wrapR]),E.texParameteri(e,E.TEXTURE_MAG_FILTER,m[t.magFilter]),E.texParameteri(e,E.TEXTURE_MIN_FILTER,m[t.minFilter])):(E.texParameteri(e,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(e,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),e!==E.TEXTURE_3D&&e!==E.TEXTURE_2D_ARRAY||E.texParameteri(e,E.TEXTURE_WRAP_R,E.CLAMP_TO_EDGE),t.wrapS===Fe&&t.wrapT===Fe||console.warn(\"THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.\"),E.texParameteri(e,E.TEXTURE_MAG_FILTER,h(t.magFilter)),E.texParameteri(e,E.TEXTURE_MIN_FILTER,h(t.minFilter)),t.minFilter!==Ne&&t.minFilter!==Te&&console.warn(\"THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.\")),!0===r.has(\"EXT_texture_filter_anisotropic\")&&(i=r.get(\"EXT_texture_filter_anisotropic\"),t.type===ze&&!1===r.has(\"OES_texture_float_linear\")||!1===R&&t.type===He&&!1===r.has(\"OES_texture_half_float_linear\")||(1<t.anisotropy||A.get(t).__currentAnisotropy)&&(E.texParameterf(e,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,b.getMaxAnisotropy())),A.get(t).__currentAnisotropy=t.anisotropy))}function U(e,t){void 0===e.__webglInit&&(e.__webglInit=!0,t.addEventListener(\"dispose\",u),e.__webglTexture=E.createTexture(),M.memory.textures++)}function v(u,e,t){var c=E.TEXTURE_2D;e.isDataTexture2DArray&&(c=E.TEXTURE_2D_ARRAY),e.isDataTexture3D&&(c=E.TEXTURE_3D),U(u,e),T.activeTexture(E.TEXTURE0+t),T.bindTexture(c,u.__webglTexture),E.pixelStorei(E.UNPACK_FLIP_Y_WEBGL,e.flipY),E.pixelStorei(E.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),E.pixelStorei(E.UNPACK_ALIGNMENT,e.unpackAlignment),E.pixelStorei(E.UNPACK_COLORSPACE_CONVERSION_WEBGL,E.NONE);var i,t=!R&&(e.wrapS!==Fe||e.wrapT!==Fe||e.minFilter!==Ne&&e.minFilter!==Te)&&!1===D(e.image),t=P(e.image,t,!1,_),d=D(t)||R,n=k.convert(e.format),r=k.convert(e.type),a=F(e.internalFormat,n,r,e.encoding),s=(O(c,e,d),e.mipmaps),o=R&&!0!==e.isVideoTexture,l=void 0===u.__version,h=N(e,t,d);if(e.isDepthTexture)a=E.DEPTH_COMPONENT,R?a=e.type===ze?E.DEPTH_COMPONENT32F:e.type===Be?E.DEPTH_COMPONENT24:e.type===Ge?E.DEPTH24_STENCIL8:E.DEPTH_COMPONENT16:e.type===ze&&console.error(\"WebGLRenderer: Floating point depth texture requires WebGL2.\"),e.format===je&&a===E.DEPTH_COMPONENT&&e.type!==ke&&e.type!==Be&&(console.warn(\"THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.\"),e.type=ke,r=k.convert(e.type)),e.format===Xe&&a===E.DEPTH_COMPONENT&&(a=E.DEPTH_STENCIL,e.type!==Ge&&(console.warn(\"THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.\"),e.type=Ge,r=k.convert(e.type))),o&&l?T.texStorage2D(E.TEXTURE_2D,1,a,t.width,t.height):T.texImage2D(E.TEXTURE_2D,0,a,t.width,t.height,0,n,r,null);else if(e.isDataTexture)if(0<s.length&&d){o&&l&&T.texStorage2D(E.TEXTURE_2D,h,a,s[0].width,s[0].height);for(var p=0,f=s.length;p<f;p++)i=s[p],o?T.texSubImage2D(E.TEXTURE_2D,0,0,0,i.width,i.height,n,r,i.data):T.texImage2D(E.TEXTURE_2D,p,a,i.width,i.height,0,n,r,i.data);e.generateMipmaps=!1}else o?(l&&T.texStorage2D(E.TEXTURE_2D,h,a,t.width,t.height),T.texSubImage2D(E.TEXTURE_2D,0,0,0,t.width,t.height,n,r,t.data)):T.texImage2D(E.TEXTURE_2D,0,a,t.width,t.height,0,n,r,t.data);else if(e.isCompressedTexture){o&&l&&T.texStorage2D(E.TEXTURE_2D,h,a,s[0].width,s[0].height);for(var m=0,v=s.length;m<v;m++)i=s[m],e.format!==We&&e.format!==Ve?null!==n?o?T.compressedTexSubImage2D(E.TEXTURE_2D,m,0,0,i.width,i.height,n,i.data):T.compressedTexImage2D(E.TEXTURE_2D,m,a,i.width,i.height,0,i.data):console.warn(\"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()\"):o?T.texSubImage2D(E.TEXTURE_2D,m,0,0,i.width,i.height,n,r,i.data):T.texImage2D(E.TEXTURE_2D,m,a,i.width,i.height,0,n,r,i.data)}else if(e.isDataTexture2DArray)o?(l&&T.texStorage3D(E.TEXTURE_2D_ARRAY,h,a,t.width,t.height,t.depth),T.texSubImage3D(E.TEXTURE_2D_ARRAY,0,0,0,0,t.width,t.height,t.depth,n,r,t.data)):T.texImage3D(E.TEXTURE_2D_ARRAY,0,a,t.width,t.height,t.depth,0,n,r,t.data);else if(e.isDataTexture3D)o?(l&&T.texStorage3D(E.TEXTURE_3D,h,a,t.width,t.height,t.depth),T.texSubImage3D(E.TEXTURE_3D,0,0,0,0,t.width,t.height,t.depth,n,r,t.data)):T.texImage3D(E.TEXTURE_3D,0,a,t.width,t.height,t.depth,0,n,r,t.data);else if(e.isFramebufferTexture)o&&l?T.texStorage2D(E.TEXTURE_2D,h,a,t.width,t.height):T.texImage2D(E.TEXTURE_2D,0,a,t.width,t.height,0,n,r,null);else if(0<s.length&&d){o&&l&&T.texStorage2D(E.TEXTURE_2D,h,a,s[0].width,s[0].height);for(var g=0,y=s.length;g<y;g++)i=s[g],o?T.texSubImage2D(E.TEXTURE_2D,g,0,0,n,r,i):T.texImage2D(E.TEXTURE_2D,g,a,n,r,i);e.generateMipmaps=!1}else o?(l&&T.texStorage2D(E.TEXTURE_2D,h,a,t.width,t.height),T.texSubImage2D(E.TEXTURE_2D,0,0,0,n,r,t)):T.texImage2D(E.TEXTURE_2D,0,a,n,r,t);L(e,d)&&I(c),u.__version=e.version,e.onUpdate&&e.onUpdate(e)}function S(e,t,i,n,r){var a=k.convert(i.format),s=k.convert(i.type),o=F(i.internalFormat,a,s,i.encoding);A.get(t).__hasExternalTextures||(r===E.TEXTURE_3D||r===E.TEXTURE_2D_ARRAY?T.texImage3D(r,0,o,t.width,t.height,t.depth,0,a,s,null):T.texImage2D(r,0,o,t.width,t.height,0,a,s,null)),T.bindFramebuffer(E.FRAMEBUFFER,e),t.useRenderToTexture?l.framebufferTexture2DMultisampleEXT(E.FRAMEBUFFER,n,r,A.get(i).__webglTexture,0,H(t)):E.framebufferTexture2D(E.FRAMEBUFFER,n,r,A.get(i).__webglTexture,0),T.bindFramebuffer(E.FRAMEBUFFER,null)}function B(e,t,i){var n,r;E.bindRenderbuffer(E.RENDERBUFFER,e),t.depthBuffer&&!t.stencilBuffer?(n=E.DEPTH_COMPONENT16,i||t.useRenderToTexture?((r=t.depthTexture)&&r.isDepthTexture&&(r.type===ze?n=E.DEPTH_COMPONENT32F:r.type===Be&&(n=E.DEPTH_COMPONENT24)),r=H(t),t.useRenderToTexture?l.renderbufferStorageMultisampleEXT(E.RENDERBUFFER,r,n,t.width,t.height):E.renderbufferStorageMultisample(E.RENDERBUFFER,r,n,t.width,t.height)):E.renderbufferStorage(E.RENDERBUFFER,n,t.width,t.height),E.framebufferRenderbuffer(E.FRAMEBUFFER,E.DEPTH_ATTACHMENT,E.RENDERBUFFER,e)):t.depthBuffer&&t.stencilBuffer?(r=H(t),i&&t.useRenderbuffer?E.renderbufferStorageMultisample(E.RENDERBUFFER,r,E.DEPTH24_STENCIL8,t.width,t.height):t.useRenderToTexture?l.renderbufferStorageMultisampleEXT(E.RENDERBUFFER,r,E.DEPTH24_STENCIL8,t.width,t.height):E.renderbufferStorage(E.RENDERBUFFER,E.DEPTH_STENCIL,t.width,t.height),E.framebufferRenderbuffer(E.FRAMEBUFFER,E.DEPTH_STENCIL_ATTACHMENT,E.RENDERBUFFER,e)):(n=!0===t.isWebGLMultipleRenderTargets?t.texture[0]:t.texture,r=k.convert(n.format),e=k.convert(n.type),r=F(n.internalFormat,r,e,n.encoding),e=H(t),i&&t.useRenderbuffer?E.renderbufferStorageMultisample(E.RENDERBUFFER,e,r,t.width,t.height):t.useRenderToTexture?l.renderbufferStorageMultisampleEXT(E.RENDERBUFFER,e,r,t.width,t.height):E.renderbufferStorage(E.RENDERBUFFER,r,t.width,t.height)),E.bindRenderbuffer(E.RENDERBUFFER,null)}function z(e){var t=A.get(e),i=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!t.__autoAllocateDepthBuffer){if(i)throw new Error(\"target.depthTexture not supported in Cube render targets\");var n=t.__webglFramebuffer,r=e;if(r&&r.isWebGLCubeRenderTarget)throw new Error(\"Depth Texture with cube render targets is not supported\");if(T.bindFramebuffer(E.FRAMEBUFFER,n),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error(\"renderTarget.depthTexture must be an instance of THREE.DepthTexture\");A.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),d(r.depthTexture,0);var n=A.get(r.depthTexture).__webglTexture,a=H(r);if(r.depthTexture.format===je)r.useRenderToTexture?l.framebufferTexture2DMultisampleEXT(E.FRAMEBUFFER,E.DEPTH_ATTACHMENT,E.TEXTURE_2D,n,0,a):E.framebufferTexture2D(E.FRAMEBUFFER,E.DEPTH_ATTACHMENT,E.TEXTURE_2D,n,0);else{if(r.depthTexture.format!==Xe)throw new Error(\"Unknown depthTexture format\");r.useRenderToTexture?l.framebufferTexture2DMultisampleEXT(E.FRAMEBUFFER,E.DEPTH_STENCIL_ATTACHMENT,E.TEXTURE_2D,n,0,a):E.framebufferTexture2D(E.FRAMEBUFFER,E.DEPTH_STENCIL_ATTACHMENT,E.TEXTURE_2D,n,0)}}else if(i){t.__webglDepthbuffer=[];for(var s=0;s<6;s++)T.bindFramebuffer(E.FRAMEBUFFER,t.__webglFramebuffer[s]),t.__webglDepthbuffer[s]=E.createRenderbuffer(),B(t.__webglDepthbuffer[s],e,!1)}else T.bindFramebuffer(E.FRAMEBUFFER,t.__webglFramebuffer),t.__webglDepthbuffer=E.createRenderbuffer(),B(t.__webglDepthbuffer,e,!1);T.bindFramebuffer(E.FRAMEBUFFER,null)}function H(e){return R&&(e.useRenderbuffer||e.useRenderToTexture)?Math.min(i,e.samples):0}var g=!1,y=!1;this.allocateTextureUnit=function(){var e=c;return t<=e&&console.warn(\"THREE.WebGLTextures: Trying to use \"+e+\" texture units while this GPU supports only \"+t),c+=1,e},this.resetTextureUnits=function(){c=0},this.setTexture2D=d,this.setTexture2DArray=function(e,t){var i=A.get(e);0<e.version&&i.__version!==e.version?v(i,e,t):(T.activeTexture(E.TEXTURE0+t),T.bindTexture(E.TEXTURE_2D_ARRAY,i.__webglTexture))},this.setTexture3D=function(e,t){var i=A.get(e);0<e.version&&i.__version!==e.version?v(i,e,t):(T.activeTexture(E.TEXTURE0+t),T.bindTexture(E.TEXTURE_3D,i.__webglTexture))},this.setTextureCube=p,this.rebindTextures=function(e,t,i){var n=A.get(e);void 0!==t&&S(n.__webglFramebuffer,e,e.texture,E.COLOR_ATTACHMENT0,E.TEXTURE_2D),void 0!==i&&z(e)},this.setupRenderTarget=function(e){var t,i=e.texture,n=A.get(e),r=A.get(i),u=(e.addEventListener(\"dispose\",w),!0!==e.isWebGLMultipleRenderTargets&&(void 0===r.__webglTexture&&(r.__webglTexture=E.createTexture()),r.__version=i.version,M.memory.textures++),!0===e.isWebGLCubeRenderTarget),c=!0===e.isWebGLMultipleRenderTargets,d=i.isDataTexture3D||i.isDataTexture2DArray,a=D(e)||R;if(!R||i.format!==Ve||i.type!==ze&&i.type!==He||(i.format=We,console.warn(\"THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.\")),u){n.__webglFramebuffer=[];for(var p=0;p<6;p++)n.__webglFramebuffer[p]=E.createFramebuffer()}else if(n.__webglFramebuffer=E.createFramebuffer(),c)if(b.drawBuffers)for(var f=e.texture,m=0,v=f.length;m<v;m++){var g=A.get(f[m]);void 0===g.__webglTexture&&(g.__webglTexture=E.createTexture(),M.memory.textures++)}else console.warn(\"THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.\");else e.useRenderbuffer&&(R?(n.__webglMultisampledFramebuffer=E.createFramebuffer(),n.__webglColorRenderbuffer=E.createRenderbuffer(),E.bindRenderbuffer(E.RENDERBUFFER,n.__webglColorRenderbuffer),t=k.convert(i.format),h=k.convert(i.type),t=F(i.internalFormat,t,h,i.encoding),h=H(e),E.renderbufferStorageMultisample(E.RENDERBUFFER,h,t,e.width,e.height),T.bindFramebuffer(E.FRAMEBUFFER,n.__webglMultisampledFramebuffer),E.framebufferRenderbuffer(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.RENDERBUFFER,n.__webglColorRenderbuffer),E.bindRenderbuffer(E.RENDERBUFFER,null),e.depthBuffer&&(n.__webglDepthRenderbuffer=E.createRenderbuffer(),B(n.__webglDepthRenderbuffer,e,!0)),T.bindFramebuffer(E.FRAMEBUFFER,null)):console.warn(\"THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.\"));if(u){T.bindTexture(E.TEXTURE_CUBE_MAP,r.__webglTexture),O(E.TEXTURE_CUBE_MAP,i,a);for(var s=0;s<6;s++)S(n.__webglFramebuffer[s],e,i,E.COLOR_ATTACHMENT0,E.TEXTURE_CUBE_MAP_POSITIVE_X+s);L(i,a)&&I(E.TEXTURE_CUBE_MAP),T.unbindTexture()}else if(c){for(var y=e.texture,o=0,_=y.length;o<_;o++){var l=y[o],x=A.get(l);T.bindTexture(E.TEXTURE_2D,x.__webglTexture),O(E.TEXTURE_2D,l,a),S(n.__webglFramebuffer,e,l,E.COLOR_ATTACHMENT0+o,E.TEXTURE_2D),L(l,a)&&I(E.TEXTURE_2D)}T.unbindTexture()}else{var h=E.TEXTURE_2D;d&&(R?h=i.isDataTexture3D?E.TEXTURE_3D:E.TEXTURE_2D_ARRAY:console.warn(\"THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.\")),T.bindTexture(h,r.__webglTexture),O(h,i,a),S(n.__webglFramebuffer,e,i,E.COLOR_ATTACHMENT0,h),L(i,a)&&I(h),T.unbindTexture()}e.depthBuffer&&z(e)},this.updateRenderTargetMipmap=function(e){for(var t=D(e)||R,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture],n=0,r=i.length;n<r;n++){var a,s=i[n];L(s,t)&&(a=e.isWebGLCubeRenderTarget?E.TEXTURE_CUBE_MAP:E.TEXTURE_2D,s=A.get(s).__webglTexture,T.bindTexture(a,s),I(a),T.unbindTexture())}},this.updateMultisampleRenderTarget=function(e){var t,i,n,r,a,s;e.useRenderbuffer&&(R?(t=e.width,i=e.height,n=E.COLOR_BUFFER_BIT,r=[E.COLOR_ATTACHMENT0],a=e.stencilBuffer?E.DEPTH_STENCIL_ATTACHMENT:E.DEPTH_ATTACHMENT,e.depthBuffer&&r.push(a),e.ignoreDepthForMultisampleCopy||(e.depthBuffer&&(n|=E.DEPTH_BUFFER_BIT),e.stencilBuffer&&(n|=E.STENCIL_BUFFER_BIT)),s=A.get(e),T.bindFramebuffer(E.READ_FRAMEBUFFER,s.__webglMultisampledFramebuffer),T.bindFramebuffer(E.DRAW_FRAMEBUFFER,s.__webglFramebuffer),e.ignoreDepthForMultisampleCopy&&(E.invalidateFramebuffer(E.READ_FRAMEBUFFER,[a]),E.invalidateFramebuffer(E.DRAW_FRAMEBUFFER,[a])),E.blitFramebuffer(0,0,t,i,0,0,t,i,n,E.NEAREST),E.invalidateFramebuffer(E.READ_FRAMEBUFFER,r),T.bindFramebuffer(E.READ_FRAMEBUFFER,null),T.bindFramebuffer(E.DRAW_FRAMEBUFFER,s.__webglMultisampledFramebuffer)):console.warn(\"THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.\"))},this.setupDepthRenderbuffer=z,this.setupFrameBufferTexture=S,this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===g&&(console.warn(\"THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead.\"),g=!0),e=e.texture),d(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===y&&(console.warn(\"THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead.\"),y=!0),e=e.texture),p(e,t)}}function Hl(i,n,e){var r=e.isWebGL2;return{convert:function(e){var t;if(e===Ue)return i.UNSIGNED_BYTE;if(e===u)return i.UNSIGNED_SHORT_4_4_4_4;if(e===c)return i.UNSIGNED_SHORT_5_5_5_1;if(e===d)return i.UNSIGNED_SHORT_5_6_5;if(e===a)return i.BYTE;if(e===s)return i.SHORT;if(e===ke)return i.UNSIGNED_SHORT;if(e===o)return i.INT;if(e===Be)return i.UNSIGNED_INT;if(e===ze)return i.FLOAT;if(e===He)return r?i.HALF_FLOAT:null!==(t=n.get(\"OES_texture_half_float\"))?t.HALF_FLOAT_OES:null;if(e===p)return i.ALPHA;if(e===Ve)return i.RGB;if(e===We)return i.RGBA;if(e===f)return i.LUMINANCE;if(e===m)return i.LUMINANCE_ALPHA;if(e===je)return i.DEPTH_COMPONENT;if(e===Xe)return i.DEPTH_STENCIL;if(e===v)return i.RED;if(e===g)return i.RED_INTEGER;if(e===y)return i.RG;if(e===k)return i.RG_INTEGER;if(e===F)return i.RGB_INTEGER;if(e===N)return i.RGBA_INTEGER;if(e===O||e===U||e===B||e===z){if(null===(t=n.get(\"WEBGL_compressed_texture_s3tc\")))return null;if(e===O)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===U)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===B)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===z)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===H||e===Je||e===Ze||e===Ke){if(null===(t=n.get(\"WEBGL_compressed_texture_pvrtc\")))return null;if(e===H)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===Je)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===Ze)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===Ke)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===Qe)return null!==(t=n.get(\"WEBGL_compressed_texture_etc1\"))?t.COMPRESSED_RGB_ETC1_WEBGL:null;if((e===$e||e===et)&&null!==(t=n.get(\"WEBGL_compressed_texture_etc\"))){if(e===$e)return t.COMPRESSED_RGB8_ETC2;if(e===et)return t.COMPRESSED_RGBA8_ETC2_EAC}return e===tt||e===it||e===nt||e===rt||e===at||e===st||e===ot||e===lt||e===ht||e===ut||e===ct||e===dt||e===pt||e===ft||e===vt||e===gt||e===yt||e===_t||e===xt||e===bt||e===Mt||e===wt||e===St||e===Et||e===Tt||e===At||e===kt||e===Rt?null!==(t=n.get(\"WEBGL_compressed_texture_astc\"))?e:null:e===mt?null!==(t=n.get(\"EXT_texture_compression_bptc\"))?e:null:e===Ge?r?i.UNSIGNED_INT_24_8:null!==(t=n.get(\"WEBGL_depth_texture\"))?t.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}(0,ay.default)(Wl,ka),Gl=hy(Wl);var Gl,Vl=(0,ly.default)(Wl);function Wl(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return(0,oy.default)(this,Wl),(e=Gl.call(this)).cameras=t,e}Vl.prototype.isArrayCamera=!0;(0,ay.default)(ql,w),jl=hy(ql);var jl,Xl=(0,ly.default)(ql);function ql(){var e;return(0,oy.default)(this,ql),(e=jl.call(this)).type=\"Group\",e}Xl.prototype.isGroup=!0;var Yl,Jl={type:\"move\"},Zl=((0,ly.default)($l,[{key:\"getHandSpace\",value:function(){return null===this._hand&&(this._hand=new Xl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:\"getTargetRaySpace\",value:function(){return null===this._targetRay&&(this._targetRay=new Xl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ye,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ye),this._targetRay}},{key:\"getGripSpace\",value:function(){return null===this._grip&&(this._grip=new Xl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ye,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ye),this._grip}},{key:\"dispatchEvent\",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:\"disconnect\",value:function(e){return this.dispatchEvent({type:\"disconnected\",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:\"update\",value:function(e,t,u){var i=null,n=null,c=null,r=this._targetRay,a=this._grip,s=this._hand;if(e&&\"visible-blurred\"!==t.session.visibilityState)if(null!==r&&null!==(i=t.getPose(e.targetRaySpace,u))&&(r.matrix.fromArray(i.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),i.linearVelocity?(r.hasLinearVelocity=!0,r.linearVelocity.copy(i.linearVelocity)):r.hasLinearVelocity=!1,i.angularVelocity?(r.hasAngularVelocity=!0,r.angularVelocity.copy(i.angularVelocity)):r.hasAngularVelocity=!1,this.dispatchEvent(Jl)),s&&e.hand){var d,c=!0,o=fy(e.hand.values());try{for(o.s();!(d=o.n()).done;){var l,p=d.value,f=t.getJointPose(p,u),h=(void 0===s.joints[p.jointName]&&((l=new Xl).matrixAutoUpdate=!1,l.visible=!1,s.joints[p.jointName]=l,s.add(l)),s.joints[p.jointName]);null!==f&&(h.matrix.fromArray(f.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.jointRadius=f.radius),h.visible=null!==f}}catch(e){o.e(e)}finally{o.f()}var m=s.joints[\"index-finger-tip\"],v=s.joints[\"thumb-tip\"],m=m.position.distanceTo(v.position);s.inputState.pinching&&.025<m?(s.inputState.pinching=!1,this.dispatchEvent({type:\"pinchend\",handedness:e.handedness,target:this})):!s.inputState.pinching&&m<=.015&&(s.inputState.pinching=!0,this.dispatchEvent({type:\"pinchstart\",handedness:e.handedness,target:this}))}else null!==a&&e.gripSpace&&null!==(n=t.getPose(e.gripSpace,u))&&(a.matrix.fromArray(n.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),n.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(n.linearVelocity)):a.hasLinearVelocity=!1,n.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(n.angularVelocity)):a.hasAngularVelocity=!1);return null!==r&&(r.visible=null!==i),null!==a&&(a.visible=null!==n),null!==s&&(s.visible=null!==c),this}}]),$l),Kl=((0,ay.default)(Ql,oi),Yl=hy(Ql),(0,ly.default)(Ql));function Ql(e,t,i,n,r,a,s,o,l,h){if((0,oy.default)(this,Ql),(h=void 0!==h?h:je)!==je&&h!==Xe)throw new Error(\"DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat\");return(n=Yl.call(this,null,n,r,a,s,o,h,i=void 0===(i=void 0===i&&h===je?ke:i)&&h===Xe?Ge:i,l)).image={width:e,height:t},n.magFilter=void 0!==s?s:Ne,n.minFilter=void 0!==o?o:Ne,n.flipY=!1,n.generateMipmaps=!1,n}function $l(){(0,oy.default)(this,$l),this._targetRay=null,this._grip=null,this._hand=null}Kl.prototype.isDepthTexture=!0;(0,ay.default)(ih,r),eh=hy(ih);var eh,th=(0,ly.default)(ih);function ih(d,a){(0,oy.default)(this,ih),e=eh.call(this);var e,v,o,t,l=(0,dy.default)(e),g=null,u=1,_=null,c=\"local-floor\",x=d.extensions.has(\"WEBGL_multisampled_render_to_texture\"),b=null,p=null,f=null,M=null,s=a.getContextAttributes(),w=null,S=null,m=[],h=new Map,E=new ka,T=(E.layers.enable(1),E.viewport=new ci,new ka),A=(T.layers.enable(2),T.viewport=new ci,[E,T]),y=new Vl,k=(y.layers.enable(1),y.layers.enable(2),null),R=null;function L(e){var t=h.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function C(){h.forEach(function(e,t){e.disconnect(t)}),h.clear(),R=k=null,d.setRenderTarget(w),S=g=b=p=f=null,O.stop(),l.isPresenting=!1,l.dispatchEvent({type:\"sessionend\"})}function P(e){for(var t=g.inputSources,i=0;i<m.length;i++)h.set(t[i],m[i]);for(var n=0;n<e.removed.length;n++){var r=e.removed[n],a=h.get(r);a&&(a.dispatchEvent({type:\"disconnected\",data:r}),h.delete(r))}for(var s=0;s<e.added.length;s++){var o=e.added[s],l=h.get(o);l&&l.dispatchEvent({type:\"connected\",data:o})}}e.cameraAutoUpdate=!0,e.enabled=!1,e.isPresenting=!1,e.getController=function(e){var t=m[e];return void 0===t&&(t=new Zl,m[e]=t),t.getTargetRaySpace()},e.getControllerGrip=function(e){var t=m[e];return void 0===t&&(t=new Zl,m[e]=t),t.getGripSpace()},e.getHand=function(e){var t=m[e];return void 0===t&&(t=new Zl,m[e]=t),t.getHandSpace()},e.setFramebufferScaleFactor=function(e){u=e,!0===l.isPresenting&&console.warn(\"THREE.WebXRManager: Cannot change framebuffer scale while presenting.\")},e.setReferenceSpaceType=function(e){c=e,!0===l.isPresenting&&console.warn(\"THREE.WebXRManager: Cannot change reference space type while presenting.\")},e.getReferenceSpace=function(){return _},e.getBaseLayer=function(){return null!==p?p:f},e.getBinding=function(){return b},e.getFrame=function(){return M},e.getSession=function(){return g},e.setSession=(t=(0,uy.default)(iy.default.mark(function e(t){var i,n,r;return iy.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(g=t)){e.next=23;break}if(w=d.getRenderTarget(),g.addEventListener(\"select\",L),g.addEventListener(\"selectstart\",L),g.addEventListener(\"selectend\",L),g.addEventListener(\"squeeze\",L),g.addEventListener(\"squeezestart\",L),g.addEventListener(\"squeezeend\",L),g.addEventListener(\"end\",C),g.addEventListener(\"inputsourceschange\",P),!0!==s.xrCompatible)return e.next=14,a.makeXRCompatible();e.next=14;break;case 14:return S=void 0===g.renderState.layers||!1===d.capabilities.isWebGL2?(i={antialias:void 0!==g.renderState.layers||s.antialias,alpha:s.alpha,depth:s.depth,stencil:s.stencil,framebufferScaleFactor:u},f=new XRWebGLLayer(g,a,i),g.updateRenderState({baseLayer:f}),new fi(f.framebufferWidth,f.framebufferHeight,{format:We,type:Ue,encoding:d.outputEncoding})):(o=s.antialias,r=n=i=null,s.depth&&(r=s.stencil?a.DEPTH24_STENCIL8:a.DEPTH_COMPONENT24,i=s.stencil?Xe:je,n=s.stencil?Ge:ke),r={colorFormat:s.alpha||o?a.RGBA8:a.RGB8,depthFormat:r,scaleFactor:u},b=new XRWebGLBinding(g,a),p=b.createProjectionLayer(r),g.updateRenderState({layers:[p]}),o?new xi(p.textureWidth,p.textureHeight,{format:We,type:Ue,depthTexture:new Kl(p.textureWidth,p.textureHeight,n,void 0,void 0,void 0,void 0,void 0,void 0,i),stencilBuffer:s.stencil,ignoreDepth:p.ignoreDepthValues,useRenderToTexture:x,encoding:d.outputEncoding}):new fi(p.textureWidth,p.textureHeight,{format:s.alpha?We:Ve,type:Ue,depthTexture:new Kl(p.textureWidth,p.textureHeight,n,void 0,void 0,void 0,void 0,void 0,void 0,i),stencilBuffer:s.stencil,ignoreDepth:p.ignoreDepthValues,encoding:d.outputEncoding})),this.setFoveation(1),e.next=18,g.requestReferenceSpace(c);case 18:_=e.sent,O.setContext(g),O.start(),l.isPresenting=!0,l.dispatchEvent({type:\"sessionstart\"});case 23:case\"end\":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)});var D=new Ye,I=new Ye;function F(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}e.updateCamera=function(e){if(null!==g){y.near=T.near=E.near=e.near,y.far=T.far=E.far=e.far,k===y.near&&R===y.far||(g.updateRenderState({depthNear:y.near,depthFar:y.far}),k=y.near,R=y.far);var u=e.parent,t=y.cameras;F(y,u);for(var i=0;i<t.length;i++)F(t[i],u);y.matrixWorld.decompose(y.position,y.quaternion,y.scale),e.position.copy(y.position),e.quaternion.copy(y.quaternion),e.scale.copy(y.scale),e.matrix.copy(y.matrix),e.matrixWorld.copy(y.matrixWorld);for(var c=e.children,n=0,d=c.length;n<d;n++)c[n].updateMatrixWorld(!0);2===t.length?(e=y,r=E,a=T,D.setFromMatrixPosition(r.matrixWorld),I.setFromMatrixPosition(a.matrixWorld),s=D.distanceTo(I),o=r.projectionMatrix.elements,a=a.projectionMatrix.elements,l=o[14]/(o[10]-1),h=o[14]/(o[10]+1),p=(o[9]+1)/o[5],f=(o[9]-1)/o[5],o=(o[8]-1)/o[0],a=(a[8]+1)/a[0],m=l*o,v=l*a,o=(a=s/(a-o))*-o,r.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(o),e.translateZ(a),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert(),r=l+a,l=h+a,e.projectionMatrix.makePerspective(m-o,s-o+v,p*h/l*r,f*h/l*r,r,l)):y.projectionMatrix.copy(E.projectionMatrix)}var r,a,s,o,l,h,p,f,m,v},e.getCamera=function(){return y},e.getFoveation=function(){return null!==p?p.fixedFoveation:null!==f?f.fixedFoveation:void 0},e.setFoveation=function(e){null!==p&&(p.fixedFoveation=e),null!==f&&void 0!==f.fixedFoveation&&(f.fixedFoveation=e)};var N=null,O=new Ya;return O.setAnimationLoop(function(e,t){if(v=t.getViewerPose(_),M=t,null!==v){var i=v.views,n=(null!==f&&(d.setRenderTargetFramebuffer(S,f.framebuffer),d.setRenderTarget(S)),!1);i.length!==y.cameras.length&&(n=!(y.cameras.length=0));for(var r=0;r<i.length;r++){var a=i[r],s=null,o=(null!==f?s=f.getViewport(a):(s=(o=b.getViewSubImage(p,a)).viewport,0===r&&(d.setRenderTargetTextures(S,o.colorTexture,p.ignoreDepthValues?void 0:o.depthStencilTexture),d.setRenderTarget(S))),A[r]);o.matrix.fromArray(a.transform.matrix),o.projectionMatrix.fromArray(a.projectionMatrix),o.viewport.set(s.x,s.y,s.width,s.height),0===r&&y.matrix.copy(o.matrix),!0===n&&y.cameras.push(o)}}for(var l=g.inputSources,h=0;h<m.length;h++){var u=m[h],c=l[h];u.update(c,t,_)}N&&N(e,t),M=null}),e.setAnimationLoop=function(e){N=e},e.dispose=function(){},e}function nh(a){function f(e,t){e.opacity.value=t.opacity,t.color&&e.diffuse.value.copy(t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),0<t.alphaTest&&(e.alphaTest.value=t.alphaTest);var i,n,r=a.get(t).envMap;r&&(e.envMap.value=r,e.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,e.reflectivity.value=t.reflectivity,e.ior.value=t.ior,e.refractionRatio.value=t.refractionRatio),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?i=t.map:t.specularMap?i=t.specularMap:t.displacementMap?i=t.displacementMap:t.normalMap?i=t.normalMap:t.bumpMap?i=t.bumpMap:t.roughnessMap?i=t.roughnessMap:t.metalnessMap?i=t.metalnessMap:t.alphaMap?i=t.alphaMap:t.emissiveMap?i=t.emissiveMap:t.clearcoatMap?i=t.clearcoatMap:t.clearcoatNormalMap?i=t.clearcoatNormalMap:t.clearcoatRoughnessMap?i=t.clearcoatRoughnessMap:t.specularIntensityMap?i=t.specularIntensityMap:t.specularColorMap?i=t.specularColorMap:t.transmissionMap?i=t.transmissionMap:t.thicknessMap?i=t.thicknessMap:t.sheenColorMap?i=t.sheenColorMap:t.sheenRoughnessMap&&(i=t.sheenRoughnessMap),void 0!==i&&(!0===(i=i.isWebGLRenderTarget?i.texture:i).matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix)),t.aoMap?n=t.aoMap:t.lightMap&&(n=t.lightMap),void 0!==n&&(!0===(n=n.isWebGLRenderTarget?n.texture:n).matrixAutoUpdate&&n.updateMatrix(),e.uv2Transform.value.copy(n.matrix))}function m(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Pe&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Pe&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),a.get(t).envMap&&(e.envMapIntensity.value=t.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,t,u,c,i){var d,p,n,r,a,s,o,l,h;t.isMeshBasicMaterial?f(e,t):t.isMeshLambertMaterial?(f(e,t),h=e,t.emissiveMap&&(h.emissiveMap.value=t.emissiveMap)):t.isMeshToonMaterial?(f(e,t),h=e,(l=t).gradientMap&&(h.gradientMap.value=l.gradientMap),l.emissiveMap&&(h.emissiveMap.value=l.emissiveMap),l.bumpMap&&(h.bumpMap.value=l.bumpMap,h.bumpScale.value=l.bumpScale,l.side===Pe&&(h.bumpScale.value*=-1)),l.normalMap&&(h.normalMap.value=l.normalMap,h.normalScale.value.copy(l.normalScale),l.side===Pe&&h.normalScale.value.negate()),l.displacementMap&&(h.displacementMap.value=l.displacementMap,h.displacementScale.value=l.displacementScale,h.displacementBias.value=l.displacementBias)):t.isMeshPhongMaterial?(f(e,t),l=t,(o=e).specular.value.copy(l.specular),o.shininess.value=Math.max(l.shininess,1e-4),l.emissiveMap&&(o.emissiveMap.value=l.emissiveMap),l.bumpMap&&(o.bumpMap.value=l.bumpMap,o.bumpScale.value=l.bumpScale,l.side===Pe&&(o.bumpScale.value*=-1)),l.normalMap&&(o.normalMap.value=l.normalMap,o.normalScale.value.copy(l.normalScale),l.side===Pe&&o.normalScale.value.negate()),l.displacementMap&&(o.displacementMap.value=l.displacementMap,o.displacementScale.value=l.displacementScale,o.displacementBias.value=l.displacementBias)):t.isMeshStandardMaterial?(f(e,t),t.isMeshPhysicalMaterial?(o=i,m(i=e,s=t),i.ior.value=s.ior,0<s.sheen&&(i.sheenColor.value.copy(s.sheenColor).multiplyScalar(s.sheen),i.sheenRoughness.value=s.sheenRoughness,s.sheenColorMap&&(i.sheenColorMap.value=s.sheenColorMap),s.sheenRoughnessMap&&(i.sheenRoughnessMap.value=s.sheenRoughnessMap)),0<s.clearcoat&&(i.clearcoat.value=s.clearcoat,i.clearcoatRoughness.value=s.clearcoatRoughness,s.clearcoatMap&&(i.clearcoatMap.value=s.clearcoatMap),s.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap.value=s.clearcoatRoughnessMap),s.clearcoatNormalMap&&(i.clearcoatNormalScale.value.copy(s.clearcoatNormalScale),i.clearcoatNormalMap.value=s.clearcoatNormalMap,s.side===Pe&&i.clearcoatNormalScale.value.negate())),0<s.transmission&&(i.transmission.value=s.transmission,i.transmissionSamplerMap.value=o.texture,i.transmissionSamplerSize.value.set(o.width,o.height),s.transmissionMap&&(i.transmissionMap.value=s.transmissionMap),i.thickness.value=s.thickness,s.thicknessMap&&(i.thicknessMap.value=s.thicknessMap),i.attenuationDistance.value=s.attenuationDistance,i.attenuationColor.value.copy(s.attenuationColor)),i.specularIntensity.value=s.specularIntensity,i.specularColor.value.copy(s.specularColor),s.specularIntensityMap&&(i.specularIntensityMap.value=s.specularIntensityMap),s.specularColorMap&&(i.specularColorMap.value=s.specularColorMap)):m(e,t)):t.isMeshMatcapMaterial?(f(e,t),i=e,(s=t).matcap&&(i.matcap.value=s.matcap),s.bumpMap&&(i.bumpMap.value=s.bumpMap,i.bumpScale.value=s.bumpScale,s.side===Pe&&(i.bumpScale.value*=-1)),s.normalMap&&(i.normalMap.value=s.normalMap,i.normalScale.value.copy(s.normalScale),s.side===Pe&&i.normalScale.value.negate()),s.displacementMap&&(i.displacementMap.value=s.displacementMap,i.displacementScale.value=s.displacementScale,i.displacementBias.value=s.displacementBias)):t.isMeshDepthMaterial?(f(e,t),i=e,(a=t).displacementMap&&(i.displacementMap.value=a.displacementMap,i.displacementScale.value=a.displacementScale,i.displacementBias.value=a.displacementBias)):t.isMeshDistanceMaterial?(f(e,t),i=e,(a=t).displacementMap&&(i.displacementMap.value=a.displacementMap,i.displacementScale.value=a.displacementScale,i.displacementBias.value=a.displacementBias),i.referencePosition.value.copy(a.referencePosition),i.nearDistance.value=a.nearDistance,i.farDistance.value=a.farDistance):t.isMeshNormalMaterial?(f(e,t),i=e,(r=t).bumpMap&&(i.bumpMap.value=r.bumpMap,i.bumpScale.value=r.bumpScale,r.side===Pe&&(i.bumpScale.value*=-1)),r.normalMap&&(i.normalMap.value=r.normalMap,i.normalScale.value.copy(r.normalScale),r.side===Pe&&i.normalScale.value.negate()),r.displacementMap&&(i.displacementMap.value=r.displacementMap,i.displacementScale.value=r.displacementScale,i.displacementBias.value=r.displacementBias)):t.isLineBasicMaterial?(i=t,(r=e).diffuse.value.copy(i.color),r.opacity.value=i.opacity,t.isLineDashedMaterial&&(i=t,(n=e).dashSize.value=i.dashSize,n.totalSize.value=i.dashSize+i.gapSize,n.scale.value=i.scale)):t.isPointsMaterial?(n=t,i=u,u=c,(c=e).diffuse.value.copy(n.color),c.opacity.value=n.opacity,c.size.value=n.size*i,c.scale.value=.5*u,n.map&&(c.map.value=n.map),n.alphaMap&&(c.alphaMap.value=n.alphaMap),0<n.alphaTest&&(c.alphaTest.value=n.alphaTest),n.map?p=n.map:n.alphaMap&&(p=n.alphaMap),void 0!==p&&(!0===p.matrixAutoUpdate&&p.updateMatrix(),c.uvTransform.value.copy(p.matrix))):t.isSpriteMaterial?(i=t,(u=e).diffuse.value.copy(i.color),u.opacity.value=i.opacity,u.rotation.value=i.rotation,i.map&&(u.map.value=i.map),i.alphaMap&&(u.alphaMap.value=i.alphaMap),0<i.alphaTest&&(u.alphaTest.value=i.alphaTest),i.map?d=i.map:i.alphaMap&&(d=i.alphaMap),void 0!==d&&(!0===d.matrixAutoUpdate&&d.updateMatrix(),u.uvTransform.value.copy(d.matrix))):t.isShadowMaterial?(e.color.value.copy(t.color),e.opacity.value=t.opacity):t.isShaderMaterial&&(t.uniformsNeedUpdate=!1)}}}function rh(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=void 0!==e.canvas?e.canvas:((t=ni(\"canvas\")).style.display=\"block\",t),i=void 0!==e.context?e.context:null,n=void 0!==e.alpha&&e.alpha,a=void 0===e.depth||e.depth,s=void 0===e.stencil||e.stencil,c=void 0!==e.antialias&&e.antialias,o=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,h=void 0!==e.powerPreference?e.powerPreference:\"default\",u=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,g=null,w=null,p=[],f=[],S=(this.domElement=r,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Ct,this.physicallyCorrectLights=!1,this.toneMapping=Ie,this.toneMappingExposure=1,this),m=!1,v=0,y=0,L=null,C=-1,P=null,_=new ci,x=new ci,b=null,M=r.width,D=r.height,I=1,F=null,N=null,O=new ci(0,0,M,D),U=new ci(0,0,M,D),B=!1,z=[],H=new Xa,G=!1,V=!1,W=null,j=new Re,X=new Ye,q={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Y(){return null===L?I:1}var d,E,T,J,A,k,Z,K,Q,$,ee,te,ie,ne,re,ae,se,oe,le,he,ue,ce,de,R=i;function pe(e,t){for(var i=0;i<e.length;i++){var n=e[i],n=r.getContext(n,t);if(null!==n)return n}return null}try{var fe={alpha:n,depth:a,stencil:s,antialias:c,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:h,failIfMajorPerformanceCaveat:u};if(\"setAttribute\"in r&&r.setAttribute(\"data-engine\",\"three.js r\".concat(Le)),r.addEventListener(\"webglcontextlost\",ye,!1),r.addEventListener(\"webglcontextrestored\",_e,!1),null===R){var me=[\"webgl2\",\"webgl\",\"experimental-webgl\"];if(!0===S.isWebGL1Renderer&&me.shift(),null===(R=pe(me,fe)))throw pe(me)?new Error(\"Error creating WebGL context with your selected attributes.\"):new Error(\"Error creating WebGL context.\")}void 0===R.getShaderPrecisionFormat&&(R.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error(\"THREE.WebGLRenderer: \"+t.message),t}function ve(){d=new Ps(R),E=new ns(R,d,e),d.init(E),ce=new Hl(R,d,E),T=new Bl(R,d,E),z[0]=R.BACK,J=new Fs(R),A=new _l,k=new zl(R,d,T,A,E,ce,J),Z=new as(S),K=new Cs(S),Q=new Ja(R,E),de=new ts(R,d,Q,E),$=new Ds(R,Q,J,de),ee=new Vs(R,$,Q,J),le=new Gs(R,E,k),ae=new rs(A),te=new yl(S,Z,K,d,E,de,ae),ie=new nh(A),ne=new wl,re=new Rl(d,E),oe=new es(S,Z,T,ee,o),se=new Ul(S,ee,E),he=new is(R,d,J,E),ue=new Is(R,d,J,E),J.programs=te.programs,S.capabilities=E,S.extensions=d,S.properties=A,S.renderLists=ne,S.shadowMap=se,S.state=T,S.info=J}ve();var ge=new th(S,R);function ye(e){e.preventDefault(),console.log(\"THREE.WebGLRenderer: Context Lost.\"),m=!0}function _e(){console.log(\"THREE.WebGLRenderer: Context Restored.\"),m=!1;var e=J.autoReset,t=se.enabled,i=se.autoUpdate,n=se.needsUpdate,r=se.type;ve(),J.autoReset=e,se.enabled=t,se.autoUpdate=i,se.needsUpdate=n,se.type=r}function xe(e){var t,i,e=e.target;e.removeEventListener(\"dispose\",xe),t=e=e,void 0!==(i=A.get(t).programs)&&(i.forEach(function(e){te.releaseProgram(e)}),t.isShaderMaterial&&te.releaseShaderCache(t)),A.remove(e)}this.xr=ge,this.getContext=function(){return R},this.getContextAttributes=function(){return R.getContextAttributes()},this.forceContextLoss=function(){var e=d.get(\"WEBGL_lose_context\");e&&e.loseContext()},this.forceContextRestore=function(){var e=d.get(\"WEBGL_lose_context\");e&&e.restoreContext()},this.getPixelRatio=function(){return I},this.setPixelRatio=function(e){void 0!==e&&(I=e,this.setSize(M,D,!1))},this.getSize=function(e){return e.set(M,D)},this.setSize=function(e,t,i){ge.isPresenting?console.warn(\"THREE.WebGLRenderer: Can't change size while VR device is presenting.\"):(M=e,D=t,r.width=Math.floor(e*I),r.height=Math.floor(t*I),!1!==i&&(r.style.width=e+\"px\",r.style.height=t+\"px\"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return e.set(M*I,D*I).floor()},this.setDrawingBufferSize=function(e,t,i){M=e,D=t,I=i,r.width=Math.floor(e*i),r.height=Math.floor(t*i),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(_)},this.getViewport=function(e){return e.copy(O)},this.setViewport=function(e,t,i,n){e.isVector4?O.set(e.x,e.y,e.z,e.w):O.set(e,t,i,n),T.viewport(_.copy(O).multiplyScalar(I).floor())},this.getScissor=function(e){return e.copy(U)},this.setScissor=function(e,t,i,n){e.isVector4?U.set(e.x,e.y,e.z,e.w):U.set(e,t,i,n),T.scissor(x.copy(U).multiplyScalar(I).floor())},this.getScissorTest=function(){return B},this.setScissorTest=function(e){T.setScissorTest(B=e)},this.setOpaqueSort=function(e){F=e},this.setTransparentSort=function(e){N=e},this.getClearColor=function(e){return e.copy(oe.getClearColor())},this.setClearColor=function(){oe.setClearColor.apply(oe,arguments)},this.getClearAlpha=function(){return oe.getClearAlpha()},this.setClearAlpha=function(){oe.setClearAlpha.apply(oe,arguments)},this.clear=function(e,t,i){var n=0;void 0!==e&&!e||(n|=R.COLOR_BUFFER_BIT),void 0!==t&&!t||(n|=R.DEPTH_BUFFER_BIT),void 0!==i&&!i||(n|=R.STENCIL_BUFFER_BIT),R.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){r.removeEventListener(\"webglcontextlost\",ye,!1),r.removeEventListener(\"webglcontextrestored\",_e,!1),ne.dispose(),re.dispose(),A.dispose(),Z.dispose(),K.dispose(),ee.dispose(),de.dispose(),te.dispose(),ge.dispose(),ge.removeEventListener(\"sessionstart\",Me),ge.removeEventListener(\"sessionend\",we),W&&(W.dispose(),W=null),Se.stop()},this.renderBufferDirect=function(e,t,u,c,i,d){null===t&&(t=q);var n,p,f=i.isMesh&&i.matrixWorld.determinant()<0,m=(e=e,s=u,r=c,n=i,!0!==(t=t).isScene&&(t=q),k.resetTextureUnits(),b=t.fog,_=r.isMeshStandardMaterial?t.environment:null,v=null===L?S.outputEncoding:L.texture.encoding,_=(r.isMeshStandardMaterial?K:Z).get(r.envMap||_),x=!0===r.vertexColors&&!!s.attributes.color&&4===s.attributes.color.itemSize,a=!!r.normalMap&&!!s.attributes.tangent,M=!!s.morphAttributes.position,g=!!s.morphAttributes.normal,o=s.morphAttributes.position?s.morphAttributes.position.length:0,l=r.toneMapped?S.toneMapping:Ie,h=A.get(r),p=w.state.lights,!0!==G||!0!==V&&e===P||(m=e===P&&r.id===C,ae.setState(r,e,m)),m=!1,r.version===h.__version?(h.needsLights&&h.lightsStateVersion!==p.state.version||h.outputEncoding!==v||n.isInstancedMesh&&!1===h.instancing||!n.isInstancedMesh&&!0===h.instancing||n.isSkinnedMesh&&!1===h.skinning||!n.isSkinnedMesh&&!0===h.skinning||h.envMap!==_||r.fog&&h.fog!==b||void 0!==h.numClippingPlanes&&(h.numClippingPlanes!==ae.numPlanes||h.numIntersection!==ae.numIntersection)||h.vertexAlphas!==x||h.vertexTangents!==a||h.morphTargets!==M||h.morphNormals!==g||h.toneMapping!==l||!0===E.isWebGL2&&h.morphTargetsCount!==o)&&(m=!0):(m=!0,h.__version=r.version),p=h.currentProgram,a=(p=!(x=_=v=!1)===m?Ae(r,t,n):p).getUniforms(),M=h.uniforms,T.useProgram(p.program)&&(x=_=v=!0),r.id!==C&&(C=r.id,_=!0),!v&&P===e||(a.setValue(R,\"projectionMatrix\",e.projectionMatrix),E.logarithmicDepthBuffer&&a.setValue(R,\"logDepthBufFC\",2/(Math.log(e.far+1)/Math.LN2)),P!==e&&(P=e,x=_=!0),(r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap)&&void 0!==(y=a.map.cameraPosition)&&y.setValue(R,X.setFromMatrixPosition(e.matrixWorld)),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&a.setValue(R,\"isOrthographic\",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||n.isSkinnedMesh)&&a.setValue(R,\"viewMatrix\",e.matrixWorldInverse)),n.isSkinnedMesh&&(a.setOptional(R,n,\"bindMatrix\"),a.setOptional(R,n,\"bindMatrixInverse\"),(g=n.skeleton)&&(E.floatVertexTextures?(null===g.boneTexture&&g.computeBoneTexture(),a.setValue(R,\"boneTexture\",g.boneTexture,k),a.setValue(R,\"boneTextureSize\",g.boneTextureSize)):a.setOptional(R,g,\"boneMatrices\"))),!s||void 0===s.morphAttributes.position&&void 0===s.morphAttributes.normal||le.update(n,s,r,p),!_&&h.receiveShadow===n.receiveShadow||(h.receiveShadow=n.receiveShadow,a.setValue(R,\"receiveShadow\",n.receiveShadow)),_&&(a.setValue(R,\"toneMappingExposure\",S.toneMappingExposure),h.needsLights&&(l=x,(o=M).ambientLightColor.needsUpdate=l,o.lightProbe.needsUpdate=l,o.directionalLights.needsUpdate=l,o.directionalLightShadows.needsUpdate=l,o.pointLights.needsUpdate=l,o.pointLightShadows.needsUpdate=l,o.spotLights.needsUpdate=l,o.spotLightShadows.needsUpdate=l,o.rectAreaLights.needsUpdate=l,o.hemisphereLights.needsUpdate=l),b&&r.fog&&ie.refreshFogUniforms(M,b),ie.refreshMaterialUniforms(M,r,I,D,W),Jo.upload(R,h.uniformsList,M,k)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(Jo.upload(R,h.uniformsList,M,k),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&a.setValue(R,\"center\",n.center),a.setValue(R,\"modelViewMatrix\",n.modelViewMatrix),a.setValue(R,\"normalMatrix\",n.normalMatrix),a.setValue(R,\"modelMatrix\",n.matrixWorld),p),t=(T.setMaterial(c,f),u.index),v=u.attributes.position;if(null===t){if(void 0===v||0===v.count)return}else if(0===t.count)return;var g,r,a,y=1,e=(!0===c.wireframe&&(t=$.getWireframeAttribute(u),y=2),de.setup(i,c,m,u,t),he),s=(null!==t&&(g=Q.get(t),(e=ue).setIndex(g)),(null!==t?t:v).count),_=u.drawRange.start*y,x=u.drawRange.count*y,o=null!==d?d.start*y:0,l=null!==d?d.count*y:1/0,b=Math.max(_,o),h=Math.min(s,_+x,o+l)-1,M=Math.max(0,h-b+1);0!==M&&(i.isMesh?!0===c.wireframe?(T.setLineWidth(c.wireframeLinewidth*Y()),e.setMode(R.LINES)):e.setMode(R.TRIANGLES):i.isLine?(r=c.linewidth,T.setLineWidth((r=void 0===r?1:r)*Y()),i.isLineSegments?e.setMode(R.LINES):i.isLineLoop?e.setMode(R.LINE_LOOP):e.setMode(R.LINE_STRIP)):i.isPoints?e.setMode(R.POINTS):i.isSprite&&e.setMode(R.TRIANGLES),i.isInstancedMesh?e.renderInstances(b,M,i.count):u.isInstancedBufferGeometry?(a=Math.min(u.instanceCount,u._maxInstanceCount),e.renderInstances(b,M,a)):e.render(b,M))},this.compile=function(n,t){(w=re.get(n)).init(),f.push(w),n.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(w.pushLight(e),e.castShadow&&w.pushShadow(e))}),w.setupLights(S.physicallyCorrectLights),n.traverse(function(e){var t=e.material;if(t)if(Array.isArray(t))for(var i=0;i<t.length;i++)Ae(t[i],n,e);else Ae(t,n,e)}),f.pop(),w=null};var be=null;function Me(){Se.stop()}function we(){Se.start()}var Se=new Ya;function Ee(e,t,i,n){var r,a,s,o,u,l=e.opaque,h=e.transmissive,e=e.transparent;w.setupLightsView(i),0<h.length&&(r=l,a=t,s=i,null===W&&(o=!0===c&&!0===E.isWebGL2,W=new(o?xi:fi)(1024,1024,{generateMipmaps:!0,type:null!==ce.convert(He)?He:Ue,minFilter:Oe,magFilter:Ne,wrapS:Fe,wrapT:Fe,useRenderToTexture:d.has(\"WEBGL_multisampled_render_to_texture\")})),o=S.getRenderTarget(),S.setRenderTarget(W),S.clear(),u=S.toneMapping,S.toneMapping=Ie,Te(r,a,s),S.toneMapping=u,k.updateMultisampleRenderTarget(W),k.updateRenderTargetMipmap(W),S.setRenderTarget(o)),n&&T.viewport(_.copy(n)),0<l.length&&Te(l,t,i),0<h.length&&Te(h,t,i),0<e.length&&Te(e,t,i)}function Te(e,t,i){for(var n,r,u=!0===t.isScene?t.overrideMaterial:null,a=0,c=e.length;a<c;a++){var s=e[a],o=s.object,l=s.geometry,h=null===u?s.material:u,s=s.group;o.layers.test(i.layers)&&(n=t,r=i,l=l,h=h,s=s,(o=o).onBeforeRender(S,n,r,l,h,s),o.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,o.matrixWorld),o.normalMatrix.getNormalMatrix(o.modelViewMatrix),h.onBeforeRender(S,n,r,l,o,s),!0===h.transparent&&h.side===De?(h.side=Pe,h.needsUpdate=!0,S.renderBufferDirect(r,n,l,h,o,s),h.side=Ce,h.needsUpdate=!0,S.renderBufferDirect(r,n,l,h,o,s),h.side=De):S.renderBufferDirect(r,n,l,h,o,s),o.onAfterRender(S,n,r,l,h,s))}}function Ae(e,t,i){!0!==t.isScene&&(t=q);var n=A.get(e),r=w.state.lights,a=w.state.shadowsArray,s=r.state.version,a=te.getParameters(e,r.state,a,t,i),o=te.getProgramCacheKey(a),l=n.programs,t=(n.environment=e.isMeshStandardMaterial?t.environment:null,n.fog=t.fog,n.envMap=(e.isMeshStandardMaterial?K:Z).get(e.envMap||n.environment),void 0===l&&(e.addEventListener(\"dispose\",xe),l=new Map,n.programs=l),l.get(o));if(void 0!==t){if(n.currentProgram===t&&n.lightsStateVersion===s)return ke(e,a),t}else a.uniforms=te.getUniforms(e),e.onBuild(i,a,S),e.onBeforeCompile(a,S),t=te.acquireProgram(a,o),l.set(o,t),n.uniforms=a.uniforms;i=n.uniforms,(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(i.clippingPlanes=ae.uniform),ke(e,a),n.needsLights=e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights,n.lightsStateVersion=s,n.needsLights&&(i.ambientLightColor.value=r.state.ambient,i.lightProbe.value=r.state.probe,i.directionalLights.value=r.state.directional,i.directionalLightShadows.value=r.state.directionalShadow,i.spotLights.value=r.state.spot,i.spotLightShadows.value=r.state.spotShadow,i.rectAreaLights.value=r.state.rectArea,i.ltc_1.value=r.state.rectAreaLTC1,i.ltc_2.value=r.state.rectAreaLTC2,i.pointLights.value=r.state.point,i.pointLightShadows.value=r.state.pointShadow,i.hemisphereLights.value=r.state.hemi,i.directionalShadowMap.value=r.state.directionalShadowMap,i.directionalShadowMatrix.value=r.state.directionalShadowMatrix,i.spotShadowMap.value=r.state.spotShadowMap,i.spotShadowMatrix.value=r.state.spotShadowMatrix,i.pointShadowMap.value=r.state.pointShadowMap,i.pointShadowMatrix.value=r.state.pointShadowMatrix),l=t.getUniforms(),o=Jo.seqWithValue(l.seq,i);return n.currentProgram=t,n.uniformsList=o,t}function ke(e,t){e=A.get(e);e.outputEncoding=t.outputEncoding,e.instancing=t.instancing,e.skinning=t.skinning,e.morphTargets=t.morphTargets,e.morphNormals=t.morphNormals,e.morphTargetsCount=t.morphTargetsCount,e.numClippingPlanes=t.numClippingPlanes,e.numIntersection=t.numClipIntersection,e.vertexAlphas=t.vertexAlphas,e.vertexTangents=t.vertexTangents,e.toneMapping=t.toneMapping}Se.setAnimationLoop(function(e){be&&be(e)}),\"undefined\"!=typeof window&&Se.setContext(window),this.setAnimationLoop=function(e){be=e,ge.setAnimationLoop(e),null===e?Se.stop():Se.start()},ge.addEventListener(\"sessionstart\",Me),ge.addEventListener(\"sessionend\",we),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==m){!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===ge.enabled&&!0===ge.isPresenting&&(!0===ge.cameraAutoUpdate&&ge.updateCamera(t),t=ge.getCamera()),!0===e.isScene&&e.onBeforeRender(S,e,t,L),(w=re.get(e,f.length)).init(),f.push(w),j.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),H.setFromProjectionMatrix(j),V=this.localClippingEnabled,G=ae.init(this.clippingPlanes,V,t),(g=ne.get(e,p.length)).init(),p.push(g),function u(e,t,i,n){if(!1!==e.visible){var r,c;if(e.layers.test(t.layers))if(e.isGroup)i=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)w.pushLight(e),e.castShadow&&w.pushShadow(e);else if(e.isSprite)e.frustumCulled&&!H.intersectsSprite(e)||(n&&X.setFromMatrixPosition(e.matrixWorld).applyMatrix4(j),r=ee.update(e),(c=e.material).visible&&g.push(e,r,c,i,X.z,null));else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==J.render.frame&&(e.skeleton.update(),e.skeleton.frame=J.render.frame),!e.frustumCulled||H.intersectsObject(e))){n&&X.setFromMatrixPosition(e.matrixWorld).applyMatrix4(j);var a=ee.update(e),s=e.material;if(Array.isArray(s))for(var d=a.groups,o=0,p=d.length;o<p;o++){var f=d[o],l=s[f.materialIndex];l&&l.visible&&g.push(e,a,l,i,X.z,f)}else s.visible&&g.push(e,a,s,i,X.z,null)}for(var m=e.children,h=0,v=m.length;h<v;h++)u(m[h],t,i,n)}}(e,t,0,S.sortObjects),g.finish(),!0===S.sortObjects&&g.sort(F,N),!0===G&&ae.beginShadows();var i=w.state.shadowsArray;if(se.render(i,e,t),!0===G&&ae.endShadows(),!0===this.info.autoReset&&this.info.reset(),oe.render(g,e),w.setupLights(S.physicallyCorrectLights),t.isArrayCamera)for(var n=t.cameras,r=0,a=n.length;r<a;r++){var s=n[r];Ee(g,e,s,s.viewport)}else Ee(g,e,t);null!==L&&(k.updateMultisampleRenderTarget(L),k.updateRenderTargetMipmap(L)),!0===e.isScene&&e.onAfterRender(S,e,t),T.buffers.depth.setTest(!0),T.buffers.depth.setMask(!0),T.buffers.color.setMask(!0),T.setPolygonOffset(!1),de.resetDefaultState(),C=-1,P=null,f.pop(),w=0<f.length?f[f.length-1]:null,p.pop(),g=0<p.length?p[p.length-1]:null}}else console.error(\"THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.\")},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return L},this.setRenderTargetTextures=function(e,t,i){A.get(e.texture).__webglTexture=t,A.get(e.depthTexture).__webglTexture=i;t=A.get(e);t.__hasExternalTextures=!0,t.__hasExternalTextures&&(t.__autoAllocateDepthBuffer=void 0===i,t.__autoAllocateDepthBuffer||e.useRenderToTexture&&(console.warn(\"render-to-texture extension was disabled because an external texture was provided\"),e.useRenderToTexture=!1,e.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(e,t){e=A.get(e);e.__webglFramebuffer=t,e.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=(v=t,y=i,!0),r=((L=e)&&(void 0!==(r=A.get(e)).__useDefaultFramebuffer?(T.bindFramebuffer(R.FRAMEBUFFER,null),n=!1):void 0===r.__webglFramebuffer?k.setupRenderTarget(e):r.__hasExternalTextures&&k.rebindTextures(e,A.get(e.texture).__webglTexture,A.get(e.depthTexture).__webglTexture)),null),a=!1,s=!1;if(b=e?(((o=e.texture).isDataTexture3D||o.isDataTexture2DArray)&&(s=!0),o=A.get(e).__webglFramebuffer,e.isWebGLCubeRenderTarget?(r=o[t],a=!0):r=e.useRenderbuffer?A.get(e).__webglMultisampledFramebuffer:o,_.copy(e.viewport),x.copy(e.scissor),e.scissorTest):(_.copy(O).multiplyScalar(I).floor(),x.copy(U).multiplyScalar(I).floor(),B),T.bindFramebuffer(R.FRAMEBUFFER,r)&&E.drawBuffers&&n){var o=!1;if(e)if(e.isWebGLMultipleRenderTargets){var r=e.texture;if(z.length!==r.length||z[0]!==R.COLOR_ATTACHMENT0){for(var l=0,h=r.length;l<h;l++)z[l]=R.COLOR_ATTACHMENT0+l;z.length=r.length,o=!0}}else 1===z.length&&z[0]===R.COLOR_ATTACHMENT0||(z[0]=R.COLOR_ATTACHMENT0,z.length=1,o=!0);else 1===z.length&&z[0]===R.BACK||(z[0]=R.BACK,z.length=1,o=!0);o&&(E.isWebGL2?R.drawBuffers(z):d.get(\"WEBGL_draw_buffers\").drawBuffersWEBGL(z))}T.viewport(_),T.scissor(x),T.setScissorTest(b),a?(n=A.get(e.texture),R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_CUBE_MAP_POSITIVE_X+t,n.__webglTexture,i)):s&&(r=A.get(e.texture),R.framebufferTextureLayer(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,r.__webglTexture,i||0,t||0)),C=-1},this.readRenderTargetPixels=function(e,t,i,n,r,u,a){if(e&&e.isWebGLRenderTarget){var s=A.get(e).__webglFramebuffer;if(s=e.isWebGLCubeRenderTarget&&void 0!==a?s[a]:s){T.bindFramebuffer(R.FRAMEBUFFER,s);try{var o=e.texture,l=o.format,h=o.type;if(l!==We&&ce.convert(l)!==R.getParameter(R.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.\");var c=h===He&&(d.has(\"EXT_color_buffer_half_float\")||E.isWebGL2&&d.has(\"EXT_color_buffer_float\"));if(!(h===Ue||ce.convert(h)===R.getParameter(R.IMPLEMENTATION_COLOR_READ_TYPE)||h===ze&&(E.isWebGL2||d.has(\"OES_texture_float\")||d.has(\"WEBGL_color_buffer_float\"))||c))return void console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.\");R.checkFramebufferStatus(R.FRAMEBUFFER)===R.FRAMEBUFFER_COMPLETE?0<=t&&t<=e.width-n&&0<=i&&i<=e.height-r&&R.readPixels(t,i,n,r,ce.convert(l),ce.convert(h),u):console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.\")}finally{a=null!==L?A.get(L).__webglFramebuffer:null;T.bindFramebuffer(R.FRAMEBUFFER,a)}}}else console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.\")},this.copyFramebufferToTexture=function(e,t){var i,n,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;!0===t.isFramebufferTexture?(n=Math.pow(2,-r),i=Math.floor(t.image.width*n),n=Math.floor(t.image.height*n),k.setTexture2D(t,0),R.copyTexSubImage2D(R.TEXTURE_2D,r,0,0,e.x,e.y,i,n),T.unbindTexture()):console.error(\"THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.\")},this.copyTextureToTexture=function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,r=t.image.width,a=t.image.height,s=ce.convert(i.format),o=ce.convert(i.type);k.setTexture2D(i,0),R.pixelStorei(R.UNPACK_FLIP_Y_WEBGL,i.flipY),R.pixelStorei(R.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),R.pixelStorei(R.UNPACK_ALIGNMENT,i.unpackAlignment),t.isDataTexture?R.texSubImage2D(R.TEXTURE_2D,n,e.x,e.y,r,a,s,o,t.image.data):t.isCompressedTexture?R.compressedTexSubImage2D(R.TEXTURE_2D,n,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,s,t.mipmaps[0].data):R.texSubImage2D(R.TEXTURE_2D,n,e.x,e.y,s,o,t.image),0===n&&i.generateMipmaps&&R.generateMipmap(R.TEXTURE_2D),T.unbindTexture()},this.copyTextureToTexture3D=function(e,t,i,n){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0;if(S.isWebGL1Renderer)console.warn(\"THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.\");else{var a,s=e.max.x-e.min.x+1,o=e.max.y-e.min.y+1,h=e.max.z-e.min.z+1,u=ce.convert(n.format),c=ce.convert(n.type);if(n.isDataTexture3D)k.setTexture3D(n,0),a=R.TEXTURE_3D;else{if(!n.isDataTexture2DArray)return void console.warn(\"THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.\");k.setTexture2DArray(n,0),a=R.TEXTURE_2D_ARRAY}R.pixelStorei(R.UNPACK_FLIP_Y_WEBGL,n.flipY),R.pixelStorei(R.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),R.pixelStorei(R.UNPACK_ALIGNMENT,n.unpackAlignment);var d=R.getParameter(R.UNPACK_ROW_LENGTH),p=R.getParameter(R.UNPACK_IMAGE_HEIGHT),f=R.getParameter(R.UNPACK_SKIP_PIXELS),m=R.getParameter(R.UNPACK_SKIP_ROWS),v=R.getParameter(R.UNPACK_SKIP_IMAGES),l=i.isCompressedTexture?i.mipmaps[0]:i.image;R.pixelStorei(R.UNPACK_ROW_LENGTH,l.width),R.pixelStorei(R.UNPACK_IMAGE_HEIGHT,l.height),R.pixelStorei(R.UNPACK_SKIP_PIXELS,e.min.x),R.pixelStorei(R.UNPACK_SKIP_ROWS,e.min.y),R.pixelStorei(R.UNPACK_SKIP_IMAGES,e.min.z),i.isDataTexture||i.isDataTexture3D?R.texSubImage3D(a,r,t.x,t.y,t.z,s,o,h,u,c,l.data):i.isCompressedTexture?(console.warn(\"THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture.\"),R.compressedTexSubImage3D(a,r,t.x,t.y,t.z,s,o,h,u,l.data)):R.texSubImage3D(a,r,t.x,t.y,t.z,s,o,h,u,c,l),R.pixelStorei(R.UNPACK_ROW_LENGTH,d),R.pixelStorei(R.UNPACK_IMAGE_HEIGHT,p),R.pixelStorei(R.UNPACK_SKIP_PIXELS,f),R.pixelStorei(R.UNPACK_SKIP_ROWS,m),R.pixelStorei(R.UNPACK_SKIP_IMAGES,v),0===r&&n.generateMipmaps&&R.generateMipmap(a),T.unbindTexture()}},this.initTexture=function(e){k.setTexture2D(e,0),T.unbindTexture()},this.resetState=function(){y=v=0,L=null,T.reset(),de.reset()},\"undefined\"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(\"observe\",{detail:this}))}rh.prototype.isWebGLRenderer=!0;(0,ay.default)(sh,rh),ah=hy(sh);var ah,ws=(0,ly.default)(sh);function sh(){return(0,oy.default)(this,sh),ah.apply(this,arguments)}ws.prototype.isWebGL1Renderer=!0;(0,ly.default)(lh,[{key:\"clone\",value:function(){return new lh(this.color,this.density)}},{key:\"toJSON\",value:function(){return{type:\"FogExp2\",color:this.color.getHex(),density:this.density}}}]);var oh=lh;function lh(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:25e-5;(0,oy.default)(this,lh),this.name=\"\",this.color=new S(e),this.density=t}oh.prototype.isFogExp2=!0;(0,ly.default)(uh,[{key:\"clone\",value:function(){return new uh(this.color,this.near,this.far)}},{key:\"toJSON\",value:function(){return{type:\"Fog\",color:this.color.getHex(),near:this.near,far:this.far}}}]);var hh=uh;function uh(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1e3;(0,oy.default)(this,uh),this.name=\"\",this.color=new S(e),this.near=t,this.far=i}hh.prototype.isFog=!0;(0,ay.default)(ph,w),ch=hy(ph),(0,ly.default)(ph,[{key:\"copy\",value:function(e,t){return(0,ny.default)((0,sy.default)(ph.prototype),\"copy\",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:\"toJSON\",value:function(e){e=(0,ny.default)((0,sy.default)(ph.prototype),\"toJSON\",this).call(this,e);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}]);var ch,dh=ph;function ph(){var e;return(0,oy.default)(this,ph),(e=ch.call(this)).type=\"Scene\",e.background=null,e.environment=null,e.fog=null,e.overrideMaterial=null,e.autoUpdate=!0,\"undefined\"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(\"observe\",{detail:(0,dy.default)(e)})),e}dh.prototype.isScene=!0;(0,ly.default)(mh,[{key:\"onUploadCallback\",value:function(){}},{key:\"needsUpdate\",set:function(e){!0===e&&this.version++}},{key:\"setUsage\",value:function(e){return this.usage=e,this}},{key:\"copy\",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:\"copyAt\",value:function(e,t,i){e*=this.stride,i*=t.stride;for(var n=0,r=this.stride;n<r;n++)this.array[e+n]=t.array[i+n];return this}},{key:\"set\",value:function(e){return this.array.set(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0),this}},{key:\"clone\",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Gt()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);e=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),e=new this.constructor(e,this.stride);return e.setUsage(this.usage),e}},{key:\"onUpload\",value:function(e){return this.onUploadCallback=e,this}},{key:\"toJSON\",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Gt()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]);var fh=mh;function mh(e,t){(0,oy.default)(this,mh),this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=n,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Gt()}fh.prototype.isInterleavedBuffer=!0;var vh=new Ye,gh=((0,ly.default)(yh,[{key:\"count\",get:function(){return this.data.count}},{key:\"array\",get:function(){return this.data.array}},{key:\"needsUpdate\",set:function(e){this.data.needsUpdate=e}},{key:\"applyMatrix4\",value:function(e){for(var t=0,i=this.data.count;t<i;t++)vh.x=this.getX(t),vh.y=this.getY(t),vh.z=this.getZ(t),vh.applyMatrix4(e),this.setXYZ(t,vh.x,vh.y,vh.z);return this}},{key:\"applyNormalMatrix\",value:function(e){for(var t=0,i=this.count;t<i;t++)vh.x=this.getX(t),vh.y=this.getY(t),vh.z=this.getZ(t),vh.applyNormalMatrix(e),this.setXYZ(t,vh.x,vh.y,vh.z);return this}},{key:\"transformDirection\",value:function(e){for(var t=0,i=this.count;t<i;t++)vh.x=this.getX(t),vh.y=this.getY(t),vh.z=this.getZ(t),vh.transformDirection(e),this.setXYZ(t,vh.x,vh.y,vh.z);return this}},{key:\"setX\",value:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}},{key:\"setY\",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}},{key:\"setZ\",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}},{key:\"setW\",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}},{key:\"getX\",value:function(e){return this.data.array[e*this.data.stride+this.offset]}},{key:\"getY\",value:function(e){return this.data.array[e*this.data.stride+this.offset+1]}},{key:\"getZ\",value:function(e){return this.data.array[e*this.data.stride+this.offset+2]}},{key:\"getW\",value:function(e){return this.data.array[e*this.data.stride+this.offset+3]}},{key:\"setXY\",value:function(e,t,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this}},{key:\"setXYZ\",value:function(e,t,i,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this}},{key:\"setXYZW\",value:function(e,t,i,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this.data.array[e+3]=r,this}},{key:\"clone\",value:function(e){if(void 0!==e)return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new yh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized);console.log(\"THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.\");for(var t=[],i=0;i<this.count;i++)for(var n=i*this.data.stride+this.offset,r=0;r<this.itemSize;r++)t.push(this.data.array[n+r]);return new lr(new this.array.constructor(t),this.itemSize,this.normalized)}},{key:\"toJSON\",value:function(e){if(void 0!==e)return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized};console.log(\"THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.\");for(var t=[],i=0;i<this.count;i++)for(var n=i*this.data.stride+this.offset,r=0;r<this.itemSize;r++)t.push(this.data.array[n+r]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}}]),yh);function yh(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]&&arguments[3];(0,oy.default)(this,yh),this.name=\"\",this.data=e,this.itemSize=t,this.offset=i,this.normalized=!0===n}gh.prototype.isInterleavedBufferAttribute=!0;(0,ay.default)(Mh,qn),xh=hy(Mh),(0,ly.default)(Mh,[{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(Mh.prototype),\"copy\",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}]);var _h,xh,bh=Mh;function Mh(e){var t;return(0,oy.default)(this,Mh),(t=xh.call(this)).type=\"SpriteMaterial\",t.color=new S(16777215),t.map=null,t.alphaMap=null,t.rotation=0,t.sizeAttenuation=!0,t.transparent=!0,t.setValues(e),t}bh.prototype.isSpriteMaterial=!0;var wh,Sh=new Ye,Eh=new Ye,Th=new Ye,Ah=new qe,kh=new qe,Rh=new Re,Lh=new Ye,Ch=new Ye,Ph=new Ye,Dh=new qe,Ih=new qe,Fh=new qe,Nh=((0,ay.default)(Oh,w),wh=hy(Oh),(0,ly.default)(Oh,[{key:\"raycast\",value:function(e,t){null===e.camera&&console.error('THREE.Sprite: \"Raycaster.camera\" needs to be set in order to raycast against sprites.'),Eh.setFromMatrixScale(this.matrixWorld),Rh.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Th.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Eh.multiplyScalar(-Th.z);var i,n,r=this.material.rotation,r=(0!==r&&(n=Math.cos(r),i=Math.sin(r)),this.center);Uh(Lh.set(-.5,-.5,0),Th,r,Eh,i,n),Uh(Ch.set(.5,-.5,0),Th,r,Eh,i,n),Uh(Ph.set(.5,.5,0),Th,r,Eh,i,n),Dh.set(0,0),Ih.set(1,0),Fh.set(1,1),null===e.ray.intersectTriangle(Lh,Ch,Ph,!1,Sh)&&(Uh(Ch.set(-.5,.5,0),Th,r,Eh,i,n),Ih.set(0,1),null===e.ray.intersectTriangle(Lh,Ph,Ch,!1,Sh))||((r=e.ray.origin.distanceTo(Sh))<e.near||r>e.far||t.push({distance:r,point:Sh.clone(),uv:jn.getUV(Sh,Lh,Ch,Ph,Dh,Ih,Fh,new qe),face:null,object:this}))}},{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(Oh.prototype),\"copy\",this).call(this,e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}]),Oh);function Oh(e){var t,i;return(0,oy.default)(this,Oh),(t=wh.call(this)).type=\"Sprite\",void 0===_h&&(_h=new R,i=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new fh(i,5),_h.setIndex([0,1,2,0,2,3]),_h.setAttribute(\"position\",new gh(i,3,0,!1)),_h.setAttribute(\"uv\",new gh(i,2,3,!1))),t.geometry=_h,t.material=void 0!==e?e:new bh,t.center=new qe(.5,.5),t}function Uh(e,t,i,n,r,a){Ah.subVectors(e,i).addScalar(.5).multiply(n),void 0!==r?(kh.x=a*Ah.x-r*Ah.y,kh.y=r*Ah.x+a*Ah.y):kh.copy(Ah),e.copy(t),e.x+=kh.x,e.y+=kh.y,e.applyMatrix4(Rh)}Nh.prototype.isSprite=!0;var Bh,zh,Hh=new Ye,Gh=new Ye,Vh=((0,ay.default)(Kh,w),zh=hy(Kh),(0,ly.default)(Kh,[{key:\"copy\",value:function(e){(0,ny.default)((0,sy.default)(Kh.prototype),\"copy\",this).call(this,e,!1);for(var t=e.levels,i=0,n=t.length;i<n;i++){var r=t[i];this.addLevel(r.object.clone(),r.distance)}return this.autoUpdate=e.autoUpdate,this}},{key:\"addLevel\",value:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,t=Math.abs(t),i=this.levels,n=0;n<i.length&&!(t<i[n].distance);n++);return i.splice(n,0,{distance:t,object:e}),this.add(e),this}},{key:\"getCurrentLevel\",value:function(){return this._currentLevel}},{key:\"getObjectForDistance\",value:function(e){var t=this.levels;if(0<t.length){for(var i=1,n=t.length;i<n&&!(e<t[i].distance);i++);return t[i-1].object}return null}},{key:\"raycast\",value:function(e,t){var i;0<this.levels.length&&(Hh.setFromMatrixPosition(this.matrixWorld),i=e.ray.origin.distanceTo(Hh),this.getObjectForDistance(i).raycast(e,t))}},{key:\"update\",value:function(e){var t=this.levels;if(1<t.length){Hh.setFromMatrixPosition(e.matrixWorld),Gh.setFromMatrixPosition(this.matrixWorld);var i,n,r=Hh.distanceTo(Gh)/e.zoom;for(t[0].object.visible=!0,i=1,n=t.length;i<n&&r>=t[i].distance;i++)t[i-1].object.visible=!1,t[i].object.visible=!0;for(this._currentLevel=i-1;i<n;i++)t[i].object.visible=!1}}},{key:\"toJSON\",value:function(e){var t=(0,ny.default)((0,sy.default)(Kh.prototype),\"toJSON\",this).call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];for(var i=this.levels,n=0,r=i.length;n<r;n++){var a=i[n];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}}]),Kh),Wh=new Ye,jh=new ci,Xh=new ci,qh=new Ye,Yh=new Re,Jh=((0,ay.default)(Zh,da),Bh=hy(Zh),(0,ly.default)(Zh,[{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(Zh.prototype),\"copy\",this).call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}},{key:\"bind\",value:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}},{key:\"pose\",value:function(){this.skeleton.pose()}},{key:\"normalizeSkinWeights\",value:function(){for(var e=new ci,t=this.geometry.attributes.skinWeight,i=0,n=t.count;i<n;i++){e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.w=t.getW(i);var r=1/e.manhattanLength();r!=1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}},{key:\"updateMatrixWorld\",value:function(e){(0,ny.default)((0,sy.default)(Zh.prototype),\"updateMatrixWorld\",this).call(this,e),\"attached\"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():\"detached\"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn(\"THREE.SkinnedMesh: Unrecognized bindMode: \"+this.bindMode)}},{key:\"boneTransform\",value:function(e,t){var i=this.skeleton,n=this.geometry;jh.fromBufferAttribute(n.attributes.skinIndex,e),Xh.fromBufferAttribute(n.attributes.skinWeight,e),Wh.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var r=0;r<4;r++){var a,s=Xh.getComponent(r);0!==s&&(a=jh.getComponent(r),Yh.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(qh.copy(Wh).applyMatrix4(Yh),s))}return t.applyMatrix4(this.bindMatrixInverse)}}]),Zh);function Zh(e,t){return(0,oy.default)(this,Zh),(e=Bh.call(this,e,t)).type=\"SkinnedMesh\",e.bindMode=\"attached\",e.bindMatrix=new Re,e.bindMatrixInverse=new Re,e}function Kh(){var e;return(0,oy.default)(this,Kh),(e=zh.call(this))._currentLevel=0,e.type=\"LOD\",Object.defineProperties((0,dy.default)(e),{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),e.autoUpdate=!0,e}Jh.prototype.isSkinnedMesh=!0;(0,ay.default)(eu,w),Qh=hy(eu);var Qh,$h=(0,ly.default)(eu);function eu(){var e;return(0,oy.default)(this,eu),(e=Qh.call(this)).type=\"Bone\",e}$h.prototype.isBone=!0;(0,ay.default)(nu,oi),tu=hy(nu);var tu,iu=(0,ly.default)(nu);function nu(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,n=3<arguments.length?arguments[3]:void 0,r=4<arguments.length?arguments[4]:void 0,a=5<arguments.length?arguments[5]:void 0,s=6<arguments.length?arguments[6]:void 0,h=7<arguments.length?arguments[7]:void 0,o=8<arguments.length&&void 0!==arguments[8]?arguments[8]:Ne,l=9<arguments.length&&void 0!==arguments[9]?arguments[9]:Ne,u=10<arguments.length?arguments[10]:void 0,c=11<arguments.length?arguments[11]:void 0;return(0,oy.default)(this,nu),(a=tu.call(this,null,a,s,h,o,l,n,r,u,c)).image={data:e,width:t,height:i},a.magFilter=o,a.minFilter=l,a.generateMipmaps=!1,a.flipY=!1,a.unpackAlignment=1,a}iu.prototype.isDataTexture=!0;var ru,au=new Re,su=new Re,ou=((0,ly.default)(uu,[{key:\"init\",value:function(){var e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn(\"THREE.Skeleton: Number of inverse bone matrices does not match amount of bones.\"),this.boneInverses=[];for(var i=0,n=this.bones.length;i<n;i++)this.boneInverses.push(new Re)}}},{key:\"calculateInverses\",value:function(){for(var e=this.boneInverses.length=0,t=this.bones.length;e<t;e++){var i=new Re;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}},{key:\"pose\",value:function(){for(var e=0,t=this.bones.length;e<t;e++){var i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(var n=0,r=this.bones.length;n<r;n++){var a=this.bones[n];a&&(a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}}},{key:\"update\",value:function(){for(var e=this.bones,t=this.boneInverses,i=this.boneMatrices,n=this.boneTexture,r=0,a=e.length;r<a;r++){var s=e[r]?e[r].matrixWorld:su;au.multiplyMatrices(s,t[r]),au.toArray(i,16*r)}null!==n&&(n.needsUpdate=!0)}},{key:\"clone\",value:function(){return new uu(this.bones,this.boneInverses)}},{key:\"computeBoneTexture\",value:function(){var e=qt(Math.sqrt(4*this.bones.length)),t=(e=Math.max(e,4),new Float32Array(e*e*4)),i=(t.set(this.boneMatrices),new iu(t,e,e,We,ze));return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}},{key:\"getBoneByName\",value:function(e){for(var t=0,i=this.bones.length;t<i;t++){var n=this.bones[t];if(n.name===e)return n}}},{key:\"dispose\",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:\"fromJSON\",value:function(e,t){this.uuid=e.uuid;for(var i=0,n=e.bones.length;i<n;i++){var r=e.bones[i],a=t[r];void 0===a&&(console.warn(\"THREE.Skeleton: No bone found with UUID:\",r),a=new $h),this.bones.push(a),this.boneInverses.push((new Re).fromArray(e.boneInverses[i]))}return this.init(),this}},{key:\"toJSON\",value:function(){var e={metadata:{version:4.5,type:\"Skeleton\",generator:\"Skeleton.toJSON\"},bones:[],boneInverses:[]};e.uuid=this.uuid;for(var t=this.bones,i=this.boneInverses,n=0,r=t.length;n<r;n++){var a=t[n],a=(e.bones.push(a.uuid),i[n]);e.boneInverses.push(a.toArray())}return e}}]),uu),lu=((0,ay.default)(hu,lr),ru=hy(hu),(0,ly.default)(hu,[{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(hu.prototype),\"copy\",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:\"toJSON\",value:function(){var e=(0,ny.default)((0,sy.default)(hu.prototype),\"toJSON\",this).call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}]),hu);function hu(e,t,i){var n,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;return(0,oy.default)(this,hu),\"number\"==typeof i&&(r=i,i=!1,console.error(\"THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.\")),(n=ru.call(this,e,t,i)).meshPerAttribute=r,n}function uu(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];(0,oy.default)(this,uu),this.uuid=Gt(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}lu.prototype.isInstancedBufferAttribute=!0;var cu,du=new Re,pu=new Re,fu=[],mu=new da,vu=((0,ay.default)(gu,da),cu=hy(gu),(0,ly.default)(gu,[{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(gu.prototype),\"copy\",this).call(this,e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}},{key:\"getColorAt\",value:function(e,t){t.fromArray(this.instanceColor.array,3*e)}},{key:\"getMatrixAt\",value:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)}},{key:\"raycast\",value:function(e,t){var i=this.matrixWorld,n=this.count;if(mu.geometry=this.geometry,mu.material=this.material,void 0!==mu.material)for(var r=0;r<n;r++){this.getMatrixAt(r,du),pu.multiplyMatrices(i,du),mu.matrixWorld=pu,mu.raycast(e,fu);for(var a=0,s=fu.length;a<s;a++){var o=fu[a];o.instanceId=r,o.object=this,t.push(o)}fu.length=0}}},{key:\"setColorAt\",value:function(e,t){null===this.instanceColor&&(this.instanceColor=new lu(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}},{key:\"setMatrixAt\",value:function(e,t){t.toArray(this.instanceMatrix.array,16*e)}},{key:\"updateMorphTargets\",value:function(){}},{key:\"dispose\",value:function(){this.dispatchEvent({type:\"dispose\"})}}]),gu);function gu(e,t,i){return(0,oy.default)(this,gu),(e=cu.call(this,e,t)).instanceMatrix=new lu(new Float32Array(16*i),16),e.instanceColor=null,e.count=i,e.frustumCulled=!1,e}vu.prototype.isInstancedMesh=!0;(0,ay.default)(xu,qn),yu=hy(xu),(0,ly.default)(xu,[{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(xu.prototype),\"copy\",this).call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}]);var yu,_u=xu;function xu(e){var t;return(0,oy.default)(this,xu),(t=yu.call(this)).type=\"LineBasicMaterial\",t.color=new S(16777215),t.linewidth=1,t.linecap=\"round\",t.linejoin=\"round\",t.setValues(e),t}_u.prototype.isLineBasicMaterial=!0;var bu,Mu=new Ye,wu=new Ye,Su=new Re,Eu=new tn,Tu=new qi,Au=((0,ay.default)(ku,w),bu=hy(ku),(0,ly.default)(ku,[{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(ku.prototype),\"copy\",this).call(this,e),this.material=e.material,this.geometry=e.geometry,this}},{key:\"computeLineDistances\",value:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,i=[0],n=1,r=t.count;n<r;n++)Mu.fromBufferAttribute(t,n-1),wu.fromBufferAttribute(t,n),i[n]=i[n-1],i[n]+=Mu.distanceTo(wu);e.setAttribute(\"lineDistance\",new $(i,1))}else console.warn(\"THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.\");else e.isGeometry&&console.error(\"THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.\");return this}},{key:\"raycast\",value:function(e,u){var t=this.geometry,i=this.matrixWorld,c=e.params.Line.threshold,n=t.drawRange;if(null===t.boundingSphere&&t.computeBoundingSphere(),Tu.copy(t.boundingSphere),Tu.applyMatrix4(i),Tu.radius+=c,!1!==e.ray.intersectsSphere(Tu)){Su.copy(i).invert(),Eu.copy(e.ray).applyMatrix4(Su);var i=c/((this.scale.x+this.scale.y+this.scale.z)/3),d=i*i,r=new Ye,a=new Ye,p=new Ye,s=new Ye,f=this.isLineSegments?2:1;if(t.isBufferGeometry){var m,v=t.index,o=t.attributes.position;if(null!==v)for(var l=Math.max(0,n.start),g=Math.min(v.count,n.start+n.count)-1;l<g;l+=f){var y=v.getX(l),_=v.getX(l+1);r.fromBufferAttribute(o,y),a.fromBufferAttribute(o,_),Eu.distanceSqToSegment(r,a,s,p)>d||(s.applyMatrix4(this.matrixWorld),(y=e.ray.origin.distanceTo(s))<e.near||y>e.far||u.push({distance:y,point:p.clone().applyMatrix4(this.matrixWorld),index:l,face:null,faceIndex:null,object:this}))}else for(var h=Math.max(0,n.start),x=Math.min(o.count,n.start+n.count)-1;h<x;h+=f)r.fromBufferAttribute(o,h),a.fromBufferAttribute(o,h+1),Eu.distanceSqToSegment(r,a,s,p)>d||(s.applyMatrix4(this.matrixWorld),(m=e.ray.origin.distanceTo(s))<e.near||m>e.far||u.push({distance:m,point:p.clone().applyMatrix4(this.matrixWorld),index:h,face:null,faceIndex:null,object:this}))}else t.isGeometry&&console.error(\"THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.\")}}},{key:\"updateMorphTargets\",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,i=Object.keys(t);if(0<i.length){var n=t[i[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,a=n.length;r<a;r++){var s=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=r}}}}else{t=e.morphTargets;void 0!==t&&0<t.length&&console.error(\"THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.\")}}}]),ku);function ku(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new R,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new _u;return(0,oy.default)(this,ku),(e=bu.call(this)).type=\"Line\",e.geometry=t,e.material=i,e.updateMorphTargets(),e}Au.prototype.isLine=!0;var Ru,Lu=new Ye,Cu=new Ye,Pu=((0,ay.default)(Du,Au),Ru=hy(Du),(0,ly.default)(Du,[{key:\"computeLineDistances\",value:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,i=[],n=0,r=t.count;n<r;n+=2)Lu.fromBufferAttribute(t,n),Cu.fromBufferAttribute(t,n+1),i[n]=0===n?0:i[n-1],i[n+1]=i[n]+Lu.distanceTo(Cu);e.setAttribute(\"lineDistance\",new $(i,1))}else console.warn(\"THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.\");else e.isGeometry&&console.error(\"THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.\");return this}}]),Du);function Du(e,t){return(0,oy.default)(this,Du),(e=Ru.call(this,e,t)).type=\"LineSegments\",e}Pu.prototype.isLineSegments=!0;(0,ay.default)(Nu,Au),Iu=hy(Nu);var Iu,Fu=(0,ly.default)(Nu);function Nu(e,t){return(0,oy.default)(this,Nu),(e=Iu.call(this,e,t)).type=\"LineLoop\",e}Fu.prototype.isLineLoop=!0;(0,ay.default)(Bu,qn),Ou=hy(Bu),(0,ly.default)(Bu,[{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(Bu.prototype),\"copy\",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}]);var Ou,Uu=Bu;function Bu(e){var t;return(0,oy.default)(this,Bu),(t=Ou.call(this)).type=\"PointsMaterial\",t.color=new S(16777215),t.map=null,t.alphaMap=null,t.size=1,t.sizeAttenuation=!0,t.setValues(e),t}Uu.prototype.isPointsMaterial=!0;var zu,Hu=new Re,Gu=new tn,Vu=new qi,Wu=new Ye,ju=((0,ay.default)(Xu,w),zu=hy(Xu),(0,ly.default)(Xu,[{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(Xu.prototype),\"copy\",this).call(this,e),this.material=e.material,this.geometry=e.geometry,this}},{key:\"raycast\",value:function(e,t){var i=this.geometry,n=this.matrixWorld,r=e.params.Points.threshold,a=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),Vu.copy(i.boundingSphere),Vu.applyMatrix4(n),Vu.radius+=r,!1!==e.ray.intersectsSphere(Vu)){Hu.copy(n).invert(),Gu.copy(e.ray).applyMatrix4(Hu);var r=r/((this.scale.x+this.scale.y+this.scale.z)/3),u=r*r;if(i.isBufferGeometry){var s=i.index,o=i.attributes.position;if(null!==s)for(var l=Math.max(0,a.start),c=Math.min(s.count,a.start+a.count);l<c;l++){var d=s.getX(l);Wu.fromBufferAttribute(o,d),qu(Wu,d,u,n,e,t,this)}else for(var h=Math.max(0,a.start),p=Math.min(o.count,a.start+a.count);h<p;h++)Wu.fromBufferAttribute(o,h),qu(Wu,h,u,n,e,t,this)}else console.error(\"THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.\")}}},{key:\"updateMorphTargets\",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,i=Object.keys(t);if(0<i.length){var n=t[i[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,a=n.length;r<a;r++){var s=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=r}}}}else{t=e.morphTargets;void 0!==t&&0<t.length&&console.error(\"THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.\")}}}]),Xu);function Xu(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new R,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Uu;return(0,oy.default)(this,Xu),(e=zu.call(this)).type=\"Points\",e.geometry=t,e.material=i,e.updateMorphTargets(),e}function qu(e,t,i,n,r,a,s){var o=Gu.distanceSqToPoint(e);o<i&&(i=new Ye,Gu.closestPointToPoint(e,i),i.applyMatrix4(n),(e=r.ray.origin.distanceTo(i))<r.near||e>r.far||a.push({distance:e,distanceToRay:Math.sqrt(o),point:i,index:t,face:null,object:s}))}ju.prototype.isPoints=!0;(0,ay.default)(Zu,oi),Yu=hy(Zu),(0,ly.default)(Zu,[{key:\"clone\",value:function(){return new this.constructor(this.image).copy(this)}},{key:\"update\",value:function(){var e=this.image;!1==\"requestVideoFrameCallback\"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]);var Yu,Ju=Zu;function Zu(t,e,i,n,r,a,s,o,l){(0,oy.default)(this,Zu),(e=Yu.call(this,t,e,i,n,r,a,s,o,l)).format=void 0!==s?s:Ve,e.minFilter=void 0!==a?a:Te,e.magFilter=void 0!==r?r:Te;var h=(e.generateMipmaps=!1,dy.default)(e);return\"requestVideoFrameCallback\"in t&&t.requestVideoFrameCallback(function e(){h.needsUpdate=!0,t.requestVideoFrameCallback(e)}),e}Ju.prototype.isVideoTexture=!0;(0,ay.default)($u,oi),Ku=hy($u);var Ku,Qu=(0,ly.default)($u);function $u(e,t,i){return(0,oy.default)(this,$u),(e=Ku.call(this,{width:e,height:t})).format=i,e.magFilter=Ne,e.minFilter=Ne,e.generateMipmaps=!1,e.needsUpdate=!0,e}Qu.prototype.isFramebufferTexture=!0;(0,ay.default)(ic,oi),ec=hy(ic);var ec,tc=(0,ly.default)(ic);function ic(e,t,i,n,r,a,s,o,l,h,u,c){return(0,oy.default)(this,ic),(a=ec.call(this,null,a,s,o,l,h,n,r,u,c)).image={width:t,height:i},a.mipmaps=e,a.flipY=!1,a.generateMipmaps=!1,a}tc.prototype.isCompressedTexture=!0;(0,ay.default)(ac,oi),nc=hy(ac);var nc,rc=(0,ly.default)(ac);function ac(e,t,i,n,r,a,s,o,l){return(0,oy.default)(this,ac),(e=nc.call(this,e,t,i,n,r,a,s,o,l)).needsUpdate=!0,e}rc.prototype.isCanvasTexture=!0;(0,ay.default)(Pc,R),dc=hy(Pc),(0,ly.default)(Pc,null,[{key:\"fromJSON\",value:function(e){return new Pc(e.radius,e.segments,e.thetaStart,e.thetaLength)}}]);var sc,oc,lc,hc,uc,cc,dc,pc=Pc,fc=((0,ay.default)(Cc,R),cc=hy(Cc),(0,ly.default)(Cc,null,[{key:\"fromJSON\",value:function(e){return new Cc(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),Cc),mc=(mc=fc,(0,ay.default)(Lc,mc),uc=hy(Lc),(0,ly.default)(Lc,null,[{key:\"fromJSON\",value:function(e){return new Lc(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),Lc),vc=((0,ay.default)(Rc,R),hc=hy(Rc),(0,ly.default)(Rc,null,[{key:\"fromJSON\",value:function(e){return new Rc(e.vertices,e.indices,e.radius,e.details)}}]),Rc),gc=((0,ay.default)(kc,vc),lc=hy(kc),(0,ly.default)(kc,null,[{key:\"fromJSON\",value:function(e){return new kc(e.radius,e.detail)}}]),kc),yc=new Ye,_c=new Ye,xc=new Ye,bc=new jn,Mc=((0,ay.default)(Ac,R),oc=hy(Ac),(0,ly.default)(Ac)),wc=((0,ly.default)(Tc,[{key:\"getPoint\",value:function(){return console.warn(\"THREE.Curve: .getPoint() not implemented.\"),null}},{key:\"getPointAt\",value:function(e,t){e=this.getUtoTmapping(e);return this.getPoint(e,t)}},{key:\"getPoints\",value:function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:5,t=[],i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}},{key:\"getSpacedPoints\",value:function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:5,t=[],i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}},{key:\"getLength\",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:\"getLengths\",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,i=[],n=this.getPoint(0),r=0;i.push(0);for(var a=1;a<=e;a++)r+=(t=this.getPoint(a/e)).distanceTo(n),i.push(r),n=t;return this.cacheArcLengths=i}},{key:\"updateArcLengths\",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:\"getUtoTmapping\",value:function(e,t){for(var i,n=this.getLengths(),r=0,a=n.length,s=t||e*n[a-1],o=0,l=a-1;o<=l;)if((i=n[r=Math.floor(o+(l-o)/2)]-s)<0)o=r+1;else{if(!(0<i)){l=r;break}l=r-1}if(n[r=l]===s)return r/(a-1);t=n[r];return(r+(s-t)/(n[r+1]-t))/(a-1)}},{key:\"getTangent\",value:function(e,t){var i=e-1e-4,e=e+1e-4,i=(1<e&&(e=1),this.getPoint(i=i<0?0:i)),e=this.getPoint(e),t=t||new(i.isVector2?qe:Ye);return t.copy(e).sub(i).normalize(),t}},{key:\"getTangentAt\",value:function(e,t){e=this.getUtoTmapping(e);return this.getTangent(e,t)}},{key:\"computeFrenetFrames\",value:function(e,u){for(var t=new Ye,i=[],n=[],r=[],a=new Ye,c=new Re,s=0;s<=e;s++)i[s]=this.getTangentAt(s/e,new Ye);n[0]=new Ye,r[0]=new Ye;var o=Number.MAX_VALUE,d=Math.abs(i[0].x),p=Math.abs(i[0].y),f=Math.abs(i[0].z);d<=o&&(o=d,t.set(1,0,0)),p<=o&&(o=p,t.set(0,1,0)),f<=o&&t.set(0,0,1),a.crossVectors(i[0],t).normalize(),n[0].crossVectors(i[0],a),r[0].crossVectors(i[0],n[0]);for(var m,l=1;l<=e;l++)n[l]=n[l-1].clone(),r[l]=r[l-1].clone(),a.crossVectors(i[l-1],i[l]),a.length()>Number.EPSILON&&(a.normalize(),m=Math.acos(Vt(i[l-1].dot(i[l]),-1,1)),n[l].applyMatrix4(c.makeRotationAxis(a,m))),r[l].crossVectors(i[l],n[l]);if(!0===u){var v=Math.acos(Vt(n[0].dot(n[e]),-1,1));v/=e,0<i[0].dot(a.crossVectors(n[0],n[e]))&&(v=-v);for(var h=1;h<=e;h++)n[h].applyMatrix4(c.makeRotationAxis(i[h],v*h)),r[h].crossVectors(i[h],n[h])}return{tangents:i,normals:n,binormals:r}}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}},{key:\"copy\",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:\"toJSON\",value:function(){var e={metadata:{version:4.5,type:\"Curve\",generator:\"Curve.toJSON\"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:\"fromJSON\",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}]),Tc),Sc=((0,ay.default)(Ec,wc),sc=hy(Ec),(0,ly.default)(Ec,[{key:\"getPoint\",value:function(e,t){for(var t=t||new qe,i=2*Math.PI,n=this.aEndAngle-this.aStartAngle,r=Math.abs(n)<Number.EPSILON;n<0;)n+=i;for(;i<n;)n-=i;n<Number.EPSILON&&(n=r?0:i),!0!==this.aClockwise||r||(n===i?n=-i:n-=i);var a,s,o,l,r=this.aStartAngle+e*n,e=this.aX+this.xRadius*Math.cos(r),r=this.aY+this.yRadius*Math.sin(r);return 0!==this.aRotation&&(a=Math.cos(this.aRotation),s=Math.sin(this.aRotation),e=(o=e-this.aX)*a-(l=r-this.aY)*s+this.aX,r=o*s+l*a+this.aY),t.set(e,r)}},{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(Ec.prototype),\"copy\",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:\"toJSON\",value:function(){var e=(0,ny.default)((0,sy.default)(Ec.prototype),\"toJSON\",this).call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:\"fromJSON\",value:function(e){return(0,ny.default)((0,sy.default)(Ec.prototype),\"fromJSON\",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}]),Ec);function Ec(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:2*Math.PI,o=6<arguments.length&&void 0!==arguments[6]&&arguments[6],l=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0;return(0,oy.default)(this,Ec),(e=sc.call(this)).type=\"EllipseCurve\",e.aX=t,e.aY=i,e.xRadius=n,e.yRadius=r,e.aStartAngle=a,e.aEndAngle=s,e.aClockwise=o,e.aRotation=l,e}function Tc(){(0,oy.default)(this,Tc),this.type=\"Curve\",this.arcLengthDivisions=200}function Ac(){var h,u=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if((0,oy.default)(this,Ac),(h=oc.call(this)).type=\"EdgesGeometry\",h.parameters={geometry:u,thresholdAngle:c},null!==u){for(var d,p,f,e=Math.pow(10,4),m=Math.cos(zt*c),t=u.getIndex(),i=u.getAttribute(\"position\"),v=(t||i).count,n=[0,0,0],g=[\"a\",\"b\",\"c\"],r=new Array(3),a={},y=[],s=0;s<v;s+=3){t?(n[0]=t.getX(s),n[1]=t.getX(s+1),n[2]=t.getX(s+2)):(n[0]=s,n[1]=s+1,n[2]=s+2);var _=bc.a,x=bc.b,b=bc.c;if(_.fromBufferAttribute(i,n[0]),x.fromBufferAttribute(i,n[1]),b.fromBufferAttribute(i,n[2]),bc.getNormal(xc),r[0]=\"\".concat(Math.round(_.x*e),\",\").concat(Math.round(_.y*e),\",\").concat(Math.round(_.z*e)),r[1]=\"\".concat(Math.round(x.x*e),\",\").concat(Math.round(x.y*e),\",\").concat(Math.round(x.z*e)),r[2]=\"\".concat(Math.round(b.x*e),\",\").concat(Math.round(b.y*e),\",\").concat(Math.round(b.z*e)),r[0]!==r[1]&&r[1]!==r[2]&&r[2]!==r[0])for(var o=0;o<3;o++){var M=(o+1)%3,w=r[o],l=r[M],S=bc[g[o]],E=bc[g[M]],T=\"\".concat(w,\"_\").concat(l),l=\"\".concat(l,\"_\").concat(w);l in a&&a[l]?(xc.dot(a[l].normal)<=m&&(y.push(S.x,S.y,S.z),y.push(E.x,E.y,E.z)),a[l]=null):T in a||(a[T]={index0:n[o],index1:n[M],normal:xc.clone()})}}for(d in a)a[d]&&(p=(f=a[d]).index0,f=f.index1,yc.fromBufferAttribute(i,p),_c.fromBufferAttribute(i,f),y.push(yc.x,yc.y,yc.z),y.push(_c.x,_c.y,_c.z));h.setAttribute(\"position\",new $(y,3))}return h}function kc(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=((0,oy.default)(this,kc),(1+Math.sqrt(5))/2),n=1/i;return(i=lc.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t)).type=\"DodecahedronGeometry\",i.parameters={radius:e,detail:t},i}function Rc(){var e,h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,t=((0,oy.default)(this,Rc),(e=hc.call(this)).type=\"PolyhedronGeometry\",e.parameters={vertices:h,indices:u,radius:c,detail:d},[]),r=[];function p(e){t.push(e.x,e.y,e.z)}function f(e,t){e*=3;t.x=h[0+e],t.y=h[1+e],t.z=h[2+e]}function m(e,t,i,n){n<0&&1===e.x&&(r[t]=e.x-1),0===i.x&&0===i.z&&(r[t]=n/2/Math.PI+.5)}function v(e){return Math.atan2(e.z,-e.x)}for(var g=d,y=new Ye,_=new Ye,x=new Ye,b=0;b<u.length;b+=3){f(u[b+0],y),f(u[b+1],_),f(u[b+2],x),P=C=a=L=R=k=A=n=i=T=E=S=w=M=void 0;for(var M=y,w=_,S=x,E=g,T=E+1,i=[],n=0;n<=T;n++){i[n]=[];for(var A=M.clone().lerp(S,n/T),k=w.clone().lerp(S,n/T),R=T-n,L=0;L<=R;L++)i[n][L]=0===L&&n===T?A:A.clone().lerp(k,L/R)}for(var a=0;a<T;a++)for(var C=0;C<2*(T-a)-1;C++){var P=Math.floor(C/2);C%2==0?(p(i[a][P+1]),p(i[a+1][P]),p(i[a][P])):(p(i[a][P+1]),p(i[a+1][P+1]),p(i[a+1][P]))}}for(var D=c,I=new Ye,F=0;F<t.length;F+=3)I.x=t[F+0],I.y=t[F+1],I.z=t[F+2],I.normalize().multiplyScalar(D),t[F+0]=I.x,t[F+1]=I.y,t[F+2]=I.z;for(var s=new Ye,N=0;N<t.length;N+=3){s.x=t[N+0],s.y=t[N+1],s.z=t[N+2];var O=v(s)/2/Math.PI+.5,U=Math.atan2(-s.y,Math.sqrt(s.x*s.x+s.z*s.z))/Math.PI+.5;r.push(O,1-U)}for(var B=new Ye,z=new Ye,H=new Ye,G=new Ye,V=new qe,W=new qe,j=new qe,o=0,l=0;o<t.length;o+=9,l+=6){B.set(t[o+0],t[o+1],t[o+2]),z.set(t[o+3],t[o+4],t[o+5]),H.set(t[o+6],t[o+7],t[o+8]),V.set(r[l+0],r[l+1]),W.set(r[l+2],r[l+3]),j.set(r[l+4],r[l+5]),G.copy(B).add(z).add(H).divideScalar(3);var X=v(G);m(V,l+0,B,X),m(W,l+2,z,X),m(j,l+4,H,X)}for(var q=0;q<r.length;q+=6){var Y=r[q+0],J=r[q+2],Z=r[q+4],K=Math.max(Y,J,Z),Q=Math.min(Y,J,Z);.9<K&&Q<.1&&(Y<.2&&(r[q+0]+=1),J<.2&&(r[q+2]+=1),Z<.2&&(r[q+4]+=1))}return e.setAttribute(\"position\",new $(t,3)),e.setAttribute(\"normal\",new $(t.slice(),3)),e.setAttribute(\"uv\",new $(r,2)),0===d?e.computeVertexNormals():e.normalizeNormals(),e}function Lc(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:8,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,a=4<arguments.length&&void 0!==arguments[4]&&arguments[4],s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,o=6<arguments.length&&void 0!==arguments[6]?arguments[6]:2*Math.PI;return(0,oy.default)(this,Lc),(e=uc.call(this,0,t,i,n,r,a,s,o)).type=\"ConeGeometry\",e.parameters={radius:t,height:i,radialSegments:n,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:o},e}function Cc(){var e,m=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,v=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,g=3<arguments.length&&void 0!==arguments[3]?arguments[3]:8,t=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,s=5<arguments.length&&void 0!==arguments[5]&&arguments[5],_=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,x=7<arguments.length&&void 0!==arguments[7]?arguments[7]:2*Math.PI,b=((0,oy.default)(this,Cc),(e=cc.call(this)).type=\"CylinderGeometry\",e.parameters={radiusTop:m,radiusBottom:v,height:a,radialSegments:g,heightSegments:t,openEnded:s,thetaStart:_,thetaLength:x},(0,dy.default)(e)),g=Math.floor(g),t=Math.floor(t),y=[],M=[],w=[],S=[],E=0,o=[],T=a/2,A=0;function l(e){for(var u=E,t=new qe,i=new Ye,n=0,r=!0===e?m:v,a=!0===e?1:-1,c=1;c<=g;c++)M.push(0,T*a,0),w.push(0,a,0),S.push(.5,.5),E++;for(var d=E,s=0;s<=g;s++){var o=s/g*x+_,p=Math.cos(o),o=Math.sin(o);i.x=r*o,i.y=T*a,i.z=r*p,M.push(i.x,i.y,i.z),w.push(0,a,0),t.x=.5*p+.5,t.y=.5*o*a+.5,S.push(t.x,t.y),E++}for(var l=0;l<g;l++){var f=u+l,h=d+l;!0===e?y.push(h,h+1,f):y.push(h+1,h,f),n+=3}b.addGroup(A,n,!0===e?1:2),A+=n}for(var h=new Ye,i=new Ye,u=0,c=(v-m)/a,d=0;d<=t;d++){for(var p=[],f=d/t,k=f*(v-m)+m,R=0;R<=g;R++){var L=R/g,C=L*x+_,P=Math.sin(C),C=Math.cos(C);i.x=k*P,i.y=-f*a+T,i.z=k*C,M.push(i.x,i.y,i.z),h.set(P,c,C).normalize(),w.push(h.x,h.y,h.z),S.push(L,1-f),p.push(E++)}o.push(p)}for(var n=0;n<g;n++)for(var r=0;r<t;r++){var D=o[r][n],I=o[r+1][n],F=o[r+1][n+1],N=o[r][n+1];y.push(D,I,N),y.push(I,F,N),u+=6}return b.addGroup(A,u,0),A+=u,!1===s&&(0<m&&l(!0),0<v&&l(!1)),e.setIndex(y),e.setAttribute(\"position\",new $(M,3)),e.setAttribute(\"normal\",new $(w,3)),e.setAttribute(\"uv\",new $(S,2)),e}function Pc(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:8,h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,u=3<arguments.length&&void 0!==arguments[3]?arguments[3]:2*Math.PI,c=((0,oy.default)(this,Pc),(e=dc.call(this)).type=\"CircleGeometry\",e.parameters={radius:t,segments:i,thetaStart:h,thetaLength:u},i=Math.max(3,i),[]),n=[],r=[],a=[],s=new Ye,o=new qe;n.push(0,0,0),r.push(0,0,1),a.push(.5,.5);for(var d=0,p=3;d<=i;d++,p+=3){var f=h+d/i*u;s.x=t*Math.cos(f),s.y=t*Math.sin(f),n.push(s.x,s.y,s.z),r.push(0,0,1),o.x=(n[p]/t+1)/2,o.y=(n[p+1]/t+1)/2,a.push(o.x,o.y)}for(var l=1;l<=i;l++)c.push(l,l+1,0);return e.setIndex(c),e.setAttribute(\"position\",new $(n,3)),e.setAttribute(\"normal\",new $(r,3)),e.setAttribute(\"uv\",new $(a,2)),e}Sc.prototype.isEllipseCurve=!0;(0,ay.default)(Fc,Sc),Dc=hy(Fc);var Dc,Ic=(0,ly.default)(Fc);function Fc(e,t,i,n,r,a){return(0,oy.default)(this,Fc),(e=Dc.call(this,e,t,i,i,n,r,a)).type=\"ArcCurve\",e}function Nc(){var r=0,a=0,s=0,o=0;function l(e,t,i,n){s=-3*(r=e)+3*t-2*(a=i)-n,o=2*e-2*t+i+n}return{initCatmullRom:function(e,t,i,n,r){l(t,i,r*(i-e),r*(n-t))},initNonuniformCatmullRom:function(e,t,i,n,r,a,s){e=(t-e)/r-(i-e)/(r+a)+(i-t)/a,r=(i-t)/a-(n-t)/(a+s)+(n-i)/s;l(t,i,e*=a,r*=a)},calc:function(e){var t=e*e;return r+a*e+s*t+o*(t*e)}}}Ic.prototype.isArcCurve=!0;var Oc,Uc=new Ye,Bc=new Nc,zc=new Nc,Hc=new Nc,Gc=((0,ay.default)(Vc,wc),Oc=hy(Vc),(0,ly.default)(Vc,[{key:\"getPoint\",value:function(h){var e,t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ye,n=this.points,r=n.length,a=(r-(this.closed?0:1))*h,s=Math.floor(a),a=a-s,o=(this.closed?s+=0<s?0:(Math.floor(Math.abs(s)/r)+1)*r:0===a&&s===r-1&&(s=r-2,a=1),e=this.closed||0<s?n[(s-1)%r]:(Uc.subVectors(n[0],n[1]).add(n[0]),Uc),n[s%r]),l=n[(s+1)%r],s=this.closed||s+2<r?n[(s+2)%r]:(Uc.subVectors(n[r-1],n[r-2]).add(n[r-1]),Uc);return\"centripetal\"===this.curveType||\"chordal\"===this.curveType?(n=\"chordal\"===this.curveType?.5:.25,r=Math.pow(e.distanceToSquared(o),n),(t=Math.pow(o.distanceToSquared(l),n))<1e-4&&(t=1),r<1e-4&&(r=t),(n=Math.pow(l.distanceToSquared(s),n))<1e-4&&(n=t),Bc.initNonuniformCatmullRom(e.x,o.x,l.x,s.x,r,t,n),zc.initNonuniformCatmullRom(e.y,o.y,l.y,s.y,r,t,n),Hc.initNonuniformCatmullRom(e.z,o.z,l.z,s.z,r,t,n)):\"catmullrom\"===this.curveType&&(Bc.initCatmullRom(e.x,o.x,l.x,s.x,this.tension),zc.initCatmullRom(e.y,o.y,l.y,s.y,this.tension),Hc.initCatmullRom(e.z,o.z,l.z,s.z,this.tension)),i.set(Bc.calc(a),zc.calc(a),Hc.calc(a)),i}},{key:\"copy\",value:function(e){(0,ny.default)((0,sy.default)(Vc.prototype),\"copy\",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:\"toJSON\",value:function(){var e=(0,ny.default)((0,sy.default)(Vc.prototype),\"toJSON\",this).call(this);e.points=[];for(var t=0,i=this.points.length;t<i;t++){var n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:\"fromJSON\",value:function(e){(0,ny.default)((0,sy.default)(Vc.prototype),\"fromJSON\",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var n=e.points[t];this.points.push((new Ye).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}]),Vc);function Vc(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:\"centripetal\",r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:.5;return(0,oy.default)(this,Vc),(e=Oc.call(this)).type=\"CatmullRomCurve3\",e.points=t,e.closed=i,e.curveType=n,e.tension=r,e}function Wc(e,t,i,n,r){var t=.5*(n-t),r=.5*(r-i),a=e*e;return e*a*(2*i-2*n+t+r)+(-3*i+3*n-2*t-r)*a+t*e+i}function jc(e,t,i,n){return(r=1-e)*r*t+2*(1-e)*e*i+e*e*n;var r}function Xc(e,t,i,n,r){return(a=1-e)*a*a*t+3*(a=1-e)*a*e*i+3*(1-e)*e*e*n+e*e*e*r;var a}Gc.prototype.isCatmullRomCurve3=!0;(0,ay.default)(Jc,wc),qc=hy(Jc),(0,ly.default)(Jc,[{key:\"getPoint\",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new qe,i=this.v0,n=this.v1,r=this.v2,a=this.v3;return t.set(Xc(e,i.x,n.x,r.x,a.x),Xc(e,i.y,n.y,r.y,a.y)),t}},{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(Jc.prototype),\"copy\",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:\"toJSON\",value:function(){var e=(0,ny.default)((0,sy.default)(Jc.prototype),\"toJSON\",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:\"fromJSON\",value:function(e){return(0,ny.default)((0,sy.default)(Jc.prototype),\"fromJSON\",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]);var qc,Yc=Jc;function Jc(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new qe,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new qe,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new qe,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:new qe;return(0,oy.default)(this,Jc),(e=qc.call(this)).type=\"CubicBezierCurve\",e.v0=t,e.v1=i,e.v2=n,e.v3=r,e}Yc.prototype.isCubicBezierCurve=!0;(0,ay.default)(Qc,wc),Zc=hy(Qc),(0,ly.default)(Qc,[{key:\"getPoint\",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ye,i=this.v0,n=this.v1,r=this.v2,a=this.v3;return t.set(Xc(e,i.x,n.x,r.x,a.x),Xc(e,i.y,n.y,r.y,a.y),Xc(e,i.z,n.z,r.z,a.z)),t}},{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(Qc.prototype),\"copy\",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:\"toJSON\",value:function(){var e=(0,ny.default)((0,sy.default)(Qc.prototype),\"toJSON\",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:\"fromJSON\",value:function(e){return(0,ny.default)((0,sy.default)(Qc.prototype),\"fromJSON\",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]);var Zc,Kc=Qc;function Qc(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ye,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ye,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new Ye,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:new Ye;return(0,oy.default)(this,Qc),(e=Zc.call(this)).type=\"CubicBezierCurve3\",e.v0=t,e.v1=i,e.v2=n,e.v3=r,e}Kc.prototype.isCubicBezierCurve3=!0;(0,ay.default)(td,wc),$c=hy(td),(0,ly.default)(td,[{key:\"getPoint\",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new qe;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}},{key:\"getPointAt\",value:function(e,t){return this.getPoint(e,t)}},{key:\"getTangent\",value:function(e,t){t=t||new qe;return t.copy(this.v2).sub(this.v1).normalize(),t}},{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(td.prototype),\"copy\",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:\"toJSON\",value:function(){var e=(0,ny.default)((0,sy.default)(td.prototype),\"toJSON\",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:\"fromJSON\",value:function(e){return(0,ny.default)((0,sy.default)(td.prototype),\"fromJSON\",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]);var $c,ed=td;function td(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new qe,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new qe;return(0,oy.default)(this,td),(e=$c.call(this)).type=\"LineCurve\",e.v1=t,e.v2=i,e}ed.prototype.isLineCurve=!0;(0,ay.default)(od,wc),nd=hy(od),(0,ly.default)(od,[{key:\"getPoint\",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ye;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}},{key:\"getPointAt\",value:function(e,t){return this.getPoint(e,t)}},{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(od.prototype),\"copy\",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:\"toJSON\",value:function(){var e=(0,ny.default)((0,sy.default)(od.prototype),\"toJSON\",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:\"fromJSON\",value:function(e){return(0,ny.default)((0,sy.default)(od.prototype),\"fromJSON\",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]);var id,nd,rd=od,ad=((0,ay.default)(sd,wc),id=hy(sd),(0,ly.default)(sd,[{key:\"getPoint\",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new qe,i=this.v0,n=this.v1,r=this.v2;return t.set(jc(e,i.x,n.x,r.x),jc(e,i.y,n.y,r.y)),t}},{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(sd.prototype),\"copy\",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:\"toJSON\",value:function(){var e=(0,ny.default)((0,sy.default)(sd.prototype),\"toJSON\",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:\"fromJSON\",value:function(e){return(0,ny.default)((0,sy.default)(sd.prototype),\"fromJSON\",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),sd);function sd(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new qe,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new qe,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new qe;return(0,oy.default)(this,sd),(e=id.call(this)).type=\"QuadraticBezierCurve\",e.v0=t,e.v1=i,e.v2=n,e}function od(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ye,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ye;return(0,oy.default)(this,od),(e=nd.call(this)).type=\"LineCurve3\",e.isLineCurve3=!0,e.v1=t,e.v2=i,e}ad.prototype.isQuadraticBezierCurve=!0;(0,ay.default)(ud,wc),ld=hy(ud),(0,ly.default)(ud,[{key:\"getPoint\",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ye,i=this.v0,n=this.v1,r=this.v2;return t.set(jc(e,i.x,n.x,r.x),jc(e,i.y,n.y,r.y),jc(e,i.z,n.z,r.z)),t}},{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(ud.prototype),\"copy\",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:\"toJSON\",value:function(){var e=(0,ny.default)((0,sy.default)(ud.prototype),\"toJSON\",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:\"fromJSON\",value:function(e){return(0,ny.default)((0,sy.default)(ud.prototype),\"fromJSON\",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]);var ld,hd=ud;function ud(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ye,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ye,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new Ye;return(0,oy.default)(this,ud),(e=ld.call(this)).type=\"QuadraticBezierCurve3\",e.v0=t,e.v1=i,e.v2=n,e}hd.prototype.isQuadraticBezierCurve3=!0;(0,ay.default)(pd,wc),cd=hy(pd),(0,ly.default)(pd,[{key:\"getPoint\",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new qe,i=this.points,n=(i.length-1)*e,r=Math.floor(n),n=n-r,a=i[0===r?r:r-1],s=i[r],o=i[r>i.length-2?i.length-1:r+1],i=i[r>i.length-3?i.length-1:r+2];return t.set(Wc(n,a.x,s.x,o.x,i.x),Wc(n,a.y,s.y,o.y,i.y)),t}},{key:\"copy\",value:function(e){(0,ny.default)((0,sy.default)(pd.prototype),\"copy\",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var n=e.points[t];this.points.push(n.clone())}return this}},{key:\"toJSON\",value:function(){var e=(0,ny.default)((0,sy.default)(pd.prototype),\"toJSON\",this).call(this);e.points=[];for(var t=0,i=this.points.length;t<i;t++){var n=this.points[t];e.points.push(n.toArray())}return e}},{key:\"fromJSON\",value:function(e){(0,ny.default)((0,sy.default)(pd.prototype),\"fromJSON\",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var n=e.points[t];this.points.push((new qe).fromArray(n))}return this}}]);var cd,dd=pd;function pd(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return(0,oy.default)(this,pd),(e=cd.call(this)).type=\"SplineCurve\",e.points=t,e}dd.prototype.isSplineCurve=!0;function fd(e,t){var i,n,r,a,s,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2,u=t&&t.length,c=u?t[0]*o:e.length,l=Ed(e,0,c,o,!0),d=[];if(!l||l.next===l.prev)return d;if(u&&(l=function(e,t,i,n){for(var r,a,s,o=[],l=0,h=t.length;l<h;l++)(r=Ed(e,t[l]*n,l<h-1?t[l+1]*n:e.length,n,!1))===r.next&&(r.steiner=!0),o.push(function(e){var t=e,i=e;for(;(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next,t!==e;);return i}(r));for(o.sort(kd),l=0;l<o.length;l++)a=o[l],(s=function(e,u){var t,i=u,n=e.x,r=e.y,a=-1/0;do{if(r<=i.y&&r>=i.next.y&&i.next.y!==i.y){var s=i.x+(r-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=n&&a<s){if((a=s)===n){if(r===i.y)return i;if(r===i.next.y)return i.next}t=i.x<i.next.x?i:i.next}}}while((i=i.next)!==u);if(!t)return null;if(n===a)return t;for(var o,l,h,c=t,d=t.x,p=t.y,f=1/0,i=t;n>=i.x&&i.x>=d&&n!==i.x&&Ld(r<p?n:a,r,d,p,r<p?a:n,r,i.x,i.y)&&(o=Math.abs(r-i.y)/(n-i.x),Nd(i,e)&&(o<f||o===f&&(i.x>t.x||i.x===t.x&&(h=i,Cd((l=t).prev,l,h.prev)<0&&Cd(h.next,l,l.next)<0)))&&(t=i,f=o)),(i=i.next)!==c;);return t}(a,s=i))&&(a=Od(s,a),Td(s,s.next),Td(a,a.next)),i=Td(i,i.next);return i}(e,t,l,o)),e.length>80*o){for(var h=i=e[0],p=n=e[1],f=o;f<c;f+=o)(r=e[f])<h&&(h=r),(a=e[f+1])<p&&(p=a),i<r&&(i=r),n<a&&(n=a);s=0!==(s=Math.max(i-h,n-p))?1/s:0}return Ad(l,d,o,h,p,s),d}var md,vd,gd,yd=Object.freeze({__proto__:null,ArcCurve:Ic,CatmullRomCurve3:Gc,CubicBezierCurve:Yc,CubicBezierCurve3:Kc,EllipseCurve:Sc,LineCurve:ed,LineCurve3:rd,QuadraticBezierCurve:ad,QuadraticBezierCurve3:hd,SplineCurve:dd}),_d=((0,ay.default)(Sd,wc),gd=hy(Sd),(0,ly.default)(Sd,[{key:\"add\",value:function(e){this.curves.push(e)}},{key:\"closePath\",value:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new ed(t,e))}},{key:\"getPoint\",value:function(e,t){for(var i,n,r,a=e*this.getLength(),s=this.getCurveLengths(),o=0;o<s.length;){if(s[o]>=a)return i=s[o]-a,r=(n=this.curves[o]).getLength(),n.getPointAt(0===r?0:1-i/r,t);o++}return null}},{key:\"getLength\",value:function(){var e=this.getCurveLengths();return e[e.length-1]}},{key:\"updateArcLengths\",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:\"getCurveLengths\",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,i=0,n=this.curves.length;i<n;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e}},{key:\"getSpacedPoints\",value:function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:40,t=[],i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}},{key:\"getPoints\",value:function(){for(var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:12,i=[],n=0,r=this.curves;n<r.length;n++)for(var a=r[n],h=a&&a.isEllipseCurve?2*t:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?t*a.points.length:t,s=a.getPoints(h),o=0;o<s.length;o++){var l=s[o];e&&e.equals(l)||(i.push(l),e=l)}return this.autoClose&&1<i.length&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i}},{key:\"copy\",value:function(e){(0,ny.default)((0,sy.default)(Sd.prototype),\"copy\",this).call(this,e),this.curves=[];for(var t=0,i=e.curves.length;t<i;t++){var n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}},{key:\"toJSON\",value:function(){var e=(0,ny.default)((0,sy.default)(Sd.prototype),\"toJSON\",this).call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,i=this.curves.length;t<i;t++){var n=this.curves[t];e.curves.push(n.toJSON())}return e}},{key:\"fromJSON\",value:function(e){(0,ny.default)((0,sy.default)(Sd.prototype),\"fromJSON\",this).call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,i=e.curves.length;t<i;t++){var n=e.curves[t];this.curves.push((new yd[n.type]).fromJSON(n))}return this}}]),Sd),xd=((0,ay.default)(wd,_d),vd=hy(wd),(0,ly.default)(wd,[{key:\"setFromPoints\",value:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}},{key:\"moveTo\",value:function(e,t){return this.currentPoint.set(e,t),this}},{key:\"lineTo\",value:function(e,t){var i=new ed(this.currentPoint.clone(),new qe(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}},{key:\"quadraticCurveTo\",value:function(e,t,i,n){e=new ad(this.currentPoint.clone(),new qe(e,t),new qe(i,n));return this.curves.push(e),this.currentPoint.set(i,n),this}},{key:\"bezierCurveTo\",value:function(e,t,i,n,r,a){e=new Yc(this.currentPoint.clone(),new qe(e,t),new qe(i,n),new qe(r,a));return this.curves.push(e),this.currentPoint.set(r,a),this}},{key:\"splineThru\",value:function(e){var t=[this.currentPoint.clone()].concat(e),t=new dd(t);return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this}},{key:\"arc\",value:function(e,t,i,n,r,a){var s=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+s,t+o,i,n,r,a),this}},{key:\"absarc\",value:function(e,t,i,n,r,a){return this.absellipse(e,t,i,i,n,r,a),this}},{key:\"ellipse\",value:function(e,t,i,n,r,a,s,o){var l=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+l,t+h,i,n,r,a,s,o),this}},{key:\"absellipse\",value:function(e,t,i,n,r,a,s,o){e=new Sc(e,t,i,n,r,a,s,o),0<this.curves.length&&((t=e.getPoint(0)).equals(this.currentPoint)||this.lineTo(t.x,t.y)),this.curves.push(e),i=e.getPoint(1);return this.currentPoint.copy(i),this}},{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(wd.prototype),\"copy\",this).call(this,e),this.currentPoint.copy(e.currentPoint),this}},{key:\"toJSON\",value:function(){var e=(0,ny.default)((0,sy.default)(wd.prototype),\"toJSON\",this).call(this);return e.currentPoint=this.currentPoint.toArray(),e}},{key:\"fromJSON\",value:function(e){return(0,ny.default)((0,sy.default)(wd.prototype),\"fromJSON\",this).call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}]),wd),bd=(ep=xd,(0,ay.default)(Md,ep),md=hy(Md),(0,ly.default)(Md,[{key:\"getPointsHoles\",value:function(e){for(var t=[],i=0,n=this.holes.length;i<n;i++)t[i]=this.holes[i].getPoints(e);return t}},{key:\"extractPoints\",value:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}},{key:\"copy\",value:function(e){(0,ny.default)((0,sy.default)(Md.prototype),\"copy\",this).call(this,e),this.holes=[];for(var t=0,i=e.holes.length;t<i;t++){var n=e.holes[t];this.holes.push(n.clone())}return this}},{key:\"toJSON\",value:function(){var e=(0,ny.default)((0,sy.default)(Md.prototype),\"toJSON\",this).call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,i=this.holes.length;t<i;t++){var n=this.holes[t];e.holes.push(n.toJSON())}return e}},{key:\"fromJSON\",value:function(e){(0,ny.default)((0,sy.default)(Md.prototype),\"fromJSON\",this).call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,i=e.holes.length;t<i;t++){var n=e.holes[t];this.holes.push((new xd).fromJSON(n))}return this}}]),Md);function Md(e){return(0,oy.default)(this,Md),(e=md.call(this,e)).uuid=Gt(),e.type=\"Shape\",e.holes=[],e}function wd(e){var t;return(0,oy.default)(this,wd),(t=vd.call(this)).type=\"Path\",t.currentPoint=new qe,e&&t.setFromPoints(e),t}function Sd(){var e;return(0,oy.default)(this,Sd),(e=gd.call(this)).type=\"CurvePath\",e.curves=[],e.autoClose=!1,e}function Ed(e,s,t,i,n){var r,a;if(n===0<function(e,t,i){for(var n=0,r=s,a=t-i;r<t;r+=i)n+=(e[a]-e[r])*(e[r+1]+e[a+1]),a=r;return n}(e,t,i))for(r=s;r<t;r+=i)a=Ud(r,e[r],e[r+1],a);else for(r=t-i;s<=r;r-=i)a=Ud(r,e[r],e[r+1],a);return a&&Pd(a,a.next)&&(Bd(a),a=a.next),a}function Td(e,t){if(!e)return e;t=t||e;var i,n=e;do{if(i=!1,n.steiner||!Pd(n,n.next)&&0!==Cd(n.prev,n,n.next))n=n.next;else{if(Bd(n),(n=t=n.prev)===n.next)break;i=!0}}while(i||n!==t);return t}function Ad(e,t,i,n,u,r,c){if(e){if(!c&&r){var d=e;var p=n;var f=u;var m=r;for(var a=d;null===a.z&&(a.z=Rd(a.x,a.y,p,f,m)),a.prevZ=a.prev,a.nextZ=a.next,(a=a.next)!==d;);a.prevZ.nextZ=null,a.prevZ=null;var v,s,o,l,h,g,y,_,x=a,b=1;do{for(s=x,h=x=null,g=0;s;){for(g++,o=s,v=y=0;v<b&&(y++,o=o.nextZ);v++);for(_=b;0<y||0<_&&o;)0!==y&&(0===_||!o||s.z<=o.z)?(s=(l=s).nextZ,y--):(o=(l=o).nextZ,_--),h?h.nextZ=l:x=l,l.prevZ=h,h=l;s=o}}while(h.nextZ=null,b*=2,1<g)}for(var M,w,S=e;e.prev!==e.next;)if(M=e.prev,w=e.next,r?function(e,t,i,n){var r=e.prev,a=e,s=e.next;if(0<=Cd(r,a,s))return!1;for(var u=(r.x<a.x?r.x<s.x?r:s:a.x<s.x?a:s).x,c=(r.y<a.y?r.y<s.y?r:s:a.y<s.y?a:s).y,d=(r.x>a.x?r.x>s.x?r:s:a.x>s.x?a:s).x,p=(r.y>a.y?r.y>s.y?r:s:a.y>s.y?a:s).y,o=Rd(u,c,t,i,n),f=Rd(d,p,t,i,n),l=e.prevZ,h=e.nextZ;l&&l.z>=o&&h&&h.z<=f;){if(l!==e.prev&&l!==e.next&&Ld(r.x,r.y,a.x,a.y,s.x,s.y,l.x,l.y)&&0<=Cd(l.prev,l,l.next))return!1;if(l=l.prevZ,h!==e.prev&&h!==e.next&&Ld(r.x,r.y,a.x,a.y,s.x,s.y,h.x,h.y)&&0<=Cd(h.prev,h,h.next))return!1;h=h.nextZ}for(;l&&l.z>=o;){if(l!==e.prev&&l!==e.next&&Ld(r.x,r.y,a.x,a.y,s.x,s.y,l.x,l.y)&&0<=Cd(l.prev,l,l.next))return!1;l=l.prevZ}for(;h&&h.z<=f;){if(h!==e.prev&&h!==e.next&&Ld(r.x,r.y,a.x,a.y,s.x,s.y,h.x,h.y)&&0<=Cd(h.prev,h,h.next))return!1;h=h.nextZ}return!0}(e,n,u,r):function(e){var t=e.prev,i=e,n=e.next;if(0<=Cd(t,i,n))return!1;for(var r=e.next.next;r!==e.prev;){if(Ld(t.x,t.y,i.x,i.y,n.x,n.y,r.x,r.y)&&0<=Cd(r.prev,r,r.next))return!1;r=r.next}return!0}(e))t.push(M.i/i),t.push(e.i/i),t.push(w.i/i),Bd(e),e=w.next,S=w.next;else if((e=w)===S){c?1===c?Ad(e=function(e,t,i){var n=e;do{var r=n.prev,a=n.next.next}while(!Pd(r,a)&&Dd(r,n,n.next,a)&&Nd(r,a)&&Nd(a,r)&&(t.push(r.i/i),t.push(n.i/i),t.push(a.i/i),Bd(n),Bd(n.next),n=e=a),n=n.next,n!==e);return Td(n)}(Td(e),t,i),t,i,n,u,r,2):2===c&&function(e,t,i,n,r,a){var s=e;do{for(var o,l=s.next.next;l!==s.prev;){if(s.i!==l.i&&function(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&Dd(i,i.next,e,t))return 1}while((i=i.next)!==e)}(e,t)&&(Nd(e,t)&&Nd(t,e)&&function(e,t){for(var i=e,n=!1,r=(e.x+t.x)/2,a=(e.y+t.y)/2;i.y>a!=i.next.y>a&&i.next.y!==i.y&&r<(i.next.x-i.x)*(a-i.y)/(i.next.y-i.y)+i.x&&(n=!n),(i=i.next)!==e;);return n}(e,t)&&(Cd(e.prev,e,t.prev)||Cd(e,t.prev,t))||Pd(e,t)&&0<Cd(e.prev,e,e.next)&&0<Cd(t.prev,t,t.next))}(s,l))return o=Od(s,l),s=Td(s,s.next),o=Td(o,o.next),Ad(s,t,i,n,r,a),Ad(o,t,i,n,r,a);l=l.next}}while(s=s.next,s!==e)}(e,t,i,n,u,r):Ad(Td(e),t,i,n,u,r,1);break}}}function kd(e,t){return e.x-t.x}function Rd(e,t,i,n,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Ld(e,t,i,n,r,a,s,o){return 0<=(r-s)*(t-o)-(e-s)*(a-o)&&0<=(e-s)*(n-o)-(i-s)*(t-o)&&0<=(i-s)*(a-o)-(r-s)*(n-o)}function Cd(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function Pd(e,t){return e.x===t.x&&e.y===t.y}function Dd(e,t,i,n){var r=Fd(Cd(e,t,i)),a=Fd(Cd(e,t,n)),s=Fd(Cd(i,n,e)),o=Fd(Cd(i,n,t));return r!==a&&s!==o||0===r&&Id(e,i,t)||0===a&&Id(e,n,t)||0===s&&Id(i,e,n)||0===o&&Id(i,t,n)}function Id(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function Fd(e){return 0<e?1:e<0?-1:0}function Nd(e,t){return Cd(e.prev,e,e.next)<0?0<=Cd(e,t,e.next)&&0<=Cd(e,e.prev,t):Cd(e,t,e.prev)<0||Cd(e,e.next,t)<0}function Od(e,t){var i=new zd(e.i,e.x,e.y),n=new zd(t.i,t.x,t.y),r=e.next,a=t.prev;return(e.next=t).prev=e,(i.next=r).prev=i,(n.next=i).prev=n,(a.next=n).prev=a,n}function Ud(e,t,i,n){e=new zd(e,t,i);return n?(e.next=n.next,(e.prev=n).next.prev=e,n.next=e):(e.prev=e).next=e,e}function Bd(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function zd(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}(0,ly.default)(Gd,null,[{key:\"area\",value:function(e){for(var t=e.length,i=0,n=t-1,r=0;r<t;n=r++)i+=e[n].x*e[r].y-e[r].x*e[n].y;return.5*i}},{key:\"isClockWise\",value:function(e){return Gd.area(e)<0}},{key:\"triangulateShape\",value:function(e,t){var i=[],n=[],r=[],a=(Vd(e),Wd(i,e),e.length);t.forEach(Vd);for(var s=0;s<t.length;s++)n.push(a),a+=t[s].length,Wd(i,t[s]);for(var o=fd(i,n),l=0;l<o.length;l+=3)r.push(o.slice(l,l+3));return r}}]);var Hd=Gd;function Gd(){(0,oy.default)(this,Gd)}function Vd(e){var t=e.length;2<t&&e[t-1].equals(e[0])&&e.pop()}function Wd(e,t){for(var i=0;i<t.length;i++)e.push(t[i].x),e.push(t[i].y)}(0,ay.default)(Yd,R),jd=hy(Yd),(0,ly.default)(Yd,[{key:\"toJSON\",value:function(){var e=(0,ny.default)((0,sy.default)(Yd.prototype),\"toJSON\",this).call(this),t=this.parameters.shapes,i=this.parameters.options,n=e;if(n.shapes=[],Array.isArray(t))for(var r=0,a=t.length;r<a;r++){var s=t[r];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return void 0!==i.extrudePath&&(n.options.extrudePath=i.extrudePath.toJSON()),n}}],[{key:\"fromJSON\",value:function(e,t){for(var i=[],n=0,r=e.shapes.length;n<r;n++){var a=t[e.shapes[n]];i.push(a)}var s=e.options.extrudePath;return void 0!==s&&(e.options.extrudePath=(new yd[s.type]).fromJSON(s)),new Yd(i,e.options)}}]);var jd,Xd=Yd,qd={generateTopUV:function(e,t,i,n,r){var a=t[3*i],i=t[3*i+1],s=t[3*n],n=t[3*n+1],o=t[3*r],t=t[3*r+1];return[new qe(a,i),new qe(s,n),new qe(o,t)]},generateSideWallUV:function(u,e,t,i,n,r){var a=e[3*t],s=e[3*t+1],t=e[3*t+2],o=e[3*i],l=e[3*i+1],i=e[3*i+2],h=e[3*n],c=e[3*n+1],n=e[3*n+2],d=e[3*r],p=e[3*r+1],e=e[3*r+2];return Math.abs(s-l)<Math.abs(a-o)?[new qe(a,1-t),new qe(o,1-i),new qe(h,1-n),new qe(d,1-e)]:[new qe(s,1-t),new qe(l,1-i),new qe(c,1-n),new qe(p,1-e)]}};function Yd(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new bd([new qe(.5,.5),new qe(-.5,.5),new qe(-.5,-.5),new qe(.5,-.5)]),Ve=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};(0,oy.default)(this,Yd),(e=jd.call(this)).type=\"ExtrudeGeometry\",e.parameters={shapes:t,options:Ve};for(var t=Array.isArray(t)?t:[t],We=(0,dy.default)(e),je=[],Xe=[],i=0,n=t.length;i<n;i++)!function(s){var o=[],l=void 0!==Ve.curveSegments?Ve.curveSegments:12,p=void 0!==Ve.steps?Ve.steps:1,h=void 0!==Ve.depth?Ve.depth:1,u=void 0===Ve.bevelEnabled||Ve.bevelEnabled,c=void 0!==Ve.bevelThickness?Ve.bevelThickness:.2,d=void 0!==Ve.bevelSize?Ve.bevelSize:c-.1,g=void 0!==Ve.bevelOffset?Ve.bevelOffset:0,y=void 0!==Ve.bevelSegments?Ve.bevelSegments:3,_=Ve.extrudePath,x=void 0!==Ve.UVGenerator?Ve.UVGenerator:qd;void 0!==Ve.amount&&(console.warn(\"THREE.ExtrudeBufferGeometry: amount has been renamed to depth.\"),h=Ve.amount);var b,M,w,S,e,E=!1,_=(_&&(b=_.getSpacedPoints(p),u=!(E=!0),M=_.computeFrenetFrames(p,!1),w=new Ye,S=new Ye,e=new Ye),u||(g=d=c=y=0),s.extractPoints(l)),t=_.shape,i=_.holes;if(!Hd.isClockWise(t)){t=t.reverse();for(var T=0,A=i.length;T<A;T++){var k=i[T];Hd.isClockWise(k)&&(i[T]=k.reverse())}}for(var R=Hd.triangulateShape(t,i),n=t,L=0,C=i.length;L<C;L++){var P=i[L];t=t.concat(P)}function D(e,t,i){return t||console.error(\"THREE.ExtrudeGeometry: vec does not exist\"),t.clone().multiplyScalar(i).add(e)}var f=t.length,I=R.length;function F(e,t,i){var n=e.x-t.x,r=e.y-t.y,a=i.x-e.x,s=i.y-e.y,u=n*n+r*r;if(Math.abs(n*s-r*a)>Number.EPSILON){var o=Math.sqrt(u),l=Math.sqrt(a*a+s*s),h=t.x-r/o,t=t.y+n/o,o=((i.x-s/l-h)*s-(i.y+a/l-t)*a)/(n*s-r*a),i=(l=h+n*o-e.x)*l+(h=t+r*o-e.y)*h;if(i<=2)return new qe(l,h);o=Math.sqrt(i/2)}else{t=!1;n>Number.EPSILON?a>Number.EPSILON&&(t=!0):n<-Number.EPSILON?a<-Number.EPSILON&&(t=!0):Math.sign(r)===Math.sign(s)&&(t=!0),o=t?(l=-r,h=n,Math.sqrt(u)):(l=n,h=r,Math.sqrt(u/2))}return new qe(l/o,h/o)}for(var N=[],O=0,U=n.length,B=U-1,z=O+1;O<U;O++,B++,z++)B===U&&(B=0),z===U&&(z=0),N[O]=F(n[O],n[B],n[z]);for(var r,H=[],G=N.concat(),V=0,W=i.length;V<W;V++){var j=i[V];r=[];for(var X=0,q=j.length,Y=q-1,J=X+1;X<q;X++,Y++,J++)Y===q&&(Y=0),J===q&&(J=0),r[X]=F(j[X],j[Y],j[J]);H.push(r),G=G.concat(r)}for(var Z=0;Z<y;Z++){for(var K=Z/y,Q=c*Math.cos(K*Math.PI/2),$=d*Math.sin(K*Math.PI/2)+g,ee=0,te=n.length;ee<te;ee++){var ie=D(n[ee],N[ee],$);a(ie.x,ie.y,-Q)}for(var ne=0,re=i.length;ne<re;ne++){var ae=i[ne];r=H[ne];for(var se=0,oe=ae.length;se<oe;se++){var le=D(ae[se],r[se],$);a(le.x,le.y,-Q)}}}for(var he=d+g,ue=0;ue<f;ue++){var ce=u?D(t[ue],G[ue],he):t[ue];E?(S.copy(M.normals[0]).multiplyScalar(ce.x),w.copy(M.binormals[0]).multiplyScalar(ce.y),e.copy(b[0]).add(S).add(w),a(e.x,e.y,e.z)):a(ce.x,ce.y,0)}for(var de=1;de<=p;de++)for(var pe=0;pe<f;pe++){var fe=u?D(t[pe],G[pe],he):t[pe];E?(S.copy(M.normals[de]).multiplyScalar(fe.x),w.copy(M.binormals[de]).multiplyScalar(fe.y),e.copy(b[de]).add(S).add(w),a(e.x,e.y,e.z)):a(fe.x,fe.y,h/p*de)}for(var me=y-1;0<=me;me--){for(var ve=me/y,ge=c*Math.cos(ve*Math.PI/2),ye=d*Math.sin(ve*Math.PI/2)+g,_e=0,xe=n.length;_e<xe;_e++){var be=D(n[_e],N[_e],ye);a(be.x,be.y,h+ge)}for(var Me=0,we=i.length;Me<we;Me++){var Se=i[Me];r=H[Me];for(var Ee=0,Te=Se.length;Ee<Te;Ee++){var Ae=D(Se[Ee],r[Ee],ye);E?a(Ae.x,Ae.y+b[p-1].y,b[p-1].x+ge):a(Ae.x,Ae.y,h+ge)}}}function ke(e,t){for(var i=e.length;0<=--i;){var n=i,r=i-1;r<0&&(r=e.length-1);for(var a=0,u=p+2*y;a<u;a++){var s=f*a,c=f*(a+1),o=(l=o=h=d=l=o=void 0,t+n+s),l=t+r+s,d=t+r+c,h=t+n+c;m(o),m(l),m(h),m(l),m(d),m(h),o=je.length/3,v((l=x.generateSideWallUV(We,je,o-6,o-3,o-2,o-1))[0]),v(l[1]),v(l[3]),v(l[1]),v(l[2]),v(l[3])}}}function a(e,t,i){o.push(e),o.push(t),o.push(i)}function Re(e,t,i){m(e),m(t),m(i);e=je.length/3,t=x.generateTopUV(We,je,e-3,e-2,e-1);v(t[0]),v(t[1]),v(t[2])}function m(e){je.push(o[3*e+0]),je.push(o[3*e+1]),je.push(o[3*e+2])}function v(e){Xe.push(e.x),Xe.push(e.y)}s=je.length/3;if(u){for(var Le=0*f,Ce=0;Ce<I;Ce++){var Pe=R[Ce];Re(Pe[2]+Le,Pe[1]+Le,Pe[0]+Le)}Le=f*(p+2*y);for(var De=0;De<I;De++){var Ie=R[De];Re(Ie[0]+Le,Ie[1]+Le,Ie[2]+Le)}}else{for(var Fe=0;Fe<I;Fe++){var Ne=R[Fe];Re(Ne[2],Ne[1],Ne[0])}for(var Oe=0;Oe<I;Oe++){var Ue=R[Oe];Re(Ue[0]+f*p,Ue[1]+f*p,Ue[2]+f*p)}}We.addGroup(s,je.length/3-s,0);var l=je.length/3,Be=0;ke(n,Be),Be+=n.length;for(var ze=0,He=i.length;ze<He;ze++){var Ge=i[ze];ke(Ge,Be),Be+=Ge.length}We.addGroup(l,je.length/3-l,1)}(t[i]);return e.setAttribute(\"position\",new $(je,3)),e.setAttribute(\"uv\",new $(Xe,2)),e.computeVertexNormals(),e}(0,ay.default)(hp,vc),$d=hy(hp),(0,ly.default)(hp,null,[{key:\"fromJSON\",value:function(e){return new hp(e.radius,e.detail)}}]);var Jd,Zd,Kd,Qd,$d,ep=hp,tp=((0,ay.default)(lp,R),Qd=hy(lp),(0,ly.default)(lp,null,[{key:\"fromJSON\",value:function(e){return new lp(e.points,e.segments,e.phiStart,e.phiLength)}}]),lp),ip=((0,ay.default)(op,vc),Kd=hy(op),(0,ly.default)(op,null,[{key:\"fromJSON\",value:function(e){return new op(e.radius,e.detail)}}]),op),np=((0,ay.default)(sp,R),Zd=hy(sp),(0,ly.default)(sp,null,[{key:\"fromJSON\",value:function(e){return new sp(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}]),sp),rp=((0,ay.default)(ap,R),Jd=hy(ap),(0,ly.default)(ap,[{key:\"toJSON\",value:function(){var e=(0,ny.default)((0,sy.default)(ap.prototype),\"toJSON\",this).call(this),t=this.parameters.shapes,i=e;if(i.shapes=[],Array.isArray(t))for(var n=0,r=t.length;n<r;n++){var a=t[n];i.shapes.push(a.uuid)}else i.shapes.push(t.uuid);return i}}],[{key:\"fromJSON\",value:function(e,t){for(var i=[],n=0,r=e.shapes.length;n<r;n++){var a=t[e.shapes[n]];i.push(a)}return new ap(i,e.curveSegments)}}]),ap);function ap(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new bd([new qe(0,.5),new qe(-.5,-.5),new qe(.5,-.5)]),_=1<arguments.length&&void 0!==arguments[1]?arguments[1]:12,x=((0,oy.default)(this,ap),(e=Jd.call(this)).type=\"ShapeGeometry\",e.parameters={shapes:t,curveSegments:_},[]),b=[],M=[],w=[],n=0,S=0;if(!1===Array.isArray(t))r(t);else for(var i=0;i<t.length;i++)r(t[i]),e.addGroup(n,S,i),n+=S,S=0;function r(e){var t=b.length/3,e=e.extractPoints(_),i=e.shape,n=e.holes;!1===Hd.isClockWise(i)&&(i=i.reverse());for(var r=0,u=n.length;r<u;r++){var c=n[r];!0===Hd.isClockWise(c)&&(n[r]=c.reverse())}for(var d=Hd.triangulateShape(i,n),a=0,p=n.length;a<p;a++)var f=n[a],i=i.concat(f);for(var s=0,m=i.length;s<m;s++){var o=i[s];b.push(o.x,o.y,0),M.push(0,0,1),w.push(o.x,o.y)}for(var l=0,v=d.length;l<v;l++){var h=d[l],g=h[0]+t,y=h[1]+t,h=h[2]+t;x.push(g,y,h),S+=3}}return e.setIndex(x),e.setAttribute(\"position\",new $(b,3)),e.setAttribute(\"normal\",new $(M,3)),e.setAttribute(\"uv\",new $(w,2)),e}function sp(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:.5,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:8,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,h=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,u=5<arguments.length&&void 0!==arguments[5]?arguments[5]:2*Math.PI;(0,oy.default)(this,sp),(e=Zd.call(this)).type=\"RingGeometry\",e.parameters={innerRadius:t,outerRadius:i,thetaSegments:n,phiSegments:r,thetaStart:h,thetaLength:u};for(var n=Math.max(3,n),a=[],c=[],d=[],p=[],f=t,m=(i-t)/(r=Math.max(1,r)),s=new Ye,o=new qe,v=0;v<=r;v++){for(var g=0;g<=n;g++){var y=h+g/n*u;s.x=f*Math.cos(y),s.y=f*Math.sin(y),c.push(s.x,s.y,s.z),d.push(0,0,1),o.x=(s.x/i+1)/2,o.y=(s.y/i+1)/2,p.push(o.x,o.y)}f+=m}for(var _=0;_<r;_++)for(var x=_*(n+1),b=0;b<n;b++){var l=b+x,M=l+n+1,w=l+n+2,S=l+1;a.push(l,M,S),a.push(M,w,S)}return e.setIndex(a),e.setAttribute(\"position\",new $(c,3)),e.setAttribute(\"normal\",new $(d,3)),e.setAttribute(\"uv\",new $(p,2)),e}function op(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return(0,oy.default)(this,op),(e=Kd.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,i)).type=\"OctahedronGeometry\",e.parameters={radius:t,detail:i},e}function lp(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[new qe(0,.5),new qe(.5,0),new qe(0,-.5)],i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:12,h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,u=3<arguments.length&&void 0!==arguments[3]?arguments[3]:2*Math.PI;(0,oy.default)(this,lp),(e=Qd.call(this)).type=\"LatheGeometry\",e.parameters={points:t,segments:i,phiStart:h,phiLength:u};for(var i=Math.floor(i),u=Vt(u,0,2*Math.PI),c=[],d=[],p=[],n=[],f=[],m=1/i,r=new Ye,v=new qe,a=new Ye,g=new Ye,s=new Ye,y=0,_=0,o=0;o<=t.length-1;o++)switch(o){case 0:y=t[o+1].x-t[o].x,_=t[o+1].y-t[o].y,a.x=+_,a.y=-y,a.z=0*_,s.copy(a),a.normalize(),n.push(a.x,a.y,a.z);break;case t.length-1:n.push(s.x,s.y,s.z);break;default:y=t[o+1].x-t[o].x,_=t[o+1].y-t[o].y,a.x=+_,a.y=-y,a.z=0*_,g.copy(a),a.x+=s.x,a.y+=s.y,a.z+=s.z,a.normalize(),n.push(a.x,a.y,a.z),s.copy(g)}for(var x=0;x<=i;x++)for(var b=h+x*m*u,M=Math.sin(b),w=Math.cos(b),l=0;l<=t.length-1;l++){r.x=t[l].x*M,r.y=t[l].y,r.z=t[l].x*w,d.push(r.x,r.y,r.z),v.x=x/i,v.y=l/(t.length-1),p.push(v.x,v.y);var S=n[3*l+0]*M,E=n[3*l+1],T=n[3*l+0]*w;f.push(S,E,T)}for(var A=0;A<i;A++)for(var k=0;k<t.length-1;k++){var R=k+A*t.length,L=R+t.length,C=R+t.length+1,P=R+1;c.push(R,L,P),c.push(L,C,P)}return e.setIndex(c),e.setAttribute(\"position\",new $(d,3)),e.setAttribute(\"uv\",new $(p,2)),e.setAttribute(\"normal\",new $(f,3)),e}function hp(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=((0,oy.default)(this,hp),(1+Math.sqrt(5))/2);return(i=$d.call(this,[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t)).type=\"IcosahedronGeometry\",i.parameters={radius:e,detail:t},i}(0,ay.default)(Ap,R),mp=hy(Ap),(0,ly.default)(Ap,null,[{key:\"fromJSON\",value:function(e){return new Ap(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}]);var up,cp,dp,pp,fp,mp,vp=Ap,gp=((0,ay.default)(Tp,vc),fp=hy(Tp),(0,ly.default)(Tp,null,[{key:\"fromJSON\",value:function(e){return new Tp(e.radius,e.detail)}}]),Tp),yp=((0,ay.default)(Ep,R),pp=hy(Ep),(0,ly.default)(Ep,null,[{key:\"fromJSON\",value:function(e){return new Ep(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}]),Ep),_p=((0,ay.default)(Sp,R),dp=hy(Sp),(0,ly.default)(Sp,null,[{key:\"fromJSON\",value:function(e){return new Sp(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}]),Sp),xp=((0,ay.default)(wp,R),cp=hy(wp),(0,ly.default)(wp,[{key:\"toJSON\",value:function(){var e=(0,ny.default)((0,sy.default)(wp.prototype),\"toJSON\",this).call(this);return e.path=this.parameters.path.toJSON(),e}}],[{key:\"fromJSON\",value:function(e){return new wp((new yd[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}]),wp),bp=((0,ay.default)(Mp,R),up=hy(Mp),(0,ly.default)(Mp));function Mp(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;if((0,oy.default)(this,Mp),(e=up.call(this)).type=\"WireframeGeometry\",e.parameters={geometry:t},null!==t){var i=[],u=new Set,n=new Ye,r=new Ye;if(null!==t.index)for(var c=t.attributes.position,d=t.index,a=t.groups,p=0,f=(a=0===a.length?[{start:0,count:d.count,materialIndex:0}]:a).length;p<f;++p)for(var m=a[p],v=m.start,s=v,g=v+m.count;s<g;s+=3)for(var o=0;o<3;o++){var y=d.getX(s+o),_=d.getX(s+(o+1)%3);n.fromBufferAttribute(c,y),r.fromBufferAttribute(c,_),!0===kp(n,r,u)&&(i.push(n.x,n.y,n.z),i.push(r.x,r.y,r.z))}else for(var x=t.attributes.position,l=0,b=x.count/3;l<b;l++)for(var h=0;h<3;h++){var M=3*l+(h+1)%3;n.fromBufferAttribute(x,3*l+h),r.fromBufferAttribute(x,M),!0===kp(n,r,u)&&(i.push(n.x,n.y,n.z),i.push(r.x,r.y,r.z))}e.setAttribute(\"position\",new $(i,3))}return e}function wp(){var e,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new hd(new Ye(-1,-1,0),new Ye(-1,1,0),new Ye(1,1,0)),s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:64,p=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:8,n=4<arguments.length&&void 0!==arguments[4]&&arguments[4],l=((0,oy.default)(this,wp),(e=cp.call(this)).type=\"TubeGeometry\",e.parameters={path:d,tubularSegments:s,radius:p,radialSegments:o,closed:n},d.computeFrenetFrames(s,n)),h=(e.tangents=l.tangents,e.normals=l.normals,e.binormals=l.binormals,new Ye),u=new Ye,r=new qe,c=new Ye,f=[],m=[],a=[],v=[];function g(e){c=d.getPointAt(e/s,c);for(var t=l.normals[e],i=l.binormals[e],n=0;n<=o;n++){var r=n/o*Math.PI*2,a=Math.sin(r),r=-Math.cos(r);u.x=r*t.x+a*i.x,u.y=r*t.y+a*i.y,u.z=r*t.z+a*i.z,u.normalize(),m.push(u.x,u.y,u.z),h.x=c.x+p*u.x,h.y=c.y+p*u.y,h.z=c.z+p*u.z,f.push(h.x,h.y,h.z)}}for(var y=0;y<s;y++)g(y);g(!1===n?s:0);for(var _=0;_<=s;_++)for(var x=0;x<=o;x++)r.x=_/s,r.y=x/o,a.push(r.x,r.y);for(var t=1;t<=s;t++)for(var i=1;i<=o;i++){var b=(o+1)*t+(i-1),M=(o+1)*t+i,w=(o+1)*(t-1)+i;v.push((o+1)*(t-1)+(i-1),b,w),v.push(b,M,w)}return e.setIndex(v),e.setAttribute(\"position\",new $(f,3)),e.setAttribute(\"normal\",new $(m,3)),e.setAttribute(\"uv\",new $(a,2)),e}function Sp(){var e,h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:.4,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:64,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:8,c=4<arguments.length&&void 0!==arguments[4]?arguments[4]:2,d=5<arguments.length&&void 0!==arguments[5]?arguments[5]:3;(0,oy.default)(this,Sp),(e=dp.call(this)).type=\"TorusKnotGeometry\",e.parameters={radius:h,tube:u,tubularSegments:t,radialSegments:i,p:c,q:d};for(var t=Math.floor(t),i=Math.floor(i),p=[],f=[],m=[],v=[],n=new Ye,g=new Ye,r=new Ye,y=new Ye,a=new Ye,_=new Ye,s=new Ye,x=0;x<=t;++x){var b=x/t*c*Math.PI*2;k(b,c,d,h,r),k(.01+b,c,d,h,y),_.subVectors(y,r),s.addVectors(y,r),a.crossVectors(_,s),s.crossVectors(a,_),a.normalize(),s.normalize();for(var M=0;M<=i;++M){var w=M/i*Math.PI*2,S=-u*Math.cos(w),w=u*Math.sin(w);n.x=r.x+(S*s.x+w*a.x),n.y=r.y+(S*s.y+w*a.y),n.z=r.z+(S*s.z+w*a.z),f.push(n.x,n.y,n.z),g.subVectors(n,r).normalize(),m.push(g.x,g.y,g.z),v.push(x/t),v.push(M/i)}}for(var o=1;o<=t;o++)for(var l=1;l<=i;l++){var E=(i+1)*o+(l-1),T=(i+1)*o+l,A=(i+1)*(o-1)+l;p.push((i+1)*(o-1)+(l-1),E,A),p.push(E,T,A)}function k(e,t,i,n,r){var a=Math.cos(e),s=Math.sin(e),i=i/t*e,t=Math.cos(i);r.x=n*(2+t)*.5*a,r.y=n*(2+t)*s*.5,r.z=n*Math.sin(i)*.5}return e.setIndex(p),e.setAttribute(\"position\",new $(f,3)),e.setAttribute(\"normal\",new $(m,3)),e.setAttribute(\"uv\",new $(v,2)),e}function Ep(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:.4,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:8,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:6,h=4<arguments.length&&void 0!==arguments[4]?arguments[4]:2*Math.PI;(0,oy.default)(this,Ep),(e=pp.call(this)).type=\"TorusGeometry\",e.parameters={radius:t,tube:i,radialSegments:n,tubularSegments:r,arc:h};for(var n=Math.floor(n),r=Math.floor(r),u=[],c=[],d=[],p=[],f=new Ye,a=new Ye,s=new Ye,m=0;m<=n;m++)for(var v=0;v<=r;v++){var g=v/r*h,y=m/n*Math.PI*2;a.x=(t+i*Math.cos(y))*Math.cos(g),a.y=(t+i*Math.cos(y))*Math.sin(g),a.z=i*Math.sin(y),c.push(a.x,a.y,a.z),f.x=t*Math.cos(g),f.y=t*Math.sin(g),s.subVectors(a,f).normalize(),d.push(s.x,s.y,s.z),p.push(v/r),p.push(m/n)}for(var o=1;o<=n;o++)for(var l=1;l<=r;l++){var _=(r+1)*(o-1)+l-1,x=(r+1)*(o-1)+l,b=(r+1)*o+l;u.push((r+1)*o+l-1,_,b),u.push(_,x,b)}return e.setIndex(u),e.setAttribute(\"position\",new $(c,3)),e.setAttribute(\"normal\",new $(d,3)),e.setAttribute(\"uv\",new $(p,2)),e}function Tp(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return(0,oy.default)(this,Tp),(e=fp.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,i)).type=\"TetrahedronGeometry\",e.parameters={radius:t,detail:i},e}function Ap(){var e,h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:32,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:16,u=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,c=4<arguments.length&&void 0!==arguments[4]?arguments[4]:2*Math.PI,n=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,r=6<arguments.length&&void 0!==arguments[6]?arguments[6]:Math.PI;(0,oy.default)(this,Ap),(e=mp.call(this)).type=\"SphereGeometry\",e.parameters={radius:h,widthSegments:t,heightSegments:i,phiStart:u,phiLength:c,thetaStart:n,thetaLength:r};for(var t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i)),d=Math.min(n+r,Math.PI),p=0,a=[],s=new Ye,f=new Ye,m=[],v=[],g=[],y=[],_=0;_<=i;_++){var x=[],b=_/i,M=0;0==_&&0==n?M=.5/t:_==i&&d==Math.PI&&(M=-.5/t);for(var w=0;w<=t;w++){var S=w/t;s.x=-h*Math.cos(u+S*c)*Math.sin(n+b*r),s.y=h*Math.cos(n+b*r),s.z=h*Math.sin(u+S*c)*Math.sin(n+b*r),v.push(s.x,s.y,s.z),f.copy(s).normalize(),g.push(f.x,f.y,f.z),y.push(S+M,1-b),x.push(p++)}a.push(x)}for(var o=0;o<i;o++)for(var l=0;l<t;l++){var E=a[o][l+1],T=a[o][l],A=a[o+1][l],k=a[o+1][l+1];(0!==o||0<n)&&m.push(E,T,k),(o!==i-1||d<Math.PI)&&m.push(T,A,k)}return e.setIndex(m),e.setAttribute(\"position\",new $(v,3)),e.setAttribute(\"normal\",new $(g,3)),e.setAttribute(\"uv\",new $(y,2)),e}function kp(e,t,i){var n=\"\".concat(e.x,\",\").concat(e.y,\",\").concat(e.z,\"-\").concat(t.x,\",\").concat(t.y,\",\").concat(t.z),t=\"\".concat(t.x,\",\").concat(t.y,\",\").concat(t.z,\"-\").concat(e.x,\",\").concat(e.y,\",\").concat(e.z);return!0!==i.has(n)&&!0!==i.has(t)&&(i.add(n,t),!0)}var Rp,Lp=Object.freeze({__proto__:null,BoxGeometry:va,BoxBufferGeometry:va,CircleGeometry:pc,CircleBufferGeometry:pc,ConeGeometry:mc,ConeBufferGeometry:mc,CylinderGeometry:fc,CylinderBufferGeometry:fc,DodecahedronGeometry:gc,DodecahedronBufferGeometry:gc,EdgesGeometry:Mc,ExtrudeGeometry:Xd,ExtrudeBufferGeometry:Xd,IcosahedronGeometry:ep,IcosahedronBufferGeometry:ep,LatheGeometry:tp,LatheBufferGeometry:tp,OctahedronGeometry:ip,OctahedronBufferGeometry:ip,PlaneGeometry:Ka,PlaneBufferGeometry:Ka,PolyhedronGeometry:vc,PolyhedronBufferGeometry:vc,RingGeometry:np,RingBufferGeometry:np,ShapeGeometry:rp,ShapeBufferGeometry:rp,SphereGeometry:vp,SphereBufferGeometry:vp,TetrahedronGeometry:gp,TetrahedronBufferGeometry:gp,TorusGeometry:yp,TorusBufferGeometry:yp,TorusKnotGeometry:_p,TorusKnotBufferGeometry:_p,TubeGeometry:xp,TubeBufferGeometry:xp,WireframeGeometry:bp}),Cp=((0,ay.default)(Pp,qn),Rp=hy(Pp),(0,ly.default)(Pp,[{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(Pp.prototype),\"copy\",this).call(this,e),this.color.copy(e.color),this}}]),Pp);function Pp(e){var t;return(0,oy.default)(this,Pp),(t=Rp.call(this)).type=\"ShadowMaterial\",t.color=new S(0),t.transparent=!0,t.setValues(e),t}Cp.prototype.isShadowMaterial=!0;(0,ay.default)(Fp,qn),Dp=hy(Fp),(0,ly.default)(Fp,[{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(Fp.prototype),\"copy\",this).call(this,e),this.defines={STANDARD:\"\"},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}]);var Dp,Ip=Fp;function Fp(e){var t;return(0,oy.default)(this,Fp),(t=Dp.call(this)).defines={STANDARD:\"\"},t.type=\"MeshStandardMaterial\",t.color=new S(16777215),t.roughness=1,t.metalness=0,t.map=null,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=null,t.aoMapIntensity=1,t.emissive=new S(0),t.emissiveIntensity=1,t.emissiveMap=null,t.bumpMap=null,t.bumpScale=1,t.normalMap=null,t.normalMapType=Dt,t.normalScale=new qe(1,1),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.roughnessMap=null,t.metalnessMap=null,t.alphaMap=null,t.envMap=null,t.envMapIntensity=1,t.refractionRatio=.98,t.wireframe=!1,t.wireframeLinewidth=1,t.wireframeLinecap=\"round\",t.wireframeLinejoin=\"round\",t.flatShading=!1,t.setValues(e),t}Ip.prototype.isMeshStandardMaterial=!0;(0,ay.default)(Up,Ip),Np=hy(Up),(0,ly.default)(Up,[{key:\"sheen\",get:function(){return this._sheen},set:function(e){0<this._sheen!=0<e&&this.version++,this._sheen=e}},{key:\"clearcoat\",get:function(){return this._clearcoat},set:function(e){0<this._clearcoat!=0<e&&this.version++,this._clearcoat=e}},{key:\"transmission\",get:function(){return this._transmission},set:function(e){0<this._transmission!=0<e&&this.version++,this._transmission=e}},{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(Up.prototype),\"copy\",this).call(this,e),this.defines={STANDARD:\"\",PHYSICAL:\"\"},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}]);var Np,Op=Up;function Up(e){var t;return(0,oy.default)(this,Up),(t=Np.call(this)).defines={STANDARD:\"\",PHYSICAL:\"\"},t.type=\"MeshPhysicalMaterial\",t.clearcoatMap=null,t.clearcoatRoughness=0,t.clearcoatRoughnessMap=null,t.clearcoatNormalScale=new qe(1,1),t.clearcoatNormalMap=null,t.ior=1.5,Object.defineProperty((0,dy.default)(t),\"reflectivity\",{get:function(){return Vt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),t.sheenColor=new S(0),t.sheenColorMap=null,t.sheenRoughness=1,t.sheenRoughnessMap=null,t.transmissionMap=null,t.thickness=0,t.thicknessMap=null,t.attenuationDistance=0,t.attenuationColor=new S(1,1,1),t.specularIntensity=1,t.specularIntensityMap=null,t.specularColor=new S(1,1,1),t.specularColorMap=null,t._sheen=0,t._clearcoat=0,t._transmission=0,t.setValues(e),t}Op.prototype.isMeshPhysicalMaterial=!0;(0,ay.default)(Hp,qn),Bp=hy(Hp),(0,ly.default)(Hp,[{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(Hp.prototype),\"copy\",this).call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}]);var Bp,zp=Hp;function Hp(e){var t;return(0,oy.default)(this,Hp),(t=Bp.call(this)).type=\"MeshPhongMaterial\",t.color=new S(16777215),t.specular=new S(1118481),t.shininess=30,t.map=null,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=null,t.aoMapIntensity=1,t.emissive=new S(0),t.emissiveIntensity=1,t.emissiveMap=null,t.bumpMap=null,t.bumpScale=1,t.normalMap=null,t.normalMapType=Dt,t.normalScale=new qe(1,1),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=null,t.alphaMap=null,t.envMap=null,t.combine=b,t.reflectivity=1,t.refractionRatio=.98,t.wireframe=!1,t.wireframeLinewidth=1,t.wireframeLinecap=\"round\",t.wireframeLinejoin=\"round\",t.flatShading=!1,t.setValues(e),t}zp.prototype.isMeshPhongMaterial=!0;(0,ay.default)(Wp,qn),Gp=hy(Wp),(0,ly.default)(Wp,[{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(Wp.prototype),\"copy\",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]);var Gp,Vp=Wp;function Wp(e){var t;return(0,oy.default)(this,Wp),(t=Gp.call(this)).defines={TOON:\"\"},t.type=\"MeshToonMaterial\",t.color=new S(16777215),t.map=null,t.gradientMap=null,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=null,t.aoMapIntensity=1,t.emissive=new S(0),t.emissiveIntensity=1,t.emissiveMap=null,t.bumpMap=null,t.bumpScale=1,t.normalMap=null,t.normalMapType=Dt,t.normalScale=new qe(1,1),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.alphaMap=null,t.wireframe=!1,t.wireframeLinewidth=1,t.wireframeLinecap=\"round\",t.wireframeLinejoin=\"round\",t.setValues(e),t}Vp.prototype.isMeshToonMaterial=!0;(0,ay.default)(qp,qn),jp=hy(qp),(0,ly.default)(qp,[{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(qp.prototype),\"copy\",this).call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}]);var jp,Xp=qp;function qp(e){var t;return(0,oy.default)(this,qp),(t=jp.call(this)).type=\"MeshNormalMaterial\",t.bumpMap=null,t.bumpScale=1,t.normalMap=null,t.normalMapType=Dt,t.normalScale=new qe(1,1),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.wireframe=!1,t.wireframeLinewidth=1,t.fog=!1,t.flatShading=!1,t.setValues(e),t}Xp.prototype.isMeshNormalMaterial=!0;(0,ay.default)(Zp,qn),Yp=hy(Zp),(0,ly.default)(Zp,[{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(Zp.prototype),\"copy\",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]);var Yp,Jp=Zp;function Zp(e){var t;return(0,oy.default)(this,Zp),(t=Yp.call(this)).type=\"MeshLambertMaterial\",t.color=new S(16777215),t.map=null,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=null,t.aoMapIntensity=1,t.emissive=new S(0),t.emissiveIntensity=1,t.emissiveMap=null,t.specularMap=null,t.alphaMap=null,t.envMap=null,t.combine=b,t.reflectivity=1,t.refractionRatio=.98,t.wireframe=!1,t.wireframeLinewidth=1,t.wireframeLinecap=\"round\",t.wireframeLinejoin=\"round\",t.setValues(e),t}Jp.prototype.isMeshLambertMaterial=!0;(0,ay.default)($p,qn),Kp=hy($p),(0,ly.default)($p,[{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)($p.prototype),\"copy\",this).call(this,e),this.defines={MATCAP:\"\"},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}]);var Kp,Qp=$p;function $p(e){var t;return(0,oy.default)(this,$p),(t=Kp.call(this)).defines={MATCAP:\"\"},t.type=\"MeshMatcapMaterial\",t.color=new S(16777215),t.matcap=null,t.map=null,t.bumpMap=null,t.bumpScale=1,t.normalMap=null,t.normalMapType=Dt,t.normalScale=new qe(1,1),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.alphaMap=null,t.flatShading=!1,t.setValues(e),t}Qp.prototype.isMeshMatcapMaterial=!0;(0,ay.default)(nf,_u),ef=hy(nf),(0,ly.default)(nf,[{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(nf.prototype),\"copy\",this).call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}]);var ef,tf=nf;function nf(e){var t;return(0,oy.default)(this,nf),(t=ef.call(this)).type=\"LineDashedMaterial\",t.scale=1,t.dashSize=3,t.gapSize=1,t.setValues(e),t}tf.prototype.isLineDashedMaterial=!0;var rf=Object.freeze({__proto__:null,ShadowMaterial:Cp,SpriteMaterial:bh,RawShaderMaterial:us,ShaderMaterial:Ma,PointsMaterial:Uu,MeshPhysicalMaterial:Op,MeshStandardMaterial:Ip,MeshPhongMaterial:zp,MeshToonMaterial:Vp,MeshNormalMaterial:Xp,MeshLambertMaterial:Jp,MeshDepthMaterial:Cl,MeshDistanceMaterial:Il,MeshBasicMaterial:rr,MeshMatcapMaterial:Qp,LineDashedMaterial:tf,LineBasicMaterial:_u,Material:qn}),af={arraySlice:function(e,t,i){return af.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==i?i:e.length)):e.slice(t,i)},convertArray:function(e,t,i){return!e||!i&&e.constructor===t?e:\"number\"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(i){for(var e=i.length,t=new Array(e),n=0;n!==e;++n)t[n]=n;return t.sort(function(e,t){return i[e]-i[t]}),t},sortedArray:function(e,t,i){for(var n=e.length,r=new e.constructor(n),a=0,s=0;s!==n;++a)for(var o=i[a]*t,l=0;l!==t;++l)r[s++]=e[o+l];return r},flattenJSON:function(e,t,i,n){for(var r=1,a=e[0];void 0!==a&&void 0===a[n];)a=e[r++];if(void 0!==a){var s=a[n];if(void 0!==s)if(Array.isArray(s))for(;void 0!==(s=a[n])&&(t.push(a.time),i.push.apply(i,s)),void 0!==(a=e[r++]););else if(void 0!==s.toArray)for(;void 0!==(s=a[n])&&(t.push(a.time),s.toArray(i,i.length)),void 0!==(a=e[r++]););else for(;void 0!==(s=a[n])&&(t.push(a.time),i.push(s)),void 0!==(a=e[r++]););}},subclip:function(h,u,c,d){var p=4<arguments.length&&void 0!==arguments[4]?arguments[4]:30,e=h.clone();e.name=u;for(var f=[],t=0;t<e.tracks.length;++t){for(var i=e.tracks[t],m=i.getValueSize(),n=[],v=[],r=0;r<i.times.length;++r){var g=i.times[r]*p;if(!(g<c||d<=g)){n.push(i.times[r]);for(var a=0;a<m;++a)v.push(i.values[r*m+a])}}0!==n.length&&(i.times=af.convertArray(n,i.times.constructor),i.values=af.convertArray(v,i.values.constructor),f.push(i))}e.tracks=f;for(var s=1/0,o=0;o<e.tracks.length;++o)s>e.tracks[o].times[0]&&(s=e.tracks[o].times[0]);for(var l=0;l<e.tracks.length;++l)e.tracks[l].shift(-1*s);return e.resetDuration(),e},makeClipAdditive:function(m){for(var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,v=2<arguments.length&&void 0!==arguments[2]?arguments[2]:m,t=3<arguments.length&&void 0!==arguments[3]?arguments[3]:30,i=v.tracks.length,g=e/(t=t<=0?30:t),n=0;n<i;++n)!function(e){var t=v.tracks[e],i=t.ValueTypeName;if(\"bool\"===i||\"string\"===i)return;var n=m.tracks.find(function(e){return e.name===t.name&&e.ValueTypeName===i});if(void 0===n)return;var r,e=0,a=t.getValueSize(),s=(t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(e=a/3),0),u=n.getValueSize(),o=(n.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=u/3),t.times.length-1),l=void 0;l=g<=t.times[0]?(r=e,af.arraySlice(t.values,r,a-e)):g>=t.times[o]?af.arraySlice(t.values,r=o*a+e,r+a-e):(r=a-(o=e),(a=t.createInterpolant()).evaluate(g),af.arraySlice(a.resultBuffer,o,r)),\"quaternion\"===i&&(new Mi).fromArray(l).normalize().conjugate().toArray(l);for(var c=n.times.length,d=0;d<c;++d){var p=d*u+s;if(\"quaternion\"===i)Mi.multiplyQuaternionsFlat(n.values,p,l,0,n.values,p);else for(var f=u-2*s,h=0;h<f;++h)n.values[p+h]-=l[h]}}(n);return m.blendMode=2501,m}},sf=((0,ly.default)(of,[{key:\"evaluate\",value:function(e){var t,i=this.parameterPositions,n=this._cachedIndex,r=i[n],a=i[n-1];e:{t:{i:{n:if(!(e<r)){for(var s=n+2;;){if(void 0===r){if(e<a)break n;return n=i.length,this._cachedIndex=n,this.afterEnd_(n-1,e,a)}if(n===s)break;if(a=r,e<(r=i[++n]))break t}t=i.length;break i}if(a<=e)break e;var o=i[1];e<o&&(n=2,a=o);for(var l=n-2;;){if(void 0===a)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===l)break;if(r=a,e>=(a=i[--n-1]))break t}t=n,n=0}for(;n<t;){var h=n+t>>>1;e<i[h]?t=h:n=1+h}if(r=i[n],void 0===(a=i[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=i.length,this._cachedIndex=n,this.afterEnd_(n-1,a,e)}this._cachedIndex=n,this.intervalChanged_(n,a,r)}return this.interpolate_(n,a,e,r)}},{key:\"getSettings_\",value:function(){return this.settings||this.DefaultSettings_}},{key:\"copySampleValue_\",value:function(e){for(var t=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=e*n,a=0;a!==n;++a)t[a]=i[r+a];return t}},{key:\"interpolate_\",value:function(){throw new Error(\"call to abstract method\")}},{key:\"intervalChanged_\",value:function(){}}]),of);function of(e,t,i,n){(0,oy.default)(this,of),this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}sf.prototype.beforeStart_=sf.prototype.copySampleValue_,sf.prototype.afterEnd_=sf.prototype.copySampleValue_;(0,ay.default)(yf,sf),uf=hy(yf),(0,ly.default)(yf,[{key:\"intervalChanged_\",value:function(e,t,i){var n=this.parameterPositions,r=e-2,a=e+1,s=n[r],o=n[a];if(void 0===s)switch(this.getSettings_().endingStart){case 2401:r=e,s=2*t-i;break;case 2402:s=t+n[r=n.length-2]-n[r+1];break;default:r=e,s=i}if(void 0===o)switch(this.getSettings_().endingEnd){case 2401:a=e,o=2*i-t;break;case 2402:o=i+n[a=1]-n[0];break;default:a=e-1,o=t}var l=.5*(i-t),h=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(o-i),this._offsetPrev=r*h,this._offsetNext=a*h}},{key:\"interpolate_\",value:function(e,t,i,n){for(var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,u=o-s,c=this._offsetPrev,d=this._offsetNext,e=this._weightPrev,l=this._weightNext,i=(i-t)/(n-t),n=i*i,t=n*i,p=-e*t+2*e*n-e*i,f=(1+e)*t+(-1.5-2*e)*n+(-.5+e)*i+1,m=(-1-l)*t+(1.5+l)*n+.5*i,v=l*t-l*n,h=0;h!==s;++h)r[h]=p*a[c+h]+f*a[u+h]+m*a[o+h]+v*a[d+h];return r}}]);var lf,hf,uf,cf=yf,df=((0,ay.default)(gf,sf),hf=hy(gf),(0,ly.default)(gf,[{key:\"interpolate_\",value:function(e,t,i,n){for(var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,u=o-s,l=(i-t)/(n-t),c=1-l,h=0;h!==s;++h)r[h]=a[u+h]*c+a[o+h]*l;return r}}]),gf),pf=((0,ay.default)(vf,sf),lf=hy(vf),(0,ly.default)(vf,[{key:\"interpolate_\",value:function(e){return this.copySampleValue_(e-1)}}]),vf),ff=((0,ly.default)(mf,[{key:\"InterpolantFactoryMethodDiscrete\",value:function(e){return new pf(this.times,this.values,this.getValueSize(),e)}},{key:\"InterpolantFactoryMethodLinear\",value:function(e){return new df(this.times,this.values,this.getValueSize(),e)}},{key:\"InterpolantFactoryMethodSmooth\",value:function(e){return new cf(this.times,this.values,this.getValueSize(),e)}},{key:\"setInterpolation\",value:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0!==t)return this.createInterpolant=t,this;var i=\"unsupported interpolation for \"+this.ValueTypeName+\" keyframe track named \"+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn(\"THREE.KeyframeTrack:\",i),this}},{key:\"getInterpolation\",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}},{key:\"getValueSize\",value:function(){return this.values.length/this.times.length}},{key:\"shift\",value:function(e){if(0!==e)for(var t=this.times,i=0,n=t.length;i!==n;++i)t[i]+=e;return this}},{key:\"scale\",value:function(e){if(1!==e)for(var t=this.times,i=0,n=t.length;i!==n;++i)t[i]*=e;return this}},{key:\"trim\",value:function(e,t){for(var i,n=this.times,r=n.length,a=0,s=r-1;a!==r&&n[a]<e;)++a;for(;-1!==s&&n[s]>t;)--s;return++s,0===a&&s===r||(s<=a&&(a=(s=Math.max(s,1))-1),i=this.getValueSize(),this.times=af.arraySlice(n,a,s),this.values=af.arraySlice(this.values,a*i,s*i)),this}},{key:\"validate\",value:function(){var e=!0,t=this.getValueSize(),i=(t-Math.floor(t)!=0&&(console.error(\"THREE.KeyframeTrack: Invalid value size in track.\",this),e=!1),this.times),n=this.values,r=i.length;0===r&&(console.error(\"THREE.KeyframeTrack: Track is empty.\",this),e=!1);for(var a=null,s=0;s!==r;s++){var o=i[s];if(\"number\"==typeof o&&isNaN(o)){console.error(\"THREE.KeyframeTrack: Time is not a valid number.\",this,s,o),e=!1;break}if(null!==a&&o<a){console.error(\"THREE.KeyframeTrack: Out of order keys.\",this,s,o,a),e=!1;break}a=o}if(void 0!==n&&af.isTypedArray(n))for(var l=0,u=n.length;l!==u;++l){var h=n[l];if(isNaN(h)){console.error(\"THREE.KeyframeTrack: Value is not a valid number.\",this,l,h),e=!1;break}}return e}},{key:\"optimize\",value:function(){for(var e=af.arraySlice(this.times),t=af.arraySlice(this.values),i=this.getValueSize(),u=2302===this.getInterpolation(),n=e.length-1,r=1,a=1;a<n;++a){var s=!1,c=e[a];if(c!==e[a+1]&&(1!==a||c!==e[0]))if(u)s=!0;else for(var d=a*i,p=d-i,f=d+i,o=0;o!==i;++o){var m=t[d+o];if(m!==t[p+o]||m!==t[f+o]){s=!0;break}}if(s){if(a!==r){e[r]=e[a];for(var v=a*i,g=r*i,l=0;l!==i;++l)t[g+l]=t[v+l]}++r}}if(0<n){e[r]=e[n];for(var y=n*i,_=r*i,h=0;h!==i;++h)t[_+h]=t[y+h];++r}return r!==e.length?(this.times=af.arraySlice(e,0,r),this.values=af.arraySlice(t,0,r*i)):(this.times=e,this.values=t),this}},{key:\"clone\",value:function(){var e=af.arraySlice(this.times,0),t=af.arraySlice(this.values,0),e=new this.constructor(this.name,e,t);return e.createInterpolant=this.createInterpolant,e}}],[{key:\"toJSON\",value:function(e){var t,i=e.constructor;return i.toJSON!==this.toJSON?t=i.toJSON(e):(t={name:e.name,times:af.convertArray(e.times,Array),values:af.convertArray(e.values,Array)},(i=e.getInterpolation())!==e.DefaultInterpolation&&(t.interpolation=i)),t.type=e.ValueTypeName,t}}]),mf);function mf(e,t,i,n){if((0,oy.default)(this,mf),void 0===e)throw new Error(\"THREE.KeyframeTrack: track name is undefined\");if(void 0===t||0===t.length)throw new Error(\"THREE.KeyframeTrack: no keyframes in track named \"+e);this.name=e,this.times=af.convertArray(t,this.TimeBufferType),this.values=af.convertArray(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}function vf(e,t,i,n){return(0,oy.default)(this,vf),lf.call(this,e,t,i,n)}function gf(e,t,i,n){return(0,oy.default)(this,gf),hf.call(this,e,t,i,n)}function yf(e,t,i,n){return(0,oy.default)(this,yf),(e=uf.call(this,e,t,i,n))._weightPrev=-0,e._offsetPrev=-0,e._weightNext=-0,e._offsetNext=-0,e.DefaultSettings_={endingStart:Lt,endingEnd:Lt},e}ff.prototype.TimeBufferType=Float32Array,ff.prototype.ValueBufferType=Float32Array,ff.prototype.DefaultInterpolation=2301;(0,ay.default)(bf,ff),_f=hy(bf);var _f,xf=(0,ly.default)(bf);function bf(){return(0,oy.default)(this,bf),_f.apply(this,arguments)}xf.prototype.ValueTypeName=\"bool\",xf.prototype.ValueBufferType=Array,xf.prototype.DefaultInterpolation=2300,xf.prototype.InterpolantFactoryMethodLinear=void 0;(xf.prototype.InterpolantFactoryMethodSmooth=void 0,ay.default)(Sf,ff),Mf=hy(Sf);var Mf,wf=(0,ly.default)(Sf);function Sf(){return(0,oy.default)(this,Sf),Mf.apply(this,arguments)}wf.prototype.ValueTypeName=\"color\";(0,ay.default)(Af,ff),Ef=hy(Af);var Ef,Tf=(0,ly.default)(Af);function Af(){return(0,oy.default)(this,Af),Ef.apply(this,arguments)}Tf.prototype.ValueTypeName=\"number\";(0,ay.default)(Df,sf),Rf=hy(Df),(0,ly.default)(Df,[{key:\"interpolate_\",value:function(e,t,i,n){for(var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(i-t)/(n-t),l=e*s,h=l+s;l!==h;l+=4)Mi.slerpFlat(r,0,a,l-s,a,l,o);return r}}]);var kf,Rf,Lf=Df,Cf=((0,ay.default)(Pf,ff),kf=hy(Pf),(0,ly.default)(Pf,[{key:\"InterpolantFactoryMethodLinear\",value:function(e){return new Lf(this.times,this.values,this.getValueSize(),e)}}]),Pf);function Pf(){return(0,oy.default)(this,Pf),kf.apply(this,arguments)}function Df(e,t,i,n){return(0,oy.default)(this,Df),Rf.call(this,e,t,i,n)}Cf.prototype.ValueTypeName=\"quaternion\",Cf.prototype.DefaultInterpolation=2301;(Cf.prototype.InterpolantFactoryMethodSmooth=void 0,ay.default)(Nf,ff),If=hy(Nf);var If,Ff=(0,ly.default)(Nf);function Nf(){return(0,oy.default)(this,Nf),If.apply(this,arguments)}Ff.prototype.ValueTypeName=\"string\",Ff.prototype.ValueBufferType=Array,Ff.prototype.DefaultInterpolation=2300,Ff.prototype.InterpolantFactoryMethodLinear=void 0;(Ff.prototype.InterpolantFactoryMethodSmooth=void 0,ay.default)(Bf,ff),Of=hy(Bf);var Of,Uf=(0,ly.default)(Bf);function Bf(){return(0,oy.default)(this,Bf),Of.apply(this,arguments)}Uf.prototype.ValueTypeName=\"vector\";(0,ly.default)(Hf,[{key:\"resetDuration\",value:function(){for(var e=0,t=0,i=this.tracks.length;t!==i;++t)var n=this.tracks[t],e=Math.max(e,n.times[n.times.length-1]);return this.duration=e,this}},{key:\"trim\",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}},{key:\"validate\",value:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}},{key:\"optimize\",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},{key:\"clone\",value:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}},{key:\"toJSON\",value:function(){return this.constructor.toJSON(this)}}],[{key:\"parse\",value:function(e){for(var t=[],i=e.tracks,n=1/(e.fps||1),r=0,a=i.length;r!==a;++r)t.push(function(e){if(void 0===e.type)throw new Error(\"THREE.KeyframeTrack: track type undefined, can not parse\");var t=function(e){switch(e.toLowerCase()){case\"scalar\":case\"double\":case\"float\":case\"number\":case\"integer\":return Tf;case\"vector\":case\"vector2\":case\"vector3\":case\"vector4\":return Uf;case\"color\":return wf;case\"quaternion\":return Cf;case\"bool\":case\"boolean\":return xf;case\"string\":return Ff}throw new Error(\"THREE.KeyframeTrack: Unsupported typeName: \"+e)}(e.type);{var i,n;void 0===e.times&&(i=[],n=[],af.flattenJSON(e.keys,i,n,\"value\"),e.times=i,e.values=n)}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}(i[r]).scale(n));var s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}},{key:\"toJSON\",value:function(e){for(var t=[],i=e.tracks,e={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},n=0,r=i.length;n!==r;++n)t.push(ff.toJSON(i[n]));return e}},{key:\"CreateFromMorphTargetSequence\",value:function(e,t,i,n){for(var r=t.length,a=[],s=0;s<r;s++){var o=[],l=((h=[]).push((s+r-1)%r,s,(s+1)%r),o.push(0,1,0),af.getKeyframeOrder(h)),h=af.sortedArray(h,1,l),o=af.sortedArray(o,1,l);n||0!==h[0]||(h.push(r),o.push(o[0])),a.push(new Tf(\".morphTargetInfluences[\"+t[s].name+\"]\",h,o).scale(1/i))}return new this(e,-1,a)}},{key:\"findByName\",value:function(e,t){var i=e;Array.isArray(e)||(i=e.geometry&&e.geometry.animations||e.animations);for(var n=0;n<i.length;n++)if(i[n].name===t)return i[n];return null}},{key:\"CreateClipsFromMorphTargetSequences\",value:function(e,t,i){for(var n={},u=/^([\\w-]*?)([\\d]+)$/,r=0,c=e.length;r<c;r++){var a,s=e[r],o=s.name.match(u);o&&1<o.length&&((a=n[o=o[1]])||(n[o]=a=[]),a.push(s))}var l,h=[];for(l in n)h.push(this.CreateFromMorphTargetSequence(l,n[l],t,i));return h}},{key:\"parseAnimation\",value:function(e,u){if(!e)return console.error(\"THREE.AnimationClip: No animation in JSONLoader data.\"),null;function t(e,t,i,n,r){var a;0!==i.length&&(af.flattenJSON(i,i=[],a=[],n),0!==i.length&&r.push(new e(t,i,a)))}for(var i=[],c=e.name||\"default\",d=e.fps||30,p=e.blendMode,f=e.length||-1,m=e.hierarchy||[],n=0;n<m.length;n++){var r=m[n].keys;if(r&&0!==r.length)if(r[0].morphTargets){for(var a,s={},o=void 0,o=0;o<r.length;o++)if(r[o].morphTargets)for(var l=0;l<r[o].morphTargets.length;l++)s[r[o].morphTargets[l]]=-1;for(a in s){for(var v=[],g=[],y=0;y!==r[o].morphTargets.length;++y){var _=r[o];v.push(_.time),g.push(_.morphTarget===a?1:0)}i.push(new Tf(\".morphTargetInfluence[\"+a+\"]\",v,g))}f=s.length*(d||1)}else{var h=\".bones[\"+u[n].name+\"]\";t(Uf,h+\".position\",r,\"pos\",i),t(Cf,h+\".quaternion\",r,\"rot\",i),t(Uf,h+\".scale\",r,\"scl\",i)}}return 0===i.length?null:new this(c,f,i,p)}}]);var zf=Hf;function Hf(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1,i=2<arguments.length?arguments[2]:void 0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:2500;(0,oy.default)(this,Hf),this.name=e,this.tracks=i,this.duration=t,this.blendMode=n,this.uuid=Gt(),this.duration<0&&this.resetDuration()}var Gf,Vf,Wf,jf,Xf,qf,Yf,Jf,Zf={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Kf=(0,ly.default)(function e(t,i,n){(0,oy.default)(this,e);var r=this,a=!1,s=0,o=0,l=void 0,h=[];this.onStart=void 0,this.onLoad=t,this.onProgress=i,this.onError=n,this.itemStart=function(e){o++,!1===a&&void 0!==r.onStart&&r.onStart(e,s,o),a=!0},this.itemEnd=function(e){s++,void 0!==r.onProgress&&r.onProgress(e,s,o),s===o&&(a=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return l?l(e):e},this.setURLModifier=function(e){return l=e,this},this.addHandler=function(e,t){return h.push(e,t),this},this.removeHandler=function(e){e=h.indexOf(e);return-1!==e&&h.splice(e,2),this},this.getHandler=function(e){for(var t=0,i=h.length;t<i;t+=2){var n=h[t],r=h[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}),Qf=new Kf,$f=((0,ly.default)(gm,[{key:\"load\",value:function(){}},{key:\"loadAsync\",value:function(i,n){var r=this;return new Promise(function(e,t){r.load(i,e,n,t)})}},{key:\"parse\",value:function(){}},{key:\"setCrossOrigin\",value:function(e){return this.crossOrigin=e,this}},{key:\"setWithCredentials\",value:function(e){return this.withCredentials=e,this}},{key:\"setPath\",value:function(e){return this.path=e,this}},{key:\"setResourcePath\",value:function(e){return this.resourcePath=e,this}},{key:\"setRequestHeader\",value:function(e){return this.requestHeader=e,this}}]),gm),em={},tm=((0,ay.default)(vm,$f),Jf=hy(vm),(0,ly.default)(vm,[{key:\"load\",value:function(a,e,t,i){var n,s=this,r=(void 0===a&&(a=\"\"),void 0!==this.path&&(a=this.path+a),a=this.manager.resolveURL(a),Zf.get(a));if(void 0!==r)return this.manager.itemStart(a),setTimeout(function(){e&&e(r),s.manager.itemEnd(a)},0),r;void 0===em[a]?(em[a]=[],em[a].push({onLoad:e,onProgress:t,onError:i}),n=new Request(a,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?\"include\":\"same-origin\"}),fetch(n).then(function(e){if(200!==e.status&&0!==e.status)throw Error('fetch for \"'.concat(e.url,'\" responded with ').concat(e.status,\": \").concat(e.statusText));if(0===e.status&&console.warn(\"THREE.FileLoader: HTTP Status 0 received.\"),\"undefined\"==typeof ReadableStream||void 0===e.body.getReader)return e;var l=em[a],t=e.body.getReader(),e=e.headers.get(\"Content-Length\"),h=e?parseInt(e):0,u=0!==h,c=0,e=new ReadableStream({start:function(o){!function s(){t.read().then(function(e){var t=e.done,e=e.value;if(t)o.close();else{c+=e.byteLength;for(var i=new ProgressEvent(\"progress\",{lengthComputable:u,loaded:c,total:h}),n=0,r=l.length;n<r;n++){var a=l[n];a.onProgress&&a.onProgress(i)}o.enqueue(e),s()}})}()}});return new Response(e)}).then(function(e){switch(s.responseType){case\"arraybuffer\":return e.arrayBuffer();case\"blob\":return e.blob();case\"document\":return e.text().then(function(e){return(new DOMParser).parseFromString(e,s.mimeType)});case\"json\":return e.json();default:return e.text()}}).then(function(e){Zf.add(a,e);var t=em[a];delete em[a];for(var i=0,n=t.length;i<n;i++){var r=t[i];r.onLoad&&r.onLoad(e)}}).catch(function(e){var t=em[a];if(void 0===t)throw s.manager.itemError(a),e;delete em[a];for(var i=0,n=t.length;i<n;i++){var r=t[i];r.onError&&r.onError(e)}s.manager.itemError(a)}).finally(function(){s.manager.itemEnd(a)}),this.manager.itemStart(a)):em[a].push({onLoad:e,onProgress:t,onError:i})}},{key:\"setResponseType\",value:function(e){return this.responseType=e,this}},{key:\"setMimeType\",value:function(e){return this.mimeType=e,this}}]),vm),im=((0,ay.default)(mm,$f),Yf=hy(mm),(0,ly.default)(mm,[{key:\"load\",value:function(t,i,e,n){var r=this,a=new tm(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(e){try{i(r.parse(JSON.parse(e)))}catch(e){n?n(e):console.error(e),r.manager.itemError(t)}},e,n)}},{key:\"parse\",value:function(e){for(var t=[],i=0;i<e.length;i++){var n=zf.parse(e[i]);t.push(n)}return t}}]),mm),nm=((0,ay.default)(fm,$f),qf=hy(fm),(0,ly.default)(fm,[{key:\"load\",value:function(e,a,i,n){var s=this,o=[],l=new tc,r=new tm(this.manager),h=(r.setPath(this.path),r.setResponseType(\"arraybuffer\"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(s.withCredentials),0);if(Array.isArray(e))for(var t=0,u=e.length;t<u;++t)!function(t){r.load(e[t],function(e){e=s.parse(e,!0);o[t]={width:e.width,height:e.height,format:e.format,mipmaps:e.mipmaps},6===(h+=1)&&(1===e.mipmapCount&&(l.minFilter=Te),l.image=o,l.format=e.format,l.needsUpdate=!0,a&&a(l))},i,n)}(t);else r.load(e,function(e){var t=s.parse(e,!0);if(t.isCubemap){for(var i=t.mipmaps.length/t.mipmapCount,n=0;n<i;n++){o[n]={mipmaps:[]};for(var r=0;r<t.mipmapCount;r++)o[n].mipmaps.push(t.mipmaps[n*t.mipmapCount+r]),o[n].format=t.format,o[n].width=t.width,o[n].height=t.height}l.image=o}else l.image.width=t.width,l.image.height=t.height,l.mipmaps=t.mipmaps;1===t.mipmapCount&&(l.minFilter=Te),l.format=t.format,l.needsUpdate=!0,a&&a(l)},i,n);return l}}]),fm),rm=((0,ay.default)(pm,$f),Xf=hy(pm),(0,ly.default)(pm,[{key:\"load\",value:function(t,e,h,i){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var n=this,r=Zf.get(t);if(void 0!==r)return n.manager.itemStart(t),setTimeout(function(){e&&e(r),n.manager.itemEnd(t)},0),r;var a=ni(\"img\");function s(){l(),Zf.add(t,this),e&&e(this),n.manager.itemEnd(t)}function o(e){l(),i&&i(e),n.manager.itemError(t),n.manager.itemEnd(t)}function l(){a.removeEventListener(\"load\",s,!1),a.removeEventListener(\"error\",o,!1)}return a.addEventListener(\"load\",s,!1),a.addEventListener(\"error\",o,!1),\"data:\"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),n.manager.itemStart(t),a.src=t,a}}]),pm),am=((0,ay.default)(dm,$f),jf=hy(dm),(0,ly.default)(dm,[{key:\"load\",value:function(e,i,t,n){var r=new Da,a=new rm(this.manager),s=(a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),0);for(var o=0;o<e.length;++o)!function(t){a.load(e[t],function(e){r.images[t]=e,6==++s&&(r.needsUpdate=!0,i&&i(r))},void 0,n)}(o);return r}}]),dm),sm=((0,ay.default)(cm,$f),Wf=hy(cm),(0,ly.default)(cm,[{key:\"load\",value:function(e,t,i,n){var r=this,a=new iu,s=new tm(this.manager);return s.setResponseType(\"arraybuffer\"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(r.withCredentials),s.load(e,function(e){e=r.parse(e);e&&(void 0!==e.image?a.image=e.image:void 0!==e.data&&(a.image.width=e.width,a.image.height=e.height,a.image.data=e.data),a.wrapS=void 0!==e.wrapS?e.wrapS:Fe,a.wrapT=void 0!==e.wrapT?e.wrapT:Fe,a.magFilter=void 0!==e.magFilter?e.magFilter:Te,a.minFilter=void 0!==e.minFilter?e.minFilter:Te,a.anisotropy=void 0!==e.anisotropy?e.anisotropy:1,void 0!==e.encoding&&(a.encoding=e.encoding),void 0!==e.flipY&&(a.flipY=e.flipY),void 0!==e.format&&(a.format=e.format),void 0!==e.type&&(a.type=e.type),void 0!==e.mipmaps&&(a.mipmaps=e.mipmaps,a.minFilter=Oe),1===e.mipmapCount&&(a.minFilter=Te),void 0!==e.generateMipmaps&&(a.generateMipmaps=e.generateMipmaps),a.needsUpdate=!0,t&&t(a,e))},i,n),a}}]),cm),om=((0,ay.default)(um,$f),Vf=hy(um),(0,ly.default)(um,[{key:\"load\",value:function(e,t,i,n){var r=new oi,a=new rm(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(e){r.image=e,r.needsUpdate=!0,void 0!==t&&t(r)},i,n),r}}]),um),lm=((0,ay.default)(hm,w),Gf=hy(hm),(0,ly.default)(hm,[{key:\"dispose\",value:function(){}},{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(hm.prototype),\"copy\",this).call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:\"toJSON\",value:function(e){e=(0,ny.default)((0,sy.default)(hm.prototype),\"toJSON\",this).call(this,e);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}]),hm);function hm(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return(0,oy.default)(this,hm),(t=Gf.call(this)).type=\"Light\",t.color=new S(e),t.intensity=i,t}function um(e){return(0,oy.default)(this,um),Vf.call(this,e)}function cm(e){return(0,oy.default)(this,cm),Wf.call(this,e)}function dm(e){return(0,oy.default)(this,dm),jf.call(this,e)}function pm(e){return(0,oy.default)(this,pm),Xf.call(this,e)}function fm(e){return(0,oy.default)(this,fm),qf.call(this,e)}function mm(e){return(0,oy.default)(this,mm),Yf.call(this,e)}function vm(e){return(0,oy.default)(this,vm),Jf.call(this,e)}function gm(e){(0,oy.default)(this,gm),this.manager=void 0!==e?e:Qf,this.crossOrigin=\"anonymous\",this.withCredentials=!1,this.path=\"\",this.resourcePath=\"\",this.requestHeader={}}lm.prototype.isLight=!0;(0,ay.default)(xm,lm),ym=hy(xm),(0,ly.default)(xm,[{key:\"copy\",value:function(e){return lm.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}]);var ym,_m=xm;function xm(e,t,i){return(0,oy.default)(this,xm),(e=ym.call(this,e,i)).type=\"HemisphereLight\",e.position.copy(w.DefaultUp),e.updateMatrix(),e.groundColor=new S(t),e}_m.prototype.isHemisphereLight=!0;var bm,Mm=new Re,wm=new Ye,Sm=new Ye,Em=((0,ly.default)(km,[{key:\"getViewportCount\",value:function(){return this._viewportCount}},{key:\"getFrustum\",value:function(){return this._frustum}},{key:\"updateMatrices\",value:function(e){var t=this.camera,i=this.matrix;wm.setFromMatrixPosition(e.matrixWorld),t.position.copy(wm),Sm.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Sm),t.updateMatrixWorld(),Mm.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Mm),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}},{key:\"getViewport\",value:function(e){return this._viewports[e]}},{key:\"getFrameExtents\",value:function(){return this._frameExtents}},{key:\"dispose\",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:\"copy\",value:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}},{key:\"toJSON\",value:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),km),Tm=((0,ay.default)(Am,Em),bm=hy(Am),(0,ly.default)(Am,[{key:\"updateMatrices\",value:function(e){var t=this.camera,i=2*Ht*e.angle*this.focus,n=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;i===t.fov&&n===t.aspect&&r===t.far||(t.fov=i,t.aspect=n,t.far=r,t.updateProjectionMatrix()),(0,ny.default)((0,sy.default)(Am.prototype),\"updateMatrices\",this).call(this,e)}},{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(Am.prototype),\"copy\",this).call(this,e),this.focus=e.focus,this}}]),Am);function Am(){var e;return(0,oy.default)(this,Am),(e=bm.call(this,new ka(50,1,.5,500))).focus=1,e}function km(e){(0,oy.default)(this,km),this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new qe(512,512),this.map=null,this.mapPass=null,this.matrix=new Re,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Xa,this._frameExtents=new qe(1,1),this._viewportCount=1,this._viewports=[new ci(0,0,1,1)]}Tm.prototype.isSpotLightShadow=!0;(0,ay.default)(Cm,lm),Rm=hy(Cm),(0,ly.default)(Cm,[{key:\"power\",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}},{key:\"dispose\",value:function(){this.shadow.dispose()}},{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(Cm.prototype),\"copy\",this).call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]);var Rm,Lm=Cm;function Cm(e,t){var i,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:Math.PI/3,a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:1;return(0,oy.default)(this,Cm),(i=Rm.call(this,e,t)).type=\"SpotLight\",i.position.copy(w.DefaultUp),i.updateMatrix(),i.target=new w,i.distance=n,i.angle=r,i.penumbra=a,i.decay=s,i.shadow=new Tm,i}Lm.prototype.isSpotLight=!0;var Pm,Dm=new Re,Im=new Ye,Fm=new Ye,Nm=((0,ay.default)(Om,Em),Pm=hy(Om),(0,ly.default)(Om,[{key:\"updateMatrices\",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=this.camera,n=this.matrix,r=e.distance||i.far;r!==i.far&&(i.far=r,i.updateProjectionMatrix()),Im.setFromMatrixPosition(e.matrixWorld),i.position.copy(Im),Fm.copy(i.position),Fm.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Fm),i.updateMatrixWorld(),n.makeTranslation(-Im.x,-Im.y,-Im.z),Dm.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Dm)}}]),Om);function Om(){var e;return(0,oy.default)(this,Om),(e=Pm.call(this,new ka(90,1,.5,500)))._frameExtents=new qe(4,2),e._viewportCount=6,e._viewports=[new ci(2,1,1,1),new ci(0,1,1,1),new ci(3,1,1,1),new ci(1,1,1,1),new ci(3,0,1,1),new ci(1,0,1,1)],e._cubeDirections=[new Ye(1,0,0),new Ye(-1,0,0),new Ye(0,0,1),new Ye(0,0,-1),new Ye(0,1,0),new Ye(0,-1,0)],e._cubeUps=[new Ye(0,1,0),new Ye(0,1,0),new Ye(0,1,0),new Ye(0,1,0),new Ye(0,0,1),new Ye(0,0,-1)],e}Nm.prototype.isPointLightShadow=!0;(0,ay.default)(zm,lm),Um=hy(zm),(0,ly.default)(zm,[{key:\"power\",get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}},{key:\"dispose\",value:function(){this.shadow.dispose()}},{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(zm.prototype),\"copy\",this).call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}]);var Um,Bm=zm;function zm(e,t){var i,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;return(0,oy.default)(this,zm),(i=Um.call(this,e,t)).type=\"PointLight\",i.distance=n,i.decay=r,i.shadow=new Nm,i}Bm.prototype.isPointLight=!0;(0,ay.default)(Vm,Em),Hm=hy(Vm);var Hm,Gm=(0,ly.default)(Vm);function Vm(){return(0,oy.default)(this,Vm),Hm.call(this,new os(-5,5,5,-5,.5,500))}Gm.prototype.isDirectionalLightShadow=!0;(0,ay.default)(Xm,lm),Wm=hy(Xm),(0,ly.default)(Xm,[{key:\"dispose\",value:function(){this.shadow.dispose()}},{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(Xm.prototype),\"copy\",this).call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]);var Wm,jm=Xm;function Xm(e,t){return(0,oy.default)(this,Xm),(e=Wm.call(this,e,t)).type=\"DirectionalLight\",e.position.copy(w.DefaultUp),e.updateMatrix(),e.target=new w,e.shadow=new Gm,e}jm.prototype.isDirectionalLight=!0;(0,ay.default)(Jm,lm),qm=hy(Jm);var qm,Ym=(0,ly.default)(Jm);function Jm(e,t){return(0,oy.default)(this,Jm),(e=qm.call(this,e,t)).type=\"AmbientLight\",e}Ym.prototype.isAmbientLight=!0;(0,ay.default)(Qm,lm),Zm=hy(Qm),(0,ly.default)(Qm,[{key:\"power\",get:function(){return this.intensity*this.width*this.height*Math.PI},set:function(e){this.intensity=e/(this.width*this.height*Math.PI)}},{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(Qm.prototype),\"copy\",this).call(this,e),this.width=e.width,this.height=e.height,this}},{key:\"toJSON\",value:function(e){e=(0,ny.default)((0,sy.default)(Qm.prototype),\"toJSON\",this).call(this,e);return e.object.width=this.width,e.object.height=this.height,e}}]);var Zm,Km=Qm;function Qm(e,t){var i,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:10,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:10;return(0,oy.default)(this,Qm),(i=Zm.call(this,e,t)).type=\"RectAreaLight\",i.width=n,i.height=r,i}Km.prototype.isRectAreaLight=!0;(0,ly.default)(ev,[{key:\"set\",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}},{key:\"zero\",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:\"getAt\",value:function(e,t){var i=e.x,n=e.y,e=e.z,r=this.coefficients;return t.copy(r[0]).multiplyScalar(.282095),t.addScaledVector(r[1],.488603*n),t.addScaledVector(r[2],.488603*e),t.addScaledVector(r[3],.488603*i),t.addScaledVector(r[4],i*n*1.092548),t.addScaledVector(r[5],n*e*1.092548),t.addScaledVector(r[6],.315392*(3*e*e-1)),t.addScaledVector(r[7],i*e*1.092548),t.addScaledVector(r[8],.546274*(i*i-n*n)),t}},{key:\"getIrradianceAt\",value:function(e,t){var i=e.x,n=e.y,e=e.z,r=this.coefficients;return t.copy(r[0]).multiplyScalar(.886227),t.addScaledVector(r[1],1.023328*n),t.addScaledVector(r[2],1.023328*e),t.addScaledVector(r[3],1.023328*i),t.addScaledVector(r[4],.858086*i*n),t.addScaledVector(r[5],.858086*n*e),t.addScaledVector(r[6],.743125*e*e-.247708),t.addScaledVector(r[7],.858086*i*e),t.addScaledVector(r[8],.429043*(i*i-n*n)),t}},{key:\"add\",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}},{key:\"addScaledSH\",value:function(e,t){for(var i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}},{key:\"scale\",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}},{key:\"lerp\",value:function(e,t){for(var i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}},{key:\"equals\",value:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}},{key:\"copy\",value:function(e){return this.set(e.coefficients)}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}},{key:\"fromArray\",value:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=this.coefficients,n=0;n<9;n++)i[n].fromArray(e,t+3*n);return this}},{key:\"toArray\",value:function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=this.coefficients,n=0;n<9;n++)i[n].toArray(e,t+3*n);return e}}],[{key:\"getBasisAt\",value:function(e,t){var i=e.x,n=e.y,e=e.z;t[0]=.282095,t[1]=.488603*n,t[2]=.488603*e,t[3]=.488603*i,t[4]=1.092548*i*n,t[5]=1.092548*n*e,t[6]=.315392*(3*e*e-1),t[7]=1.092548*i*e,t[8]=.546274*(i*i-n*n)}}]);var $m=ev;function ev(){(0,oy.default)(this,ev),this.coefficients=[];for(var e=0;e<9;e++)this.coefficients.push(new Ye)}$m.prototype.isSphericalHarmonics3=!0;(0,ay.default)(nv,lm),tv=hy(nv),(0,ly.default)(nv,[{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(nv.prototype),\"copy\",this).call(this,e),this.sh.copy(e.sh),this}},{key:\"fromJSON\",value:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}},{key:\"toJSON\",value:function(e){e=(0,ny.default)((0,sy.default)(nv.prototype),\"toJSON\",this).call(this,e);return e.object.sh=this.sh.toArray(),e}}]);var tv,iv=nv;function nv(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new $m,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return(0,oy.default)(this,nv),(t=tv.call(this,void 0,t)).sh=e,t}iv.prototype.isLightProbe=!0;(0,ay.default)(cv,$f),av=hy(cv),(0,ly.default)(cv,[{key:\"load\",value:function(t,i,e,n){var r=this,a=new tm(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,function(e){try{i(r.parse(JSON.parse(e)))}catch(e){n?n(e):console.error(e),r.manager.itemError(t)}},e,n)}},{key:\"parse\",value:function(e){var t=this.textures;function i(e){return void 0===t[e]&&console.warn(\"THREE.MaterialLoader: Undefined texture\",e),t[e]}var n,r=new rf[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=(new S).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.format&&(r.format=e.format),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&(\"number\"==typeof e.vertexColors?r.vertexColors=0<e.vertexColors:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(var a in e.uniforms){var s=e.uniforms[a];switch(r.uniforms[a]={},s.type){case\"t\":r.uniforms[a].value=i(s.value);break;case\"c\":r.uniforms[a].value=(new S).setHex(s.value);break;case\"v2\":r.uniforms[a].value=(new qe).fromArray(s.value);break;case\"v3\":r.uniforms[a].value=(new Ye).fromArray(s.value);break;case\"v4\":r.uniforms[a].value=(new ci).fromArray(s.value);break;case\"m3\":r.uniforms[a].value=(new Kt).fromArray(s.value);break;case\"m4\":r.uniforms[a].value=(new Re).fromArray(s.value);break;default:r.uniforms[a].value=s.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var o in e.extensions)r.extensions[o]=e.extensions[o];return void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=i(e.map)),void 0!==e.matcap&&(r.matcap=i(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=i(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=i(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=i(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale&&(n=e.normalScale,!1===Array.isArray(n)&&(n=[n,n]),r.normalScale=(new qe).fromArray(n)),void 0!==e.displacementMap&&(r.displacementMap=i(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=i(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=i(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=i(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=i(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=i(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=i(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=i(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=i(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=i(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=i(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=i(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new qe).fromArray(e.clearcoatNormalScale)),void 0!==e.transmissionMap&&(r.transmissionMap=i(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=i(e.thicknessMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=i(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}},{key:\"setTextures\",value:function(e){return this.textures=e,this}}]);var rv,av,sv=cv,ov=((0,ly.default)(uv,null,[{key:\"decodeText\",value:function(e){if(\"undefined\"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t=\"\",i=0,n=e.length;i<n;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch(e){return t}}},{key:\"extractUrlBase\",value:function(e){var t=e.lastIndexOf(\"/\");return-1===t?\"./\":e.substr(0,t+1)}},{key:\"resolveURL\",value:function(e,t){return\"string\"!=typeof e||\"\"===e?\"\":(/^https?:\\/\\//i.test(t)&&/^\\//.test(e)&&(t=t.replace(/(^https?:\\/\\/[^\\/]+).*/i,\"$1\")),/^(https?:)?\\/\\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}]),uv),lv=((0,ay.default)(hv,R),rv=hy(hv),(0,ly.default)(hv,[{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(hv.prototype),\"copy\",this).call(this,e),this.instanceCount=e.instanceCount,this}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}},{key:\"toJSON\",value:function(){var e=(0,ny.default)((0,sy.default)(hv.prototype),\"toJSON\",this).call(this,this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}]),hv);function hv(){var e;return(0,oy.default)(this,hv),(e=rv.call(this)).type=\"InstancedBufferGeometry\",e.instanceCount=1/0,e}function uv(){(0,oy.default)(this,uv)}function cv(e){return(0,oy.default)(this,cv),(e=av.call(this,e)).textures={},e}lv.prototype.isInstancedBufferGeometry=!0;(0,ay.default)(Tv,$f),yv=hy(Tv),(0,ly.default)(Tv,[{key:\"load\",value:function(t,i,e,n){var r=this,a=new tm(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,function(e){try{i(r.parse(JSON.parse(e)))}catch(e){n?n(e):console.error(e),r.manager.itemError(t)}},e,n)}},{key:\"parse\",value:function(e){var r={},a={};function u(i,e){if(void 0!==r[e])return r[e];var t=i.interleavedBuffers[e],n=function(e){if(void 0!==a[e])return a[e];var t=i.arrayBuffers[e],t=new Uint32Array(t).buffer;return a[e]=t}(t.buffer),n=ii(t.type,n),n=new fh(n,t.stride);return n.uuid=t.uuid,r[e]=n}var c,t=new(e.isInstancedBufferGeometry?lv:R),i=e.data.index,d=(void 0!==i&&(i=ii(i.type,i.array),t.setIndex(new lr(i,1))),e.data.attributes);for(c in d){var n,s=d[c],o=void 0;o=s.isInterleavedBufferAttribute?(n=u(e.data,s.data),new gh(n,s.itemSize,s.offset,s.normalized)):(n=ii(s.type,s.array),new(s.isInstancedBufferAttribute?lu:lr)(n,s.itemSize,s.normalized)),void 0!==s.name&&(o.name=s.name),void 0!==s.usage&&o.setUsage(s.usage),void 0!==s.updateRange&&(o.updateRange.offset=s.updateRange.offset,o.updateRange.count=s.updateRange.count),t.setAttribute(c,o)}var p=e.data.morphAttributes;if(p)for(var f in p){for(var m=p[f],v=[],g=0,y=m.length;g<y;g++){var l,h=m[g],_=void 0;_=h.isInterleavedBufferAttribute?(l=u(e.data,h.data),new gh(l,h.itemSize,h.offset,h.normalized)):(l=ii(h.type,h.array),new lr(l,h.itemSize,h.normalized)),void 0!==h.name&&(_.name=h.name),v.push(_)}t.morphAttributes[f]=v}e.data.morphTargetsRelative&&(t.morphTargetsRelative=!0);var x=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==x)for(var b=0,M=x.length;b!==M;++b){var w=x[b];t.addGroup(w.start,w.count,w.materialIndex)}var S,i=e.data.boundingSphere;return void 0!==i&&(S=new Ye,void 0!==i.center&&S.fromArray(i.center),t.boundingSphere=new qi(S,i.radius)),e.name&&(t.name=e.name),e.userData&&(t.userData=e.userData),t}}]);var dv,pv,fv,mv,vv,gv,yv,_v=Tv,Em=((0,ay.default)(Ev,$f),gv=hy(Ev),(0,ly.default)(Ev,[{key:\"load\",value:function(i,n,e,r){var a=this,t=\"\"===this.path?ov.extractUrlBase(i):this.path,t=(this.resourcePath=this.resourcePath||t,new tm(this.manager));t.setPath(this.path),t.setRequestHeader(this.requestHeader),t.setWithCredentials(this.withCredentials),t.load(i,function(e){var t=null;try{t=JSON.parse(e)}catch(e){return void 0!==r&&r(e),void console.error(\"THREE:ObjectLoader: Can't parse \"+i+\".\",e.message)}e=t.metadata;void 0!==e&&void 0!==e.type&&\"geometry\"!==e.type.toLowerCase()?a.parse(t,n):console.error(\"THREE.ObjectLoader: Can't load \"+i)},e,r)}},{key:\"loadAsync\",value:(vv=(0,uy.default)(iy.default.mark(function e(t,i){var n,r,a,s;return iy.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=\"\"===(n=this).path?ov.extractUrlBase(t):this.path,this.resourcePath=this.resourcePath||r,(r=new tm(this.manager)).setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),e.next=9,r.loadAsync(t,i);case 9:if(r=e.sent,a=JSON.parse(r),void 0===(s=a.metadata)||void 0===s.type||\"geometry\"===s.type.toLowerCase())throw new Error(\"THREE.ObjectLoader: Can't load \"+t);e.next=14;break;case 14:return e.next=16,n.parseAsync(a);case 16:return e.abrupt(\"return\",e.sent);case 17:case\"end\":return e.stop()}},e,this)})),function(e,t){return vv.apply(this,arguments)})},{key:\"parse\",value:function(e,t){var i=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),n=this.parseGeometries(e.geometries,n),r=this.parseImages(e.images,function(){void 0!==t&&t(o)}),a=this.parseTextures(e.textures,r),s=this.parseMaterials(e.materials,a),o=this.parseObject(e.object,n,s,a,i),n=this.parseSkeletons(e.skeletons,o);if(this.bindSkeletons(o,n),void 0!==t){var l,h=!1;for(l in r)if(r[l]instanceof HTMLImageElement){h=!0;break}!1===h&&t(o)}return o}},{key:\"parseAsync\",value:(mv=(0,uy.default)(iy.default.mark(function e(t){var i,n,r,a;return iy.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.parseAnimations(t.animations),n=this.parseShapes(t.shapes),n=this.parseGeometries(t.geometries,n),e.next=5,this.parseImagesAsync(t.images);case 5:return a=e.sent,a=this.parseTextures(t.textures,a),r=this.parseMaterials(t.materials,a),r=this.parseObject(t.object,n,r,a,i),a=this.parseSkeletons(t.skeletons,r),this.bindSkeletons(r,a),e.abrupt(\"return\",r);case 12:case\"end\":return e.stop()}},e,this)})),function(e){return mv.apply(this,arguments)})},{key:\"parseShapes\",value:function(e){var t={};if(void 0!==e)for(var i=0,n=e.length;i<n;i++){var r=(new bd).fromJSON(e[i]);t[r.uuid]=r}return t}},{key:\"parseSkeletons\",value:function(e,t){var i={},n={};if(t.traverse(function(e){e.isBone&&(n[e.uuid]=e)}),void 0!==e)for(var r=0,a=e.length;r<a;r++){var s=(new ou).fromJSON(e[r],n);i[s.uuid]=s}return i}},{key:\"parseGeometries\",value:function(e,t){var i={};if(void 0!==e)for(var n=new _v,r=0,a=e.length;r<a;r++){var s=void 0,o=e[r];switch(o.type){case\"BufferGeometry\":case\"InstancedBufferGeometry\":s=n.parse(o);break;case\"Geometry\":console.error(\"THREE.ObjectLoader: The legacy Geometry type is no longer supported.\");break;default:o.type in Lp?s=Lp[o.type].fromJSON(o,t):console.warn('THREE.ObjectLoader: Unsupported geometry type \"'.concat(o.type,'\"'))}s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),!0===s.isBufferGeometry&&void 0!==o.userData&&(s.userData=o.userData),i[o.uuid]=s}return i}},{key:\"parseMaterials\",value:function(e,t){var i={},n={};if(void 0!==e){var r=new sv;r.setTextures(t);for(var a=0,u=e.length;a<u;a++){var s=e[a];if(\"MultiMaterial\"===s.type){for(var o=[],l=0;l<s.materials.length;l++){var h=s.materials[l];void 0===i[h.uuid]&&(i[h.uuid]=r.parse(h)),o.push(i[h.uuid])}n[s.uuid]=o}else void 0===i[s.uuid]&&(i[s.uuid]=r.parse(s)),n[s.uuid]=i[s.uuid]}}return n}},{key:\"parseAnimations\",value:function(e){var t={};if(void 0!==e)for(var i=0;i<e.length;i++){var n=e[i],n=zf.parse(n);t[n.uuid]=n}return t}},{key:\"parseImages\",value:function(e,t){var n,r=this,i={};function u(e){var t,i;return\"string\"==typeof e?(i=/^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test(t=e)?t:r.resourcePath+t,r.manager.itemStart(i),n.load(i,function(){r.manager.itemEnd(i)},void 0,function(){r.manager.itemError(i),r.manager.itemEnd(i)})):e.data?{data:ii(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&0<e.length){t=new Kf(t);(n=new rm(t)).setCrossOrigin(this.crossOrigin);for(var a=0,c=e.length;a<c;a++){var s=e[a],o=s.url;if(Array.isArray(o)){i[s.uuid]=[];for(var l=0,d=o.length;l<d;l++){var h=u(o[l]);null!==h&&(h instanceof HTMLImageElement?i[s.uuid].push(h):i[s.uuid].push(new iu(h.data,h.width,h.height)))}}else{var p=u(s.url);null!==p&&(i[s.uuid]=p)}}}return i}},{key:\"parseImagesAsync\",value:(fv=(0,uy.default)(iy.default.mark(function e(t){var n,i,c,r,a,s,d,o,l,h,p,u,f;return iy.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=function(){return(a=(0,uy.default)(iy.default.mark(function e(t){var i;return iy.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(\"string\"==typeof t)return i=/^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test(i=t)?i:n.resourcePath+i,e.next=5,c.loadAsync(i);e.next=8;break;case 5:return e.abrupt(\"return\",e.sent);case 8:if(t.data)return e.abrupt(\"return\",{data:ii(t.type,t.data),width:t.width,height:t.height});e.next=12;break;case 12:return e.abrupt(\"return\",null);case 13:case\"end\":return e.stop()}},e)}))).apply(this,arguments)},r=function(e){return a.apply(this,arguments)},n=this,i={},!(void 0!==t&&0<t.length)){e.next=32;break}(c=new rm(this.manager)).setCrossOrigin(this.crossOrigin),s=0,d=t.length;case 8:if(!(s<d)){e.next=32;break}if(o=t[s],l=o.url,!Array.isArray(l)){e.next=25;break}i[o.uuid]=[],h=0,p=l.length;case 14:if(h<p)return u=l[h],e.next=18,r(u);e.next=23;break;case 18:null!==(u=e.sent)&&(u instanceof HTMLImageElement?i[o.uuid].push(u):i[o.uuid].push(new iu(u.data,u.width,u.height)));case 20:h++,e.next=14;break;case 23:e.next=29;break;case 25:return e.next=27,r(o.url);case 27:null!==(f=e.sent)&&(i[o.uuid]=f);case 29:s++,e.next=8;break;case 32:return e.abrupt(\"return\",i);case 33:case\"end\":return e.stop()}},e,this)})),function(e){return fv.apply(this,arguments)})},{key:\"parseTextures\",value:function(e,t){function i(e,t){return\"number\"==typeof e?e:(console.warn(\"THREE.ObjectLoader.parseTexture: Constant should be in numeric form.\",e),t[e])}var n={};if(void 0!==e)for(var r=0,a=e.length;r<a;r++){var s=e[r],o=(void 0===s.image&&console.warn('THREE.ObjectLoader: No \"image\" specified for',s.uuid),void 0===t[s.image]&&console.warn(\"THREE.ObjectLoader: Undefined image\",s.image),void 0),l=t[s.image];Array.isArray(l)?(o=new Da(l),6===l.length&&(o.needsUpdate=!0)):(o=l&&l.data?new iu(l.data,l.width,l.height):new oi(l),l&&(o.needsUpdate=!0)),o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),void 0!==s.mapping&&(o.mapping=i(s.mapping,xv)),void 0!==s.offset&&o.offset.fromArray(s.offset),void 0!==s.repeat&&o.repeat.fromArray(s.repeat),void 0!==s.center&&o.center.fromArray(s.center),void 0!==s.rotation&&(o.rotation=s.rotation),void 0!==s.wrap&&(o.wrapS=i(s.wrap[0],bv),o.wrapT=i(s.wrap[1],bv)),void 0!==s.format&&(o.format=s.format),void 0!==s.type&&(o.type=s.type),void 0!==s.encoding&&(o.encoding=s.encoding),void 0!==s.minFilter&&(o.minFilter=i(s.minFilter,Mv)),void 0!==s.magFilter&&(o.magFilter=i(s.magFilter,Mv)),void 0!==s.anisotropy&&(o.anisotropy=s.anisotropy),void 0!==s.flipY&&(o.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(o.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(o.unpackAlignment=s.unpackAlignment),void 0!==s.userData&&(o.userData=s.userData),n[s.uuid]=o}return n}},{key:\"parseObject\",value:function(e,t,a,i,u){var n;function r(e){return void 0===t[e]&&console.warn(\"THREE.ObjectLoader: Undefined geometry\",e),t[e]}function s(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],i=0,n=e.length;i<n;i++){var r=e[i];void 0===a[r]&&console.warn(\"THREE.ObjectLoader: Undefined material\",r),t.push(a[r])}return t}return void 0===a[e]&&console.warn(\"THREE.ObjectLoader: Undefined material\",e),a[e]}}function c(e){return void 0===i[e]&&console.warn(\"THREE.ObjectLoader: Undefined texture\",e),i[e]}switch(e.type){case\"Scene\":n=new dh,void 0!==e.background&&(Number.isInteger(e.background)?n.background=new S(e.background):n.background=c(e.background)),void 0!==e.environment&&(n.environment=c(e.environment)),void 0!==e.fog&&(\"Fog\"===e.fog.type?n.fog=new hh(e.fog.color,e.fog.near,e.fog.far):\"FogExp2\"===e.fog.type&&(n.fog=new oh(e.fog.color,e.fog.density)));break;case\"PerspectiveCamera\":n=new ka(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(n.focus=e.focus),void 0!==e.zoom&&(n.zoom=e.zoom),void 0!==e.filmGauge&&(n.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(n.filmOffset=e.filmOffset),void 0!==e.view&&(n.view=Object.assign({},e.view));break;case\"OrthographicCamera\":n=new os(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(n.zoom=e.zoom),void 0!==e.view&&(n.view=Object.assign({},e.view));break;case\"AmbientLight\":n=new Ym(e.color,e.intensity);break;case\"DirectionalLight\":n=new jm(e.color,e.intensity);break;case\"PointLight\":n=new Bm(e.color,e.intensity,e.distance,e.decay);break;case\"RectAreaLight\":n=new Km(e.color,e.intensity,e.width,e.height);break;case\"SpotLight\":n=new Lm(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case\"HemisphereLight\":n=new _m(e.color,e.groundColor,e.intensity);break;case\"LightProbe\":n=(new iv).fromJSON(e);break;case\"SkinnedMesh\":o=r(e.geometry),l=s(e.material),n=new Jh(o,l),void 0!==e.bindMode&&(n.bindMode=e.bindMode),void 0!==e.bindMatrix&&n.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(n.skeleton=e.skeleton);break;case\"Mesh\":o=r(e.geometry),l=s(e.material),n=new da(o,l);break;case\"InstancedMesh\":var o=r(e.geometry),l=s(e.material),d=e.count,p=e.instanceMatrix,h=e.instanceColor;(n=new vu(o,l,d)).instanceMatrix=new lu(new Float32Array(p.array),16),void 0!==h&&(n.instanceColor=new lu(new Float32Array(h.array),h.itemSize));break;case\"LOD\":n=new Vh;break;case\"Line\":n=new Au(r(e.geometry),s(e.material));break;case\"LineLoop\":n=new Fu(r(e.geometry),s(e.material));break;case\"LineSegments\":n=new Pu(r(e.geometry),s(e.material));break;case\"PointCloud\":case\"Points\":n=new ju(r(e.geometry),s(e.material));break;case\"Sprite\":n=new Nh(s(e.material));break;case\"Group\":n=new Xl;break;case\"Bone\":n=new $h;break;default:n=new w}if(n.uuid=e.uuid,void 0!==e.name&&(n.name=e.name),void 0!==e.matrix?(n.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(n.matrixAutoUpdate=e.matrixAutoUpdate),n.matrixAutoUpdate&&n.matrix.decompose(n.position,n.quaternion,n.scale)):(void 0!==e.position&&n.position.fromArray(e.position),void 0!==e.rotation&&n.rotation.fromArray(e.rotation),void 0!==e.quaternion&&n.quaternion.fromArray(e.quaternion),void 0!==e.scale&&n.scale.fromArray(e.scale)),void 0!==e.castShadow&&(n.castShadow=e.castShadow),void 0!==e.receiveShadow&&(n.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(n.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(n.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(n.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&n.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(n.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(n.visible=e.visible),void 0!==e.frustumCulled&&(n.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(n.renderOrder=e.renderOrder),void 0!==e.userData&&(n.userData=e.userData),void 0!==e.layers&&(n.layers.mask=e.layers),void 0!==e.children)for(var f=e.children,m=0;m<f.length;m++)n.add(this.parseObject(f[m],t,a,i,u));if(void 0!==e.animations)for(var v=e.animations,g=0;g<v.length;g++){var y=v[g];n.animations.push(u[y])}if(\"LOD\"===e.type){void 0!==e.autoUpdate&&(n.autoUpdate=e.autoUpdate);for(var _=e.levels,x=0;x<_.length;x++){var b=_[x],M=n.getObjectByProperty(\"uuid\",b.object);void 0!==M&&n.addLevel(M,b.distance)}}return n}},{key:\"bindSkeletons\",value:function(e,i){0!==Object.keys(i).length&&e.traverse(function(e){var t;!0===e.isSkinnedMesh&&void 0!==e.skeleton&&(void 0===(t=i[e.skeleton])?console.warn(\"THREE.ObjectLoader: No skeleton found with UUID:\",e.skeleton):e.bind(t,e.bindMatrix))})}},{key:\"setTexturePath\",value:function(e){return console.warn(\"THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath().\"),this.setResourcePath(e)}}]),Ev),xv={UVMapping:300,CubeReflectionMapping:T,CubeRefractionMapping:A,EquirectangularReflectionMapping:l,EquirectangularRefractionMapping:h,CubeUVReflectionMapping:D,CubeUVRefractionMapping:I},bv={RepeatWrapping:Me,ClampToEdgeWrapping:Fe,MirroredRepeatWrapping:we},Mv={NearestFilter:Ne,NearestMipmapNearestFilter:Se,NearestMipmapLinearFilter:Ee,LinearFilter:Te,LinearMipmapNearestFilter:Ae,LinearMipmapLinearFilter:Oe},wv=((0,ay.default)(Sv,$f),pv=hy(Sv),(0,ly.default)(Sv,[{key:\"setOptions\",value:function(e){return this.options=e,this}},{key:\"load\",value:function(t,i,e,n){void 0===t&&(t=\"\"),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=Zf.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout(function(){i&&i(a),r.manager.itemEnd(t)},0),a;var s={};s.credentials=\"anonymous\"===this.crossOrigin?\"same-origin\":\"include\",s.headers=this.requestHeader,fetch(t,s).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,Object.assign(r.options,{colorSpaceConversion:\"none\"}))}).then(function(e){Zf.add(t,e),i&&i(e),r.manager.itemEnd(t)}).catch(function(e){n&&n(e),r.manager.itemError(t),r.manager.itemEnd(t)}),r.manager.itemStart(t)}}]),Sv);function Sv(e){return(0,oy.default)(this,Sv),e=pv.call(this,e),\"undefined\"==typeof createImageBitmap&&console.warn(\"THREE.ImageBitmapLoader: createImageBitmap() not supported.\"),\"undefined\"==typeof fetch&&console.warn(\"THREE.ImageBitmapLoader: fetch() not supported.\"),e.options={premultiplyAlpha:\"none\"},e}function Ev(e){return(0,oy.default)(this,Ev),gv.call(this,e)}function Tv(e){return(0,oy.default)(this,Tv),yv.call(this,e)}wv.prototype.isImageBitmapLoader=!0;var Av,kv,Rv={getContext:function(){return dv=void 0===dv?new(window.AudioContext||window.webkitAudioContext):dv},setContext:function(e){dv=e}},Lv=((0,ay.default)(Dv,$f),kv=hy(Dv),(0,ly.default)(Dv,[{key:\"load\",value:function(i,n,e,r){var a=this,t=new tm(this.manager);t.setResponseType(\"arraybuffer\"),t.setPath(this.path),t.setRequestHeader(this.requestHeader),t.setWithCredentials(this.withCredentials),t.load(i,function(e){try{var t=e.slice(0);Rv.getContext().decodeAudioData(t,function(e){n(e)})}catch(e){r?r(e):console.error(e),a.manager.itemError(i)}},e,r)}}]),Dv),Cv=((0,ay.default)(Pv,iv),Av=hy(Pv),(0,ly.default)(Pv));function Pv(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,n=((0,oy.default)(this,Pv),i=Av.call(this,void 0,i),(new S).set(e)),r=(new S).set(t),n=new Ye(n.r,n.g,n.b),r=new Ye(r.r,r.g,r.b),a=Math.sqrt(Math.PI),s=a*Math.sqrt(.75);return i.sh.coefficients[0].copy(n).add(r).multiplyScalar(a),i.sh.coefficients[1].copy(n).sub(r).multiplyScalar(s),i}function Dv(e){return(0,oy.default)(this,Dv),kv.call(this,e)}Cv.prototype.isHemisphereLightProbe=!0;(0,ay.default)(Nv,iv),Iv=hy(Nv);var Iv,Fv=(0,ly.default)(Nv);function Nv(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,i=((0,oy.default)(this,Nv),t=Iv.call(this,void 0,t),(new S).set(e));return t.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI)),t}Fv.prototype.isAmbientLightProbe=!0;var Ov=new Re,Uv=new Re,Bv=new Re,zv=((0,ly.default)(Vv,[{key:\"update\",value:function(e){var t,i,n,r,a=this._cache;a.focus===e.focus&&a.fov===e.fov&&a.aspect===e.aspect*this.aspect&&a.near===e.near&&a.far===e.far&&a.zoom===e.zoom&&a.eyeSep===this.eyeSep||(a.focus=e.focus,a.fov=e.fov,a.aspect=e.aspect*this.aspect,a.near=e.near,a.far=e.far,a.zoom=e.zoom,a.eyeSep=this.eyeSep,Bv.copy(e.projectionMatrix),n=(i=a.eyeSep/2)*a.near/a.focus,r=a.near*Math.tan(zt*a.fov*.5)/a.zoom,Uv.elements[12]=-i,Ov.elements[12]=i,i=-r*a.aspect+n,t=r*a.aspect+n,Bv.elements[0]=2*a.near/(t-i),Bv.elements[8]=(t+i)/(t-i),this.cameraL.projectionMatrix.copy(Bv),i=-r*a.aspect-n,t=r*a.aspect-n,Bv.elements[0]=2*a.near/(t-i),Bv.elements[8]=(t+i)/(t-i),this.cameraR.projectionMatrix.copy(Bv)),this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Uv),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Ov)}}]),Vv),Hv=((0,ly.default)(Gv,[{key:\"start\",value:function(){this.startTime=Wv(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:\"stop\",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:\"getElapsedTime\",value:function(){return this.getDelta(),this.elapsedTime}},{key:\"getDelta\",value:function(){var e,t=0;return this.autoStart&&!this.running?(this.start(),0):(this.running&&(t=((e=Wv())-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t),t)}}]),Gv);function Gv(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];(0,oy.default)(this,Gv),this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Vv(){(0,oy.default)(this,Vv),this.type=\"StereoCamera\",this.aspect=1,this.eyeSep=.064,this.cameraL=new ka,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ka,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function Wv(){return(\"undefined\"==typeof performance?Date:performance).now()}var jv,Xv,qv,Yv=new Ye,Jv=new Mi,Zv=new Ye,Kv=new Ye,Qv=((0,ay.default)(bg,w),qv=hy(bg),(0,ly.default)(bg,[{key:\"getInput\",value:function(){return this.gain}},{key:\"removeFilter\",value:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}},{key:\"getFilter\",value:function(){return this.filter}},{key:\"setFilter\",value:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}},{key:\"getMasterVolume\",value:function(){return this.gain.gain.value}},{key:\"setMasterVolume\",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}},{key:\"updateMatrixWorld\",value:function(e){(0,ny.default)((0,sy.default)(bg.prototype),\"updateMatrixWorld\",this).call(this,e);var t,e=this.context.listener,i=this.up;this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Yv,Jv,Zv),Kv.set(0,0,-1).applyQuaternion(Jv),e.positionX?(t=this.context.currentTime+this.timeDelta,e.positionX.linearRampToValueAtTime(Yv.x,t),e.positionY.linearRampToValueAtTime(Yv.y,t),e.positionZ.linearRampToValueAtTime(Yv.z,t),e.forwardX.linearRampToValueAtTime(Kv.x,t),e.forwardY.linearRampToValueAtTime(Kv.y,t),e.forwardZ.linearRampToValueAtTime(Kv.z,t),e.upX.linearRampToValueAtTime(i.x,t),e.upY.linearRampToValueAtTime(i.y,t),e.upZ.linearRampToValueAtTime(i.z,t)):(e.setPosition(Yv.x,Yv.y,Yv.z),e.setOrientation(Kv.x,Kv.y,Kv.z,i.x,i.y,i.z))}}]),bg),$v=((0,ay.default)(xg,w),Xv=hy(xg),(0,ly.default)(xg,[{key:\"getOutput\",value:function(){return this.gain}},{key:\"setNodeSource\",value:function(e){return this.hasPlaybackControl=!1,this.sourceType=\"audioNode\",this.source=e,this.connect(),this}},{key:\"setMediaElementSource\",value:function(e){return this.hasPlaybackControl=!1,this.sourceType=\"mediaNode\",this.source=this.context.createMediaElementSource(e),this.connect(),this}},{key:\"setMediaStreamSource\",value:function(e){return this.hasPlaybackControl=!1,this.sourceType=\"mediaStreamNode\",this.source=this.context.createMediaStreamSource(e),this.connect(),this}},{key:\"setBuffer\",value:function(e){return this.buffer=e,this.sourceType=\"buffer\",this.autoplay&&this.play(),this}},{key:\"play\",value:function(){var e;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl)return this._startedAt=this.context.currentTime+(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0),(e=this.context.createBufferSource()).buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect();console.warn(\"THREE.Audio: this Audio has no playback control.\")}else console.warn(\"THREE.Audio: Audio is already playing.\")}},{key:\"pause\",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn(\"THREE.Audio: this Audio has no playback control.\")}},{key:\"stop\",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn(\"THREE.Audio: this Audio has no playback control.\")}},{key:\"connect\",value:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:\"disconnect\",value:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:\"getFilters\",value:function(){return this.filters}},{key:\"setFilters\",value:function(e){return e=e||[],!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}},{key:\"setDetune\",value:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:\"getDetune\",value:function(){return this.detune}},{key:\"getFilter\",value:function(){return this.getFilters()[0]}},{key:\"setFilter\",value:function(e){return this.setFilters(e?[e]:[])}},{key:\"setPlaybackRate\",value:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn(\"THREE.Audio: this Audio has no playback control.\")}},{key:\"getPlaybackRate\",value:function(){return this.playbackRate}},{key:\"onEnded\",value:function(){this.isPlaying=!1}},{key:\"getLoop\",value:function(){return!1===this.hasPlaybackControl?(console.warn(\"THREE.Audio: this Audio has no playback control.\"),!1):this.loop}},{key:\"setLoop\",value:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn(\"THREE.Audio: this Audio has no playback control.\")}},{key:\"setLoopStart\",value:function(e){return this.loopStart=e,this}},{key:\"setLoopEnd\",value:function(e){return this.loopEnd=e,this}},{key:\"getVolume\",value:function(){return this.gain.gain.value}},{key:\"setVolume\",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}]),xg),eg=new Ye,tg=new Mi,ig=new Ye,ng=new Ye,rg=((0,ay.default)(_g,$v),jv=hy(_g),(0,ly.default)(_g,[{key:\"getOutput\",value:function(){return this.panner}},{key:\"getRefDistance\",value:function(){return this.panner.refDistance}},{key:\"setRefDistance\",value:function(e){return this.panner.refDistance=e,this}},{key:\"getRolloffFactor\",value:function(){return this.panner.rolloffFactor}},{key:\"setRolloffFactor\",value:function(e){return this.panner.rolloffFactor=e,this}},{key:\"getDistanceModel\",value:function(){return this.panner.distanceModel}},{key:\"setDistanceModel\",value:function(e){return this.panner.distanceModel=e,this}},{key:\"getMaxDistance\",value:function(){return this.panner.maxDistance}},{key:\"setMaxDistance\",value:function(e){return this.panner.maxDistance=e,this}},{key:\"setDirectionalCone\",value:function(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}},{key:\"updateMatrixWorld\",value:function(e){var t;(0,ny.default)((0,sy.default)(_g.prototype),\"updateMatrixWorld\",this).call(this,e),!0===this.hasPlaybackControl&&!1===this.isPlaying||(this.matrixWorld.decompose(eg,tg,ig),ng.set(0,0,1).applyQuaternion(tg),(e=this.panner).positionX?(t=this.context.currentTime+this.listener.timeDelta,e.positionX.linearRampToValueAtTime(eg.x,t),e.positionY.linearRampToValueAtTime(eg.y,t),e.positionZ.linearRampToValueAtTime(eg.z,t),e.orientationX.linearRampToValueAtTime(ng.x,t),e.orientationY.linearRampToValueAtTime(ng.y,t),e.orientationZ.linearRampToValueAtTime(ng.z,t)):(e.setPosition(eg.x,eg.y,eg.z),e.setOrientation(ng.x,ng.y,ng.z)))}}]),_g),ag=((0,ly.default)(yg,[{key:\"getFrequencyData\",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:\"getAverageFrequency\",value:function(){for(var e=0,t=this.getFrequencyData(),i=0;i<t.length;i++)e+=t[i];return e/t.length}}]),yg),sg=((0,ly.default)(gg,[{key:\"accumulate\",value:function(e,t){var i=this.buffer,n=this.valueSize,r=e*n+n,e=this.cumulativeWeight;if(0===e){for(var a=0;a!==n;++a)i[r+a]=i[a];e=t}else{t=t/(e+=t);this._mixBufferRegion(i,r,0,t,n)}this.cumulativeWeight=e}},{key:\"accumulateAdditive\",value:function(e){var t=this.buffer,i=this.valueSize,n=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,n,0,e,i),this.cumulativeWeightAdditive+=e}},{key:\"apply\",value:function(e){var t,i=this.valueSize,n=this.buffer,r=e*i+i,e=this.cumulativeWeight,a=this.cumulativeWeightAdditive,s=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,e<1&&(t=i*this._origIndex,this._mixBufferRegion(n,r,t,1-e,i)),0<a&&this._mixBufferRegionAdditive(n,r,this._addIndex*i,1,i);for(var o=i,l=i+i;o!==l;++o)if(n[o]!==n[o+i]){s.setValue(n,r);break}}},{key:\"saveOriginalState\",value:function(){var e=this.binding,t=this.buffer,i=this.valueSize,n=i*this._origIndex;e.getValue(t,n);for(var r=i,a=n;r!==a;++r)t[r]=t[n+r%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:\"restoreOriginalState\",value:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)}},{key:\"_setAdditiveIdentityNumeric\",value:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,i=e;i<t;i++)this.buffer[i]=0}},{key:\"_setAdditiveIdentityQuaternion\",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:\"_setAdditiveIdentityOther\",value:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}},{key:\"_select\",value:function(e,t,i,n,r){if(.5<=n)for(var a=0;a!==r;++a)e[t+a]=e[i+a]}},{key:\"_slerp\",value:function(e,t,i,n){Mi.slerpFlat(e,t,e,t,e,i,n)}},{key:\"_slerpAdditive\",value:function(e,t,i,n,r){r=this._workIndex*r;Mi.multiplyQuaternionsFlat(e,r,e,t,e,i),Mi.slerpFlat(e,t,e,t,e,r,n)}},{key:\"_lerp\",value:function(e,t,i,n,r){for(var a=1-n,s=0;s!==r;++s){var o=t+s;e[o]=e[o]*a+e[i+s]*n}}},{key:\"_lerpAdditive\",value:function(e,t,i,n,r){for(var a=0;a!==r;++a){var s=t+a;e[s]=e[s]+e[i+a]*n}}}]),gg),og=new RegExp(\"[\\\\[\\\\]\\\\.:\\\\/]\",\"g\"),lg=\"[^\"+\"\\\\[\\\\]\\\\.:\\\\/\".replace(\"\\\\.\",\"\")+\"]\",hg=/((?:WC+[\\/:])*)/.source.replace(\"WC\",\"[^\\\\[\\\\]\\\\.:\\\\/]\"),lg=/(WCOD+)?/.source.replace(\"WCOD\",lg),ug=/(?:\\.(WC+)(?:\\[(.+)\\])?)?/.source.replace(\"WC\",\"[^\\\\[\\\\]\\\\.:\\\\/]\"),cg=/\\.(WC+)(?:\\[(.+)\\])?/.source.replace(\"WC\",\"[^\\\\[\\\\]\\\\.:\\\\/]\"),dg=new RegExp(\"^\"+hg+lg+ug+cg+\"$\"),pg=[\"material\",\"materials\",\"bones\"],hg=((0,ly.default)(vg,[{key:\"getValue\",value:function(e,t){this.bind();var i=this._targetGroup.nCachedObjects_,i=this._bindings[i];void 0!==i&&i.getValue(e,t)}},{key:\"setValue\",value:function(e,t){for(var i=this._bindings,n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n)i[n].setValue(e,t)}},{key:\"bind\",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}},{key:\"unbind\",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}]),vg),fg=((0,ly.default)(mg,[{key:\"_getValue_unavailable\",value:function(){}},{key:\"_setValue_unavailable\",value:function(){}},{key:\"_getValue_direct\",value:function(e,t){e[t]=this.targetObject[this.propertyName]}},{key:\"_getValue_array\",value:function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)e[t++]=i[n]}},{key:\"_getValue_arrayElement\",value:function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}},{key:\"_getValue_toArray\",value:function(e,t){this.resolvedProperty.toArray(e,t)}},{key:\"_setValue_direct\",value:function(e,t){this.targetObject[this.propertyName]=e[t]}},{key:\"_setValue_direct_setNeedsUpdate\",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}},{key:\"_setValue_direct_setMatrixWorldNeedsUpdate\",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:\"_setValue_array\",value:function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=e[t++]}},{key:\"_setValue_array_setNeedsUpdate\",value:function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.needsUpdate=!0}},{key:\"_setValue_array_setMatrixWorldNeedsUpdate\",value:function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:\"_setValue_arrayElement\",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}},{key:\"_setValue_arrayElement_setNeedsUpdate\",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}},{key:\"_setValue_arrayElement_setMatrixWorldNeedsUpdate\",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:\"_setValue_fromArray\",value:function(e,t){this.resolvedProperty.fromArray(e,t)}},{key:\"_setValue_fromArray_setNeedsUpdate\",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}},{key:\"_setValue_fromArray_setMatrixWorldNeedsUpdate\",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:\"_getValue_unbound\",value:function(e,t){this.bind(),this.getValue(e,t)}},{key:\"_setValue_unbound\",value:function(e,t){this.bind(),this.setValue(e,t)}},{key:\"bind\",value:function(){var e=this.node,t=this.parsedPath,i=t.objectName,n=t.propertyName,r=t.propertyIndex;if(e||(e=mg.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(i){var a=t.objectIndex;switch(i){case\"materials\":if(!e.material)return void console.error(\"THREE.PropertyBinding: Can not bind to material as node does not have a material.\",this);if(!e.material.materials)return void console.error(\"THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.\",this);e=e.material.materials;break;case\"bones\":if(!e.skeleton)return void console.error(\"THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.\",this);for(var e=e.skeleton.bones,s=0;s<e.length;s++)if(e[s].name===a){a=s;break}break;default:if(void 0===e[i])return void console.error(\"THREE.PropertyBinding: Can not bind to objectName of node undefined.\",this);e=e[i]}if(void 0!==a){if(void 0===e[a])return void console.error(\"THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.\",this,e);e=e[a]}}var o=e[n];if(void 0!==o){var l=this.Versioning.None,h=(void 0!==(this.targetObject=e).needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate),this.BindingType.Direct);if(void 0!==r){if(\"morphTargetInfluences\"===n){if(!e.geometry)return void console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.\",this);if(!e.geometry.isBufferGeometry)return void console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.\",this);if(!e.geometry.morphAttributes)return void console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.\",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}h=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else void 0!==o.fromArray&&void 0!==o.toArray?(h=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(h=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=n;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][l]}else{r=t.nodeName;console.error(\"THREE.PropertyBinding: Trying to update property for track: \"+r+\".\"+n+\" but it wasn't found.\",e)}}else console.error(\"THREE.PropertyBinding: Trying to update node for track: \"+this.path+\" but it wasn't found.\")}},{key:\"unbind\",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:\"create\",value:function(e,t,i){return new(e&&e.isAnimationObjectGroup?mg.Composite:mg)(e,t,i)}},{key:\"sanitizeNodeName\",value:function(e){return e.replace(/\\s/g,\"_\").replace(og,\"\")}},{key:\"parseTrackName\",value:function(e){var t=dg.exec(e);if(!t)throw new Error(\"PropertyBinding: Cannot parse trackName: \"+e);var i,t={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},n=t.nodeName&&t.nodeName.lastIndexOf(\".\");if(void 0!==n&&-1!==n&&(i=t.nodeName.substring(n+1),-1!==pg.indexOf(i)&&(t.nodeName=t.nodeName.substring(0,n),t.objectName=i)),null===t.propertyName||0===t.propertyName.length)throw new Error(\"PropertyBinding: can not parse propertyName from trackName: \"+e);return t}},{key:\"findNode\",value:function(e,r){if(!r||\"\"===r||\".\"===r||-1===r||r===e.name||r===e.uuid)return e;if(e.skeleton){var t=e.skeleton.getBoneByName(r);if(void 0!==t)return t}if(e.children){t=function e(t){for(var i=0;i<t.length;i++){var n=t[i];if(n.name===r||n.uuid===r)return n;n=e(n.children);if(n)return n}return null}(e.children);if(t)return t}return null}}]),mg);function mg(e,t,i){(0,oy.default)(this,mg),this.path=t,this.parsedPath=i||mg.parseTrackName(t),this.node=mg.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}function vg(e,t,i){(0,oy.default)(this,vg);i=i||fg.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}function gg(e,t,i){var n,r,a;switch((0,oy.default)(this,gg),this.binding=e,this.valueSize=i,t){case\"quaternion\":n=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case\"string\":case\"bool\":n=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:n=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=n,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}function yg(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2048;(0,oy.default)(this,yg),this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function _g(e){return(0,oy.default)(this,_g),(e=jv.call(this,e)).panner=e.context.createPanner(),e.panner.panningModel=\"HRTF\",e.panner.connect(e.gain),e}function xg(e){var t;return(0,oy.default)(this,xg),(t=Xv.call(this)).type=\"Audio\",t.listener=e,t.context=e.context,t.gain=t.context.createGain(),t.gain.connect(e.getInput()),t.autoplay=!1,t.buffer=null,t.detune=0,t.loop=!1,t.loopStart=0,t.loopEnd=0,t.offset=0,t.duration=void 0,t.playbackRate=1,t.isPlaying=!1,t.hasPlaybackControl=!0,t.source=null,t.sourceType=\"empty\",t._startedAt=0,t._progress=0,t._connected=!1,t.filters=[],t}function bg(){var e;return(0,oy.default)(this,bg),(e=qv.call(this)).type=\"AudioListener\",e.context=Rv.getContext(),e.gain=e.context.createGain(),e.gain.connect(e.context.destination),e.filter=null,e.timeDelta=0,e._clock=new Hv,e}fg.Composite=hg,fg.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},fg.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},fg.prototype.GetterByBindingType=[fg.prototype._getValue_direct,fg.prototype._getValue_array,fg.prototype._getValue_arrayElement,fg.prototype._getValue_toArray],fg.prototype.SetterByBindingTypeAndVersioning=[[fg.prototype._setValue_direct,fg.prototype._setValue_direct_setNeedsUpdate,fg.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[fg.prototype._setValue_array,fg.prototype._setValue_array_setNeedsUpdate,fg.prototype._setValue_array_setMatrixWorldNeedsUpdate],[fg.prototype._setValue_arrayElement,fg.prototype._setValue_arrayElement_setNeedsUpdate,fg.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[fg.prototype._setValue_fromArray,fg.prototype._setValue_fromArray_setNeedsUpdate,fg.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];(0,ly.default)(Mg,[{key:\"add\",value:function(){for(var e=this._objects,t=this._indicesByUUID,u=this._paths,c=this._parsedPaths,i=this._bindings,d=i.length,p=void 0,f=e.length,n=this.nCachedObjects_,m=0,v=arguments.length;m!==v;++m){var r=arguments[m],g=r.uuid,a=t[g];if(void 0===a){a=f++,t[g]=a,e.push(r);for(var s=0,y=d;s!==y;++s)i[s].push(new fg(r,u[s],c[s]))}else if(a<n){var p=e[a],o=--n,_=e[o];e[t[_.uuid]=a]=_,e[t[g]=o]=r;for(var l=0,x=d;l!==x;++l){var h=i[l],b=h[o],M=h[a];h[a]=b,void 0===M&&(M=new fg(r,u[l],c[l])),h[o]=M}}else e[a]!==p&&console.error(\"THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.\")}this.nCachedObjects_=n}},{key:\"remove\",value:function(){for(var e=this._objects,t=this._indicesByUUID,i=this._bindings,h=i.length,n=this.nCachedObjects_,r=0,u=arguments.length;r!==u;++r){var c=arguments[r],d=c.uuid,a=t[d];if(void 0!==a&&n<=a){var s=n++,p=e[s];e[t[p.uuid]=a]=p,e[t[d]=s]=c;for(var o=0,f=h;o!==f;++o){var l=i[o],m=l[s],v=l[a];l[a]=m,l[s]=v}}}this.nCachedObjects_=n}},{key:\"uncache\",value:function(){for(var e=this._objects,t=this._indicesByUUID,i=this._bindings,u=i.length,n=this.nCachedObjects_,c=e.length,r=0,d=arguments.length;r!==d;++r){var a=arguments[r].uuid,s=t[a];if(void 0!==s)if(delete t[a],s<n){var o=--n,a=e[o],p=--c,f=e[p];e[t[a.uuid]=s]=a,e[t[f.uuid]=o]=f,e.pop();for(var l=0,m=u;l!==m;++l){var h=i[l],v=h[o],g=h[p];h[s]=v,h[o]=g,h.pop()}}else{var y=--c,a=e[y];0<y&&(t[a.uuid]=s),e[s]=a,e.pop();for(var _=0,x=u;_!==x;++_){var b=i[_];b[s]=b[y],b.pop()}}}this.nCachedObjects_=n}},{key:\"subscribe_\",value:function(e,t){var i=this._bindingsIndicesByPath,n=i[e],r=this._bindings;if(void 0!==n)return r[n];var a=this._paths,s=this._parsedPaths,o=this._objects,u=o.length,c=this.nCachedObjects_,l=new Array(u),n=r.length;i[e]=n,a.push(e),s.push(t),r.push(l);for(var h=c,d=o.length;h!==d;++h){var p=o[h];l[h]=new fg(p,e,t)}return l}},{key:\"unsubscribe_\",value:function(e){var t,i,n,r,a,s=this._bindingsIndicesByPath,o=s[e];void 0!==o&&(t=this._paths,i=this._parsedPaths,a=(n=this._bindings)[r=n.length-1],n[s[e[r]]=o]=a,n.pop(),i[o]=i[r],i.pop(),t[o]=t[r],t.pop())}}]);lg=Mg;function Mg(){(0,oy.default)(this,Mg),this.uuid=Gt(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,i=arguments.length;t!==i;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}lg.prototype.isAnimationObjectGroup=!0;(0,ly.default)(Tg,[{key:\"play\",value:function(){return this._mixer._activateAction(this),this}},{key:\"stop\",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:\"reset\",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:\"isRunning\",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:\"isScheduled\",value:function(){return this._mixer._isActiveAction(this)}},{key:\"startAt\",value:function(e){return this._startTime=e,this}},{key:\"setLoop\",value:function(e,t){return this.loop=e,this.repetitions=t,this}},{key:\"setEffectiveWeight\",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:\"getEffectiveWeight\",value:function(){return this._effectiveWeight}},{key:\"fadeIn\",value:function(e){return this._scheduleFading(e,0,1)}},{key:\"fadeOut\",value:function(e){return this._scheduleFading(e,1,0)}},{key:\"crossFadeFrom\",value:function(e,t,i){var n,r;return e.fadeOut(t),this.fadeIn(t),i&&(r=(i=this._clip.duration)/(n=e._clip.duration),e.warp(1,n/i,t),this.warp(r,1,t)),this}},{key:\"crossFadeTo\",value:function(e,t,i){return e.crossFadeFrom(this,t,i)}},{key:\"stopFading\",value:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:\"setEffectiveTimeScale\",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:\"getEffectiveTimeScale\",value:function(){return this._effectiveTimeScale}},{key:\"setDuration\",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:\"syncWith\",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:\"halt\",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:\"warp\",value:function(e,t,i){var n=this._mixer,r=n.time,a=this.timeScale,s=this._timeScaleInterpolant,n=(null===s&&(s=n._lendControlInterpolant(),this._timeScaleInterpolant=s),s.parameterPositions),s=s.sampleValues;return n[0]=r,n[1]=r+i,s[0]=e/a,s[1]=t/a,this}},{key:\"stopWarping\",value:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:\"getMixer\",value:function(){return this._mixer}},{key:\"getClip\",value:function(){return this._clip}},{key:\"getRoot\",value:function(){return this._localRoot||this._mixer._root}},{key:\"_update\",value:function(e,t,i,u){if(this.enabled){var n=this._startTime;if(null!==n){n=(e-n)*i;if(n<0||0===i)return;this._startTime=null,t=i*n}t*=this._updateTimeScale(e);var r=this._updateTime(t),a=this._updateWeight(e);if(0<a){var s=this._interpolants,o=this._propertyBindings;if(2501===this.blendMode)for(var l=0,c=s.length;l!==c;++l)s[l].evaluate(r),o[l].accumulateAdditive(a);else for(var h=0,d=s.length;h!==d;++h)s[h].evaluate(r),o[h].accumulate(u,a)}}else this._updateWeight(e)}},{key:\"_updateWeight\",value:function(e){var t,i,n=0;return this.enabled&&(n=this.weight,null!==(t=this._weightInterpolant)&&(n*=i=t.evaluate(e)[0],e>t.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1)))),this._effectiveWeight=n}},{key:\"_updateTimeScale\",value:function(e){var t,i=0;return this.paused||(i=this.timeScale,null!==(t=this._timeScaleInterpolant)&&(i*=t.evaluate(e)[0],e>t.parameterPositions[1]&&(this.stopWarping(),0===i?this.paused=!0:this.timeScale=i))),this._effectiveTimeScale=i}},{key:\"_updateTime\",value:function(e){var t,i=this._clip.duration,n=this.loop,r=this.time+e,a=this._loopCount,s=2202===n;if(0===e)return-1!==a&&s&&1==(1&a)?i-r:r;if(2200===n){-1===a&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i<=r)r=i;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:\"finished\",action:this,direction:e<0?-1:1})}}else if(-1===a&&(0<=e?this._setEndings(!(a=0),0===this.repetitions,s):this._setEndings(0===this.repetitions,!0,s)),i<=r||r<0?(r-=i*(n=Math.floor(r/i)),a+=Math.abs(n),(t=this.repetitions-a)<=0?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r=0<e?i:0,this._mixer.dispatchEvent({type:\"finished\",action:this,direction:0<e?1:-1})):(1==t?this._setEndings(t=e<0,!t,s):this._setEndings(!1,!1,s),this._loopCount=a,this.time=r,this._mixer.dispatchEvent({type:\"loop\",action:this,loopDelta:n}))):this.time=r,s&&1==(1&a))return i-r;return r}},{key:\"_setEndings\",value:function(e,t,i){var n=this._interpolantSettings;i?(n.endingStart=2401,n.endingEnd=2401):(n.endingStart=e?this.zeroSlopeAtStart?2401:Lt:2402,n.endingEnd=t?this.zeroSlopeAtEnd?2401:Lt:2402)}},{key:\"_scheduleFading\",value:function(e,t,i){var n=this._mixer,r=n.time,a=this._weightInterpolant,n=(null===a&&(a=n._lendControlInterpolant(),this._weightInterpolant=a),a.parameterPositions),a=a.sampleValues;return n[0]=r,a[0]=t,n[1]=r+e,a[1]=i,this}}]);var wg,Sg=Tg,ug=((0,ay.default)(Eg,r),wg=hy(Eg),(0,ly.default)(Eg,[{key:\"_bindAction\",value:function(e,t){var i=e._localRoot||this._root,u=e._clip.tracks,c=u.length,n=e._propertyBindings,d=e._interpolants,r=i.uuid,e=this._bindingsByRootAndName,a=e[r];void 0===a&&(e[r]=a={});for(var s=0;s!==c;++s){var o=u[s],l=o.name,h=a[l];if(void 0!==h)n[s]=h;else{if(void 0!==(h=n[s])){null===h._cacheIndex&&(++h.referenceCount,this._addInactiveBinding(h,r,l));continue}var p=t&&t._propertyBindings[s].binding.parsedPath;++(h=new sg(fg.create(i,l,p),o.ValueTypeName,o.getValueSize())).referenceCount,this._addInactiveBinding(h,r,l),n[s]=h}d[s].resultBuffer=h.buffer}}},{key:\"_activateAction\",value:function(e){if(!this._isActiveAction(e)){var t,i,n;null===e._cacheIndex&&(t=(e._localRoot||this._root).uuid,i=e._clip.uuid,n=this._actionsByClip[i],this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,i,t));for(var r=e._propertyBindings,a=0,s=r.length;a!==s;++a){var o=r[a];0==o.useCount++&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}},{key:\"_deactivateAction\",value:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,i=0,n=t.length;i!==n;++i){var r=t[i];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}}},{key:\"_initMemoryManager\",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}},{key:\"_isActiveAction\",value:function(e){e=e._cacheIndex;return null!==e&&e<this._nActiveActions}},{key:\"_addInactiveAction\",value:function(e,t,i){var n=this._actions,r=this._actionsByClip,a=r[t];void 0===a?(a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a):(r=a.knownActions,e._byClipCacheIndex=r.length,r.push(e)),e._cacheIndex=n.length,n.push(e),a.actionByRoot[i]=e}},{key:\"_removeInactiveAction\",value:function(e){var t=this._actions,i=t[t.length-1],n=e._cacheIndex,n=(t[i._cacheIndex=n]=i,t.pop(),e._cacheIndex=null,e._clip.uuid),i=this._actionsByClip,t=i[n],r=t.knownActions,a=r[r.length-1],s=e._byClipCacheIndex;r[a._byClipCacheIndex=s]=a,r.pop(),e._byClipCacheIndex=null,delete t.actionByRoot[(e._localRoot||this._root).uuid],0===r.length&&delete i[n],this._removeInactiveBindingsForAction(e)}},{key:\"_removeInactiveBindingsForAction\",value:function(e){for(var t=e._propertyBindings,i=0,n=t.length;i!==n;++i){var r=t[i];0==--r.referenceCount&&this._removeInactiveBinding(r)}}},{key:\"_lendAction\",value:function(e){var t=this._actions,i=e._cacheIndex,n=this._nActiveActions++,r=t[n];t[e._cacheIndex=n]=e,t[r._cacheIndex=i]=r}},{key:\"_takeBackAction\",value:function(e){var t=this._actions,i=e._cacheIndex,n=--this._nActiveActions,r=t[n];t[e._cacheIndex=n]=e,t[r._cacheIndex=i]=r}},{key:\"_addInactiveBinding\",value:function(e,t,i){var n=this._bindingsByRootAndName,r=this._bindings,a=n[t];void 0===a&&(n[t]=a={}),(a[i]=e)._cacheIndex=r.length,r.push(e)}},{key:\"_removeInactiveBinding\",value:function(e){var t=this._bindings,i=e.binding,n=i.rootNode.uuid,i=i.path,r=this._bindingsByRootAndName,a=r[n],s=t[t.length-1],e=e._cacheIndex;t[s._cacheIndex=e]=s,t.pop(),delete a[i],0===Object.keys(a).length&&delete r[n]}},{key:\"_lendBinding\",value:function(e){var t=this._bindings,i=e._cacheIndex,n=this._nActiveBindings++,r=t[n];t[e._cacheIndex=n]=e,t[r._cacheIndex=i]=r}},{key:\"_takeBackBinding\",value:function(e){var t=this._bindings,i=e._cacheIndex,n=--this._nActiveBindings,r=t[n];t[e._cacheIndex=n]=e,t[r._cacheIndex=i]=r}},{key:\"_lendControlInterpolant\",value:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,i=e[t];return void 0===i&&(e[(i=new df(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t]=i),i}},{key:\"_takeBackControlInterpolant\",value:function(e){var t=this._controlInterpolants,i=e.__cacheIndex,n=--this._nActiveControlInterpolants,r=t[n];t[e.__cacheIndex=n]=e,t[r.__cacheIndex=i]=r}},{key:\"clipAction\",value:function(e,t,i){var n=t||this._root,r=n.uuid,n=\"string\"==typeof e?zf.findByName(n,e):e,e=null!==n?n.uuid:e,a=this._actionsByClip[e],s=null;if(void 0===i&&(i=null!==n?n.blendMode:2500),void 0!==a){var o=a.actionByRoot[r];if(void 0!==o&&o.blendMode===i)return o;s=a.knownActions[0],null===n&&(n=s._clip)}if(null===n)return null;o=new Sg(this,n,t,i);return this._bindAction(o,s),this._addInactiveAction(o,e,r),o}},{key:\"existingAction\",value:function(e,t){var t=t||this._root,i=t.uuid,t=\"string\"==typeof e?zf.findByName(t,e):e,t=t?t.uuid:e,e=this._actionsByClip[t];return void 0!==e&&e.actionByRoot[i]||null}},{key:\"stopAllAction\",value:function(){for(var e=this._actions,t=this._nActiveActions-1;0<=t;--t)e[t].stop();return this}},{key:\"update\",value:function(e){e*=this.timeScale;for(var t=this._actions,i=this._nActiveActions,n=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1,s=0;s!==i;++s)t[s]._update(n,e,r,a);for(var o=this._bindings,l=this._nActiveBindings,h=0;h!==l;++h)o[h].apply(a);return this}},{key:\"setTime\",value:function(e){for(var t=this.time=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}},{key:\"getRoot\",value:function(){return this._root}},{key:\"uncacheClip\",value:function(e){var t=this._actions,e=e.uuid,i=this._actionsByClip,n=i[e];if(void 0!==n){for(var r=n.knownActions,a=0,s=r.length;a!==s;++a){var o=r[a],l=(this._deactivateAction(o),o._cacheIndex),h=t[t.length-1];o._cacheIndex=null,o._byClipCacheIndex=null,t[h._cacheIndex=l]=h,t.pop(),this._removeInactiveBindingsForAction(o)}delete i[e]}}},{key:\"uncacheRoot\",value:function(e){var t,i=e.uuid,n=this._actionsByClip;for(t in n){var r=n[t].actionByRoot[i];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var a=this._bindingsByRootAndName[i];if(void 0!==a)for(var s in a){s=a[s];s.restoreOriginalState(),this._removeInactiveBinding(s)}}},{key:\"uncacheAction\",value:function(e,t){e=this.existingAction(e,t);null!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}}]),Eg);function Eg(e){var t;return(0,oy.default)(this,Eg),(t=wg.call(this))._root=e,t._initMemoryManager(),t._accuIndex=0,t.time=0,t.timeScale=1,t}function Tg(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:t.blendMode;(0,oy.default)(this,Tg),this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=n;for(var r=t.tracks,a=r.length,s=new Array(a),o={endingStart:Lt,endingEnd:Lt},l=0;l!==a;++l){var h=r[l].createInterpolant(null);(s[l]=h).settings=o}this._interpolantSettings=o,this._interpolants=s,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}ug.prototype._controlInterpolantsResultBuffer=new Float32Array(1);(0,ly.default)(Rg,[{key:\"clone\",value:function(){return new Rg(void 0===this.value.clone?this.value:this.value.clone())}}]);var Ag,cg=Rg,hg=((0,ay.default)(kg,fh),Ag=hy(kg),(0,ly.default)(kg,[{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(kg.prototype),\"copy\",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:\"clone\",value:function(e){e=(0,ny.default)((0,sy.default)(kg.prototype),\"clone\",this).call(this,e);return e.meshPerAttribute=this.meshPerAttribute,e}},{key:\"toJSON\",value:function(e){e=(0,ny.default)((0,sy.default)(kg.prototype),\"toJSON\",this).call(this,e);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}]),kg);function kg(e,t){var i,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return(0,oy.default)(this,kg),(i=Ag.call(this,e,t)).meshPerAttribute=n,i}function Rg(e){(0,oy.default)(this,Rg),\"string\"==typeof e&&(console.warn(\"THREE.Uniform: Type parameter is no longer needed.\"),e=arguments[1]),this.value=e}hg.prototype.isInstancedInterleavedBuffer=!0;(0,ly.default)(Cg,[{key:\"needsUpdate\",set:function(e){!0===e&&this.version++}},{key:\"setBuffer\",value:function(e){return this.buffer=e,this}},{key:\"setType\",value:function(e,t){return this.type=e,this.elementSize=t,this}},{key:\"setItemSize\",value:function(e){return this.itemSize=e,this}},{key:\"setCount\",value:function(e){return this.count=e,this}}]);var Lg=Cg;function Cg(e,t,i,n,r){(0,oy.default)(this,Cg),this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=n,this.count=r,this.version=0}Lg.prototype.isGLBufferAttribute=!0;(0,ly.default)(Dg,[{key:\"set\",value:function(e,t){this.ray.set(e,t)}},{key:\"setFromCamera\",value:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error(\"THREE.Raycaster: Unsupported camera type: \"+t.type)}},{key:\"intersectObject\",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];return Fg(e,this,i,t),i.sort(Ig),i}},{key:\"intersectObjects\",value:function(e){for(var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],n=0,r=e.length;n<r;n++)Fg(e[n],this,i,t);return i.sort(Ig),i}}]);var Pg=Dg;function Dg(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1/0;(0,oy.default)(this,Dg),this.ray=new tn(e,t),this.near=i,this.far=n,this.camera=null,this.layers=new yn,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}function Ig(e,t){return e.distance-t.distance}function Fg(e,t,i,n){if(e.layers.test(t.layers)&&e.raycast(t,i),!0===n)for(var r=e.children,a=0,s=r.length;a<s;a++)Fg(r[a],t,i,!0)}(0,ly.default)(Gg,[{key:\"set\",value:function(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}},{key:\"copy\",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:\"makeSafe\",value:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}},{key:\"setFromVector3\",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:\"setFromCartesianCoords\",value:function(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Vt(t/this.radius,-1,1))),this}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}}]);var Ng=Gg,Og=((0,ly.default)(Hg,[{key:\"set\",value:function(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}},{key:\"copy\",value:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}},{key:\"setFromVector3\",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:\"setFromCartesianCoords\",value:function(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}}]),Hg),Ug=new qe,Bg=((0,ly.default)(zg,[{key:\"set\",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:\"setFromPoints\",value:function(e){this.makeEmpty();for(var t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}},{key:\"setFromCenterAndSize\",value:function(e,t){t=Ug.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(t),this.max.copy(e).add(t),this}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}},{key:\"copy\",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:\"makeEmpty\",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:\"isEmpty\",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:\"getCenter\",value:function(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:\"getSize\",value:function(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:\"expandByPoint\",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:\"expandByVector\",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:\"expandByScalar\",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:\"containsPoint\",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}},{key:\"containsBox\",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}},{key:\"getParameter\",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}},{key:\"intersectsBox\",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}},{key:\"clampPoint\",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:\"distanceToPoint\",value:function(e){return Ug.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:\"intersect\",value:function(e){return this.min.max(e.min),this.max.min(e.max),this}},{key:\"union\",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:\"translate\",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:\"equals\",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),zg);function zg(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new qe(1/0,1/0),t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new qe(-1/0,-1/0);(0,oy.default)(this,zg),this.min=e,this.max=t}function Hg(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return(0,oy.default)(this,Hg),this.radius=e,this.theta=t,this.y=i,this}function Gg(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return(0,oy.default)(this,Gg),this.radius=e,this.phi=t,this.theta=i,this}Bg.prototype.isBox2=!0;var Vg,Wg,jg=new Ye,Xg=new Ye,qg=((0,ly.default)(i0,[{key:\"set\",value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:\"copy\",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:\"getCenter\",value:function(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:\"delta\",value:function(e){return e.subVectors(this.end,this.start)}},{key:\"distanceSq\",value:function(){return this.start.distanceToSquared(this.end)}},{key:\"distance\",value:function(){return this.start.distanceTo(this.end)}},{key:\"at\",value:function(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}},{key:\"closestPointToPointParameter\",value:function(e,t){jg.subVectors(e,this.start),Xg.subVectors(this.end,this.start);e=Xg.dot(Xg),e=Xg.dot(jg)/e;return e=t?Vt(e,0,1):e}},{key:\"closestPointToPoint\",value:function(e,t,i){e=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(e).add(this.start)}},{key:\"applyMatrix4\",value:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}},{key:\"equals\",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}}]),i0),Yg=new Ye,Jg=((0,ay.default)(t0,w),Wg=hy(t0),(0,ly.default)(t0,[{key:\"dispose\",value:function(){this.cone.geometry.dispose(),this.cone.material.dispose()}},{key:\"update\",value:function(){this.light.updateMatrixWorld();var e=this.light.distance||1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Yg.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Yg),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}]),t0),Zg=new Ye,Kg=new Re,Qg=new Re,$g=((0,ay.default)(e0,Pu),Vg=hy(e0),(0,ly.default)(e0,[{key:\"updateMatrixWorld\",value:function(e){var t=this.bones,i=this.geometry,n=i.getAttribute(\"position\");Qg.copy(this.root.matrixWorld).invert();for(var r=0,a=0;r<t.length;r++){var s=t[r];s.parent&&s.parent.isBone&&(Kg.multiplyMatrices(Qg,s.matrixWorld),Zg.setFromMatrixPosition(Kg),n.setXYZ(a,Zg.x,Zg.y,Zg.z),Kg.multiplyMatrices(Qg,s.parent.matrixWorld),Zg.setFromMatrixPosition(Kg),n.setXYZ(a+1,Zg.x,Zg.y,Zg.z),a+=2)}i.getAttribute(\"position\").needsUpdate=!0,(0,ny.default)((0,sy.default)(e0.prototype),\"updateMatrixWorld\",this).call(this,e)}}]),e0);function e0(e){(0,oy.default)(this,e0);for(var t=function e(t){var i=[];t&&t.isBone&&i.push(t);for(var n=0;n<t.children.length;n++)i.push.apply(i,e(t.children[n]));return i}(e),i=new R,n=[],r=[],a=new S(0,0,1),s=new S(0,1,0),o=0;o<t.length;o++){var l=t[o];l.parent&&l.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),r.push(a.r,a.g,a.b),r.push(s.r,s.g,s.b))}i.setAttribute(\"position\",new $(n,3)),i.setAttribute(\"color\",new $(r,3));var h=new _u({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return(i=Vg.call(this,i,h)).type=\"SkeletonHelper\",i.isSkeletonHelper=!0,i.root=e,i.bones=t,i.matrix=e.matrixWorld,i.matrixAutoUpdate=!1,i}function t0(e,t){var i;(0,oy.default)(this,t0),(i=Wg.call(this)).light=e,i.light.updateMatrixWorld(),i.matrix=e.matrixWorld,i.matrixAutoUpdate=!1,i.color=t;for(var e=new R,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,a=1;r<32;r++,a++){var s=r/32*Math.PI*2,o=a/32*Math.PI*2;n.push(Math.cos(s),Math.sin(s),1,Math.cos(o),Math.sin(o),1)}e.setAttribute(\"position\",new $(n,3));t=new _u({fog:!1,toneMapped:!1});return i.cone=new Pu(e,t),i.add(i.cone),i.update(),i}function i0(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ye,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ye;(0,oy.default)(this,i0),this.start=e,this.end=t}(0,ay.default)(k0,da),l0=hy(k0),(0,ly.default)(k0,[{key:\"dispose\",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:\"update\",value:function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}]);var n0,r0,a0,s0,o0,l0,h0=k0,u0=new Ye,c0=new S,d0=new S,p0=((0,ay.default)(A0,w),o0=hy(A0),(0,ly.default)(A0,[{key:\"dispose\",value:function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}},{key:\"update\",value:function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute(\"color\");c0.copy(this.light.color),d0.copy(this.light.groundColor);for(var i=0,n=t.count;i<n;i++){var r=i<n/2?c0:d0;t.setXYZ(i,r.r,r.g,r.b)}t.needsUpdate=!0}e.lookAt(u0.setFromMatrixPosition(this.light.matrixWorld).negate())}}]),A0),f0=((0,ay.default)(T0,Pu),s0=hy(T0),(0,ly.default)(T0)),m0=((0,ay.default)(E0,Pu),a0=hy(E0),(0,ly.default)(E0)),v0=new Ye,g0=new Ye,y0=new Ye,_0=((0,ay.default)(S0,w),r0=hy(S0),(0,ly.default)(S0,[{key:\"dispose\",value:function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}},{key:\"update\",value:function(){v0.setFromMatrixPosition(this.light.matrixWorld),g0.setFromMatrixPosition(this.light.target.matrixWorld),y0.subVectors(g0,v0),this.lightPlane.lookAt(g0),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(g0),this.targetLine.scale.z=y0.length()}}]),S0),x0=new Ye,b0=new Ea,M0=((0,ay.default)(w0,Pu),n0=hy(w0),(0,ly.default)(w0,[{key:\"update\",value:function(){var e=this.geometry,t=this.pointMap;b0.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),R0(\"c\",t,e,b0,0,0,-1),R0(\"t\",t,e,b0,0,0,1),R0(\"n1\",t,e,b0,-1,-1,-1),R0(\"n2\",t,e,b0,1,-1,-1),R0(\"n3\",t,e,b0,-1,1,-1),R0(\"n4\",t,e,b0,1,1,-1),R0(\"f1\",t,e,b0,-1,-1,1),R0(\"f2\",t,e,b0,1,-1,1),R0(\"f3\",t,e,b0,-1,1,1),R0(\"f4\",t,e,b0,1,1,1),R0(\"u1\",t,e,b0,.7,1.1,-1),R0(\"u2\",t,e,b0,-.7,1.1,-1),R0(\"u3\",t,e,b0,0,2,-1),R0(\"cf1\",t,e,b0,-1,0,1),R0(\"cf2\",t,e,b0,1,0,1),R0(\"cf3\",t,e,b0,0,-1,1),R0(\"cf4\",t,e,b0,0,1,1),R0(\"cn1\",t,e,b0,-1,0,-1),R0(\"cn2\",t,e,b0,1,0,-1),R0(\"cn3\",t,e,b0,0,-1,-1),R0(\"cn4\",t,e,b0,0,1,-1),e.getAttribute(\"position\").needsUpdate=!0}},{key:\"dispose\",value:function(){this.geometry.dispose(),this.material.dispose()}}]),w0);function w0(e){(0,oy.default)(this,w0);var t=new R,u=new _u({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],n=[],r={},a=new S(16755200),s=new S(16711680),o=new S(43775),c=new S(16777215),l=new S(3355443);function h(e,t,i){d(e,i),d(t,i)}function d(e,t){i.push(0,0,0),n.push(t.r,t.g,t.b),void 0===r[e]&&(r[e]=[]),r[e].push(i.length/3-1)}return h(\"n1\",\"n2\",a),h(\"n2\",\"n4\",a),h(\"n4\",\"n3\",a),h(\"n3\",\"n1\",a),h(\"f1\",\"f2\",a),h(\"f2\",\"f4\",a),h(\"f4\",\"f3\",a),h(\"f3\",\"f1\",a),h(\"n1\",\"f1\",a),h(\"n2\",\"f2\",a),h(\"n3\",\"f3\",a),h(\"n4\",\"f4\",a),h(\"p\",\"n1\",s),h(\"p\",\"n2\",s),h(\"p\",\"n3\",s),h(\"p\",\"n4\",s),h(\"u1\",\"u2\",o),h(\"u2\",\"u3\",o),h(\"u3\",\"u1\",o),h(\"c\",\"t\",c),h(\"p\",\"c\",l),h(\"cn1\",\"cn2\",l),h(\"cn3\",\"cn4\",l),h(\"cf1\",\"cf2\",l),h(\"cf3\",\"cf4\",l),t.setAttribute(\"position\",new $(i,3)),t.setAttribute(\"color\",new $(n,3)),(a=n0.call(this,t,u)).type=\"CameraHelper\",a.camera=e,a.camera.updateProjectionMatrix&&a.camera.updateProjectionMatrix(),a.matrix=e.matrixWorld,a.matrixAutoUpdate=!1,a.pointMap=r,a.update(),a}function S0(e,t,i){(0,oy.default)(this,S0),(n=r0.call(this)).light=e,n.light.updateMatrixWorld(),n.matrix=e.matrixWorld,n.matrixAutoUpdate=!1,n.color=i,void 0===t&&(t=1);var n,e=new R,i=(e.setAttribute(\"position\",new $([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3)),new _u({fog:!1,toneMapped:!1}));return n.lightPlane=new Au(e,i),n.add(n.lightPlane),(e=new R).setAttribute(\"position\",new $([0,0,0,0,0,1],3)),n.targetLine=new Au(e,i),n.add(n.targetLine),n.update(),n}function E0(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10,h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:16,u=2<arguments.length&&void 0!==arguments[2]?arguments[2]:8,c=3<arguments.length&&void 0!==arguments[3]?arguments[3]:64,d=4<arguments.length&&void 0!==arguments[4]?arguments[4]:4473924,p=5<arguments.length&&void 0!==arguments[5]?arguments[5]:8947848;(0,oy.default)(this,E0);for(var d=new S(d),p=new S(p),t=[],i=[],n=0;n<=h;n++){var f=n/h*(2*Math.PI),r=Math.sin(f)*e,f=Math.cos(f)*e,r=(t.push(0,0,0),t.push(r,0,f),1&n?d:p);i.push(r.r,r.g,r.b),i.push(r.r,r.g,r.b)}for(var a=0;a<=u;a++)for(var s=1&a?d:p,m=e-e/u*a,v=0;v<c;v++){var o=v/c*(2*Math.PI),g=Math.sin(o)*m,y=Math.cos(o)*m;t.push(g,0,y),i.push(s.r,s.g,s.b),o=(v+1)/c*(2*Math.PI),g=Math.sin(o)*m,y=Math.cos(o)*m,t.push(g,0,y),i.push(s.r,s.g,s.b)}var l=new R,_=(l.setAttribute(\"position\",new $(t,3)),l.setAttribute(\"color\",new $(i,3)),new _u({vertexColors:!0,toneMapped:!1}));return(l=a0.call(this,l,_)).type=\"PolarGridHelper\",l}function T0(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10,h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:4473924,u=3<arguments.length&&void 0!==arguments[3]?arguments[3]:8947848;(0,oy.default)(this,T0);for(var h=new S(h),u=new S(u),c=t/2,d=e/t,i=e/2,n=[],r=[],a=0,s=0,o=-i;a<=t;a++,o+=d){n.push(-i,0,o,i,0,o),n.push(o,0,-i,o,0,i);var l=a===c?h:u;l.toArray(r,s),s+=3,l.toArray(r,s),s+=3,l.toArray(r,s),s+=3,l.toArray(r,s),s+=3}var e=new R,p=(e.setAttribute(\"position\",new $(n,3)),e.setAttribute(\"color\",new $(r,3)),new _u({vertexColors:!0,toneMapped:!1}));return(e=s0.call(this,e,p)).type=\"GridHelper\",e}function A0(e,t,i){(0,oy.default)(this,A0),(n=o0.call(this)).light=e,n.light.updateMatrixWorld(),n.matrix=e.matrixWorld,n.matrixAutoUpdate=!1,n.color=i;var n,e=new ip(t),i=(e.rotateY(.5*Math.PI),n.material=new rr({wireframe:!0,fog:!1,toneMapped:!1}),void 0===n.color&&(n.material.vertexColors=!0),e.getAttribute(\"position\")),t=new Float32Array(3*i.count);return e.setAttribute(\"color\",new lr(t,3)),n.add(new da(e,n.material)),n.update(),n}function k0(e,t,i){(0,oy.default)(this,k0);var t=new vp(t,4,2),n=new rr({wireframe:!0,fog:!1,toneMapped:!1});return(t=l0.call(this,t,n)).light=e,t.light.updateMatrixWorld(),t.color=i,t.type=\"PointLightHelper\",t.matrix=t.light.matrixWorld,t.matrixAutoUpdate=!1,t.update(),t}function R0(e,t,i,n,r,a,s){x0.set(r,a,s).unproject(n);var o=t[e];if(void 0!==o)for(var l=i.getAttribute(\"position\"),h=0,u=o.length;h<u;h++)l.setXYZ(o[h],x0.x,x0.y,x0.z)}var L0,C0,P0,D0,I0,F0,N0,O0=new Ai,U0=((0,ay.default)(ey,Pu),N0=hy(ey),(0,ly.default)(ey,[{key:\"update\",value:function(e){var t,i,n;void 0!==e&&console.warn(\"THREE.BoxHelper: .update() has no longer arguments.\"),void 0!==this.object&&O0.setFromObject(this.object),O0.isEmpty()||(e=O0.min,t=O0.max,(n=(i=this.geometry.attributes.position).array)[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=e.x,n[4]=t.y,n[5]=t.z,n[6]=e.x,n[7]=e.y,n[8]=t.z,n[9]=t.x,n[10]=e.y,n[11]=t.z,n[12]=t.x,n[13]=t.y,n[14]=e.z,n[15]=e.x,n[16]=t.y,n[17]=e.z,n[18]=e.x,n[19]=e.y,n[20]=e.z,n[21]=t.x,n[22]=e.y,n[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere())}},{key:\"setFromObject\",value:function(e){return this.object=e,this.update(),this}},{key:\"copy\",value:function(e){return Pu.prototype.copy.call(this,e),this.object=e.object,this}}]),ey),B0=((0,ay.default)($0,Pu),F0=hy($0),(0,ly.default)($0,[{key:\"updateMatrixWorld\",value:function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),(0,ny.default)((0,sy.default)($0.prototype),\"updateMatrixWorld\",this).call(this,e))}}]),$0),z0=((0,ay.default)(Q0,Au),I0=hy(Q0),(0,ly.default)(Q0,[{key:\"updateMatrixWorld\",value:function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?Pe:Ce,this.lookAt(this.plane.normal),(0,ny.default)((0,sy.default)(Q0.prototype),\"updateMatrixWorld\",this).call(this,e)}}]),Q0),H0=new Ye,G0=((0,ay.default)(K0,w),D0=hy(K0),(0,ly.default)(K0,[{key:\"setDirection\",value:function(e){.99999<e.y?this.quaternion.set(0,0,0,1):e.y<-.99999?this.quaternion.set(1,0,0,0):(H0.set(e.z,0,-e.x).normalize(),e=Math.acos(e.y),this.quaternion.setFromAxisAngle(H0,e))}},{key:\"setLength\",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:.2*e,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}},{key:\"setColor\",value:function(e){this.line.material.color.set(e),this.cone.material.color.set(e)}},{key:\"copy\",value:function(e){return(0,ny.default)((0,sy.default)(K0.prototype),\"copy\",this).call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}]),K0),V0=((0,ay.default)(Z0,Pu),P0=hy(Z0),(0,ly.default)(Z0,[{key:\"setColors\",value:function(e,t,i){var n=new S,r=this.geometry.attributes.color.array;return n.set(e),n.toArray(r,0),n.toArray(r,3),n.set(t),n.toArray(r,6),n.toArray(r,9),n.set(i),n.toArray(r,12),n.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}},{key:\"dispose\",value:function(){this.geometry.dispose(),this.material.dispose()}}]),Z0),W0=((0,ly.default)(J0,[{key:\"moveTo\",value:function(e,t){return this.currentPath=new xd,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}},{key:\"lineTo\",value:function(e,t){return this.currentPath.lineTo(e,t),this}},{key:\"quadraticCurveTo\",value:function(e,t,i,n){return this.currentPath.quadraticCurveTo(e,t,i,n),this}},{key:\"bezierCurveTo\",value:function(e,t,i,n,r,a){return this.currentPath.bezierCurveTo(e,t,i,n,r,a),this}},{key:\"splineThru\",value:function(e){return this.currentPath.splineThru(e),this}},{key:\"toShapes\",value:function(u,c){function d(e){for(var t=[],i=0,n=e.length;i<n;i++){var r=e[i],a=new bd;a.curves=r.curves,t.push(a)}return t}var e,t,i,p=Hd.isClockWise,n=this.subPaths;if(0===n.length)return[];if(!0===c)return d(n);var r=[];if(1===n.length)return t=n[0],(i=new bd).curves=t.curves,r.push(i),r;var f,m,v=!p(n[0].getPoints()),v=u?!v:v,g=[],a=[],s=[],o=0;a[o]=void 0,s[o]=[];for(var y=0,_=n.length;y<_;y++)e=p(f=(t=n[y]).getPoints()),(e=u?!e:e)?(!v&&a[o]&&o++,a[o]={s:new bd,p:f},a[o].s.curves=t.curves,v&&o++,s[o]=[]):s[o].push({h:t,p:f[0]});if(!a[0])return d(n);if(1<a.length){for(var x=!1,b=[],M=0,w=a.length;M<w;M++)g[M]=[];for(var l=0,S=a.length;l<S;l++)for(var E=s[l],T=0;T<E.length;T++){for(var A=E[T],k=!0,h=0;h<a.length;h++)!function(e,t){for(var i=t.length,n=!1,r=i-1,a=0;a<i;r=a++){var s=t[r],o=t[a],l=o.x-s.x,h=o.y-s.y;if(Math.abs(h)>Number.EPSILON){if(h<0&&(s=t[a],l=-l,o=t[r],h=-h),!(e.y<s.y||e.y>o.y))if(e.y===s.y){if(e.x===s.x)return 1}else{h=h*(e.x-s.x)-l*(e.y-s.y);if(0==h)return 1;h<0||(n=!n)}}else if(e.y===s.y&&(o.x<=e.x&&e.x<=s.x||s.x<=e.x&&e.x<=o.x))return 1}return n}(A.p,a[h].p)||(l!==h&&b.push({froms:l,tos:h,hole:T}),k?(k=!1,g[h].push(A)):x=!0);k&&g[l].push(A)}0<b.length&&(x||(s=g))}for(var R=0,L=a.length;R<L;R++){i=a[R].s,r.push(i);for(var C=0,P=(m=s[R]).length;C<P;C++)i.holes.push(m[C].h)}return r}}]),J0),j0=new Float32Array(1),X0=new Int32Array(j0.buffer),q0=((0,ly.default)(Y0,null,[{key:\"toHalfFloat\",value:function(e){65504<e&&(console.warn(\"THREE.DataUtils.toHalfFloat(): value exceeds 65504.\"),e=65504),j0[0]=e;var e=X0[0],t=e>>16&32768,i=e>>12&2047,n=e>>23&255;return n<103?t:142<n?(t|=31744)|((255==n?0:1)&&8388607&e):n<113?t|((i|=2048)>>114-n)+(i>>113-n&1):(t|=n-112<<10|i>>1)+(1&i)}}]),Y0);function Y0(){(0,oy.default)(this,Y0)}function J0(){(0,oy.default)(this,J0),this.type=\"ShapePath\",this.color=new S,this.subPaths=[],this.currentPath=null}function Z0(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=((0,oy.default)(this,Z0),[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e]),t=new R,e=(t.setAttribute(\"position\",new $(e,3)),t.setAttribute(\"color\",new $([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),new _u({vertexColors:!0,toneMapped:!1}));return(t=P0.call(this,t,e)).type=\"AxesHelper\",t}function K0(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ye(0,0,1),i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ye(0,0,0),n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:16776960,a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:.2*n,s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:.2*a;return(0,oy.default)(this,K0),(e=D0.call(this)).type=\"ArrowHelper\",void 0===L0&&((L0=new R).setAttribute(\"position\",new $([0,0,0,0,1,0],3)),(C0=new fc(0,.5,1,5,1)).translate(0,-.5,0)),e.position.copy(i),e.line=new Au(L0,new _u({color:r,toneMapped:!1})),e.line.matrixAutoUpdate=!1,e.add(e.line),e.cone=new da(C0,new rr({color:r,toneMapped:!1})),e.cone.matrixAutoUpdate=!1,e.add(e.cone),e.setDirection(t),e.setLength(n,a,s),e}function Q0(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:16776960,n=((0,oy.default)(this,Q0),new R),t=(n.setAttribute(\"position\",new $([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),n.computeBoundingSphere(),(n=I0.call(this,n,new _u({color:i,toneMapped:!1}))).type=\"PlaneHelper\",n.plane=e,n.size=t,new R);return t.setAttribute(\"position\",new $([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),t.computeBoundingSphere(),n.add(new da(t,new rr({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1}))),n}function $0(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:16776960,i=((0,oy.default)(this,$0),new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7])),n=new R;return n.setIndex(new lr(i,1)),n.setAttribute(\"position\",new $([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),(i=F0.call(this,n,new _u({color:t,toneMapped:!1}))).box=e,i.type=\"Box3Helper\",i.geometry.computeBoundingSphere(),i}function ey(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:16776960,i=((0,oy.default)(this,ey),new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7])),n=new Float32Array(24),r=new R;return r.setIndex(new lr(i,1)),r.setAttribute(\"position\",new lr(n,3)),(i=N0.call(this,r,new _u({color:t,toneMapped:!1}))).object=e,i.type=\"BoxHelper\",i.matrixAutoUpdate=!1,i.update(),i}wc.create=function(e,t){return console.log(\"THREE.Curve.create() has been deprecated\"),e.prototype=Object.create(wc.prototype),(e.prototype.constructor=e).prototype.getPoint=t,e},xd.prototype.fromPoints=function(e){return console.warn(\"THREE.Path: .fromPoints() has been renamed to .setFromPoints().\"),this.setFromPoints(e)},f0.prototype.setColors=function(){console.error(\"THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.\")},$g.prototype.update=function(){console.error(\"THREE.SkeletonHelper: update() no longer needs to be called.\")},$f.prototype.extractUrlBase=function(e){return console.warn(\"THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.\"),ov.extractUrlBase(e)},$f.Handlers={add:function(){console.error(\"THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.\")},get:function(){console.error(\"THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.\")}},Bg.prototype.center=function(e){return console.warn(\"THREE.Box2: .center() has been renamed to .getCenter().\"),this.getCenter(e)},Bg.prototype.empty=function(){return console.warn(\"THREE.Box2: .empty() has been renamed to .isEmpty().\"),this.isEmpty()},Bg.prototype.isIntersectionBox=function(e){return console.warn(\"THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().\"),this.intersectsBox(e)},Bg.prototype.size=function(e){return console.warn(\"THREE.Box2: .size() has been renamed to .getSize().\"),this.getSize(e)},Ai.prototype.center=function(e){return console.warn(\"THREE.Box3: .center() has been renamed to .getCenter().\"),this.getCenter(e)},Ai.prototype.empty=function(){return console.warn(\"THREE.Box3: .empty() has been renamed to .isEmpty().\"),this.isEmpty()},Ai.prototype.isIntersectionBox=function(e){return console.warn(\"THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().\"),this.intersectsBox(e)},Ai.prototype.isIntersectionSphere=function(e){return console.warn(\"THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().\"),this.intersectsSphere(e)},Ai.prototype.size=function(e){return console.warn(\"THREE.Box3: .size() has been renamed to .getSize().\"),this.getSize(e)},qi.prototype.empty=function(){return console.warn(\"THREE.Sphere: .empty() has been renamed to .isEmpty().\"),this.isEmpty()},Xa.prototype.setFromMatrix=function(e){return console.warn(\"THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix().\"),this.setFromProjectionMatrix(e)},qg.prototype.center=function(e){return console.warn(\"THREE.Line3: .center() has been renamed to .getCenter().\"),this.getCenter(e)},Kt.prototype.flattenToArrayOffset=function(e,t){return console.warn(\"THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\"),this.toArray(e,t)},Kt.prototype.multiplyVector3=function(e){return console.warn(\"THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.\"),e.applyMatrix3(this)},Kt.prototype.multiplyVector3Array=function(){console.error(\"THREE.Matrix3: .multiplyVector3Array() has been removed.\")},Kt.prototype.applyToBufferAttribute=function(e){return console.warn(\"THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead.\"),e.applyMatrix3(this)},Kt.prototype.applyToVector3Array=function(){console.error(\"THREE.Matrix3: .applyToVector3Array() has been removed.\")},Kt.prototype.getInverse=function(e){return console.warn(\"THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead.\"),this.copy(e).invert()},Re.prototype.extractPosition=function(e){return console.warn(\"THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().\"),this.copyPosition(e)},Re.prototype.flattenToArrayOffset=function(e,t){return console.warn(\"THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\"),this.toArray(e,t)},Re.prototype.getPosition=function(){return console.warn(\"THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.\"),(new Ye).setFromMatrixColumn(this,3)},Re.prototype.setRotationFromQuaternion=function(e){return console.warn(\"THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().\"),this.makeRotationFromQuaternion(e)},Re.prototype.multiplyToArray=function(){console.warn(\"THREE.Matrix4: .multiplyToArray() has been removed.\")},Re.prototype.multiplyVector3=function(e){return console.warn(\"THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.\"),e.applyMatrix4(this)},Re.prototype.multiplyVector4=function(e){return console.warn(\"THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.\"),e.applyMatrix4(this)},Re.prototype.multiplyVector3Array=function(){console.error(\"THREE.Matrix4: .multiplyVector3Array() has been removed.\")},Re.prototype.rotateAxis=function(e){console.warn(\"THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.\"),e.transformDirection(this)},Re.prototype.crossVector=function(e){return console.warn(\"THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.\"),e.applyMatrix4(this)},Re.prototype.translate=function(){console.error(\"THREE.Matrix4: .translate() has been removed.\")},Re.prototype.rotateX=function(){console.error(\"THREE.Matrix4: .rotateX() has been removed.\")},Re.prototype.rotateY=function(){console.error(\"THREE.Matrix4: .rotateY() has been removed.\")},Re.prototype.rotateZ=function(){console.error(\"THREE.Matrix4: .rotateZ() has been removed.\")},Re.prototype.rotateByAxis=function(){console.error(\"THREE.Matrix4: .rotateByAxis() has been removed.\")},Re.prototype.applyToBufferAttribute=function(e){return console.warn(\"THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead.\"),e.applyMatrix4(this)},Re.prototype.applyToVector3Array=function(){console.error(\"THREE.Matrix4: .applyToVector3Array() has been removed.\")},Re.prototype.makeFrustum=function(e,t,i,n,r,a){return console.warn(\"THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.\"),this.makePerspective(e,t,n,i,r,a)},Re.prototype.getInverse=function(e){return console.warn(\"THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead.\"),this.copy(e).invert()},Ga.prototype.isIntersectionLine=function(e){return console.warn(\"THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().\"),this.intersectsLine(e)},Mi.prototype.multiplyVector3=function(e){return console.warn(\"THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.\"),e.applyQuaternion(this)},Mi.prototype.inverse=function(){return console.warn(\"THREE.Quaternion: .inverse() has been renamed to invert().\"),this.invert()},tn.prototype.isIntersectionBox=function(e){return console.warn(\"THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().\"),this.intersectsBox(e)},tn.prototype.isIntersectionPlane=function(e){return console.warn(\"THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().\"),this.intersectsPlane(e)},tn.prototype.isIntersectionSphere=function(e){return console.warn(\"THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().\"),this.intersectsSphere(e)},jn.prototype.area=function(){return console.warn(\"THREE.Triangle: .area() has been renamed to .getArea().\"),this.getArea()},jn.prototype.barycoordFromPoint=function(e,t){return console.warn(\"THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().\"),this.getBarycoord(e,t)},jn.prototype.midpoint=function(e){return console.warn(\"THREE.Triangle: .midpoint() has been renamed to .getMidpoint().\"),this.getMidpoint(e)},jn.prototypenormal=function(e){return console.warn(\"THREE.Triangle: .normal() has been renamed to .getNormal().\"),this.getNormal(e)},jn.prototype.plane=function(e){return console.warn(\"THREE.Triangle: .plane() has been renamed to .getPlane().\"),this.getPlane(e)},jn.barycoordFromPoint=function(e,t,i,n,r){return console.warn(\"THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().\"),jn.getBarycoord(e,t,i,n,r)},jn.normal=function(e,t,i,n){return console.warn(\"THREE.Triangle: .normal() has been renamed to .getNormal().\"),jn.getNormal(e,t,i,n)},bd.prototype.extractAllPoints=function(e){return console.warn(\"THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.\"),this.extractPoints(e)},bd.prototype.extrude=function(e){return console.warn(\"THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.\"),new Xd(this,e)},bd.prototype.makeGeometry=function(e){return console.warn(\"THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.\"),new rp(this,e)},qe.prototype.fromAttribute=function(e,t,i){return console.warn(\"THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().\"),this.fromBufferAttribute(e,t,i)},qe.prototype.distanceToManhattan=function(e){return console.warn(\"THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().\"),this.manhattanDistanceTo(e)},qe.prototype.lengthManhattan=function(){return console.warn(\"THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().\"),this.manhattanLength()},Ye.prototype.setEulerFromRotationMatrix=function(){console.error(\"THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.\")},Ye.prototype.setEulerFromQuaternion=function(){console.error(\"THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.\")},Ye.prototype.getPositionFromMatrix=function(e){return console.warn(\"THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().\"),this.setFromMatrixPosition(e)},Ye.prototype.getScaleFromMatrix=function(e){return console.warn(\"THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().\"),this.setFromMatrixScale(e)},Ye.prototype.getColumnFromMatrix=function(e,t){return console.warn(\"THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().\"),this.setFromMatrixColumn(t,e)},Ye.prototype.applyProjection=function(e){return console.warn(\"THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.\"),this.applyMatrix4(e)},Ye.prototype.fromAttribute=function(e,t,i){return console.warn(\"THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().\"),this.fromBufferAttribute(e,t,i)},Ye.prototype.distanceToManhattan=function(e){return console.warn(\"THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().\"),this.manhattanDistanceTo(e)},Ye.prototype.lengthManhattan=function(){return console.warn(\"THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().\"),this.manhattanLength()},ci.prototype.fromAttribute=function(e,t,i){return console.warn(\"THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().\"),this.fromBufferAttribute(e,t,i)},ci.prototype.lengthManhattan=function(){return console.warn(\"THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().\"),this.manhattanLength()},w.prototype.getChildByName=function(e){return console.warn(\"THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().\"),this.getObjectByName(e)},w.prototype.renderDepth=function(){console.warn(\"THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.\")},w.prototype.translate=function(e,t){return console.warn(\"THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.\"),this.translateOnAxis(t,e)},w.prototype.getWorldRotation=function(){console.error(\"THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.\")},w.prototype.applyMatrix=function(e){return console.warn(\"THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4().\"),this.applyMatrix4(e)},Object.defineProperties(w.prototype,{eulerOrder:{get:function(){return console.warn(\"THREE.Object3D: .eulerOrder is now .rotation.order.\"),this.rotation.order},set:function(e){console.warn(\"THREE.Object3D: .eulerOrder is now .rotation.order.\"),this.rotation.order=e}},useQuaternion:{get:function(){console.warn(\"THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.\")},set:function(){console.warn(\"THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.\")}}}),da.prototype.setDrawMode=function(){console.error(\"THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.\")},Object.defineProperties(da.prototype,{drawMode:{get:function(){return console.error(\"THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode.\"),0},set:function(){console.error(\"THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.\")}}}),Jh.prototype.initBones=function(){console.error(\"THREE.SkinnedMesh: initBones() has been removed.\")},ka.prototype.setLens=function(e,t){console.warn(\"THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.\"),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(lm.prototype,{onlyShadow:{set:function(){console.warn(\"THREE.Light: .onlyShadow has been removed.\")}},shadowCameraFov:{set:function(e){console.warn(\"THREE.Light: .shadowCameraFov is now .shadow.camera.fov.\"),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn(\"THREE.Light: .shadowCameraLeft is now .shadow.camera.left.\"),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn(\"THREE.Light: .shadowCameraRight is now .shadow.camera.right.\"),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn(\"THREE.Light: .shadowCameraTop is now .shadow.camera.top.\"),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn(\"THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.\"),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn(\"THREE.Light: .shadowCameraNear is now .shadow.camera.near.\"),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn(\"THREE.Light: .shadowCameraFar is now .shadow.camera.far.\"),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn(\"THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.\")}},shadowBias:{set:function(e){console.warn(\"THREE.Light: .shadowBias is now .shadow.bias.\"),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn(\"THREE.Light: .shadowDarkness has been removed.\")}},shadowMapWidth:{set:function(e){console.warn(\"THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.\"),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn(\"THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.\"),this.shadow.mapSize.height=e}}}),Object.defineProperties(lr.prototype,{length:{get:function(){return console.warn(\"THREE.BufferAttribute: .length has been deprecated. Use .count instead.\"),this.array.length}},dynamic:{get:function(){return console.warn(\"THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.\"),this.usage===i},set:function(){console.warn(\"THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.\"),this.setUsage(i)}}}),lr.prototype.setDynamic=function(e){return console.warn(\"THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead.\"),this.setUsage(!0===e?i:n),this},lr.prototype.copyIndicesArray=function(){console.error(\"THREE.BufferAttribute: .copyIndicesArray() has been removed.\")},lr.prototype.setArray=function(){console.error(\"THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers\")},R.prototype.addIndex=function(e){console.warn(\"THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().\"),this.setIndex(e)},R.prototype.addAttribute=function(e,t){return console.warn(\"THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute().\"),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?\"index\"===e?(console.warn(\"THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.\"),this.setIndex(t),this):this.setAttribute(e,t):(console.warn(\"THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).\"),this.setAttribute(e,new lr(t,arguments[2])))},R.prototype.addDrawCall=function(e,t,i){void 0!==i&&console.warn(\"THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.\"),console.warn(\"THREE.BufferGeometry: .addDrawCall() is now .addGroup().\"),this.addGroup(e,t)},R.prototype.clearDrawCalls=function(){console.warn(\"THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().\"),this.clearGroups()},R.prototype.computeOffsets=function(){console.warn(\"THREE.BufferGeometry: .computeOffsets() has been removed.\")},R.prototype.removeAttribute=function(e){return console.warn(\"THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute().\"),this.deleteAttribute(e)},R.prototype.applyMatrix=function(e){return console.warn(\"THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4().\"),this.applyMatrix4(e)},Object.defineProperties(R.prototype,{drawcalls:{get:function(){return console.error(\"THREE.BufferGeometry: .drawcalls has been renamed to .groups.\"),this.groups}},offsets:{get:function(){return console.warn(\"THREE.BufferGeometry: .offsets has been renamed to .groups.\"),this.groups}}}),fh.prototype.setDynamic=function(e){return console.warn(\"THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead.\"),this.setUsage(!0===e?i:n),this},fh.prototype.setArray=function(){console.error(\"THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers\")},Xd.prototype.getArrays=function(){console.error(\"THREE.ExtrudeGeometry: .getArrays() has been removed.\")},Xd.prototype.addShapeList=function(){console.error(\"THREE.ExtrudeGeometry: .addShapeList() has been removed.\")},Xd.prototype.addShape=function(){console.error(\"THREE.ExtrudeGeometry: .addShape() has been removed.\")},dh.prototype.dispose=function(){console.error(\"THREE.Scene: .dispose() has been removed.\")},cg.prototype.onUpdate=function(){return console.warn(\"THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.\"),this},Object.defineProperties(qn.prototype,{wrapAround:{get:function(){console.warn(\"THREE.Material: .wrapAround has been removed.\")},set:function(){console.warn(\"THREE.Material: .wrapAround has been removed.\")}},overdraw:{get:function(){console.warn(\"THREE.Material: .overdraw has been removed.\")},set:function(){console.warn(\"THREE.Material: .overdraw has been removed.\")}},wrapRGB:{get:function(){return console.warn(\"THREE.Material: .wrapRGB has been removed.\"),new S}},shading:{get:function(){console.error(\"THREE.\"+this.type+\": .shading has been removed. Use the boolean .flatShading instead.\")},set:function(e){console.warn(\"THREE.\"+this.type+\": .shading has been removed. Use the boolean .flatShading instead.\"),this.flatShading=1===e}},stencilMask:{get:function(){return console.warn(\"THREE.\"+this.type+\": .stencilMask has been removed. Use .stencilFuncMask instead.\"),this.stencilFuncMask},set:function(e){console.warn(\"THREE.\"+this.type+\": .stencilMask has been removed. Use .stencilFuncMask instead.\"),this.stencilFuncMask=e}},vertexTangents:{get:function(){console.warn(\"THREE.\"+this.type+\": .vertexTangents has been removed.\")},set:function(){console.warn(\"THREE.\"+this.type+\": .vertexTangents has been removed.\")}}}),Object.defineProperties(Ma.prototype,{derivatives:{get:function(){return console.warn(\"THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.\"),this.extensions.derivatives},set:function(e){console.warn(\"THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.\"),this.extensions.derivatives=e}}}),rh.prototype.clearTarget=function(e,t,i,n){console.warn(\"THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead.\"),this.setRenderTarget(e),this.clear(t,i,n)},rh.prototype.animate=function(e){console.warn(\"THREE.WebGLRenderer: .animate() is now .setAnimationLoop().\"),this.setAnimationLoop(e)},rh.prototype.getCurrentRenderTarget=function(){return console.warn(\"THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().\"),this.getRenderTarget()},rh.prototype.getMaxAnisotropy=function(){return console.warn(\"THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().\"),this.capabilities.getMaxAnisotropy()},rh.prototype.getPrecision=function(){return console.warn(\"THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.\"),this.capabilities.precision},rh.prototype.resetGLState=function(){return console.warn(\"THREE.WebGLRenderer: .resetGLState() is now .state.reset().\"),this.state.reset()},rh.prototype.supportsFloatTextures=function(){return console.warn(\"THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).\"),this.extensions.get(\"OES_texture_float\")},rh.prototype.supportsHalfFloatTextures=function(){return console.warn(\"THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).\"),this.extensions.get(\"OES_texture_half_float\")},rh.prototype.supportsStandardDerivatives=function(){return console.warn(\"THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).\"),this.extensions.get(\"OES_standard_derivatives\")},rh.prototype.supportsCompressedTextureS3TC=function(){return console.warn(\"THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).\"),this.extensions.get(\"WEBGL_compressed_texture_s3tc\")},rh.prototype.supportsCompressedTexturePVRTC=function(){return console.warn(\"THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).\"),this.extensions.get(\"WEBGL_compressed_texture_pvrtc\")},rh.prototype.supportsBlendMinMax=function(){return console.warn(\"THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).\"),this.extensions.get(\"EXT_blend_minmax\")},rh.prototype.supportsVertexTextures=function(){return console.warn(\"THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.\"),this.capabilities.vertexTextures},rh.prototype.supportsInstancedArrays=function(){return console.warn(\"THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).\"),this.extensions.get(\"ANGLE_instanced_arrays\")},rh.prototype.enableScissorTest=function(e){console.warn(\"THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().\"),this.setScissorTest(e)},rh.prototype.initMaterial=function(){console.warn(\"THREE.WebGLRenderer: .initMaterial() has been removed.\")},rh.prototype.addPrePlugin=function(){console.warn(\"THREE.WebGLRenderer: .addPrePlugin() has been removed.\")},rh.prototype.addPostPlugin=function(){console.warn(\"THREE.WebGLRenderer: .addPostPlugin() has been removed.\")},rh.prototype.updateShadowMap=function(){console.warn(\"THREE.WebGLRenderer: .updateShadowMap() has been removed.\")},rh.prototype.setFaceCulling=function(){console.warn(\"THREE.WebGLRenderer: .setFaceCulling() has been removed.\")},rh.prototype.allocTextureUnit=function(){console.warn(\"THREE.WebGLRenderer: .allocTextureUnit() has been removed.\")},rh.prototype.setTexture=function(){console.warn(\"THREE.WebGLRenderer: .setTexture() has been removed.\")},rh.prototype.setTexture2D=function(){console.warn(\"THREE.WebGLRenderer: .setTexture2D() has been removed.\")},rh.prototype.setTextureCube=function(){console.warn(\"THREE.WebGLRenderer: .setTextureCube() has been removed.\")},rh.prototype.getActiveMipMapLevel=function(){return console.warn(\"THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel().\"),this.getActiveMipmapLevel()},Object.defineProperties(rh.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn(\"THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.\"),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn(\"THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.\"),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn(\"THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.\")},set:function(){console.warn(\"THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.\")}},context:{get:function(){return console.warn(\"THREE.WebGLRenderer: .context has been removed. Use .getContext() instead.\"),this.getContext()}},vr:{get:function(){return console.warn(\"THREE.WebGLRenderer: .vr has been renamed to .xr\"),this.xr}},gammaInput:{get:function(){return console.warn(\"THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.\"),!1},set:function(){console.warn(\"THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.\")}},gammaOutput:{get:function(){return console.warn(\"THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.\"),!1},set:function(e){console.warn(\"THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.\"),this.outputEncoding=!0===e?Pt:Ct}},toneMappingWhitePoint:{get:function(){return console.warn(\"THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.\"),1},set:function(){console.warn(\"THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.\")}},gammaFactor:{get:function(){return console.warn(\"THREE.WebGLRenderer: .gammaFactor has been removed.\"),2},set:function(){console.warn(\"THREE.WebGLRenderer: .gammaFactor has been removed.\")}}}),Object.defineProperties(Ul.prototype,{cullFace:{get:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.\")},set:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.\")}},renderReverseSided:{get:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.\")},set:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.\")}},renderSingleSided:{get:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.\")},set:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.\")}}}),Object.defineProperties(fi.prototype,{wrapS:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.\"),this.texture.wrapS},set:function(e){console.warn(\"THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.\"),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.\"),this.texture.wrapT},set:function(e){console.warn(\"THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.\"),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.\"),this.texture.magFilter},set:function(e){console.warn(\"THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.\"),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.\"),this.texture.minFilter},set:function(e){console.warn(\"THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.\"),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.\"),this.texture.anisotropy},set:function(e){console.warn(\"THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.\"),this.texture.anisotropy=e}},offset:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .offset is now .texture.offset.\"),this.texture.offset},set:function(e){console.warn(\"THREE.WebGLRenderTarget: .offset is now .texture.offset.\"),this.texture.offset=e}},repeat:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .repeat is now .texture.repeat.\"),this.texture.repeat},set:function(e){console.warn(\"THREE.WebGLRenderTarget: .repeat is now .texture.repeat.\"),this.texture.repeat=e}},format:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .format is now .texture.format.\"),this.texture.format},set:function(e){console.warn(\"THREE.WebGLRenderTarget: .format is now .texture.format.\"),this.texture.format=e}},type:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .type is now .texture.type.\"),this.texture.type},set:function(e){console.warn(\"THREE.WebGLRenderTarget: .type is now .texture.type.\"),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.\"),this.texture.generateMipmaps},set:function(e){console.warn(\"THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.\"),this.texture.generateMipmaps=e}}}),$v.prototype.load=function(e){console.warn(\"THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.\");var t=this;return(new Lv).load(e,function(e){t.setBuffer(e)}),this},ag.prototype.getData=function(){return console.warn(\"THREE.AudioAnalyser: .getData() is now .getFrequencyData().\"),this.getFrequencyData()},Pa.prototype.updateCubeMap=function(e,t){return console.warn(\"THREE.CubeCamera: .updateCubeMap() is now .update().\"),this.update(e,t)},Pa.prototype.clear=function(e,t,i,n){return console.warn(\"THREE.CubeCamera: .clear() is now .renderTarget.clear().\"),this.renderTarget.clear(e,t,i,n)},ai.crossOrigin=void 0,ai.loadTexture=function(e,t,i,n){console.warn(\"THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.\");var r=new om,r=(r.setCrossOrigin(this.crossOrigin),r.load(e,i,void 0,n));return t&&(r.mapping=t),r},ai.loadTextureCube=function(e,t,i,n){console.warn(\"THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.\");var r=new am,r=(r.setCrossOrigin(this.crossOrigin),r.load(e,i,void 0,n));return t&&(r.mapping=t),r},ai.loadCompressedTexture=function(){console.error(\"THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.\")},ai.loadCompressedTextureCube=function(){console.error(\"THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.\")};var ty={createMultiMaterialObject:function(){console.error(\"THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js\")},detach:function(){console.error(\"THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js\")},attach:function(){console.error(\"THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js\")}};\"undefined\"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(\"register\",{detail:{revision:Le}})),\"undefined\"!=typeof window&&(window.__THREE__?console.warn(\"WARNING: Multiple instances of Three.js being imported.\"):window.__THREE__=Le),e.ACESFilmicToneMapping=4,e.AddEquation=K,e.AddOperation=E,e.AdditiveAnimationBlendMode=2501,e.AdditiveBlending=q,e.AlphaFormat=p,e.AlwaysDepth=me,e.AlwaysStencilFunc=519,e.AmbientLight=Ym,e.AmbientLightProbe=Fv,e.AnimationClip=zf,e.AnimationLoader=im,e.AnimationMixer=ug,e.AnimationObjectGroup=lg,e.AnimationUtils=af,e.ArcCurve=Ic,e.ArrayCamera=Vl,e.ArrowHelper=G0,e.Audio=$v,e.AudioAnalyser=ag,e.AudioContext=Rv,e.AudioListener=Qv,e.AudioLoader=Lv,e.AxesHelper=V0,e.AxisHelper=function(e){return console.warn(\"THREE.AxisHelper has been renamed to THREE.AxesHelper.\"),new V0(e)},e.BackSide=Pe,e.BasicDepthPacking=3200,e.BasicShadowMap=0,e.BinaryTextureLoader=function(e){return console.warn(\"THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.\"),new sm(e)},e.Bone=$h,e.BooleanKeyframeTrack=xf,e.BoundingBoxHelper=function(e,t){return console.warn(\"THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.\"),new U0(e,t)},e.Box2=Bg,e.Box3=Ai,e.Box3Helper=B0,e.BoxBufferGeometry=va,e.BoxGeometry=va,e.BoxHelper=U0,e.BufferAttribute=lr,e.BufferGeometry=R,e.BufferGeometryLoader=_v,e.ByteType=a,e.Cache=Zf,e.Camera=Ea,e.CameraHelper=M0,e.CanvasRenderer=function(){console.error(\"THREE.CanvasRenderer has been removed\")},e.CanvasTexture=rc,e.CatmullRomCurve3=Gc,e.CineonToneMapping=3,e.CircleBufferGeometry=pc,e.CircleGeometry=pc,e.ClampToEdgeWrapping=Fe,e.Clock=Hv,e.Color=S,e.ColorKeyframeTrack=wf,e.CompressedTexture=tc,e.CompressedTextureLoader=nm,e.ConeBufferGeometry=mc,e.ConeGeometry=mc,e.CubeCamera=Pa,e.CubeReflectionMapping=T,e.CubeRefractionMapping=A,e.CubeTexture=Da,e.CubeTextureLoader=am,e.CubeUVReflectionMapping=D,e.CubeUVRefractionMapping=I,e.CubicBezierCurve=Yc,e.CubicBezierCurve3=Kc,e.CubicInterpolant=cf,e.CullFaceBack=V,e.CullFaceFront=W,e.CullFaceFrontBack=3,e.CullFaceNone=G,e.Curve=wc,e.CurvePath=_d,e.CustomBlending=Z,e.CustomToneMapping=5,e.CylinderBufferGeometry=fc,e.CylinderGeometry=fc,e.Cylindrical=Og,e.DataTexture=iu,e.DataTexture2DArray=Os,e.DataTexture3D=gs,e.DataTextureLoader=sm,e.DataUtils=q0,e.DecrementStencilOp=7683,e.DecrementWrapStencilOp=34056,e.DefaultLoadingManager=Qf,e.DepthFormat=je,e.DepthStencilFormat=Xe,e.DepthTexture=Kl,e.DirectionalLight=jm,e.DirectionalLightHelper=_0,e.DiscreteInterpolant=pf,e.DodecahedronBufferGeometry=gc,e.DodecahedronGeometry=gc,e.DoubleSide=De,e.DstAlphaFactor=he,e.DstColorFactor=ce,e.DynamicBufferAttribute=function(e,t){return console.warn(\"THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead.\"),new lr(e,t).setUsage(i)},e.DynamicCopyUsage=35050,e.DynamicDrawUsage=i,e.DynamicReadUsage=35049,e.EdgesGeometry=Mc,e.EdgesHelper=function(e,t){return console.warn(\"THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.\"),new Pu(new Mc(e.geometry),new _u({color:void 0!==t?t:16777215}))},e.EllipseCurve=Sc,e.EqualDepth=ye,e.EqualStencilFunc=514,e.EquirectangularReflectionMapping=l,e.EquirectangularRefractionMapping=h,e.Euler=mn,e.EventDispatcher=r,e.ExtrudeBufferGeometry=Xd,e.ExtrudeGeometry=Xd,e.FaceColors=1,e.FileLoader=tm,e.FlatShading=1,e.Float16BufferAttribute=Er,e.Float32Attribute=function(e,t){return console.warn(\"THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.\"),new $(e,t)},e.Float32BufferAttribute=$,e.Float64Attribute=function(e,t){return console.warn(\"THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.\"),new Or(e,t)},e.Float64BufferAttribute=Or,e.FloatType=ze,e.Fog=hh,e.FogExp2=oh,e.Font=function(){console.error(\"THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js\")},e.FontLoader=function(){console.error(\"THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js\")},e.FramebufferTexture=Qu,e.FrontSide=Ce,e.Frustum=Xa,e.GLBufferAttribute=Lg,e.GLSL1=\"100\",e.GLSL3=Ft,e.GreaterDepth=xe,e.GreaterEqualDepth=_e,e.GreaterEqualStencilFunc=518,e.GreaterStencilFunc=516,e.GridHelper=f0,e.Group=Xl,e.HalfFloatType=He,e.HemisphereLight=_m,e.HemisphereLightHelper=p0,e.HemisphereLightProbe=Cv,e.IcosahedronBufferGeometry=ep,e.IcosahedronGeometry=ep,e.ImageBitmapLoader=wv,e.ImageLoader=rm,e.ImageUtils=ai,e.ImmediateRenderObject=function(){console.error(\"THREE.ImmediateRenderObject has been removed.\")},e.IncrementStencilOp=7682,e.IncrementWrapStencilOp=34055,e.InstancedBufferAttribute=lu,e.InstancedBufferGeometry=lv,e.InstancedInterleavedBuffer=hg,e.InstancedMesh=vu,e.Int16Attribute=function(e,t){return console.warn(\"THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.\"),new br(e,t)},e.Int16BufferAttribute=br,e.Int32Attribute=function(e,t){return console.warn(\"THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.\"),new wr(e,t)},e.Int32BufferAttribute=wr,e.Int8Attribute=function(e,t){return console.warn(\"THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.\"),new yr(e,t)},e.Int8BufferAttribute=yr,e.IntType=o,e.InterleavedBuffer=fh,e.InterleavedBufferAttribute=gh,e.Interpolant=sf,e.InterpolateDiscrete=2300,e.InterpolateLinear=2301,e.InterpolateSmooth=2302,e.InvertStencilOp=5386,e.JSONLoader=function(){console.error(\"THREE.JSONLoader has been removed.\")},e.KeepStencilOp=7680,e.KeyframeTrack=ff,e.LOD=Vh,e.LatheBufferGeometry=tp,e.LatheGeometry=tp,e.Layers=yn,e.LensFlare=function(){console.error(\"THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js\")},e.LessDepth=ve,e.LessEqualDepth=ge,e.LessEqualStencilFunc=515,e.LessStencilFunc=513,e.Light=lm,e.LightProbe=iv,e.Line=Au,e.Line3=qg,e.LineBasicMaterial=_u,e.LineCurve=ed,e.LineCurve3=rd,e.LineDashedMaterial=tf,e.LineLoop=Fu,e.LinePieces=1,e.LineSegments=Pu,e.LineStrip=0,e.LinearEncoding=Ct,e.LinearFilter=Te,e.LinearInterpolant=df,e.LinearMipMapLinearFilter=1008,e.LinearMipMapNearestFilter=1007,e.LinearMipmapLinearFilter=Oe,e.LinearMipmapNearestFilter=Ae,e.LinearToneMapping=1,e.Loader=$f,e.LoaderUtils=ov,e.LoadingManager=Kf,e.LoopOnce=2200,e.LoopPingPong=2202,e.LoopRepeat=2201,e.LuminanceAlphaFormat=m,e.LuminanceFormat=f,e.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},e.Material=qn,e.MaterialLoader=sv,e.Math=Jt,e.MathUtils=Jt,e.Matrix3=Kt,e.Matrix4=Re,e.MaxEquation=ie,e.Mesh=da,e.MeshBasicMaterial=rr,e.MeshDepthMaterial=Cl,e.MeshDistanceMaterial=Il,e.MeshFaceMaterial=function(e){return console.warn(\"THREE.MeshFaceMaterial has been removed. Use an Array instead.\"),e},e.MeshLambertMaterial=Jp,e.MeshMatcapMaterial=Qp,e.MeshNormalMaterial=Xp,e.MeshPhongMaterial=zp,e.MeshPhysicalMaterial=Op,e.MeshStandardMaterial=Ip,e.MeshToonMaterial=Vp,e.MinEquation=te,e.MirroredRepeatWrapping=we,e.MixOperation=M,e.MultiMaterial=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return console.warn(\"THREE.MultiMaterial has been removed. Use an Array instead.\"),e.isMultiMaterial=!0,(e.materials=e).clone=function(){return e.slice()},e},e.MultiplyBlending=J,e.MultiplyOperation=b,e.NearestFilter=Ne,e.NearestMipMapLinearFilter=1005,e.NearestMipMapNearestFilter=1004,e.NearestMipmapLinearFilter=Ee,e.NearestMipmapNearestFilter=Se,e.NeverDepth=fe,e.NeverStencilFunc=512,e.NoBlending=j,e.NoColors=0,e.NoToneMapping=Ie,e.NormalAnimationBlendMode=2500,e.NormalBlending=X,e.NotEqualDepth=be,e.NotEqualStencilFunc=517,e.NumberKeyframeTrack=Tf,e.Object3D=w,e.ObjectLoader=Em,e.ObjectSpaceNormalMap=It,e.OctahedronBufferGeometry=ip,e.OctahedronGeometry=ip,e.OneFactor=re,e.OneMinusDstAlphaFactor=ue,e.OneMinusDstColorFactor=de,e.OneMinusSrcAlphaFactor=le,e.OneMinusSrcColorFactor=se,e.OrthographicCamera=os,e.PCFShadowMap=L,e.PCFSoftShadowMap=x,e.PMREMGenerator=Es,e.ParametricGeometry=function(){return console.error(\"THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js\"),new R},e.Particle=function(e){return console.warn(\"THREE.Particle has been renamed to THREE.Sprite.\"),new Nh(e)},e.ParticleBasicMaterial=function(e){return console.warn(\"THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.\"),new Uu(e)},e.ParticleSystem=function(e,t){return console.warn(\"THREE.ParticleSystem has been renamed to THREE.Points.\"),new ju(e,t)},e.ParticleSystemMaterial=function(e){return console.warn(\"THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.\"),new Uu(e)},e.Path=xd,e.PerspectiveCamera=ka,e.Plane=Ga,e.PlaneBufferGeometry=Ka,e.PlaneGeometry=Ka,e.PlaneHelper=z0,e.PointCloud=function(e,t){return console.warn(\"THREE.PointCloud has been renamed to THREE.Points.\"),new ju(e,t)},e.PointCloudMaterial=function(e){return console.warn(\"THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.\"),new Uu(e)},e.PointLight=Bm,e.PointLightHelper=h0,e.Points=ju,e.PointsMaterial=Uu,e.PolarGridHelper=m0,e.PolyhedronBufferGeometry=vc,e.PolyhedronGeometry=vc,e.PositionalAudio=rg,e.PropertyBinding=fg,e.PropertyMixer=sg,e.QuadraticBezierCurve=ad,e.QuadraticBezierCurve3=hd,e.Quaternion=Mi,e.QuaternionKeyframeTrack=Cf,e.QuaternionLinearInterpolant=Lf,e.REVISION=Le,e.RGBADepthPacking=t,e.RGBAFormat=We,e.RGBAIntegerFormat=N,e.RGBA_ASTC_10x10_Format=dt,e.RGBA_ASTC_10x5_Format=ht,e.RGBA_ASTC_10x6_Format=ut,e.RGBA_ASTC_10x8_Format=ct,e.RGBA_ASTC_12x10_Format=pt,e.RGBA_ASTC_12x12_Format=ft,e.RGBA_ASTC_4x4_Format=tt,e.RGBA_ASTC_5x4_Format=it,e.RGBA_ASTC_5x5_Format=nt,e.RGBA_ASTC_6x5_Format=rt,e.RGBA_ASTC_6x6_Format=at,e.RGBA_ASTC_8x5_Format=st,e.RGBA_ASTC_8x6_Format=ot,e.RGBA_ASTC_8x8_Format=lt,e.RGBA_BPTC_Format=mt,e.RGBA_ETC2_EAC_Format=et,e.RGBA_PVRTC_2BPPV1_Format=Ke,e.RGBA_PVRTC_4BPPV1_Format=Ze,e.RGBA_S3TC_DXT1_Format=U,e.RGBA_S3TC_DXT3_Format=B,e.RGBA_S3TC_DXT5_Format=z,e.RGBFormat=Ve,e.RGBIntegerFormat=F,e.RGB_ETC1_Format=Qe,e.RGB_ETC2_Format=$e,e.RGB_PVRTC_2BPPV1_Format=Je,e.RGB_PVRTC_4BPPV1_Format=H,e.RGB_S3TC_DXT1_Format=O,e.RGFormat=y,e.RGIntegerFormat=k,e.RawShaderMaterial=us,e.Ray=tn,e.Raycaster=Pg,e.RectAreaLight=Km,e.RedFormat=v,e.RedIntegerFormat=g,e.ReinhardToneMapping=2,e.RepeatWrapping=Me,e.ReplaceStencilOp=7681,e.ReverseSubtractEquation=ee,e.RingBufferGeometry=np,e.RingGeometry=np,e.SRGB8_ALPHA8_ASTC_10x10_Format=At,e.SRGB8_ALPHA8_ASTC_10x5_Format=St,e.SRGB8_ALPHA8_ASTC_10x6_Format=Et,e.SRGB8_ALPHA8_ASTC_10x8_Format=Tt,e.SRGB8_ALPHA8_ASTC_12x10_Format=kt,e.SRGB8_ALPHA8_ASTC_12x12_Format=Rt,e.SRGB8_ALPHA8_ASTC_4x4_Format=vt,e.SRGB8_ALPHA8_ASTC_5x4_Format=gt,e.SRGB8_ALPHA8_ASTC_5x5_Format=yt,e.SRGB8_ALPHA8_ASTC_6x5_Format=_t,e.SRGB8_ALPHA8_ASTC_6x6_Format=xt,e.SRGB8_ALPHA8_ASTC_8x5_Format=bt,e.SRGB8_ALPHA8_ASTC_8x6_Format=Mt,e.SRGB8_ALPHA8_ASTC_8x8_Format=wt,e.Scene=dh,e.SceneUtils=ty,e.ShaderChunk=_,e.ShaderLib=Qa,e.ShaderMaterial=Ma,e.ShadowMaterial=Cp,e.Shape=bd,e.ShapeBufferGeometry=rp,e.ShapeGeometry=rp,e.ShapePath=W0,e.ShapeUtils=Hd,e.ShortType=s,e.Skeleton=ou,e.SkeletonHelper=$g,e.SkinnedMesh=Jh,e.SmoothShading=2,e.Sphere=qi,e.SphereBufferGeometry=vp,e.SphereGeometry=vp,e.Spherical=Ng,e.SphericalHarmonics3=$m,e.SplineCurve=dd,e.SpotLight=Lm,e.SpotLightHelper=Jg,e.Sprite=Nh,e.SpriteMaterial=bh,e.SrcAlphaFactor=oe,e.SrcAlphaSaturateFactor=pe,e.SrcColorFactor=ae,e.StaticCopyUsage=35046,e.StaticDrawUsage=n,e.StaticReadUsage=35045,e.StereoCamera=zv,e.StreamCopyUsage=35042,e.StreamDrawUsage=35040,e.StreamReadUsage=35041,e.StringKeyframeTrack=Ff,e.SubtractEquation=Q,e.SubtractiveBlending=Y,e.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},e.TangentSpaceNormalMap=Dt,e.TetrahedronBufferGeometry=gp,e.TetrahedronGeometry=gp,e.TextGeometry=function(){return console.error(\"THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js\"),new R},e.Texture=oi,e.TextureLoader=om,e.TorusBufferGeometry=yp,e.TorusGeometry=yp,e.TorusKnotBufferGeometry=_p,e.TorusKnotGeometry=_p,e.Triangle=jn,e.TriangleFanDrawMode=2,e.TriangleStripDrawMode=1,e.TrianglesDrawMode=0,e.TubeBufferGeometry=xp,e.TubeGeometry=xp,e.UVMapping=300,e.Uint16Attribute=function(e,t){return console.warn(\"THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.\"),new Mr(e,t)},e.Uint16BufferAttribute=Mr,e.Uint32Attribute=function(e,t){return console.warn(\"THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.\"),new Sr(e,t)},e.Uint32BufferAttribute=Sr,e.Uint8Attribute=function(e,t){return console.warn(\"THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.\"),new _r(e,t)},e.Uint8BufferAttribute=_r,e.Uint8ClampedAttribute=function(e,t){return console.warn(\"THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.\"),new xr(e,t)},e.Uint8ClampedBufferAttribute=xr,e.Uniform=cg,e.UniformsLib=P,e.UniformsUtils=ba,e.UnsignedByteType=Ue,e.UnsignedInt248Type=Ge,e.UnsignedIntType=Be,e.UnsignedShort4444Type=u,e.UnsignedShort5551Type=c,e.UnsignedShort565Type=d,e.UnsignedShortType=ke,e.VSMShadowMap=C,e.Vector2=qe,e.Vector3=Ye,e.Vector4=ci,e.VectorKeyframeTrack=Uf,e.Vertex=function(e,t,i){return console.warn(\"THREE.Vertex has been removed. Use THREE.Vector3 instead.\"),new Ye(e,t,i)},e.VertexColors=2,e.VideoTexture=Ju,e.WebGL1Renderer=ws,e.WebGLCubeRenderTarget=Oa,e.WebGLMultipleRenderTargets=gi,e.WebGLMultisampleRenderTarget=xi,e.WebGLRenderTarget=fi,e.WebGLRenderTargetCube=function(e,t,i){return console.warn(\"THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options ).\"),new Oa(e,i)},e.WebGLRenderer=rh,e.WebGLUtils=Hl,e.WireframeGeometry=bp,e.WireframeHelper=function(e,t){return console.warn(\"THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.\"),new Pu(new bp(e.geometry),new _u({color:void 0!==t?t:16777215}))},e.WrapAroundEnding=2402,e.XHRLoader=function(e){return console.warn(\"THREE.XHRLoader has been renamed to THREE.FileLoader.\"),new tm(e)},e.ZeroCurvatureEnding=Lt,e.ZeroFactor=ne,e.ZeroSlopeEnding=2401,e.ZeroStencilOp=0,e.sRGBEncoding=Pt,Object.defineProperty(e,\"__esModule\",{value:!0})},\"object\"===((X=void 0)===J.exports?\"undefined\":(0,n.default)(J.exports))?i(J.exports):\"function\"==typeof define&&define.amd?define([\"exports\"],i):i((X=\"undefined\"!=typeof globalThis?globalThis:X||self).THREE={});var J=J.exports,N={},O=(Object.defineProperty(N,\"__esModule\",{value:!0}),N.OBJLoader=void 0,v(P)),n=v(D),i=v(R),U=v(L),B=v(f);function z(i){var n=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,B.default)(i);return e=n?(e=(0,B.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,U.default)(this,e)}}var Z=/^[og]\\s*(.+)?/,K=/^mtllib /,Q=/^usemtl /,$=/^usemap /,H=new J.Vector3,G=new J.Vector3,V=new J.Vector3,W=new J.Vector3,j=new J.Vector3;function ee(){var e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var i=this.object&&\"function\"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;this.object&&\"function\"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||\"\",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(e,t){var i=this._finalize(!1),e=(i&&(i.inherited||i.groupCount<=0)&&this.materials.splice(i.index,1),{index:this.materials.length,name:e||\"\",mtllib:Array.isArray(t)&&0<t.length?t[t.length-1]:\"\",smooth:(void 0!==i?i:this).smooth,groupStart:void 0!==i?i.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){e={index:\"number\"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return e.clone=this.clone.bind(e),e}});return this.materials.push(e),e},currentMaterial:function(){if(0<this.materials.length)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&1<this.materials.length)for(var i=this.materials.length-1;0<=i;i--)this.materials[i].groupCount<=0&&this.materials.splice(i,1);return e&&0===this.materials.length&&this.materials.push({name:\"\",smooth:this.smooth}),t}},i&&i.name&&\"function\"==typeof i.clone&&((e=i.clone(0)).inherited=!0,this.object.materials.push(e)),this.objects.push(this.object)},finalize:function(){this.object&&\"function\"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){e=parseInt(e,10);return 3*(0<=e?e-1:e+t/3)},parseNormalIndex:function(e,t){e=parseInt(e,10);return 3*(0<=e?e-1:e+t/3)},parseUVIndex:function(e,t){e=parseInt(e,10);return 2*(0<=e?e-1:e+t/2)},addVertex:function(e,t,i){var n=this.vertices,r=this.object.geometry.vertices;r.push(n[e+0],n[e+1],n[e+2]),r.push(n[t+0],n[t+1],n[t+2]),r.push(n[i+0],n[i+1],n[i+2])},addVertexPoint:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){var n=this.normals,r=this.object.geometry.normals;r.push(n[e+0],n[e+1],n[e+2]),r.push(n[t+0],n[t+1],n[t+2]),r.push(n[i+0],n[i+1],n[i+2])},addFaceNormal:function(e,t,i){var n=this.vertices,r=this.object.geometry.normals;H.fromArray(n,e),G.fromArray(n,t),V.fromArray(n,i),j.subVectors(V,G),W.subVectors(H,G),j.cross(W),j.normalize(),r.push(j.x,j.y,j.z),r.push(j.x,j.y,j.z),r.push(j.x,j.y,j.z)},addColor:function(e,t,i){var n=this.colors,r=this.object.geometry.colors;void 0!==n[e]&&r.push(n[e+0],n[e+1],n[e+2]),void 0!==n[t]&&r.push(n[t+0],n[t+1],n[t+2]),void 0!==n[i]&&r.push(n[i+0],n[i+1],n[i+2])},addUV:function(e,t,i){var n=this.uvs,r=this.object.geometry.uvs;r.push(n[e+0],n[e+1]),r.push(n[t+0],n[t+1]),r.push(n[i+0],n[i+1])},addDefaultUV:function(){var e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){var t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,i,n,r,a,s,o,l){var h=this.vertices.length,e=this.parseVertexIndex(e,h),t=this.parseVertexIndex(t,h),i=this.parseVertexIndex(i,h);this.addVertex(e,t,i),this.addColor(e,t,i),void 0!==s&&\"\"!==s?(h=this.normals.length,e=this.parseNormalIndex(s,h),t=this.parseNormalIndex(o,h),i=this.parseNormalIndex(l,h),this.addNormal(e,t,i)):this.addFaceNormal(e,t,i),void 0!==n&&\"\"!==n?(s=this.uvs.length,e=this.parseUVIndex(n,s),t=this.parseUVIndex(r,s),i=this.parseUVIndex(a,s),this.addUV(e,t,i),this.object.geometry.hasUVIndices=!0):this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type=\"Points\";for(var t=this.vertices.length,i=0,n=e.length;i<n;i++){var r=this.parseVertexIndex(e[i],t);this.addVertexPoint(r),this.addColor(r)}},addLineGeometry:function(e,t){this.object.geometry.type=\"Line\";for(var i=this.vertices.length,n=this.uvs.length,r=0,a=e.length;r<a;r++)this.addVertexLine(this.parseVertexIndex(e[r],i));for(var s=0,o=t.length;s<o;s++)this.addUVLine(this.parseUVIndex(t[s],n))}};return e.startObject(\"\",!1),e}X=J.Loader,(0,i.default)(Y,X),q=z(Y),(0,n.default)(Y,[{key:\"load\",value:function(t,i,e,n){var r=this,a=new J.FileLoader(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(e){try{i(r.parse(e))}catch(e){n?n(e):console.error(e),r.manager.itemError(t)}},e,n)}},{key:\"setMaterials\",value:function(e){return this.materials=e,this}},{key:\"parse\",value:function(e){for(var t=new ee,u=(e=-1!==(e=-1!==e.indexOf(\"\\r\\n\")?e.replace(/\\r\\n/g,\"\\n\"):e).indexOf(\"\\\\\\n\")?e.replace(/\\\\\\n/g,\"\"):e).split(\"\\n\"),i=\"\",n=\"\",c=[],d=\"function\"==typeof\"\".trimLeft,p=0,f=u.length;p<f;p++)if(i=u[p],0!==(i=d?i.trimLeft():i.trim()).length&&\"#\"!==(n=i.charAt(0)))if(\"v\"===n){var r=i.split(/\\s+/);switch(r[0]){case\"v\":t.vertices.push(parseFloat(r[1]),parseFloat(r[2]),parseFloat(r[3])),7<=r.length?t.colors.push(parseFloat(r[4]),parseFloat(r[5]),parseFloat(r[6])):t.colors.push(void 0,void 0,void 0);break;case\"vn\":t.normals.push(parseFloat(r[1]),parseFloat(r[2]),parseFloat(r[3]));break;case\"vt\":t.uvs.push(parseFloat(r[1]),parseFloat(r[2]))}}else if(\"f\"===n){for(var m=i.substr(1).trim().split(/\\s+/),a=[],v=0,g=m.length;v<g;v++){var y=m[v];0<y.length&&(y=y.split(\"/\"),a.push(y))}for(var _=a[0],x=1,b=a.length-1;x<b;x++){var M=a[x],w=a[x+1];t.addFace(_[0],M[0],w[0],_[1],M[1],w[1],_[2],M[2],w[2])}}else if(\"l\"===n){var S=i.substring(1).trim().split(\" \"),E=[],T=[];if(-1===i.indexOf(\"/\"))E=S;else for(var A=0,k=S.length;A<k;A++){var R=S[A].split(\"/\");\"\"!==R[0]&&E.push(R[0]),\"\"!==R[1]&&T.push(R[1])}t.addLineGeometry(E,T)}else if(\"p\"===n){var L=i.substr(1).trim().split(\" \");t.addPointGeometry(L)}else if(null!==(c=Z.exec(i))){L=(\" \"+c[0].substr(1).trim()).substr(1);t.startObject(L)}else if(Q.test(i))t.object.startMaterial(i.substring(7).trim(),t.materialLibraries);else if(K.test(i))t.materialLibraries.push(i.substring(7).trim());else if($.test(i))console.warn('THREE.OBJLoader: Rendering identifier \"usemap\" not supported. Textures must be defined in MTL files.');else if(\"s\"===n){1<(c=i.split(\" \")).length?(C=c[1].trim().toLowerCase(),t.object.smooth=\"0\"!==C&&\"off\"!==C):t.object.smooth=!0;var C=t.object.currentMaterial();C&&(C.smooth=t.object.smooth)}else{if(\"\\0\"===i)continue;console.warn('THREE.OBJLoader: Unexpected line: \"'+i+'\"')}t.finalize();var P,D=new J.Group;if(D.materialLibraries=[].concat(t.materialLibraries),!0==!(1===t.objects.length&&0===t.objects[0].geometry.vertices.length))for(var I=0,F=t.objects.length;I<F;I++){var N=t.objects[I],s=N.geometry,O=N.materials,U=\"Line\"===s.type,B=\"Points\"===s.type,z=!1;if(0!==s.vertices.length){var o=new J.BufferGeometry;o.setAttribute(\"position\",new J.Float32BufferAttribute(s.vertices,3)),0<s.normals.length&&o.setAttribute(\"normal\",new J.Float32BufferAttribute(s.normals,3)),0<s.colors.length&&(z=!0,o.setAttribute(\"color\",new J.Float32BufferAttribute(s.colors,3))),!0===s.hasUVIndices&&o.setAttribute(\"uv\",new J.Float32BufferAttribute(s.uvs,2));for(var H=[],G=0,V=O.length;G<V;G++){var l,W=O[G],j=W.name+\"_\"+W.smooth+\"_\"+z,h=t.materials[j];null!==this.materials&&(h=this.materials.create(W.name),!U||!h||h instanceof J.LineBasicMaterial?!B||!h||h instanceof J.PointsMaterial||(l=new J.PointsMaterial({size:10,sizeAttenuation:!1}),J.Material.prototype.copy.call(l,h),l.color.copy(h.color),l.map=h.map,h=l):(l=new J.LineBasicMaterial,J.Material.prototype.copy.call(l,h),l.color.copy(h.color),h=l)),void 0===h&&((h=U?new J.LineBasicMaterial:B?new J.PointsMaterial({size:1,sizeAttenuation:!1}):new J.MeshPhongMaterial).name=W.name,h.flatShading=!W.smooth,h.vertexColors=z,t.materials[j]=h),H.push(h)}s=void 0;if(1<H.length){for(var X=0,q=O.length;X<q;X++){var Y=O[X];o.addGroup(Y.groupStart,Y.groupCount,X)}s=new(U?J.LineSegments:B?J.Points:J.Mesh)(o,H)}else s=new(U?J.LineSegments:B?J.Points:J.Mesh)(o,H[0]);s.name=N.name,D.add(s)}}else 0<t.vertices.length&&(e=new J.PointsMaterial({size:1,sizeAttenuation:!1}),(P=new J.BufferGeometry).setAttribute(\"position\",new J.Float32BufferAttribute(t.vertices,3)),0<t.colors.length&&void 0!==t.colors[0]&&(P.setAttribute(\"color\",new J.Float32BufferAttribute(t.colors,3)),e.vertexColors=!0),P=new J.Points(P,e),D.add(P));return D}}]);var X,q,P=Y;function Y(e){return(0,O.default)(this,Y),(e=q.call(this,e)).materials=null,e}N.OBJLoader=P;var te,ie,ne=v(_),re=v(y),ae=v(x);function se(e){if(\"function\"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(se=function(e){return e?i:t})(e)}function oe(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||\"object\"!==(0,re.default)(e)&&\"function\"!=typeof e)return{default:e};t=se(t);if(t&&t.has(e))return t.get(e);var i,n,r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(i in e)\"default\"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&((n=a?Object.getOwnPropertyDescriptor(e,i):null)&&(n.get||n.set)?Object.defineProperty(r,i,n):r[i]=e[i]);return r.default=e,t&&t.set(e,r),r}window.onbeforeunload=function(){return window.scrollTo(0,0)};var le=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&(function(){he.apply(this,arguments)}(),le.disconnect())})});function he(){return(he=(0,ae.default)(ne.default.mark(function e(){var t,i,n;return ne.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(function(){return oe(a({}))});case 2:n=e.sent,t=n.loadWcydAnim,i=n.attachObserverToWcyd,n=n.endlessScroll,t(),i(),document.addEventListener(\"scroll\",n);case 9:case\"end\":return e.stop()}},e)}))).apply(this,arguments)}le.observe(document.querySelector(\"#wcyd-anim-trigger\"));var ue=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&(function(){ce.apply(this,arguments)}(),ue.disconnect())})});function ce(){return(ce=(0,ae.default)(ne.default.mark(function e(){var t,i,n;return ne.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(function(){return oe(r({}))});case 2:n=e.sent,t=n.createScene,i=n.loadModel,n=n.resize,t(),i(),window.addEventListener(\"resize\",n);case 9:case\"end\":return e.stop()}},e)}))).apply(this,arguments)}ue.observe(document.querySelector(\"#keyboard-trigger\")),document.addEventListener(\"DOMContentLoaded\",function(){headerAnim=(0,b.loadAnimation)({container:document.querySelector(\"#intro-anim\"),renderer:\"svg\",loop:!1,autoplay:!0,progressiveLoad:!0,path:\"/assets/json/index-header.json\"}),te=document.querySelector(\"header\"),ie=document.querySelector(\"#header-img\"),te.addEventListener(\"mouseenter\",function(e){var t=[\"/assets/img/img-2.webp\",\"/assets/img/img-3.webp\",\"/assets/img/img-4.webp\"],t=t[Math.floor(Math.random()*t.length)],t=(ie.src=t,ie.style.left=e.clientX+\"px\",ie.style.top=e.clientY+\"px\",-25*Math.random()+1+(25*Math.random()+1));ie.style.transform=\"rotate(\".concat(t,\"deg) translate(-50%)\"),ie.classList.remove(\"hidden\"),te.addEventListener(\"mouseleave\",function(){ie.classList.add(\"hidden\")}),te.addEventListener(\"mousemove\",function(e){ie.style.left=e.clientX+\"px\",ie.style.top=e.clientY+\"px\"})})})}();"],"file":"index.js"}